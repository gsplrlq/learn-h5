import{d as p,Z as m,G as _,r as f,E as h,$ as y,h as s,aw as v,_ as C,c as D,b as o,w,a as B,D as g,B as $,o as k,y as E}from"./index-B8NEWq2w.js";import{C as I}from"./index-K_nydJ99.js";import{a as b}from"./order-D7fLfgG6.js";const O=p({name:"ConfirmOrder",setup(){const t=m(),n=_(),r=f({}),c=async()=>{try{const e=t.params.courseId,a=await y(e);r.value=a}catch{s("获取课程详情失败")}},l=async()=>{try{const e=t.params.courseId,a=await v(e);a.price=a.amount,a.imgUrl=a.imageUrl,r.value=a}catch{s("获取套餐详情失败")}},i=async()=>{try{const e=await b({type:t.params.type,linkId:r.value.id});s("订单创建成功"),n.push(`/order/pay/${e.orderSn}`)}catch{s("订单创建失败")}};return h(()=>{const e=t.params.type;e==="1"&&c(),e==="2"&&l()}),{detail:r,onCreateOrder:i}}}),T={class:"confirm-order"},U={class:"p-4"};function A(t,n,r,c,l,i){const e=g,a=E,u=I,d=$;return k(),D("div",T,[o(e,{num:"1",price:t.detail.price,title:t.detail.title,thumb:t.detail.imgUrl},null,8,["price","title","thumb"]),o(u,{class:"mt-4"},{default:w(()=>[o(a,{title:"商品总金额",value:t.detail.price},null,8,["value"]),o(a,{title:"应付",value:t.detail.price},null,8,["value"])]),_:1}),B("div",U,[o(d,{class:"w-full",type:"primary",text:"提交订单",round:"",onClick:t.onCreateOrder},null,8,["onClick"])])])}const R=C(O,[["render",A]]);export{R as default};

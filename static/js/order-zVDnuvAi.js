import{_ as O,z as C,A as T,D as h,r as v,E as V,c as r,b as d,w as c,G as x,h as B,o as n,F as m,q as f,e as L,g as y,t as w,f as z,B as N}from"./index-DBa4oc2e.js";import{g as S,c as D}from"./order-BlyHjbkR.js";const E={components:{"van-tab":C,"van-tabs":T,"van-card":h},setup(){const p=x(),s=v(0),i=[{id:1,title:"全部",status:""},{id:2,title:"未支付",status:1},{id:3,title:"已完成",status:2},{id:4,title:"已关闭",status:3}],t=v([]),_=a=>{s.value=a.name,l(a.name)},l=a=>{S({page:{current:1,size:999},status:a}).then(o=>{t.value=o.records})};return V(()=>{l(i[0].status)}),{activeTab:s,tabList:i,orders:t,onTabClick:_,payOrder:a=>{p.push({name:"OrderPay",params:{orderSn:a}})},cancelOrderClick:a=>{D({orderSn:a}).then(()=>{B("取消成功"),l(i[0].status)})}}}},F={key:1},I={key:0,class:"no-orders"};function U(p,s,i,t,_,l){const u=N,k=h,a=C,b=T;return n(),r("div",null,[d(b,{modelValue:t.activeTab,"onUpdate:modelValue":s[0]||(s[0]=o=>t.activeTab=o),sticky:"","offset-top":"50",onClickTab:t.onTabClick},{default:c(()=>[(n(!0),r(m,null,f(t.tabList,o=>(n(),L(a,{key:o.id,title:o.title,name:o.status},{default:c(()=>[(n(!0),r(m,null,f(t.orders,e=>(n(),r("div",{key:e.id,class:"order-card"},[d(k,{thumb:e.productImageUrl,"thumb-width":"160","thumb-height":"90",title:`订单编号： ${e.orderSn}`,desc:`${e.productName} | 日期: ${e.createTime}`,price:e.amount,status:e.status},{footer:c(()=>[e.status==1?(n(),r(m,{key:0},[d(u,{type:"primary",size:"small",onClick:g=>t.payOrder(e.orderSn)},{default:c(()=>s[1]||(s[1]=[y(" 立即支付 ")])),_:2},1032,["onClick"]),d(u,{type:"info",size:"small",onClick:g=>t.cancelOrderClick(e.orderSn)},{default:c(()=>s[2]||(s[2]=[y(" 取消订单 ")])),_:2},1032,["onClick"])],64)):(n(),r("span",F,w(e.status==2?"已完成":"已关闭"),1))]),_:2},1032,["thumb","title","desc","price","status"])]))),128)),t.orders.length===0?(n(),r("div",I,"暂无订单")):z("",!0)]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue","onClickTab"])])}const G=O(E,[["render",U],["__scopeId","data-v-d7b87387"]]);export{G as default};

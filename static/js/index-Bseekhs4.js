import{d as N,r as t,o as d,c as k,a as g,b as m,w as i,e as b,f as _,u as v,g as w,t as V,s as U,h as I,i as L,B as T,_ as $}from"./index-Dvvcmwih.js";import{C as z}from"./index-D5d3LXmL.js";import{F as A}from"./index-CN8sgSFz.js";import{l as D}from"./favicon-CEyZaP4f.js";import{F as E}from"./index-Dsv4kPdj.js";const G={class:"container"},R={class:"m-6"},j=N({name:"Login",__name:"index",setup(H){const l=t(!1),s=t(!1),u=t(""),n=t(""),x=t("");let p=t(60),o=t(60),c=t(null);const B=async()=>{if(!c.value&&o.value===p.value){const r={option:l.value?1:2,phone:u.value,type:"client"};await U(r),I("发送成功"),c.value=setInterval(()=>{o.value--,o.value<=0&&(clearInterval(c.value),c.value=null,o.value=p.value)},1e3)}},S=r=>{const e={...r};l.value||(e.type=s.value?"smsCodeLogin":"pwdLogin"),L().login(e,l.value),console.log("submit",r)},y=()=>{u.value="",n.value=""};return(r,e)=>{const f=A,C=T,q=z,F=E;return d(),k("div",G,[e[6]||(e[6]=g("img",{class:"logo",src:D,alt:"",srcset:""},null,-1)),m(F,{onSubmit:S},{default:i(()=>[m(q,{inset:""},{default:i(()=>[m(f,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),!l.value&&!s.value?(d(),b(f,{key:0,modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),type:"password",name:"code",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])):_("",!0),l.value?(d(),b(f,{key:1,modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=a=>x.value=a),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])):_("",!0),l.value||s.value?(d(),b(f,{key:2,modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),clearable:"",name:"code",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:i(()=>[m(C,{size:"small",disabled:!u.value||v(o)!==v(p),onClick:B},{default:i(()=>[w(V(v(o)===v(p)?"获取验证码":v(o)+"s 重新发送"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])):_("",!0)]),_:1}),g("div",R,[m(C,{round:"",block:"",type:"danger","native-type":"submit"},{default:i(()=>[w(V(l.value?"注册":"登录"),1)]),_:1}),g("div",{class:"text-center text-xl text-current p-6",onClick:e[4]||(e[4]=a=>{l.value=!1,s.value=!s.value,y()})},V(s.value?"账号密码登录":"手机短信登录"),1),l.value?_("",!0):(d(),k("div",{key:0,class:"text-center text-large text-red-500 p-6",onClick:e[5]||(e[5]=a=>{l.value=!0,y()})}," 快速注册 "))])]),_:1})])}}}),Q=$(j,[["__scopeId","data-v-cb6fe266"]]);export{Q as default};

import{j as H,d as E,H as Z,I as M,b as a,J as ee,K as $,l as Q,M as te,N as j,O as ae,r as L,P as ne,k as O,Q as se,R as le,S as oe,U as A,m as ce,y as F,V as K,W as re,X as Y,Y as ie,Z as de,G as ue,E as _e,$ as pe,a0 as ve,a1 as fe,o as _,c as R,w as c,a as N,t as S,u as s,g as B,f as me,F as U,q as z,e as T,h as P,a2 as he,a3 as ge,D as xe,z as ye,A as ke,_ as be}from"./index-BbkF6vpJ.js";import{_ as Ce}from"./index-B5mZJDl1.js";import{Q as Te,N as Le,R as Se}from"./review-CxzI73AK.js";import{A as Ve,a as Ne}from"./index-Deq5ncN4.js";import"./index-Cq68dN5w.js";import"./index-DyaHMm8s.js";const[q,we]=H("collapse"),G=Symbol(q),Re={border:$,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Ie=E({name:q,props:Re,emits:["change","update:modelValue"],setup(r,{emit:m,slots:i}){const{linkChildren:e,children:h}=Z(G),d=t=>{m("change",t),m("update:modelValue",t)},v=(t,l)=>{const{accordion:o,modelValue:p}=r;d(o?t===p?"":t:l?p.concat(t):p.filter(b=>b!==t))},u=(t={})=>{if(r.accordion)return;typeof t=="boolean"&&(t={expanded:t});const{expanded:l,skipDisabled:o}=t,b=h.filter(f=>f.disabled&&o?f.expanded.value:l??!f.expanded.value).map(f=>f.itemName.value);d(b)},g=t=>{const{accordion:l,modelValue:o}=r;return l?o===t:o.includes(t)};return M({toggleAll:u}),e({toggle:v,isExpanded:g}),()=>{var t;return a("div",{class:[we(),{[ee]:r.border}]},[(t=i.default)==null?void 0:t.call(i)])}}});const Be=Q(Ie),[Pe,I]=H("collapse-item"),$e=["icon","title","value","label","right-icon"],Ee=te({},j,{name:ae,isLink:$,disabled:Boolean,readonly:Boolean,lazyRender:$});var De=E({name:Pe,props:Ee,setup(r,{slots:m}){const i=L(),e=L(),{parent:h,index:d}=ne(G);if(!h)return;const v=O(()=>{var n;return(n=r.name)!=null?n:d.value}),u=O(()=>h.isExpanded(v.value)),g=L(u.value),t=se(()=>g.value||!r.lazyRender),l=()=>{u.value?i.value&&(i.value.style.height=""):g.value=!1};le(u,(n,x)=>{if(x===null)return;n&&(g.value=!0),(n?Y:ie)(()=>{if(!e.value||!i.value)return;const{offsetHeight:y}=e.value;if(y){const w=`${y}px`;i.value.style.height=n?"0":w,oe(()=>{i.value&&(i.value.style.height=n?w:"0")})}else l()})});const o=(n=!u.value)=>{h.toggle(v.value,n)},p=()=>{!r.disabled&&!r.readonly&&o()},b=()=>{const{border:n,disabled:x,readonly:V}=r,y=A(r,Object.keys(j));return V&&(y.isLink=!1),(x||V)&&(y.clickable=!1),a(F,ce({role:"button",class:I("title",{disabled:x,expanded:u.value,borderless:!n}),"aria-expanded":String(u.value),onClick:p},y),A(m,$e))},f=t(()=>{var n;return K(a("div",{ref:i,class:I("wrapper"),onTransitionend:l},[a("div",{ref:e,class:I("content")},[(n=m.default)==null?void 0:n.call(m)])]),[[re,g.value]])});return M({toggle:o,expanded:u,itemName:v}),()=>a("div",{class:[I({border:d.value&&r.border})]},[b(),f()])}});const Oe=Q(De),Ae={class:"course"},Ue={class:"course-title"},ze={key:0,class:"teacher-info flex text-left mt-2"},He={class:"teacher-details"},Me={class:"m-2"},Qe=E({__name:"index",setup(r){const m=de(),i=ue();let e=L({id:1,title:"",courseDesc:"这是课程1的描述",imgUrl:"course-imgUrl-url",teacherInfo:{userName:"教师1",avatar:"teacher-avatar-url",education:""},durationStr:"2小时",studyCount:100,score:4.5,courseContent:"课程1的简介",courseType:1,bought:!1,videoId:1,hasStudy:!1,autoClass:0,classId:0});const h=L(0),d=L([]),v=L([{id:1,title:"第一章",chapterList:[{id:1,title:"第一节",videoId:1,durationStr:"10分钟",percent:50}]}]),u=()=>{P("支付功能暂未开放...")},g=()=>{if(e.value.autoClass===0&&!e.value.classId)return P("请联系管理员加入班级");if(!e.value.videoId)return P("暂无视频");i.push(`/video/${e.value.id}/${e.value.videoId}`)},t=l=>{(l.percent>95||e.value.hasStudy)&&i.push(`/video/${e.value.id}/${l.videoId}`)};return _e(async()=>{const l=m.params.id;e.value=await pe(l),v.value=await ve({courseId:l}),Y(()=>{d.value=v.value.map(o=>o.id)})}),(l,o)=>{const p=he,b=ge,f=xe,n=ye,x=Ce,V=F,y=Oe,w=Be,J=ke,D=Ve,W=Ne,X=fe("richText");return _(),R("div",Ae,[a(f,{thumb:s(e).imgUrl,title:s(e).title,desc:s(e).courseDesc,class:"course-info"},{title:c(()=>[N("div",Ue,S(s(e).title),1)]),tags:c(()=>[a(p,{plain:"",class:"mr-2"},{default:c(()=>[B("时长: "+S(s(e).durationStr),1)]),_:1}),a(p,{plain:"",class:"mr-2"},{default:c(()=>[B("人数: "+S(s(e).studyCount)+" 人",1)]),_:1}),a(p,{plain:""},{default:c(()=>[B("评分: "+S(s(e).score),1)]),_:1}),s(e).teacherInfo?(_(),R("div",ze,[a(b,{round:"",width:"40px",height:"40px",src:s(e).teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),N("div",He,[N("p",null,S(s(e).teacherInfo.userName),1),N("p",null,S(s(e).teacherInfo.education),1)])])):me("",!0)]),_:1},8,["thumb","title","desc"]),a(J,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=k=>h.value=k),class:"pb-12",sticky:""},{default:c(()=>[a(n,{title:"简介"},{default:c(()=>[K(N("div",Me,null,512),[[X,s(e).courseContent]])]),_:1}),a(n,{title:"章节"},{default:c(()=>[a(w,{ref:"collapse",modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=k=>d.value=k)},{default:c(()=>[(_(!0),R(U,null,z(v.value,k=>(_(),T(y,{key:k.id,title:k.title,name:k.id},{default:c(()=>[(_(!0),R(U,null,z(k.chapterList,C=>(_(),T(V,{key:C.id,title:C.title,label:`时长: ${C.durationStr}`,onClick:je=>t(C)},{"right-icon":c(()=>[C.percent>95?(_(),T(x,{key:0,icon:"mdi-check-circle",class:"text-lg text-green-500"})):C.percent>0&&C.percent<95?(_(),T(x,{key:1,icon:"mdi-progress-clock",class:"text-lg text-green-500"})):(_(),T(x,{key:2,icon:"mdi-circle-outline",class:"text-lg text-gray-500"}))]),_:2},1032,["title","label","onClick"]))),128))]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{title:"问答"},{default:c(()=>[a(Te,{course:s(e)},null,8,["course"])]),_:1}),a(n,{title:"笔记"},{default:c(()=>[a(Le,{course:s(e)},null,8,["course"])]),_:1}),a(n,{title:"评价"},{default:c(()=>[a(Se,{course:s(e)},null,8,["course"])]),_:1})]),_:1},8,["modelValue"]),a(W,null,{default:c(()=>[s(e).courseType===2&&!s(e).bought?(_(),T(D,{key:0,type:"danger",text:"立即购买",onClick:u})):(_(),T(D,{key:1,type:"danger",text:s(e).hasStudy?"继续学习":"开始学习",onClick:g},null,8,["text"]))]),_:1})])}}}),We=be(Qe,[["__scopeId","data-v-f499c00c"]]);export{We as default};

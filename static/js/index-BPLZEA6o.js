import{j as U,d as I,H as J,I as z,b as n,J as W,K as E,l as H,M as X,N as M,O as Z,r as C,P as ee,k as D,Q as te,R as ae,S as ne,U as $,m as se,y as Q,V as j,W as le,X as F,Y as oe,Z as re,G as ce,E as ie,$ as de,a0 as ue,a1 as _e,o as v,c as R,w as l,a as w,t as S,u as a,f as P,g as pe,F as O,q as A,e as k,a2 as ve,a3 as me,D as fe,z as he,A as ge,h as xe,_ as ye}from"./index-S-S_D9tT.js";import{_ as be}from"./index-CdDMfr8h.js";import{Q as ke,N as Ce,R as Te}from"./review-BkfYZFIz.js";import{A as Le,a as Se}from"./index-Ba1OsVpX.js";import"./index-D4kiMkjq.js";import"./index-BqAl6yRX.js";const[K,Ve]=U("collapse"),Y=Symbol(K),Ne={border:E,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var we=I({name:K,props:Ne,emits:["change","update:modelValue"],setup(o,{emit:g,slots:c}){const{linkChildren:t,children:x}=J(Y),i=e=>{g("change",e),g("update:modelValue",e)},f=(e,r)=>{const{accordion:u,modelValue:y}=o;i(u?e===y?"":e:r?y.concat(e):y.filter(_=>_!==e))},d=(e={})=>{if(o.accordion)return;typeof e=="boolean"&&(e={expanded:e});const{expanded:r,skipDisabled:u}=e,_=x.filter(p=>p.disabled&&u?p.expanded.value:r??!p.expanded.value).map(p=>p.itemName.value);i(_)},m=e=>{const{accordion:r,modelValue:u}=o;return r?u===e:u.includes(e)};return z({toggleAll:d}),t({toggle:f,isExpanded:m}),()=>{var e;return n("div",{class:[Ve(),{[W]:o.border}]},[(e=c.default)==null?void 0:e.call(c)])}}});const Re=H(we),[Be,B]=U("collapse-item"),Pe=["icon","title","value","label","right-icon"],Ee=X({},M,{name:Z,isLink:E,disabled:Boolean,readonly:Boolean,lazyRender:E});var Ie=I({name:Be,props:Ee,setup(o,{slots:g}){const c=C(),t=C(),{parent:x,index:i}=ee(Y);if(!x)return;const f=D(()=>{var s;return(s=o.name)!=null?s:i.value}),d=D(()=>x.isExpanded(f.value)),m=C(d.value),e=te(()=>m.value||!o.lazyRender),r=()=>{d.value?c.value&&(c.value.style.height=""):m.value=!1};ae(d,(s,T)=>{if(T===null)return;s&&(m.value=!0),(s?F:oe)(()=>{if(!t.value||!c.value)return;const{offsetHeight:b}=t.value;if(b){const N=`${b}px`;c.value.style.height=s?"0":N,ne(()=>{c.value&&(c.value.style.height=s?N:"0")})}else r()})});const u=(s=!d.value)=>{x.toggle(f.value,s)},y=()=>{!o.disabled&&!o.readonly&&u()},_=()=>{const{border:s,disabled:T,readonly:V}=o,b=$(o,Object.keys(M));return V&&(b.isLink=!1),(T||V)&&(b.clickable=!1),n(Q,se({role:"button",class:B("title",{disabled:T,expanded:d.value,borderless:!s}),"aria-expanded":String(d.value),onClick:y},b),$(g,Pe))},p=e(()=>{var s;return j(n("div",{ref:c,class:B("wrapper"),onTransitionend:r},[n("div",{ref:t,class:B("content")},[(s=g.default)==null?void 0:s.call(g)])]),[[le,m.value]])});return z({toggle:u,expanded:d,itemName:f}),()=>n("div",{class:[B({border:i.value&&o.border})]},[_(),p()])}});const De=H(Ie),$e={class:"course"},Oe={class:"course-title"},Ae={key:0,class:"teacher-info flex text-left mt-2"},Ue={class:"teacher-details"},ze={class:"m-2"},He=I({__name:"index",setup(o){const g=re(),c=ce();let t=C({id:1,title:"",courseDesc:"这是课程1的描述",imgUrl:"course-imgUrl-url",teacherInfo:{userName:"教师1",avatar:"teacher-avatar-url",education:""},durationStr:"2小时",studyCount:100,score:4.5,courseContent:"课程1的简介",courseType:1,bought:!1,videoId:1,hasStudy:!1});const x=C(0),i=C([]),f=C([{id:1,title:"第一章",chapterList:[{id:1,title:"第一节",videoId:1,durationStr:"10分钟",percent:50}]}]),d=()=>{xe("支付功能暂未开放...")};return ie(async()=>{const m=g.params.id;t.value=await de(m),f.value=await ue({courseId:m}),F(()=>{i.value=f.value.map(e=>e.id)})}),(m,e)=>{const r=ve,u=me,y=fe,_=he,p=be,s=Q,T=De,V=Re,b=ge,N=Le,q=Se,G=_e("richText");return v(),R("div",$e,[n(y,{thumb:a(t).imgUrl,title:a(t).title,desc:a(t).courseDesc,class:"course-info"},{title:l(()=>[w("div",Oe,S(a(t).title),1)]),tags:l(()=>[n(r,{plain:"",class:"mr-2"},{default:l(()=>[P("时长: "+S(a(t).durationStr),1)]),_:1}),n(r,{plain:"",class:"mr-2"},{default:l(()=>[P("人数: "+S(a(t).studyCount)+" 人",1)]),_:1}),n(r,{plain:""},{default:l(()=>[P("评分: "+S(a(t).score),1)]),_:1}),a(t).teacherInfo?(v(),R("div",Ae,[n(u,{round:"",width:"40px",height:"40px",src:a(t).teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),w("div",Ue,[w("p",null,S(a(t).teacherInfo.userName),1),w("p",null,S(a(t).teacherInfo.education),1)])])):pe("",!0)]),_:1},8,["thumb","title","desc"]),n(b,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=h=>x.value=h),class:"pb-12",sticky:""},{default:l(()=>[n(_,{title:"简介"},{default:l(()=>[j(w("div",ze,null,512),[[G,a(t).courseContent]])]),_:1}),n(_,{title:"章节"},{default:l(()=>[n(V,{ref:"collapse",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=h=>i.value=h)},{default:l(()=>[(v(!0),R(O,null,A(f.value,h=>(v(),k(T,{key:h.id,title:h.title,name:h.id},{default:l(()=>[(v(!0),R(O,null,A(h.chapterList,L=>(v(),k(s,{key:L.id,title:L.title,label:`时长: ${L.durationStr}`},{"right-icon":l(()=>[L.percent==100?(v(),k(p,{key:0,icon:"mdi-check-circle",class:"text-lg text-green-500"})):L.percent>0&&L.percent<100?(v(),k(p,{key:1,icon:"mdi-progress-clock",class:"text-lg text-green-500"})):(v(),k(p,{key:2,icon:"mdi-circle-outline",class:"text-lg text-gray-500"}))]),_:2},1032,["title","label"]))),128))]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(_,{title:"问答"},{default:l(()=>[n(ke,{course:a(t)},null,8,["course"])]),_:1}),n(_,{title:"笔记"},{default:l(()=>[n(Ce,{course:a(t)},null,8,["course"])]),_:1}),n(_,{title:"评价"},{default:l(()=>[n(Te,{course:a(t)},null,8,["course"])]),_:1})]),_:1},8,["modelValue"]),n(q,null,{default:l(()=>[a(t).courseType===2&&!a(t).bought?(v(),k(N,{key:0,type:"danger",text:"立即购买",onClick:d})):(v(),k(N,{key:1,type:"danger",text:a(t).hasStudy?"继续学习":"开始学习",onClick:e[2]||(e[2]=h=>a(c).push(`/video/${a(t).id}/${a(t).videoId}`))},null,8,["text"]))]),_:1})])}}}),qe=ye(He,[["__scopeId","data-v-9630d162"]]);export{qe as default};

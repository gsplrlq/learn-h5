import{j as z,d as E,H as W,I as H,b as n,J as X,K as P,l as M,M as Z,N as Q,O as ee,r as T,P as te,k as D,Q as ae,R as ne,S as se,U as O,m as le,y as j,V as F,W as oe,X as K,Y as re,Z as ce,G as ie,E as de,$ as ue,a0 as pe,a1 as _e,o as _,c as R,w as o,a as N,t as S,u as a,f as $,g as ve,F as A,q as U,e as C,a2 as fe,a3 as me,D as he,z as ge,A as xe,h as ye,_ as ke}from"./index-DTfBhATC.js";import{_ as be}from"./index-B9MoHdol.js";import{Q as Ce,N as Te,R as Le}from"./review-Dw477aH_.js";import{A as Se,a as Ve}from"./index-X09YGlEK.js";import"./index-I8GyYER7.js";import"./index-C9PVeRZ6.js";const[Y,Ne]=z("collapse"),q=Symbol(Y),we={border:P,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Re=E({name:Y,props:we,emits:["change","update:modelValue"],setup(r,{emit:m,slots:c}){const{linkChildren:e,children:h}=W(q),u=t=>{m("change",t),m("update:modelValue",t)},v=(t,s)=>{const{accordion:i,modelValue:x}=r;u(i?t===x?"":t:s?x.concat(t):x.filter(k=>k!==t))},p=(t={})=>{if(r.accordion)return;typeof t=="boolean"&&(t={expanded:t});const{expanded:s,skipDisabled:i}=t,k=h.filter(d=>d.disabled&&i?d.expanded.value:s??!d.expanded.value).map(d=>d.itemName.value);u(k)},g=t=>{const{accordion:s,modelValue:i}=r;return s?i===t:i.includes(t)};return H({toggleAll:p}),e({toggle:v,isExpanded:g}),()=>{var t;return n("div",{class:[Ne(),{[X]:r.border}]},[(t=c.default)==null?void 0:t.call(c)])}}});const Be=M(Re),[$e,B]=z("collapse-item"),Pe=["icon","title","value","label","right-icon"],Ee=Z({},Q,{name:ee,isLink:P,disabled:Boolean,readonly:Boolean,lazyRender:P});var Ie=E({name:$e,props:Ee,setup(r,{slots:m}){const c=T(),e=T(),{parent:h,index:u}=te(q);if(!h)return;const v=D(()=>{var l;return(l=r.name)!=null?l:u.value}),p=D(()=>h.isExpanded(v.value)),g=T(p.value),t=ae(()=>g.value||!r.lazyRender),s=()=>{p.value?c.value&&(c.value.style.height=""):g.value=!1};ne(p,(l,L)=>{if(L===null)return;l&&(g.value=!0),(l?K:re)(()=>{if(!e.value||!c.value)return;const{offsetHeight:y}=e.value;if(y){const w=`${y}px`;c.value.style.height=l?"0":w,se(()=>{c.value&&(c.value.style.height=l?w:"0")})}else s()})});const i=(l=!p.value)=>{h.toggle(v.value,l)},x=()=>{!r.disabled&&!r.readonly&&i()},k=()=>{const{border:l,disabled:L,readonly:V}=r,y=O(r,Object.keys(Q));return V&&(y.isLink=!1),(L||V)&&(y.clickable=!1),n(j,le({role:"button",class:B("title",{disabled:L,expanded:p.value,borderless:!l}),"aria-expanded":String(p.value),onClick:x},y),O(m,Pe))},d=t(()=>{var l;return F(n("div",{ref:c,class:B("wrapper"),onTransitionend:s},[n("div",{ref:e,class:B("content")},[(l=m.default)==null?void 0:l.call(m)])]),[[oe,g.value]])});return H({toggle:i,expanded:p,itemName:v}),()=>n("div",{class:[B({border:u.value&&r.border})]},[k(),d()])}});const De=M(Ie),Oe={class:"course"},Ae={class:"course-title"},Ue={key:0,class:"teacher-info flex text-left mt-2"},ze={class:"teacher-details"},He={class:"m-2"},Me=E({__name:"index",setup(r){const m=ce(),c=ie();let e=T({id:1,title:"",courseDesc:"这是课程1的描述",imgUrl:"course-imgUrl-url",teacherInfo:{userName:"教师1",avatar:"teacher-avatar-url",education:""},durationStr:"2小时",studyCount:100,score:4.5,courseContent:"课程1的简介",courseType:1,bought:!1,videoId:1,hasStudy:!1});const h=T(0),u=T([]),v=T([{id:1,title:"第一章",chapterList:[{id:1,title:"第一节",videoId:1,durationStr:"10分钟",percent:50}]}]),p=()=>{ye("支付功能暂未开放...")},g=t=>{(t.percent>95||e.value.hasStudy)&&c.push(`/video/${e.value.id}/${t.videoId}`)};return de(async()=>{const t=m.params.id;e.value=await ue(t),v.value=await pe({courseId:t}),K(()=>{u.value=v.value.map(s=>s.id)})}),(t,s)=>{const i=fe,x=me,k=he,d=ge,l=be,L=j,V=De,y=Be,w=xe,I=Se,G=Ve,J=_e("richText");return _(),R("div",Oe,[n(k,{thumb:a(e).imgUrl,title:a(e).title,desc:a(e).courseDesc,class:"course-info"},{title:o(()=>[N("div",Ae,S(a(e).title),1)]),tags:o(()=>[n(i,{plain:"",class:"mr-2"},{default:o(()=>[$("时长: "+S(a(e).durationStr),1)]),_:1}),n(i,{plain:"",class:"mr-2"},{default:o(()=>[$("人数: "+S(a(e).studyCount)+" 人",1)]),_:1}),n(i,{plain:""},{default:o(()=>[$("评分: "+S(a(e).score),1)]),_:1}),a(e).teacherInfo?(_(),R("div",Ue,[n(x,{round:"",width:"40px",height:"40px",src:a(e).teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),N("div",ze,[N("p",null,S(a(e).teacherInfo.userName),1),N("p",null,S(a(e).teacherInfo.education),1)])])):ve("",!0)]),_:1},8,["thumb","title","desc"]),n(w,{modelValue:h.value,"onUpdate:modelValue":s[1]||(s[1]=f=>h.value=f),class:"pb-12",sticky:""},{default:o(()=>[n(d,{title:"简介"},{default:o(()=>[F(N("div",He,null,512),[[J,a(e).courseContent]])]),_:1}),n(d,{title:"章节"},{default:o(()=>[n(y,{ref:"collapse",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=f=>u.value=f)},{default:o(()=>[(_(!0),R(A,null,U(v.value,f=>(_(),C(V,{key:f.id,title:f.title,name:f.id},{default:o(()=>[(_(!0),R(A,null,U(f.chapterList,b=>(_(),C(L,{key:b.id,title:b.title,label:`时长: ${b.durationStr}`,onClick:Qe=>g(b)},{"right-icon":o(()=>[b.percent>95?(_(),C(l,{key:0,icon:"mdi-check-circle",class:"text-lg text-green-500"})):b.percent>0&&b.percent<95?(_(),C(l,{key:1,icon:"mdi-progress-clock",class:"text-lg text-green-500"})):(_(),C(l,{key:2,icon:"mdi-circle-outline",class:"text-lg text-gray-500"}))]),_:2},1032,["title","label","onClick"]))),128))]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(d,{title:"问答"},{default:o(()=>[n(Ce,{course:a(e)},null,8,["course"])]),_:1}),n(d,{title:"笔记"},{default:o(()=>[n(Te,{course:a(e)},null,8,["course"])]),_:1}),n(d,{title:"评价"},{default:o(()=>[n(Le,{course:a(e)},null,8,["course"])]),_:1})]),_:1},8,["modelValue"]),n(G,null,{default:o(()=>[a(e).courseType===2&&!a(e).bought?(_(),C(I,{key:0,type:"danger",text:"立即购买",onClick:p})):(_(),C(I,{key:1,type:"danger",text:a(e).hasStudy?"继续学习":"开始学习",onClick:s[2]||(s[2]=f=>a(c).push(`/video/${a(e).id}/${a(e).videoId}`))},null,8,["text"]))]),_:1})])}}}),Je=ke(Me,[["__scopeId","data-v-e5271f3e"]]);export{Je as default};

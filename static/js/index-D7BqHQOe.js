import{d as F,r as o,o as p,c as V,a as _,b as d,w as i,e as C,u as m,f as k,t as g,g as N,s as q,h as I,i as L,B as U,_ as T}from"./index-DTfBhATC.js";import{C as $}from"./index-BL8mP3yI.js";import{F as z}from"./index-I8GyYER7.js";import{l as A}from"./favicon-CEyZaP4f.js";import{F as D}from"./index-BqxkgVlD.js";const E={class:"container"},G={class:"m-6"},R=F({name:"Login",__name:"index",setup(j){const l=o(!1),s=o(!1),n=o(""),u=o("");let v=o(60),a=o(60),c=o(null);const y=async()=>{if(!c.value&&a.value===v.value){const r={option:l.value?1:2,phone:n.value,type:"client"};await q(r),I("发送成功"),c.value=setInterval(()=>{a.value--,a.value<=0&&(clearInterval(c.value),c.value=null,a.value=v.value)},1e3)}},w=r=>{const e={...r};l.value||(e.type=s.value?"smsCodeLogin":"pwdLogin"),L().login(e,l.value),console.log("submit",r)},b=()=>{n.value="",u.value=""};return(r,e)=>{const f=z,x=U,B=$,S=D;return p(),V("div",E,[e[5]||(e[5]=_("img",{class:"logo",src:A,alt:"",srcset:""},null,-1)),d(S,{onSubmit:w},{default:i(()=>[d(B,{inset:""},{default:i(()=>[d(f,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),s.value?(p(),C(f,{key:1,modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),clearable:"",name:"code",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:i(()=>[d(x,{size:"small",disabled:!n.value||m(a)!==m(v),onClick:y},{default:i(()=>[k(g(m(a)===m(v)?"获取验证码":m(a)+"s 重新发送"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])):(p(),C(f,{key:0,modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),type:"password",name:"code",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]))]),_:1}),_("div",G,[d(x,{round:"",block:"",type:"danger","native-type":"submit"},{default:i(()=>[k(g(l.value?"注册":"登录"),1)]),_:1}),_("div",{class:"text-center text-xl text-current p-6",onClick:e[3]||(e[3]=t=>{l.value=!1,s.value=!s.value,b()})},g(s.value?"账号密码登录":"手机短信登录"),1),l.value?N("",!0):(p(),V("div",{key:0,class:"text-center text-large text-red-500 p-6",onClick:e[4]||(e[4]=t=>{l.value=!0,s.value=!0,b()})}," 快速注册 "))])]),_:1})])}}}),P=T(R,[["__scopeId","data-v-18a4e412"]]);export{P as default};

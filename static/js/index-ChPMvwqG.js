import{d as defineComponent,a5 as makeStringProp,H as truthProp,j as createNamespace,b as createVNode,l as withInstall,a6 as getDefaultExportFromCjs,a7 as commonjsRequire,a8 as commonjsGlobal,Z as useRoute,E as useRouter,r as ref,G as onMounted,x as showFailToast,a9 as onUnmounted,aa as updateEvaluation,h as showToast,ab as joinClass,$ as getLessonDetail,a0 as getLessonChapter,ac as getVideoAuth,W as nextTick,ad as createStudyHistory,_ as _export_sfc,ae as resolveComponent,c as createElementBlock,o as openBlock,e as createBlock,f as createCommentVNode,a as createBaseVNode,w as withCtx,a2 as Tag,g as createTextVNode,t as toDisplayString,a3 as Image$1,z as Card,D as Tab,A as Tabs,B as Button,af as Popup}from"./index-2WoK3mnG.js";import{R as RadioGroup,a as Radio}from"./index-BYk1u5Fr.js";import{R as ReviewList,N as NoteList,Q as QuestionList}from"./review-DAs1QkcE.js";import{s as showDialog,a as showConfirmDialog}from"./function-call-D11ebchD.js";import"./index-9NRCuRYO.js";import"./Dialog-Cne7LoH-.js";import"./index-C0YfNoN3.js";const[name,bem]=createNamespace("divider"),dividerProps={dashed:Boolean,hairline:truthProp,vertical:Boolean,contentPosition:makeStringProp("center")};var stdin_default=defineComponent({name,props:dividerProps,setup(x,{slots:m}){return()=>{var j;return createVNode("div",{role:"separator",class:bem({dashed:x.dashed,hairline:x.hairline,vertical:x.vertical,[`content-${x.contentPosition}`]:!!m.default&&!x.vertical})},[!x.vertical&&((j=m.default)==null?void 0:j.call(m))])}}});const Divider=withInstall(stdin_default);var aliplayerMin={exports:{}};/*! aliyun-aliplayer - v2.35.4 - 2025-12-23 20.59.34 */(function(module,exports$1){(function(x){module.exports=x()})(function(){return function x(m,j,w){function p(n,t){if(!j[n]){if(!m[n]){var e=typeof commonjsRequire=="function"&&commonjsRequire;if(!t&&e)return e(n,!0);if(d)return d(n,!0);throw(t=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",t}e=j[n]={exports:{}},m[n][0].call(e.exports,function(a){return p(m[n][1][a]||a)},e,e.exports,x,m,j,w)}return j[n].exports}for(var d=typeof commonjsRequire=="function"&&commonjsRequire,l=0;l<w.length;l++)p(w[l]);return p}({1:[function(x,m,j){var w,p,d=Object.defineProperty,l=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(ce,fe,me)=>fe in ce?d(ce,fe,{enumerable:!0,configurable:!0,writable:!0,value:me}):ce[fe]=me,s=(ce,fe)=>{for(var me in fe=fe||{})e.call(fe,me)&&o(ce,me,fe[me]);if(t)for(var me of t(fe))a.call(fe,me)&&o(ce,me,fe[me]);return ce},g=(ce,fe,me)=>(o(ce,typeof fe!="symbol"?fe+"":fe,me),me),c=(Object.defineProperties(j,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),{exports:{}}),f={exports:{}};function y(){var ce,fe,me;return p||(p=1,Date.now=Date.now||function(){return new Date().getTime()},ce=Date.now(),me={noop:fe=function(){},warn:(()=>{var V=typeof console=="object"?console.warn:fe;try{var D={warn:V};D.warn.call(D)}catch{return fe}return V})(),key:"__bl",selfErrKey:"ARMS_SDK_ERROR",selfErrPage:"ARMSSDK",win:typeof window=="object"&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",daily_3:"http://arms-retcode-daily.aliyun.test/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?",tw:"https://arms-retcode.orientalgame.com.tw/r.png?",tw_sg:"https://arms-retcode-sg.orientalgame.com.tw/r.png?",hz_finance:"https://arms-retcode-hz-finance.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(V){var D;return Object.create?Object.create(V):((D=function(){}).prototype=V,new D)},each:function(V,D){var O=0,A=V.length;if(this.T(V,"Array"))for(;O<A&&D.call(V[O],V[O],O)!==!1;O++);else for(O in V)if(D.call(V[O],V[O],O)===!1)break;return V},safetyCall:function(V,D,O){if(typeof V!="function")return O;try{return V.apply(this,D)}catch{return O}},T:function(V,D){return V=Object.prototype.toString.call(V).substring(8).replace("]",""),D?V===D:V},duration:function(){var V=Date;try{performance&&this.T(performance.now,"Function")&&(V=performance)}catch{V=Date}var D=V.now();return function(){return Math.round(V.now()-D)}},filterByRule:function(){var V,D,O,A,F,ie=[].slice.call(arguments),Z=ie.length;return Z<2?ie[0]:(V=ie[Z-1],(D=ie[0])?V?(A=(O=this).T(V),F=ie.slice(0,Z-1),A==="Function"?O.safetyCall(V,F,D):A==="Array"?(this.each(V,function(ne){F[0]=D=O.filterByRule.apply(O,[].concat(F,ne))}),D):A==="Object"?D.replace(V.rule,V.target||""):D.replace(V,"")):D:"")},ignoreByRule:function(V,D){if(!V||!D)return!1;if((this.isString(D)||D.source||this.T(D)==="Function")&&(D=[D]),!this.isArray(D))return this.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var O,A=[],F=0,ie=D.length;F<ie;F++)if(O=D[F],this.isString(O))A.push(O.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(O&&O.source)A.push(O.source);else if(O&&this.T(O)==="Function"&&this.safetyCall(O,[V],!1)===!0)return!0;var Z=new RegExp(A.join("|"),"i");return!!(A.length&&Z.test&&Z.test(V))},J:function(V){if(!V||typeof V!="string")return V;var D=null;try{D=JSON.parse(V)}catch{}return D},pick:function(V){return V===1||Math.ceil(Math.random()*V)===1},verifyConfig:function(V){var D,O;return"sample"in V&&(1<=(O=0<(O=(O=D=V.sample)&&/^\d+(\.\d+)?%$/.test(D)?parseInt(100/parseFloat(D)):O)&&O<1?parseInt(1/O):O)&&O<=100?V.sample=O:delete V.sample),V},on:function(V,D,O,A,F){return V.addEventListener?(F=F||!1,V.addEventListener(D,function ie(Z){A&&V.removeEventListener(D,ie,F),O.call(this,Z)},F)):V.attachEvent&&V.attachEvent("on"+D,function ie(Z){A&&V.detachEvent("on"+D,ie),O.call(this,Z)}),this},off:function(V,D,O){return O&&(V.removeEventListener?V.removeEventListener(D,O):V.detachEvent&&V.detachEvent(D,O)),this},delay:function(V,D){return D===-1?(V(),null):setTimeout(V,D||0)},ext:function(V){for(var D=1,O=arguments.length;D<O;D++){var A,F=arguments[D];for(A in F)Object.prototype.hasOwnProperty.call(F,A)&&(V[A]=F[A])}return V},sub:function(V,D){var O={};return this.each(V,function(A,F){D.indexOf(F)!==-1&&(O[F]=A)}),O},uu:function(){for(var V,D,O=20,A=new Array(O),F=Date.now().toString(36).split("");0<O--;)D=(V=36*Math.random()|0).toString(36),A[O]=V%3?D:D.toUpperCase();for(var ie=0;ie<8;ie++)A.splice(3*ie+2,0,F[ie]);return A.join("")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){var D=16*Math.random()|0;return(V==="x"?D:3&D|8).toString(16)})},seq:function(){return(ce++).toString(36)},decode:function(V){try{V=decodeURIComponent(V)}catch{}return V},encode:function(V,D){try{V=D?encodeURIComponent(V).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(V)}catch{}return V},serialize:function(V){var D,O=[];for(D in V=V||{})Object.prototype.hasOwnProperty.call(V,D)&&V[D]!==void 0&&O.push(D+"="+this.encode(V[D],D==="msg"));return O.join("&")},checkAPI:function(V,D){var O;return!(!V||typeof V!="string"||(!(O=/arms-retcode[\w-]*\.aliyuncs/.test(V))&&D?/(alicdn\.com)|(mmstat\.com)/.test(V):O))},checkAutoError:function(V){return!(!V||!V.message||/failed[\w\s]+fetch/i.test(V.message))},cutUrlSearch:function(V){return V&&typeof V=="string"?V.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},removeUrlSearch:function(V){return V&&typeof V=="string"?V.replace(/\?.*$/,""):""},createFakeToString:function(V){return function(){return V+"() { [native code] }"}},checkSameOrigin:function(V,D){var O;return!(!D||!V||(O="//"+D.split("/")[2],V!==D&&V.slice(0,D.length+1)!==D+"/"&&V!==O&&V.slice(0,O.length+1)!==O+"/"&&/^(\/\/|http:|https:).*/.test(V)))},getRandIP:function(){for(var V=[],D=0;D<4;D++){var O=Math.floor(256*Math.random());V[D]=(15<O?"":"0")+O.toString(16)}return V.join("").replace(/^0/,"1")},getSortNum:function(V){return V?1e3<=(V+=1)&&V<=9999?V:V<1e3?V+1e3:V%1e4+1e3:1e3},getRandNum:function(V){return!V||typeof V!="string"||V.length<5?this.getNum(5):V.substring(V.length-5)},getNum:function(V){for(var D=[],O=0;O<V;O++){var A=Math.floor(16*Math.random());D[O]=A.toString(16)}return D.join("")},getCurDomain:function(){return location&&location.hostname||""},getSrcType:function(V,D){var O=location&&location.host||"";if(!O)return"";var A=new URL(V).host;if(A===O)return"self";for(var F=0;F<D.length;F+=1)if(A.includes(D[F]))return"cdn";return"others"},parseFetchHeaders:function(V){if(!V)return{};var D={};try{if(typeof V.keys=="function")for(var O=V.keys(),A=O.next();!A.done;){var F=A.value;D[F]=V.get(F),A=O.next()}else D=V}catch{D={}}return D},parseXhrHeaders:function(V){if(!V&&typeof V!="string")return{};var D={};try{D=V.split(`\r
`).reduce(function(O,A){return A=A.split(": "),O[A[0]]=A[1],O},{})}catch{D={}}return D},getQuerys:function(V){if(!V)return"";var D,O,A,F={};try{var ie=[];if(0<(ie=0<=V.indexOf("?")?V.substring(V.indexOf("?")+1,V.length).split("&"):ie).length)for(var Z in ie)O=(D=ie[Z].split("="))[0],A=D[1],F[O]=A}catch{F={}}return F},getURL:function(V){if(!V)return null;var D={},F=V.length,O=V.indexOf("://");if(O<0)return null;D.protocol=V.substring(0,O+1);var ie=V.indexOf("#"),A=V.indexOf("?"),F=(ie<0&&(ie=F),A<0&&(A=ie),D.search=V.substring(A,ie).substring(0,1e3),V.substring(O+3,A)),ie=F.indexOf("/");return ie<0&&(ie=F.length),D.domain=F.substring(0,ie).split(":")[0],D.path=F.substring(ie,F.length).substring(0,1e3),D},getResType:function(V,A){if(-1<["script","img","other"].indexOf(V))return V;if(-1<["video"].indexOf(V))return"media";if(-1<["document","iframe"].indexOf(V))return"doc";var A=A?this.getURL(A):null,O=A&&A.path?A.path.lastIndexOf("."):-1,A=(0<O?A.path.substr(O+1):"").toLowerCase();if(A){if(-1<["eot","woff","woff2","ttf"].indexOf(A))return"font";if(A==="css")return"css";if(A==="js")return"script"}return-1<["fetch","xmlhttprequest","beacon"].indexOf(V)?"api":"others"},areInOrder:function(){for(var V=1;V<arguments.length;V+=1)if(arguments[V]<arguments[V-1])return!1;return!0},getFetchSnapshot:function(V,D,O){try{var A=(V&&typeof V[0]!="string"?V[0].url:V[0])||"",F=(V&&typeof V[0]!="string"?V[0]:V[1])||{},ie=F.method.toUpperCase()==="POST"?F.body:this.getQuerys(A),Z={originApi:A,method:F.method||"unknown",params:ie,response:D||"",reqHeaders:this.parseFetchHeaders(F.headers||null),resHeaders:this.parseFetchHeaders(O)},ne=JSON&&JSON.stringify(Z)||"{}"}catch{ne="{}"}return ne},getXhrSnapshot:function(V,D,O){if(!V||!D||!O)return{};var A,F;try{var ie="";O.responseType===""||O.responseType==="text"?ie=O.responseText:O.responseType==="document"&&(ie=O.responseXML),A={originApi:V,method:D,params:this.getQuerys(V),response:ie,reqHeaders:{},resHeaders:this.parseXhrHeaders(typeof O.getAllResponseHeaders=="function"&&O.getAllResponseHeaders()||"")},F=JSON&&JSON.stringify(A)||"{}"}catch{F="{}"}return F},isRobot:function(){var V=["nuhk","googlebot/","googlebot-image","yammybot","openbot","slurp","msnbot","ask jeeves/teoma","ia_archiver","baiduspider","bingbot/","adsbot"];if(navigator&&typeof navigator.userAgent=="string")try{for(var D=navigator.userAgent.toLowerCase(),O=0;O<V.length;O++){var A=V[O];if(0<=D.lastIndexOf(A))return!0}}catch{this.warn("[arms] useragent parse error")}return!1},isFunction:function(V){return typeof V=="function"},isPlainObject:function(V){return Object.prototype.toString.call(V)==="[object Object]"},isString:function(V){return Object.prototype.toString.call(V)==="[object String]"},isArray:function(V){return Object.prototype.toString.call(V)==="[object Array]"},joinRegExp:function(V){for(var D,O=[],A=0,F=V.length;A<F;A++)D=V[A],this.isString(D)?O.push(D.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):D&&D.source&&O.push(D.source);return new RegExp(O.join("|"),"i")},reWriteMethod:function(V,D,O){var A;V!==null&&(A=V[D],V[D]=O(A))},checkSDKError:function(V,D){return!(!V&&!D||!new RegExp(this.selfErrKey,"i").test(V)&&!this.ignoreByRule(D,[/retcode.alicdn.com\/retcode\/bl.js/,/g.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/laz-g-cdn.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/local.taobao.com:8880\/build\/bl/]))},sdkError:function(V){return{msg:V,message:this.selfErrKey}},dealParam:function(V,D,O){var A={};try{A=this.isPlainObject(V)?this.ext({key:V.key||"default",val:V.val||V.value||O},V,{begin:Date.now()}):{key:V||"default",val:D||O,begin:Date.now()}}catch(F){this.warn("[retcode] baseLog error: "+F)}return A}},w=me),w}var _,u,r,h,v={exports:{}},T={exports:{}};function E(){var ce,fe,me,V,D,O;return r||(r=1,ce=y(),u||(u=1,O=y(),_=function(A,F,ie){typeof A=="object"&&(A=O.serialize(A)),window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?window.navigator.sendBeacon(F+A+(ie?"&post_res=":""),ie||"&post_res="):O.warn("[arms] navigator.sendBeacon not surported")}),fe=_,me="aokcdqn3ly@e629dabd48a9933",V=function(A,F){var ie,Z,ne;if(F.t!=="error"||!(ie=A.requestQueue[0])||ie.t!=="error"||F.msg!==ie.msg)return F.t==="behavior"?0<(Z=A.requestQueue&&A.requestQueue.length)&&A.requestQueue[Z-1].t==="behavior"?(ne=F.behavior||[],A.requestQueue[Z-1].behavior.concat(ne)):A.requestQueue.push(F):A.requestQueue.unshift(F),A.onReady(function(){A.requestTimmer=ce.delay(function(){A.clear()},A.requestQueue[0]&&A.requestQueue[0].t==="error"?3e3:-1)}),!0;F.times=ie.times+1,A.requestQueue[0]=F},(D=function(A){return this.ver="1.8.36-beta.12",this._conf=ce.ext({},D.dftCon),this.sampleCache={},this.requestQueue=[],this.selfQueue=[],this.sdkFlag=!0,this.hash=ce.seq(),this.resetPageview(),this.setConfig(A),this.rip=ce.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this}).dftCon={sample:1,pvSample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[/^Script error\.?$/],ignoreResErrors:[],ignoreResources:[/\/(bl|wl)(.debug)?.js$/]},release:void 0,environment:"prod",beforeReport:null,parseTraceId:null},D.prototype={constructor:D,onReady:function(A){return A()},getPage:function(){var A=this._conf.page;return ce.safetyCall(A,[],A+"")},setPage:function(){},setConfig:function(A){A&&typeof A=="object"&&(ce.verifyConfig(A),A=this.setImgUrl(A),this._conf=ce.ext({},this._conf,A))},setImgUrl:function(A){var F=A.region,ie=A.imgUrl;return F?(F=ce.regionMap[F],A.imgUrl=F||ce.defaultImgUrl):ie&&(A.imgUrl=ie),A},checkImgUrl:function(){return!0},sendRequest:function(){},sendBeacon:function(A,F,ie){fe(A,F||this.getConfig("imgUrl"),ie)},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(A){A&&typeof A=="object"&&(this._common=ce.ext({},this._common,A))},resetPageview:function(){this.pageview=ce.uu(),this.sBegin=Date.now()},getUsername:function(){if(!this.username){var A=this._conf,A=A&&A.setUsername;if(typeof A=="function")try{var F=A();typeof F=="string"&&(F=F.substr(0,40),this.username=F)}catch(ie){ce.warn("[arms] setUsername fail",ie)}}return this.username},getTraceId:function(){var ie=this.rip,A=Date.now(),F=ce.getSortNum(this.record),ie=ie+A+F+ce.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=ie,this.record=F,{"EagleEye-TraceID":ie}},getUberTraceId:function(A){var Z=this.rip,ne=Date.now(),F=ce.getSortNum(this.record),ie=ce.getRandNum(this._conf.pid),Z=Z+ne+F+ce.getNum(2)+ie,ne=Z.substring(0,16);return A=A?"1":"0",Z[0]==="0"&&(Z[0]="1"),Z[16]==="0"&&(Z[16]="1"),{"uber-trace-id":Z+":"+ne+":0:"+A,traceId:Z}},getB3TraceId:function(A){var Z=this.rip,ne=Date.now(),F=ce.getSortNum(this.record),ie=ce.getRandNum(this._conf.pid),Z=Z+ne+F+ce.getNum(2)+ie,ne=Z.substring(0,16);return A=A?"1":"0",Z[0]==="0"&&(Z[0]="1"),Z[16]==="0"&&(Z[16]="1"),{b3:Z+"-"+ne+"-"+A+"-0","X-B3-TraceId":Z,"X-B3-ParentSpanId":"0","X-B3-SpanId":ne,"X-B3-Sampled":A}},getPageviewId:function(){return{"EagleEye-SessionID":this.pageview}},getConfig:function(A){return A?this._conf[A]:ce.ext({},this._conf)},sampling:function(A){return A===1||(typeof this.sampleCache[A]=="boolean"||(this.sampleCache[A]=ce.pick(A)),this.sampleCache[A])},clear:function(A){var F;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var ie,Z=this._conf&&typeof this._conf.sendRequest=="function";F=this.requestQueue.pop();)F.t==="res"?this.postData(F,"res"):F.t==="error"?this.postData(F,"err"):F.t==="api"?this.postData(F,"apiSnapshot"):F.t==="behavior"?this.postData(F,"behavior"):F.t==="health"&&!Z&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?this.sendBeacon(F):F.t==="resource"&&!Z&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?(ie=JSON.stringify({resource:F.resource}),delete F.resource,this.sendBeacon(F,null,ie)):F.t==="resource"?this.postData(F,"resource"):this.sendRequest(F);return A&&this.clearSelf(),this},clearSelf:function(){var A;for(clearTimeout(this.Timmer),this.Timmer=null;A=this.selfQueue.pop();)this.postData(A,"err");return this},_lg:function(A,F,ie,Z){var ne=this,he=ne._conf,ye=ne.getPage(),be=he.ignore||{},de=be.ignoreErrors,le=be.ignoreResErrors,Te=be.ignoreUrls,be=be.ignoreApis;if(ne._isRobot||ce.ignoreByRule(ye,Te)||ce.ignoreByRule(ce.decode(ye),Te)||A==="error"&&(ce.ignoreByRule(F.msg,de)||ce.ignoreByRule(ce.decode(F.msg),de))||A==="resourceError"&&(ce.ignoreByRule(F.src,le)||ce.ignoreByRule(ce.decode(F.src),le))||A==="api"&&(ce.ignoreByRule(F.api,be)||ce.ignoreByRule(ce.decode(F.api),be))||!ne.checkImgUrl(he.imgUrl)||!F||he.disabled||!he.pid||Z===0)return ne;if(Te=F.dl,delete F.dl,F=ce.ext({t:A,times:1,page:ye,tag:he.tag||"",release:he.release||"",environment:he.environment,begin:Date.now(),c1:he.c1,c2:he.c2,c3:he.c3},F,ne.commonInfo(),ne._common,{pid:he.pid,_v:ne.ver,pv_id:ne.pageview,username:ne.getUsername(),sampling:ie||1,dl:Te,z:ce.seq()}),ce.T(he.beforeReport)==="Function")try{if(!(F=he.beforeReport(F)))return ne}catch{return ne}return Z!==1&&ie&&!ne.sampling(ie)?ne:V(ne,F)},_self:function(A,F,ie){var Z=this,ne=Z._conf;if(A!=="error"||!Z.checkImgUrl(ne.imgUrl)||!F||ne.disabled||!ne.pid||ie&&!Z.sampling(ie))return Z;if(F=ce.ext({t:A,times:1,page:ce.selfErrPage,tag:ne.pid,begin:Date.now()},F,{pid:me,_v:Z.ver,sampling:ie||1,z:ce.seq()}),A=Z.selfQueue[0],A){A.times++;try{A.err&&F.err&&A.err.msg_raw&&F.err.msg_raw&&A.err.msg_raw.split("&").indexOf(F.err.msg_raw)<0&&A.err.msg_raw.length<1e3&&(A.err.msg_raw+="&"+F.err.msg_raw)}catch{}}else Z.selfQueue.unshift(F),Z.onReady(function(){Z.sdkFlag&&(Z.sdkFlag=!1,Z.Timmer=ce.delay(function(){Z.clearSelf()},1e4))})},custom:function(A,F){var ie,Z;return A&&typeof A=="object"&&(ie=!1,Z={begin:Date.now()},ce.each(A,function(ne,he){return(ie=he&&he.length<=20)||ce.warn("[retcode] invalid key: "+he),Z["x-"+he]=ne,ie}),ie)?this._lg("custom",Z,F||1):this}},T.exports=D),T.exports}var S,P={exports:{}},b,k,I,C={exports:{}};function L(){var ce;return I||(I=1,ce=y(),k=function(fe,me){function V(ne,he,ye){var de;ne!==null&&(de=ne[he],ne[he]=ye(de))}function D(ne,he){return function(ye){if(ye&&ye!==Z){var de;Z=ye;try{de=ye.target}catch{de="<unknown>"}de.length!==0&&(ye={type:"ui.".concat(ne),data:{message:(le=>{if(!le||le.nodeType!==1)return"";for(var Te=le||null,be=[],Ee=0,G=0,W="";Te&&Ee++<5&&!((W=(re=>{var pe,ve,we,Le,Re=[];if(!re||typeof re.tagName!="string")return"";if(Re.push(re.tagName.toLowerCase()),typeof re.id=="string"&&Re.push("#".concat(re.id)),typeof(pe=re.className)=="string")for(ve=pe.split(/\s+/),ke=0;ke<ve.length;ke++)Re.push(".".concat(ve[ke]));for(var Ie=["type","name","title","alt","data-arms-attr"],ke=0;ke<Ie.length;ke++)typeof(Le=re.getAttribute(we=Ie[ke]))=="string"&&Re.push("[".concat(we,'="').concat(Le,'"]'));return Re.join("")})(Te))==="html"||1<Ee&&80<=G+3*be.length+W.length);)be.push(W),G+=W.length,Te=Te.parentNode;return be.reverse().join(" > ")})(de)},timestamp:Date.now()},ne==="click"?A&&A.addBehavior(ye):ne==="keypress"&&(ie||A&&A.addBehavior(ye),clearTimeout(ie),ie=setTimeout(function(){ie=void 0},100)))}}}var O=[],A=null,F=me&&me.location&&me.location.href,ie=void 0,Z=null;ce.ext(fe.prototype,{addBehavior:function(ne){if(this.getConfig("behavior")&&ne&&typeof ne=="object"){var he={},ye=ne.data||{};if(ne.type)he=ye;else{if(typeof ye.name!="string"||typeof ye.message!="string")return;he.name=ye.name.substr(0,20),he.message=ye.message.substr(0,200)}return he.message&&(he.message=ce.encode(he.message)),ye={type:ne.type||"custom",data:he||{},timestamp:ne.timestamp||Date.now(),page:ne.page||me&&me.location&&me.location.pathname},O.push(ye),O=O.slice(-100)}},getBehavior:function(){return O||[]},setBehavior:function(ne){return O=ne||O},reportBehavior:function(ne){var he=this;he.getConfig("behavior")&&(he.sendBhTimer&&(clearTimeout(he.sendBhTimer),he.sendBhTimer=void 0),he.sendBhTimer=setTimeout(function(){O&&0<O.length&&(he.behavior(O),O=[],he.sendBhTimer=void 0,ne)&&typeof ne=="function"&&ne()},0))},initBehavior:function(){if(!this.hasInitBehavior&&!A){try{document&&document.referrer&&document.location&&(W=document.referrer,re=document.location.href,W!=="")&&(F=re,A)&&A.addBehavior({type:"navigation",data:{from:W,to:re}}),me&&me.document&&me.document.addEventListener&&(me.document.addEventListener("click",D("click"),!1),me.document.addEventListener("keypress",D("keypress"),!1)),Ee=(Ee=me&&me.chrome)&&Ee.app&&Ee.app.runtime,G="history"in me&&!!me.history.pushState&&!!me.history.replaceState,!Ee&&G&&(Te=function(pe,ve){A&&A.addBehavior({type:"navigation",data:{from:pe,to:ve}}),F=ve},be=me.onpopstate,me.onpopstate=function(){for(var pe=arguments.length,ve=new Array(pe),we=0;we<pe;we++)ve[we]=arguments[we];var Le=me.location.href;if(Te(F,Le),be)return be.apply(this,ve)},V(me.history,"pushState",Ee=function(pe){return function(){for(var ve=arguments.length,we=new Array(ve),Le=0;Le<ve;Le++)we[Le]=arguments[Le];var Re=2<we.length?we[2]:void 0;return Re&&Te(F,String(Re)),pe.apply(this,we)}}),V(me.history,"replaceState",Ee));var ne=this.getConfig("enableConsole");if(ne){var he=ne;if(me&&me.console){var ye=["debug","info","warn","log","error","assert"];ce.isArray(he)&&(ye=he);for(var de=0;de<ye.length;de++){var le=ye[de];le&&ce.isString(le)&&me.console[le]&&typeof me.console[le]=="function"&&V(me.console,le,function(pe){var ve=le;return function(){for(var we=arguments.length,Le=new Array(we),Re=0;Re<we;Re++)Le[Re]=arguments[Re];if(A&&A.addBehavior({type:"console",data:{level:ve,message:Le}}),ve==="error")for(var Ie=0;Ie<Le.length;Ie++){var ke=Le[Ie];ke&&ke.message&&ke.stack&&A&&A.errorHandler(new ErrorEvent("error",{error:ke,message:ke.message}))}pe&&Function.prototype.apply.call(pe,me.console,Le)}})}}}}catch(pe){ce.warn("[arms] error in initBehavior",pe)}(A=this).hasInitBehavior=!0}var Te,be,Ee,G,W,re;return this}})}),k}var N,U,Y,z,K,M,q,ee,Q,B,R,H,X,se,te,oe,J,ae={};function ue(){return N||(N=1,ae.TIMING_KEYS=["startTime","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart","redirectStart","redirectEnd"]),ae}function ge(){return q||(q=1,M=function(ce,fe,me){function V(W,re,pe,ve,we){if(re===void 0){var Le;if(!G[W]){Re=new RegExp(W+"=([^;]+)");try{Le=Re.exec(me.cookie)}catch(Ie){return Z.warn("[retcode] can not get cookie:",Ie),null}Le&&(G[W]=Le[1])}return G[W]}var Re=W+"="+re;Re+="; path=/",pe&&(Re+="; max-age="+pe);try{return me.cookie=Re,!!me.cookie}catch(Ie){return Z.warn("[retcode] can not set cookie: ",Ie),!1}}function D(W){return(W=W._conf.uid||V("_nk_")||V("_bl_uid"))||(W=Z.uu(),V("_bl_uid",W,15552e3))?W:null}var O,A,F,ie,Z=y(),ne=(Y||(Y=1,F=y(),ie=ue().TIMING_KEYS,U=function(){var W,re,pe,ve=F.win||{},we=ve.performance;return we&&typeof we=="object"&&typeof we.getEntriesByType=="function"?(W={},re=we.timing||{},pe=we.getEntriesByType("resource")||[],W.begin=re[ie[1]]||Date.now(),typeof ve.PerformanceNavigationTiming=="function"&&(ve=we.getEntriesByType("navigation")[0])&&(re=ve),F.each({dom:[10,8],load:[14,1]},function(ke,Re){var Ie=re[ie[ke[1]]],ke=re[ie[ke[0]]];0<Ie&&0<ke&&0<=(ke=Math.round(ke-Ie))&&ke<6e5&&(W[Re]=ke)}),W.res=JSON.stringify(pe),W):null}),U),he=(K||(K=1,O=y(),A=ue().TIMING_KEYS,z=function(){var W,re,pe,ve,we,Le=O.win||{},Re=Le.performance;return Re&&typeof Re=="object"?(W={},re=Re.timing||{},pe=Date.now(),ve=1,typeof Le.PerformanceNavigationTiming=="function"&&(we=Re.getEntriesByType("navigation")[0])&&(re=we,ve=2),O.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(Ne,ke){var De=re[A[Ne[1]]],Ne=re[A[Ne[0]]];(ve===2||0<De&&0<Ne)&&0<=(Ne=Math.round(Ne-De))&&Ne<6e5&&(W[ke]=Ne)}),we=Le.navigator.connection,Le=Re.navigation||{},W.ct=we?we.effectiveType||we.type:"",(Re=999<(Re=we&&(we.downlink||we.downlinkMax||we.bandwidth)||null)?999:Re)&&(W.bandwidth=Re),W.navtype=Le.type===1?"Reload":"Other",ve===1&&0<re[A[16]]&&0<re[A[1]]&&0<=(we=re[A[16]]-re[A[1]])&&we<36e5&&(W.fpt=we),ve===1&&0<re[A[1]]?W.begin=re[A[1]]:W.begin=ve===2&&0<W.load?pe-W.load:pe,W):null}),z),ye=null,de=me.documentElement,le=fe.innerWidth||de.clientWidth||me.body.clientWidth,Te=fe.innerHeight||de.clientHeight||me.body.clientHeight,be=fe.navigator.connection,Ee={sr:screen.width+"x"+screen.height,vp:le+"x"+Te,ct:be?be.effectiveType||be.type:""},G={};return Z.ext(ce.prototype,{activeErrHandler:function(W){return ye&&!W||(ye=this),this},errorHandler:function(W){if(W){var re,pe=W.type;pe==="error"?!(re=W.target||W.srcElement)||!re.tagName||W.message||W.filename||W.lineno||W.colno?this.error(W.error||{message:W.message},W):this.resourceErrorHandler(W):pe==="unhandledrejection"&&Z.T(W.reason,"Error")&&Z.checkAutoError(W.reason)&&this.error(W.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch{}}return this},resourceErrorHandler:function(W){var re=this,pe=W.target||W.srcElement;try{var ve=re.getSrc(pe),we=typeof pe.tagName=="string"?pe.tagName.toLowerCase():"",Le=re.getXPath(pe,5),Re=Z.getURL(ve),Ie={src:ve&&ve.substring(0,1e3),node_name:we,xpath:Le,res_type:Z.getResType(we,ve),res_name:Re.path,domain:Re.domain};return re._conf.enableResource&&re.fixResourceStatus&&W.timeStamp&&re.fixResourceStatus({src:ve,node_name:we,res_type:Z.getResType(we,ve),timeStamp:W.timeStamp,domain:Re.domain}),re._lg("resourceError",Ie),re}catch(ke){return Z.warn("[ARMS] resourceErrorHandler error :",ke),re}},getSrc:function(W){var re,pe,ve=W.src||W.href;try{ve||(re=(typeof W.tagName=="string"?W.tagName.toLowerCase():"")==="object",pe=W.getAttribute("classid")&&W.getAttribute("classid").toLowerCase()==="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"||W.getAttribute("type")==="application/x-shockwave-flash",ve=(ve=re&&pe?W.getAttribute("data")||W.getAttribute("codebase"):ve)||W.outerHTML||W.innerHTML)}catch{ve=""}return ve},getXPath:function(W,re){var ve=W.id?"#"+W.id:"",pe=typeof W.className=="string"?"."+W.className.split(" ").join("."):"",ve=(typeof W.tagName=="string"?W.tagName.toLowerCase():"")+ve+pe;return W.parentNode&&W.parentNode.tagName&&re-1!=0?this.getXPath(W.parentNode,re-1)+" > "+ve:ve},sendPerformance:function(W){var re=this;re.onReady(function(){var pe=he();pe&&pe.load&&0<pe.load&&(pe.page=re.getPage(!0),(pe=W?Z.ext(pe,W):pe).autoSend=!0,re.performance(pe))})},sendResources:function(W){var re=this;re.onReady(function(){var pe=ne();pe&&pe.load&&0<pe.load&&(pe.load&&pe.load<=2e3||pe.load&&pe.load<=8e3&&.05<Math.random()||(pe.page=re.getPage(!0),pe.dl=location.href,W&&(pe=Z.ext(pe,W)),re._lg("res",pe,re.getConfig("sample"))))})},sendPV:function(){var W=this;W.onReady(function(){pe=D(W),re=fe.devicePixelRatio||1;var re,pe={uid:pe,dt:me.title,dl:location.href,dr:me.referrer,dpr:re.toFixed(2),de:(me.characterSet||me.defaultCharset||"").toLowerCase(),ul:de.lang,begin:Date.now()};pe.uid&&W._lg("pv",pe,W.getConfig("pvSample"))})},commonInfo:function(){return Ee.uid=D(this),Ee.sid=(W=>{if(W.session)return W.session;var re;try{if(typeof window=="object"&&typeof sessionStorage=="object"&&typeof sessionStorage.getItem=="function")return typeof(re=sessionStorage.getItem("_bl_sid"))=="string"?W.session=re:(re=Z.uu(),W.session=re,typeof sessionStorage.setItem=="function"&&sessionStorage.setItem("_bl_sid",re)),re}catch(pe){Z.warn("[ARMS] getSid error :",pe)}return W.session=re=Z.uu(),re})(this),Ee},handleUnload:function(W){var re=Date.now();if(re-this._lastUnload<200)return this;this._lastUnload=re,this.sendHealth(W),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this._conf&&this._conf.enableResource&&this.resourceComboReport(),this.clear(!0)},bindHashChange:function(W){var re=this;if(!W^re.hashChangeHandler)return re;W?(re.hackHistoryState(),re.hashChangeHandler=function(pe){var ve=re._conf.parseHash(location.hash);ve&&re.setPage(ve,pe!==!1)},re.stateChangeHandler=function(pe){pe=re._conf.parseHash(pe.detail),pe&&re.setPage(pe)},Z.on(fe,"hashchange",re.hashChangeHandler),Z.on(fe,"historystatechange",re.stateChangeHandler),re.hashChangeHandler(!1)):(Z.off(fe,"hashchange",re.hashChangeHandler),Z.off(fe,"historystatechange",re.stateChangeHandler),re.hashChangeHandler=null,re.stateChangeHandler=null)},initHandler:function(){var W,re=this;return re.hasInitHandler||(W=re._conf,Z.on(fe,"beforeunload",function(){re.handleUnload(0)}),re.bindHashChange(W.enableSPA),re.activeErrHandler(!1),re.hasInitHandler=!0),re}}),Z.on(fe,"error",function(W){ye&&ye.errorHandler(W)},!1,!0).on(fe,"unhandledrejection",function(W){ye&&ye.errorHandler(W)}),ce}),M}function _e(){var ce,fe;return Q||(Q=1,ce=y(),fe=500,ee=function(me,V,D){var O=V.innerHeight||0,A=[],F=null,ie=0;ce.ext(me.prototype,{initFmpObserver:function(Z){var ne=this;if(!ne._conf||!ne._conf.useFmp)return null;if(!V.MutationObserver)return ce.warn("[retcode] first meaningful paint can not be retrieved"),ne.sendPerformance(),null;ce.on(V,"beforeunload",function(){ne.endObserving(0,!0)});var he=V.MutationObserver;return(F=new he(function(){var ye,de,le;ye=ne._startTime,ye=Date.now()-ye,(le=D.querySelector("body"))?(de=0,de+=function Te(be,Ee,G){var W=0,re=be.tagName;if(re!=="SCRIPT"&&re!=="STYLE"&&re!=="META"&&re!=="HEAD"){if(0<(re=be.children?be.children.length:0))for(var pe=be.children,ve=re-1;0<=ve;ve--)W+=Te(pe[ve],Ee+1,0<W);if(W<=0&&!G&&!(be.getBoundingClientRect&&be.getBoundingClientRect().top<O))return 0;W+=1+.5*Ee}return W}(le,1,!1),A.push({score:de,t:ye})):A.push({score:0,t:ye})})).observe(document,{childList:!0,subtree:!0}),ie=1,ne.onReady(function(){ne.endObserving(Z)}),F},endObserving:function(Z,ne){var he=this;if(F&&ie)if(he.fmpTimmer&&(clearTimeout(he.fmpTimmer),he.fmpTimmer=null),ne||!((Te,be)=>(Te=Date.now()-Te,!(be<Te||Te-(A&&A.length&&A[A.length-1].t||0)>2*fe)))(he._startTime,Z)){F.disconnect(),ie=0,A=function Te(be){for(var Ee=1;Ee<be.length;Ee++)if(be[Ee].score<be[Ee-1].score)return be.splice(Ee,1),Te(be);return be}(A);for(var ye,de=null,le=1;le<A.length;le++)A[le].t>=A[le-1].t&&(ye=A[le].score-A[le-1].score,!de||de.rate<=ye)&&(de={t:A[le].t,rate:ye});de&&0<de.t&&de.t<36e5?he.sendPerformance({fmp:de.t}):he.sendPerformance()}else he.fmpTimmer=ce.delay(function(){he.endObserving(Z)},fe)}})}),ee}function Se(){return R||(R=1,B=function(ce,fe){function me(ne,he,ye,de,le,Te,be,Ee,G,W,re,pe,ve){le=V.J(le)||null,(he=V.safetyCall(he,[le,de],null))&&(le=he.code||Te,de=!("success"in he)||he.success,ne.api(ye,de,be,le,he.msg,Ee,G,W,de?{}:re,O,pe,ve))}var V=y(),D=null,O=V.getCurDomain(),A="fetch",F="__oFetch_",ie="__oXMLHttpRequest_",Z="XMLHttpRequest";return V.ext(ce.prototype,{removeHook:function(ne,he){return D&&(he||this===D)&&(fe[F]&&(fe[A]=fe[F],delete fe[F]),fe[ie]&&(fe[Z]=fe[ie],delete fe[ie]),D=null),this},addHook:function(ne){return!ne&&D||(D||(typeof fe[A]=="function"&&(le=fe[A],fe[F]=le,fe[A]=function(Te,be){var Ee=arguments.length===1?[Te]:Array.apply(null,arguments),G=D;if(!G||!G.api||be&&(be.method==="HEAD"||be.mode==="no-cors"))return le.apply(fe,Ee);be=be||{};var W=Date.now(),re=G._conf,pe=V.duration(),ve=we=(Te&&typeof Te!="string"?Te.url:Te)||"",we=V.cutUrlSearch(we),Re=(re.ignore||{}).ignoreApis,Le=re.parseTraceId;if(!V.checkAPI(we,!0)||V.ignoreByRule(we,Re))return le.apply(fe,Ee);we=V.filterByRule(we,ve,re.ignoreApiPath||re.apiHelper);var Re=re.enableLinkTrace,Ie="",ke="",De=G.getConfig("pid"),Ne=null,We=G.getConfig("sample"),rt=G.getConfig("linkType"),je=1;if(We&&!G.sampling(We)&&(je=0),Re){We="";try{We=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch{We=""}var Ce,Re=V.checkSameOrigin(ve,We);if(G.getConfig("enableApiCors")||Re)if(Te&&typeof Te!="string")try{if(Ee[0].headers&&typeof Ee[0].headers.get=="function"&&typeof Ee[0].headers.append=="function")switch(rt){case"arms":var Me=Ee[0].headers.get("EagleEye-TraceID"),Ve=Ee[0].headers.get("EagleEye-SessionID"),Je=Ee[0].headers.get("EagleEye-pAppName");Me?Ie=Me:(Ie=G.getTraceId()["EagleEye-TraceID"],Ee[0].headers.append("EagleEye-TraceID",Ie)),Ve?ke=Ve:(ke=G.getPageviewId()["EagleEye-SessionID"],Ee[0].headers.append("EagleEye-SessionID",ke)),Je||Ee[0].headers.append("EagleEye-pAppName",De);break;case"b3":var Oe,ot=Ee[0].headers.get("X-B3-TraceId"),Ie=ot||(Oe=G.getB3TraceId(je),Ee[0].headers.append("X-B3-TraceId",Oe["X-B3-TraceId"]),Ee[0].headers.append("X-B3-ParentSpanId",Oe["X-B3-ParentSpanId"]),Ee[0].headers.append("X-B3-SpanId",Oe["X-B3-SpanId"]),Ee[0].headers.append("X-B3-Sampled",Oe["X-B3-Sampled"]),Ee[0].headers.append("X-Request-ID",V.guid()),Oe["X-B3-TraceId"]),ke=G.pageview;break;default:var at=Ee[0].headers.get("uber-trace-id");Ie=at?at.split(":")[0]:(at=G.getUberTraceId(je),Ee[0].headers.append("uber-trace-id",at["uber-trace-id"]),at.traceId),ke=G.pageview}}catch($e){V.warn(`[retcode] fetch failed to set header, exception is :
`+$e)}else switch(be.headers=be.headers||{},rt){case"arms":be.headers["EagleEye-TraceID"]?Ie=be.headers["EagleEye-TraceID"]:(Ie=G.getTraceId()["EagleEye-TraceID"],be.headers["EagleEye-TraceID"]=Ie),be.headers["EagleEye-SessionID"]?ke=be.headers["EagleEye-SessionID"]:(ke=G.getPageviewId()["EagleEye-SessionID"],be.headers["EagleEye-SessionID"]=ke),be.headers["EagleEye-pAppName"]||(be.headers["EagleEye-pAppName"]=De);break;case"b3":Ie=be.headers["X-B3-TraceId"]||(Ce=G.getB3TraceId(je),be.headers["X-B3-TraceId"]=Ce["X-B3-TraceId"],be.headers["X-B3-ParentSpanId"]=Ce["X-B3-ParentSpanId"],be.headers["X-B3-SpanId"]=Ce["X-B3-SpanId"],be.headers["X-B3-Sampled"]=Ce["X-B3-Sampled"],be.headers["X-Request-ID"]=V.guid(),Ce["X-B3-TraceId"]),ke=G.getPageviewId()["EagleEye-SessionID"];break;default:Ie=be.headers["uber-trace-id"]?be.headers["uber-trace-id"].split(":")[0]:(Ce=G.getUberTraceId(je),be.headers["uber-trace-id"]=Ce["uber-trace-id"],Ce.traceId),ke=G.getPageviewId()["EagleEye-SessionID"]}}return le.apply(fe,Ee).then(function(Ye){if(!G||!G.api)return Ye;try{if(Ye&&typeof Ye.clone=="function"){var $e=Ye.clone(),st=$e.headers;if(st&&typeof st.get=="function"){var pt,ht=st.get("content-type");if(ht&&!/(text)|(json)/.test(ht))return Ye;Ie||typeof(pt=V.parseFetchHeaders(st))=="object"&&pt["eagleeye-traceid"]&&(Ie=pt["eagleeye-traceid"],Ne="response")}var ft=pe();$e.text().then(function(ut){!Ie&&V.isFunction(Le)&&(lt=Le($e,ut))&&V.isString(lt)&&(Ie=lt);var lt=V.getFetchSnapshot(Ee,ut,st);$e.ok?me(G,re.parseResponse,we,ve,ut,$e.status||200,ft,W,Ie,ke,lt,Ne,je):(G.api(we,!1,ft,$e.status||404,$e.statusText,W,Ie,ke,lt,O,Ne,je),re.enableResource&&D.fixResourceStatus&&D.fixResourceStatus({src:$e.url,res_type:"api"}))})}return Ye}catch(ut){return V.warn("[ARMS] fetch response error :",ut),Ye}}).catch(function(Ye){var $e;throw G&&G.api&&($e=pe(),G.api(we,!1,$e,Ye.name||"Error",Ye.message,W,Ie,ke,{},O),re.enableResource)&&D.fixResourceStatus&&D.fixResourceStatus({src:ve,res_type:"api"}),Ye})},fe[A].toString=V.createFakeToString(A)),typeof fe[Z]=="function"&&(ye=fe[Z],fe[ie]=ye,(de=function(Te){var be,Ee,G,W,re,pe,ve,we,Le,Re,Ie,ke,De,Ne,We,rt,je,Ce=new ye(Te),Me=D;return Me&&Me.api&&Ce.addEventListener&&(re=Ce.send,pe=Ce.open,ve=Ce.setRequestHeader,we=Me._conf,Le=(we.ignore||{}).ignoreApis,Re=we.parseTraceId,Ie=Me.getConfig("enableLinkTrace"),Ne=De=ke="",We=null,Te=Me.getConfig("sample"),rt=Me.getConfig("linkType"),je=1,Te&&!Me.sampling(Te)&&(je=0),Ce.open=function(Ve,Je){if(he=Ve,Ve=arguments.length===1?[Ve]:Array.apply(null,arguments),pe.apply(Ce,Ve),W=Je||"",G=V.cutUrlSearch(W),Ve=!V.checkAPI(G,!0)||V.ignoreByRule(G,Le),G=G?V.filterByRule(G,W,we.ignoreApiPath||we.apiHelper):"",!Ve&&Ie){Je="";try{Je=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch{Je=""}if(Ve=V.checkSameOrigin(W,Je),(Me.getConfig("enableApiCors")||Ve)&&ve&&typeof ve=="function")switch(rt){case"arms":ke=Me.getTraceId()["EagleEye-TraceID"],ve.apply(Ce,["EagleEye-TraceID",ke]),De=Me.getPageviewId()["EagleEye-SessionID"],ve.apply(Ce,["EagleEye-SessionID",De]),Ne=Me.getConfig("pid"),ve.apply(Ce,["EagleEye-pAppName",Ne]);break;case"b3":var Oe=Me.getB3TraceId(je);ve.apply(Ce,["X-B3-TraceId",Oe["X-B3-TraceId"]]),ve.apply(Ce,["X-B3-ParentSpanId",Oe["X-B3-ParentSpanId"]]),ve.apply(Ce,["X-B3-SpanId",Oe["X-B3-SpanId"]]),ve.apply(Ce,["X-B3-Sampled",Oe["X-B3-Sampled"]]),ve.apply(Ce,["X-Request-ID",V.guid()]),ke=Oe["X-B3-TraceId"],De=Me.getPageviewId()["EagleEye-SessionID"];break;default:Oe=Me.getUberTraceId(je),ve.apply(Ce,["uber-trace-id",Oe["uber-trace-id"]]),ke=Oe.traceId,De=Me.getPageviewId()["EagleEye-SessionID"]}}},Ce.send=function(){be=Date.now(),Ee=V.duration();var Ve=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);re.apply(Ce,Ve)},V.on(Ce,"readystatechange",function(){if(G&&Ce.readyState===4){var Ve=Ee(),Je=V.getXhrSnapshot(W,he,Ce);if(ke||typeof(Oe=V.parseXhrHeaders(typeof Ce.getAllResponseHeaders=="function"&&Ce.getAllResponseHeaders()||""))=="object"&&Oe["eagleeye-traceid"]&&(ke=Oe["eagleeye-traceid"],We="response"),!ke&&V.isFunction(Re)&&(Oe=Re(Ce))&&V.isString(Oe)&&(ke=Oe),200<=Ce.status&&Ce.status<=299){var Oe=Ce.status||200;if(typeof Ce.getResponseHeader=="function"){var ot=Ce.getResponseHeader("Content-Type");if(ot&&!/(text)|(json)/.test(ot))return}Ce.responseType&&Ce.responseType!=="text"?Me.api(G,!0,Ve,Oe,"",be,ke,De,{},O,We,je):me(Me,we.parseResponse,G,W,Ce.responseText,Oe,Ve,be,ke,De,Je,We,je)}else Me.api(G,!1,Ve,Ce.status||"FAILED",Ce.statusText,be,ke,De,Je,O,We,je),we.enableResource&&D.fixResourceStatus&&D.fixResourceStatus({src:Ce.responseURL||W,res_type:"api"})}})),Ce}).prototype=ye.prototype,V.each(Object.keys(ye),function(Te){de[Te]=ye[Te]}),fe[Z]=de,fe[Z].toString=V.createFakeToString(Z))),D=this),this;var he,ye,de,le},initHook:function(){return this.hasInitHook||(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0),this}}),ce}),B}function xe(){return X||(X=1,H=function(ce,fe){function me(F,ie){var Z;fe.CustomEvent?Z=new CustomEvent(F,{detail:ie}):((Z=A.createEvent("HTMLEvents")).initEvent(F,!1,!0),Z.detail=ie),fe.dispatchEvent(Z)}function V(F){var ie=O[F];typeof ie=="function"&&(O[F]=function(de,ne,he){var de=arguments.length===1?[de]:Array.apply(null,arguments),ye=location.href,de=ie.apply(O,de);if(he&&typeof he=="string"&&he!==ye)try{var le=ye.split("#"),Te=he.split("#"),be=D.cutUrlSearch(le[0]),Ee=D.cutUrlSearch(Te[0]),G=le[1]&&le[1].replace(/^\/?(.*)/,"$1"),W=Te[1]&&Te[1].replace(/^\/?(.*)/,"$1");G!==W?me("historystatechange",W):be!==Ee&&me("historystatechange",Ee)}catch(re){D.warn("[retcode] error in "+F+": "+re)}return de},O[F].toString=D.createFakeToString(F))}var D=y(),O=fe.history||{},A=fe.document;D.ext(ce.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState||(V("pushState"),V("replaceState"),this.hasHackedHistoryState=!0),this}})}),H}function Pe(){var ce,fe;return te||(te=1,ce=y(),fe=ue().TIMING_KEYS,se=function(me,V){var D="_resource-"+Date.now(),O="_resource_error-"+Date.now();ce.ext(me.prototype,{initResource:function(){var A,F=this,ie=V.performance,Z=V.PerformanceObserver;return F[O]||(F[O]=new WeakMap),ie&&Z&&typeof ie=="object"&&typeof ie.getEntriesByType=="function"?(A=ie.getEntriesByType("resource")||[],setTimeout(function(){F.setResource(A)},10),new Z(function(ne){setTimeout(function(){F.setResource(ne.getEntries())},10)}).observe({entryTypes:["resource"]}),this.onReady(function(){setTimeout(F.resourceComboReport.bind(F),5e3)}),F):null},setResource:function(A){var F=this._conf,ie=this[O];if(ce.isArray(A)&&A.length){this[D]||(this[D]={});for(var Z=this[D],ne=0,he=A.length;ne<he;ne+=1){var ye,de=A[ne];ce.checkAPI(de.name,!1)&&(de=((le,Te,be)=>{if(le instanceof V.PerformanceResourceTiming&&le.initiatorType){var Ee,G,W,re,pe,ve,we,Le,Re,Ie=ce.getResType(le.initiatorType,le.name),ke=Te.resourceTypes||[],De=(Te.ignore||{}).ignoreResources;if(Ie&&ke.includes(Ie)&&!ce.ignoreByRule(le.name,De)&&!ce.ignoreByRule(ce.decode(le.name),De))return ke=le[fe[0]],De=le[fe[1]],Ee=le[fe[2]],G=le[fe[3]],W=le[fe[4]],re=le[fe[5]],pe=le[fe[6]],ve=le[fe[7]],we=le[fe[8]],Le=le[fe[18]],Re=le[fe[19]],(be.has(le)||ce.areInOrder(ke,De,Ee,G,W,re,pe,ve,we)&&!(ve<ke))&&ce.areInOrder(ke,Le=Le<ke?ke:Le,Re=Re<ke?De:Re,De)?{domain:ce.getURL(le.name).domain,res_type:Ie,src_type:ce.getSrcType(le.name,Te.cdnHostList),success:1,size:Math.round(le.decodedBodySize),duration:Math.round(le.duration),timeStamp:le.responseEnd,timing:le}:void 0}})(de,F,ie))&&((ye=de.res_type+"-"+de.domain)in Z||(Z[ye]=[]),Z[ye].push(de))}return this}},fixResourceStatus:function(A){var F,ie,Z=V.performance;return Z&&typeof Z.getEntriesByName=="function"?(F=this[O],A.src&&ce.checkAPI(A.src,!1)&&(ie=A.timeStamp||Z.now(),Z=Z.getEntriesByName(A.src,"resource"),ce.each(Z,function(ne){F.has(ne)||ie-ne.responseEnd<100&&F.set(ne,{success:0})})),this):null},resourceComboReport:function(){var A,F,ie=this[D]||{},Z=this._conf.resourceSlow||2e3,ne=this[O],he=(this[D]={},Object.keys(ie));he.length!==0&&(A=[],ce.each(he,function(de){var de=ie[de],le={domain:"",res_type:"",src_type:"",size:0,duration:0,count:0,err_count:0,err_duration:0,slow_count:0,slow_duration:0,timings:[]};ce.each(de,function(Te){var be=Te.timing||{},Ee=ne.get(Te.timing),Ee=Ee?Ee.success:1,G=Te.duration>Z?1:0;le.domain=Te.domain,le.res_type=Te.res_type,le.src_type=Te.src_type,le.count+=1,le.duration+=Te.duration,le.size+=Te.size,Ee||(le.err_count+=1,le.err_duration+=Te.duration),G&&(le.slow_count+=1,le.slow_duration+=Te.duration);try{var W=JSON.parse(JSON.stringify(be));W.success=Ee,W.resourceSlow=Z,W.isSlow=G,le.timings.push(W)}catch{}}),le.count&&(le.size=Math.round(le.size/le.count),le.duration=Math.round(le.duration/le.count)),le.slow_count&&(le.slow_duration=Math.round(le.slow_duration/le.slow_count)),le.err_count&&(le.err_duration=Math.round(le.err_duration/le.err_count)),20<le.timings.length&&(le.timings.sort(function(Te,be){return be.duration-Te.duration}),le.timings.length=20),le.timings=encodeURIComponent(JSON.stringify(le.timings)),A.push(le)}),he={_combo:1,resource:JSON.stringify(A)},F=V.navigator.connection,he.ct=F?F.effectiveType||F.type:"",(F=999<(F=F&&(F.downlink||F.downlinkMax||F.bandwidth)||null)?999:F)&&(he.bandwidth=F),this._lg("resource",he,this.getConfig("sample")))}})}),se}function Ae(){var ce,fe,me,V,D,O,A,F,ie,Z,ne,he,ye,de,le,Te,be,Ee;return oe||(oe=1,ce=y(),h||(h=1,de=y(),le=E(),Te=["api","success","time","code","msg","trace","traceId","begin","pv_id","sid","seq","domain","flag","apiSnapshot","tag","c1","c2","c3"],be=function(G){var W=(G.key||"default").split("::");return 1<W.length?de.ext(G,{group:W[0],key:W[1]}):de.ext(G,{group:"default_group",key:W[0]})},(Ee=function(G){var W;le.call(this,G);try{W=typeof performance=="object"?performance.timing.fetchStart:Date.now()}catch{W=Date.now()}return this._startTime=W,this}).prototype=de.createObject(le.prototype),de.ext(le.dftCon,{startTime:null}),de.ext(Ee.prototype,{constructor:Ee,_super:le,sum:function(G,W,re){try{var pe=de.dealParam(G,W,1);return this._lg("sum",be(pe),re)}catch(ve){de.warn("[retcode] can not get parseStatData: "+ve)}},avg:function(G,W,re){try{var pe=de.dealParam(G,W,0);return this._lg("avg",be(pe),re)}catch(ve){de.warn("[retcode] can not get parseStatData: "+ve)}},percent:function(G,W,re,pe){try{return this._lg("percent",be({key:G,subkey:W,val:re||0,begin:Date.now()}),pe)}catch(ve){de.warn("[retcode] can not get parseStatData: "+ve)}},msg:function(G,W){if(G&&!(180<G.length))return this.custom({msg:G},W)},error:function(G,W){if(!G)return de.warn("[retcode] invalid param e: "+G),this;arguments.length===1?(typeof G=="string"&&(G={message:G},W={}),typeof G=="object"&&(W=G=G.error||G)):(typeof G=="string"&&(G={message:G}),typeof W!="object"&&(W={}));var re,pe=G.name||"CustomError",ve=G.message||"",we=G.stack||"",Le=(W=W||{},typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"");if(de.checkSDKError(ve,W.filename))return re=G.msg||G.message,de.ignoreByRule(re,Ne=/^Script error\.?$/)||de.ignoreByRule(de.decode(re),Ne)?this:(re={msg:de.selfErrKey,err:{msg_raw:de.encode(G.msg||G.message)}},this._self("error",re,1));for(var Re={begin:Date.now(),cate:pe,msg:ve&&ve.substring(0,1e3),stack:we&&we.substring(0,1e3),file:de.removeUrlSearch(W.filename||""),line:W.lineno||"",col:W.colno||"",err:{msg_raw:de.encode(ve),stack_raw:de.encode(we)},dl:Le},Ie=["tag","c1","c2","c3"],ke=0;ke<Ie.length;ke++){var De=Ie[ke];W[De]&&(Re[De]=W[De])}var Ne=(this.getConfig("ignore")||{}).ignoreErrors;return de.ignoreByRule(Re.msg,Ne)||de.ignoreByRule(de.decode(Re.msg),Ne)?this:(this.beforeSend&&this.beforeSend("error",Re),this._lg("error",Re,1))},behavior:function(G){if(G)return G=typeof G=="object"&&G.behavior?G:{behavior:G},this.beforeSend&&this.beforeSend("behavior",G),this._lg("behavior",G,1)},api:function(G,W,re,pe,ve,we,Le,Re,Ie,ke,De,Ne,We,rt,je,Ce){return G?(G=typeof G=="string"?{api:G,success:W,time:re,code:pe,msg:ve,begin:we,traceId:Le,pv_id:Re,apiSnapshot:Ie,domain:ke,flag:Ne,tag:We,c1:rt,c2:je,c3:Ce}:de.sub(G,Te),de.checkAPI(G.api,!0)?(G.code=G.code||"",W=G.msg||"",W=typeof W=="string"?W.substring(0,1e3):W,G.msg=W,G.success=G.success?1:0,G.time=+G.time,G.begin=G.begin,G.traceId=G.traceId||"",G.pv_id=G.pv_id||"",G.domain=G.domain||"",G.flag=G.flag,G.dl=typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"",G.apiSnapshot&&(typeof G.apiSnapshot=="object"&&(G.apiSnapshot=JSON.stringify(G.apiSnapshot)),typeof G.apiSnapshot!="string"&&delete G.apiSnapshot,2e3<G.apiSnapshot.length)&&(G.apiSnapshot=G.apiSnapshot.substring(0,2e3)),De&&(G.traceOrigin=De),!G.api||isNaN(G.time)?(de.warn("[retcode] invalid time or api"),this):(re=(this.getConfig("ignore")||{}).ignoreApis,de.ignoreByRule(G.api,re)||de.ignoreByRule(de.decode(G.api),re)||G.time<0?this:(this.beforeSend&&this.beforeSend("api",G),this._lg("api",G,G.success&&this.getConfig("sample"),G.flag)))):this):(de.warn("[retcode] api is null"),this)},speed:function(G,W,re){var pe=this,ve=this.getConfig("startTime")||this._startTime;return/^s(\d|1[0])$/.test(G)?(W=typeof W!="number"?Date.now()-ve:ve<=W?W-ve:W,pe.speedCache=pe.speedCache||{},pe.speedCache[G]=W,pe.speedCache.begin=ve,clearTimeout(pe.speedTimmer),pe.speedTimmer=setTimeout(function(){re||(pe.speedCache.page=pe.getPage(!0)),pe._lg("speed",pe.speedCache),pe.speedCache=null},5e3)):de.warn("[retcode] invalid point: "+G),pe},performance:function(G){if(G&&typeof G=="object"&&!this.hasSendPerf){var W,re={},pe={},ve=this.getConfig("autoSendPerf");if(G.autoSend&&ve)return pe=de.ext(this.perfData||{},G),this.hasSendPerf=!0,this._lg("perf",pe,this.getConfig("sample"));if(G.autoSend&&!ve)return delete G.autoSend,this.perfData?(pe=de.ext(this.perfData||{},G),this.hasSendPerf=!0,this._lg("perf",pe,this.getConfig("sample"))):void(this.perfData=G);for(W in G)!/^t([1-9]|1[0])$/.test(W)&&W!=="ctti"&&W!=="cfpt"||(re[W]=G[W]);if(G.autoSend===!0||!ve&&this.perfData)return G.autoSend!==!0&&ve===!1&&this.perfData?(re=de.ext(this.perfData||{},re),this.hasSendPerf=!0,this._lg("perf",re,this.getConfig("sample"))):void 0;this.perfData=de.ext(this.perfData||{},re)}},resource:function(G,W){if(!G||!de.isPlainObject(G))return de.warn("[arms] invalid param data: "+G),this;var re,pe=Object.keys(G),ve=["begin","dom","load","res","dl"],we=!1;for(re in ve)if(pe.indexOf(ve[re])<0){we=!0;break}return we?(de.warn("[arms] lack param data: "+G),this):(G={begin:G.begin||Date.now(),dom:G.dom||"",load:G.load||"",res:de.isArray(G.res)?JSON.stringify(G.res):JSON.stringify([]),dl:G.dl||""},this._lg("res",G,W))},event:function(G,W){if(typeof G=="object"&&G&&G.key){var re,pe={},ve=["key","success","time","c1","c2","c3"];for(re in G)-1<ve.indexOf(re)&&(pe[re]=G[re]);pe.success=G.success===!1?0:1,this._lg("event",pe,W)}}}),Ee._super=le,(Ee._root=le).Reporter=Ee,v.exports=Ee),fe=v.exports,S||(S=1,ne=y(),he=typeof window=="object"?window:{},ye=typeof(ye=he.__oFetch_||he.fetch)=="function"?ye:void 0,P.exports=function(G,ve){var re,pe=-1,ve=(typeof G=="object"&&(pe=G.z,G=ne.serialize(G)),ve+G);if(ye)return ye(ve,{method:"HEAD",mode:"no-cors"}).catch(ne.noop);he.document&&he.document.createElement&&((G=he[re="__request_hold_"+pe]=new Image).onload=G.onerror=function(){he[re]=void 0},G.src=ve)}),me=P.exports,b||(b=1,ie=y(),Ee=typeof window=="object"?window:{},Z=typeof(Z=Ee.__oXMLHttpRequest_||Ee.XMLHttpRequest)=="function"?Z:void 0,C.exports=function(G,W){try{var re=new Z;re.open("POST",W,!0),re.setRequestHeader("Content-Type","text/plain"),re.send(JSON.stringify(G))}catch(pe){ie.warn(`[retcode] Failed to log, exception is :
`+pe)}}),V=C.exports,D=ce.win,O=D.document,A=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,(F=function(G){var W=this;return fe.call(W,G),W._initialPage=G.page&&ce.safetyCall(G.page,[],G.page+"")||null,W._isRobot=ce.isRobot(),W._health={errcount:0,apisucc:0,apifail:0},!(W.beforeSend=function(re,pe){re==="error"?W._health.errcount++:re==="api"&&W._health[pe.success?"apisucc":"apifail"]++})!==G.enableInstanceAutoSend&&(W.initHandler(),W.initHook(),W.initFmpObserver(1e4),W._conf&&W._conf.behavior&&typeof W.initBehavior=="function"&&W.initBehavior(),W._conf)&&W._conf.enableResource&&typeof W.initResource=="function"&&W.initResource(),Object.defineProperty&&D.addEventListener&&Object.defineProperty(W,"pipe",{set:W.sendPipe}),W}).prototype=ce.createObject(fe.prototype),ce.ext(fe._root.dftCon,{uid:null,setUsername:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],resourceHelper:[],apiHelper:{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",cdnHostList:[],resourceTypes:["css","script","img","font"],resourceSlow:2e3,disableHook:!1,autoSendPv:!0,autoSendPerf:!0,enableSPA:!1,enableLinkTrace:!1,linkType:"arms",enableApiCors:!1,sendResource:!0,behavior:!0,enableConsole:!1,parseHash:function(G){return(G?ce.cutUrlSearch(G.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(G){var W;return G&&typeof G=="object"?(W=G.code,typeof(G=G.msg||G.message||G.subMsg||G.errorMsg||G.ret||G.errorResponse||"")=="object"&&(W=W||G.code,G=G.msg||G.message||G.info||G.ret||JSON.stringify(G)),{msg:G,code:W,success:!0}):{}}}),ce.ext(F.prototype,{constructor:F,_super:fe,onReady:function(G){var W=this;if(W.hasReady)return G();O.readyState==="complete"?(W.hasReady=!0,G()):ce.on(D,"load",function(){W.hasReady=!0,G()},!0)},getPage:function(G){var W=this._conf,re=W.page,pe=location,ve=pe.host+pe.pathname;return re&&!G?ce.safetyCall(re,[],re+""):this._initialPage||ce.filterByRule(W.ignoreUrlCase?ve.toLowerCase():ve,pe.href,W.ignoreUrlPath||W.urlHelper)},setPage:function(G,W){var re=this,pe=re.prevPage;if(W!==!1){if(!G||G===pe)return re;re.prevPage=G,clearTimeout(re.sendPVTimmer),re.handleUnload(1),re.resetPageview(),re.sendPVTimmer=setTimeout(function(){re.sendPV()},10)}else re.prevPage=G;return re._conf.page=G,re},setConfig:function(G,W){var re;G&&typeof G=="object"&&(ce.verifyConfig(G),G=this.setImgUrl(G),re=this._conf,this._conf=ce.ext({},re,G),W||((W="disableHook")in G&&re[W]!==G[W]&&(G[W]?this.removeHook():this.addHook()),(W="enableSPA")in G&&re[W]!==G[W]&&this.bindHashChange(G[W])))},sendRequest:function(G){me(G,this.getConfig("imgUrl"))},postData:function(G,pe){var re={},pe=(re[pe]=G[pe],delete G[pe],"");typeof G=="object"&&(pe=ce.serialize(G)),V(re,this.getConfig("imgUrl")+pe+"&post_res=")},sendPipe:function(G){var W,re=this;if(!G||!G.length)return re;try{return ce.T(G[0])==="Array"?ce.each(G,function(pe){return re.sendPipe(pe)}):ce.T(G)==="Array"&&(W=G.shift(),A.test(W))?void re[W].apply(re,G):re}catch(pe){return ce.warn("[retcode] error in sendPipe",pe),re}},sendHealth:function(){var G=ce.ext({},this._health),W=(G.healthy=0<G.errcount?0:1,G.begin=Date.now(),G.begin-this.sBegin);G.stay=W,this._lg("health",G,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(G){G=ce.ext({pid:this._conf.pid},G);var W=this.__proto__.constructor(G);return G.page&&W.sendPV(),W}}),L()(F,D),ge()(F,D,O),_e()(F,D,O),Se()(F,D),xe()(F,D),Pe()(F,D),F._super=fe,F._root=fe._root,fe.Browser=F,f.exports=F),f.exports}var Ge={getArmsLogger:function(){return J||(J=1,fe=window,me=fe.BrowserLogger=Ae(),V=y().key,D="__hasInitBlSdk",me.singleton=function(F,ie){return fe[D]?fe[V]:ce(F,ie)},me.createExtraInstance=function(ie){ie&&typeof ie=="object"&&ie.enableInstanceAutoSend!==!0&&(ie.enableInstanceAutoSend=!1);var ie=new me(ie),Z=ie._conf;return Z.enableInstanceAutoSend&&(Z.autoSendPv!==!1&&ie.sendPV(),Z&&Z.useFmp||ie.sendPerformance(),Z)&&Z.sendResource&&ie.sendResources(),ie},typeof window=="object"&&window.navigator&&fe[V]&&(me.bl=fe[D]?fe[V]:(O={},A=[],V in fe&&(O=fe[V].config||{},A=fe[V].pipe||[]),ce(O,A))),c.exports=me),c.exports;function ce(F,ie){return F=fe[V]=new me(F),F.sendPipe(ie),ie=F._conf,ie.autoSendPv!==!1&&F.sendPV(),ie&&ie.useFmp||F.sendPerformance(),ie&&ie.sendResource&&F.sendResources(),fe[D]=!0,F}var fe,me,V,D,O,A}};let Qe="https://arms-retcode.aliyuncs.com/r.png?",Xe="https://arms-retcode-sg.aliyuncs.com/r.png?",Ue="https://retcode-us-west-1.arms.aliyuncs.com/r.png?",qe="e1iftji1w7@7ec1cef2cc88733",Ze="e1iftji1w7@10a06d1ec260adc",Fe="e1iftji1w7@10a06d1ec260adc",He={cn:{reportUrl:Qe,pid:qe},"cn-hangzhou":{reportUrl:Qe,pid:qe},sg:{reportUrl:Xe,pid:Ze},"ap-southeast-1":{reportUrl:Xe,pid:Ze},usw:{reportUrl:Ue,pid:Fe},"us-west-1":{reportUrl:Ue,pid:Fe}},Ke=ce=>ce!==null&&typeof ce=="object",Be=ce=>Object.prototype.toString.call(ce).slice(8,-1),tt=ce=>!!Object.isExtensible(ce)&&Be(ce)==="Object";function et(ce,fe){if(typeof ce=="string"&&(fe=ce.indexOf(fe),!(fe<0)))return(ce=ce.indexOf(`
`))<0||fe<ce}function ze(ce,fe,me){{if(typeof ce=="function")return F=fe+1,ie=me,Z={MediaboxWrapperFunctionApply(ne,he,ye){let de;try{de=Reflect.apply(ne,he,ye)}catch(le){throw ie(le),le}return ze(de,F,ie)},MediaboxWrapperFunctionGet(ne,he){var ye=Object.getOwnPropertyDescriptor(ne,he);return!ye||ye.writable||ye.configurable?ze(ne[he],F,ie):ne[he]},MediaboxWrapperClassConstructor(ne,he){let ye;try{ye=new ne(...he)}catch(de){throw ie(de),de}return ze(ye,F,ie)}},new Proxy(ce,{apply:Z.MediaboxWrapperFunctionApply,get:Z.MediaboxWrapperFunctionGet,construct:Z.MediaboxWrapperClassConstructor});if(ce instanceof Promise)return ce.then(ne=>ze(ne,fe+1,me)).catch(ne=>(me(ne),Promise.reject(ne)));if(Array.isArray(ce))ce.forEach((ne,he)=>{ce[he]=ze(ne,fe+1,me)});else if(Ke(ce)&&tt(ce)){Z=ce;var V=fe+1,D=me,O;if(Reflect.get(Z,"__v_skip")===!0)return Z;let ne=[],he=typeof Object.getOwnPropertyDescriptors=="function"?Object.getOwnPropertyDescriptors((A=Object.getPrototypeOf(Z))!=null?A:{}):{};for(O of Object.keys(he))he[O].get&&ne.push(O);var A={MediaboxWrapperObjectGetter(ye,de){if(typeof de=="string"&&-1<ne.indexOf(de)){let Te;try{Te=ye[de]}catch(be){throw D(be),be}return ze(Te,V,D)}var le;return!(10<V)&&(!(le=Reflect.getOwnPropertyDescriptor(ye,de))||le.writable||le.configurable)?ze(ye[de],V,D):ye[de]},MediaboxWrapperObjectSetter(ye,de,le){return ye[de]=ze(le,V,D),!0}};return Object.defineProperty(Z,"__v_skip",{configurable:!0,enumerable:!1,writable:!1,value:!0}),new Proxy(Z,{get:A.MediaboxWrapperObjectGetter,set:A.MediaboxWrapperObjectSetter})}return ce}var F,ie,Z}function nt(ce){return typeof ce=="string"&&(-1<ce.indexOf("g.alicdn.com/apsara-media-")||-1<ce.indexOf("g.alicdn.com/thor-server")||-1<ce.indexOf("MediaboxWrapper"))}class ct extends Error{constructor(fe){super(fe),this.name="MQTError"}}let dt=1;class it{constructor(fe){var me,V;g(this,"armsLogger"),g(this,"isReady",!1),g(this,"isDestroyed",!1),g(this,"options"),g(this,"queue",[]),g(this,"marker"),g(this,"helper",{MediaboxWrapperQueue(D){return new ct(D)},MediaboxWrapperInitiative(D){return new ct(D)}}),this.options=(V=s({},fe),fe={region:fe.deferRegionSet?void 0:(me=fe.region)!=null?me:"cn",env:(me=fe.env)!=null?me:"prod"},l(V,n(fe))),this.marker=`-${dt++}-`,this.initArmsLogger()}static get version(){return"0.26.0"}initArmsLogger(fe){var{region:me,env:V,disabled:D}=this.options;if(!D&&!this.armsLogger){if(fe&&!me)throw new Error("region is required");if(me){if(!He[me])throw new Error(`region ${me} is not supported`);D=Ge.getArmsLogger(),this.armsLogger=D.createExtraInstance({enableInstanceAutoSend:!0,pid:He[me].pid,tag:this.options.businessName,release:this.options.businessName+"_"+this.options.version,imgUrl:He[me].reportUrl,behavior:!0,sample:1,disableHook:!0,environment:V,beforeReport:O=>{var A;if(!(this.isDestroyed||et(O.stack,this.marker)||O.t!=="pv"&&O.t!=="error"&&O.t!=="health")){if(O.c1=(A=this.options.cid)!=null?A:window.location.host,O.c2=it.version,this.options.customData&&(O.c3=new URLSearchParams(this.options.customData).toString()),O.t!=="error")return O;if(typeof(A=O.file)=="string"&&(-1<A.indexOf("g.alicdn.com/apsara-media-")||-1<A.indexOf("g.alicdn.com/thor-server"))||nt(O.stack)){let F=O;return this.options.beforeSend&&(F=this.options.beforeSend(O)),this.isReady?F:(F&&this.queue.push(F),!1)}}return!1}})}}}wrap(fe){return this.options.disabled||typeof Proxy>"u"?fe:ze(fe,0,me=>{var V,D;me instanceof Error&&typeof me.stack=="string"&&nt(me.stack)&&((V=this.armsLogger)!=null&&V.error(me),me.stack=(V=me.stack,me=this.marker,typeof V!="string"?me:et(V,me)?V:(D=V.indexOf(`
`))<0?""+V+me:""+V.slice(0,D)+me+V.slice(D)))})}updateOptions(fe){this.options=s(s({},this.options),fe)}setReady(){this.initArmsLogger(!0),this.isReady=!0,this.queue.length&&this.queue.forEach(fe=>{var me;(me=this.armsLogger)!=null&&me.error(this.helper.MediaboxWrapperQueue(fe.msg),{filename:fe.file,lineno:fe.line,colno:fe.col})})}report(fe,me){var V;(V=this.armsLogger)!=null&&V.error(this.helper.MediaboxWrapperInitiative(fe),me)}destroy(){this.isDestroyed=!0}}j.MediaboxQualityTracer=it,j.default=it},{}],2:[function(x,m,j){var w=x("@aliyun-sls/web-types");function p(D,O,A){Object.defineProperty(D,O,{writable:!0,enumerable:!0,configurable:!0,value:A})}function d(D,O,A){try{return D.apply(O,A)}catch{}}function l(){}var n=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,g=(D,O,A)=>O in D?n(D,O,{enumerable:!0,configurable:!0,writable:!0,value:A}):D[O]=A;function c(D){return typeof D=="number"}function f(D,O){return+D.toFixed(O)}function y(D){return D?(parseInt(D,10)^16*Math.random()>>parseInt(D,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,y)}function _(D=20){for(var O,A,F=new Array(D),ie=Date.now().toString(36).split("");0<D--;)A=(O=36*Math.random()|0).toString(36),F[D]=O%3?A:A.toUpperCase();for(var Z=0;Z<8;Z++)F.splice(3*Z+2,0,ie[Z]);return F.join("")}function u(D,O){return(...A)=>{try{return D(...A)}catch(F){console.error(O,F)}}}function r(D){return D.host.startsWith("http://")||D.host.startsWith("https://")?D.host+"/logstores/"+D.logstore+(D.stsPlugin?"":"/track?APIVersion=0.6.0"):"https://"+D.project+"."+D.host+"/logstores/"+D.logstore+(D.stsPlugin?"":"/track?APIVersion=0.6.0")}let h=/^(?:([^:\/?#]+):\/\/)?((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?)?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i;function v(D,O,...A){return!(O==null||!Array.isArray(O))&&O.some(F=>{if(typeof F=="function")try{return F(D,...A)}catch(ie){return console.error("user function callback threw an error:",ie),!1}return typeof F=="string"?D.includes(F):Object.prototype.toString.call(F)==="[object RegExp]"&&F.test(D)})}function T(D){var O=Date.now()-performance.now();return O>k()?Math.round(O+D):P(D)}function E(){return Date.now()}function S(){return performance.now()}function P(D){return Math.round(k()+D)}let b;function k(){return b=b===void 0?performance.timing.navigationStart:b}let I="?";function C(D,O){let A;O=O===void 0?0:+O;try{if(A=(F=>{var ie=N(F,"stacktrace");if(ie){var Z=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ne=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,he=ie.split(`
`),ye=[];let de;for(let le=0;le<he.length;le+=2){let Te;Z.exec(he[le])?(de=Z.exec(he[le]),Te={args:[],column:void 0,func:de[3],line:+de[1],url:de[2]}):ne.exec(he[le])&&(de=ne.exec(he[le]),Te={args:de[5]?de[5].split(","):[],column:+de[2],func:de[3]||de[4],line:+de[1],url:de[6]}),Te&&(!Te.func&&Te.line&&(Te.func=I),Te.context=[he[le+1]],ye.push(Te))}if(ye.length)return{stack:ye,message:N(F,"message"),name:N(F,"name")}}})(D))return A}catch{}try{if(A=(F=>{var ie=N(F,"stack");if(ie){var Z=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ne=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,he=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;let Ee;var ye=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,de=/\((\S*)(?::(\d+))(?::(\d+))\)/,le=ie.split(`
`),Te=[];let G,W,re;for(let pe=0,ve=le.length;pe<ve;pe+=1){if(Z.exec(le[pe])){var be=(W=Z.exec(le[pe]))[2]&&W[2].indexOf("native")===0;Ee=W[2]&&W[2].indexOf("eval")===0,G=de.exec(W[2]),Ee&&G&&(W[2]=G[1],W[3]=G[2],W[4]=G[3]),re={args:be?[W[2]]:[],column:W[4]?+W[4]:void 0,func:W[1]||I,line:W[3]?+W[3]:void 0,url:be?void 0:W[2]}}else if(he.exec(le[pe]))W=he.exec(le[pe]),re={args:[],column:W[4]?+W[4]:void 0,func:W[1]||I,line:+W[3],url:W[2]};else{if(!ne.exec(le[pe]))continue;W=ne.exec(le[pe]),Ee=W[3]&&-1<W[3].indexOf(" > eval"),G=ye.exec(W[3]),Ee&&G?(W[3]=G[1],W[4]=G[2],W[5]=void 0):pe!==0||W[5]||F.columnNumber===void 0||(Te[0].column=F.columnNumber+1),re={args:W[2]?W[2].split(","):[],column:W[5]?+W[5]:void 0,func:W[1]||I,line:W[4]?+W[4]:void 0,url:W[3]}}!re.func&&re.line&&(re.func=I),Te.push(re)}if(Te.length)return{stack:Te,message:N(F,"message"),name:N(F,"name")}}})(D))return A}catch{}try{if(A=(F=>{var ie=N(F,"message");if(ie){var Z=ie.split(`
`);if(!(Z.length<4)){var ne,he,ye=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,de=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,le=/^\s*Line (\d+) of function script\s*$/i,Te=[],be=window&&window.document&&window.document.getElementsByTagName("script"),Ee=[];let G;for(ne in be)((W,re)=>Object.prototype.hasOwnProperty.call(W,re))(be,ne)&&!be[ne].src&&Ee.push(be[ne]);for(let W=2;W<Z.length;W+=2){let re;ye.exec(Z[W])?(G=ye.exec(Z[W]),re={args:[],column:void 0,func:G[3],line:+G[1],url:G[2]}):de.exec(Z[W])?(G=de.exec(Z[W]),re={args:[],column:void 0,func:G[4],line:+G[1],url:G[3]}):le.exec(Z[W])&&(G=le.exec(Z[W]),he=window.location.href.replace(/#.*$/,""),re={url:he,args:[],column:void 0,func:"",line:+G[1]}),re&&(re.func||(re.func=I),re.context=[Z[W+1]],Te.push(re))}if(Te.length)return{stack:Te,message:Z[0],name:N(F,"name")}}}})(D))return A}catch{}try{if(A=L(D,1+O))return A}catch{}return{message:N(D,"message"),name:N(D,"name"),stack:[]}}function L(D,O){var A,F,ie=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,Z=[],ne={};let he=!1;for(let ye=L.caller;ye&&!he;ye=ye.caller)ye!==C&&(F={args:[],column:void 0,func:I,line:void 0,url:void 0},A=ie.exec(ye.toString()),ye.name?F.func=ye.name:A&&(F.func=A[1]),F.func===void 0&&(F.func=A?A.input.substring(0,A.input.indexOf("{")):void 0),ne[ye.toString()]?he=!0:ne[ye.toString()]=!0,Z.push(F));return O&&Z.splice(0,O),O={stack:Z,message:N(D,"message"),name:N(D,"name")},((ye,de,le)=>{if((de={url:de,line:le?+le:void 0}).url&&de.line){if(ye.incomplete=!1,le=ye.stack,0<le.length&&le[0].url===de.url){if(le[0].line===de.line)return;if(!le[0].line&&le[0].func===de.func)return le[0].line=de.line,le[0].context=de.context}le.unshift(de),ye.partial=!0}else ye.incomplete=!0})(O,N(D,"sourceURL")||N(D,"fileName"),N(D,"line")||N(D,"lineNumber")),O}function N(D,O){return typeof D=="object"&&D&&O in D&&typeof(D=D[O])=="string"?D:void 0}function U(D,O,A){function F(){return Z.apply(this,arguments)}let ie=D[O],Z=A(ie);return D[O]=F,{stop:()=>{D[O]===F?D[O]=ie:Z=ie}}}function Y(D,O,{before:A,after:F}){return U(D,O,ie=>function(){var Z=arguments;let ne;return A&&d(A,this,Z),typeof ie=="function"&&(ne=ie.apply(this,Z)),F&&d(F,this,Z),ne})}let z=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function K(D){return`${D.name||"Error"}: `+D.message}function M(D){return D.filter(O=>O.url==null||!O.url.includes("sls-rum.js"))}function q(D){let O=K(D);return D.stack.forEach(A=>{var F=A.func==="?"?"<anonymous>":A.func,ie=A.args&&0<A.args.length?`(${A.args.join(", ")})`:"",Z=A.line?":"+A.line:"",ne=A.line&&A.column?":"+A.column:"";O+=`
  at ${F}${ie} @ `+A.url+Z+ne}),encodeURIComponent(O)}let ee=8,Q=16,B="traceparent",R="uber-trace-id",H="X-B3-TraceId",X="X-B3-SpanId",se=Array(32);function te(D){for(let O=0;O<2*D;O++)se[O]=Math.floor(16*Math.random())+48,58<=se[O]&&(se[O]+=39);return String.fromCharCode.apply(null,se.slice(0,2*D))}function oe(){return te(Q)}function J(){return te(ee)}function ae(D,O){return D+`-${O}-1`}function ue(D,O){return`00-${D}-${O}-01`}function ge(D,O){return D+`:${O}:0:1`}let _e={b3:{name:"b3",getter:ae},traceparent:{name:B,getter:ue},uber:{name:R,getter:ge}};function Se(D,O,A){D!=null&&Object.keys(D).map(F=>{A==null||A==""?O[F]=D[F]:O[A+"."+F]=D[F]})}var xe=Object.defineProperty,Pe=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Ue=(D,O,A)=>O in D?xe(D,O,{enumerable:!0,configurable:!0,writable:!0,value:A}):D[O]=A,qe=(D,O)=>{for(var A in O=O||{})Qe.call(O,A)&&Ue(D,A,O[A]);if(Ge)for(var A of Ge(O))Xe.call(O,A)&&Ue(D,A,O[A]);return D};function Ze(){return{name:w.InternalPlugin.BASE_TRANSFORM,run:function(){this.subscribe("*",(F,O)=>{var A,{otBase:F,extra:ie}=F,Z=(F.service=this.options.service,F.attribute=(A=qe(qe({},(A=this.options.attribute)!=null?A:{}),F.attribute),Z={sid:this.session.getSessionId(),pid:this.session.getPageId(),uid:this.options.uid},Pe(A,Ae(Z))),this.options.nickname&&(F.attribute.nickname=this.options.nickname),Se(this.options.custom,F.attribute,"custom"),F.resource=qe(qe({},(A=this.options.resource)!=null?A:{}),F.resource),Se({"uem.sdk.version":"0.3.8",workspace:this.options.workspace,"deployment.environment":this.options.env},F.resource),this.options.namespace&&(F.resource["service.namespace"]=this.options.namespace),this.options.version&&(F.resource["service.version"]=this.options.version),{otBase:F,extra:ie});w.InternalPlugin.BASE_TRANSFORM,O(Z)},w.InternalPluginPriority[w.InternalPlugin.BASE_TRANSFORM])}}}class Fe{constructor(O){this.subscribeMap={},this.allNotifiers=[],this.allNotifiers=O}subscribeOne(O,A,F,ie){var Z=(Z=this.subscribeMap[A])!=null?Z:[];(this.subscribeMap[A]=Z).push({name:O,priority:ie,callback:F}),Z.sort((ne,he)=>ne.priority-he.priority)}notify(O,A){O=(O=this.subscribeMap[O])!=null?O:[],function F(ie,Z,ne){if(!(Z<0)){let he=de=>{F(ie,Z-1,de)},ye=ie[Z];u(()=>{ye.callback.call(void 0,ne,he)},"plugin notify run error")()}}(O,O.length-1,A)}subscribe(O,A,F,ie){if(A==="*")for(let ne=0;ne<this.allNotifiers.length;ne++){var Z=this.allNotifiers[ne];O!==Z&&this.subscribeOne(O,Z,F,ie)}else this.subscribeOne(O,A,F,ie)}getSubscribeMap(){return this.subscribeMap}}var He=Object.defineProperty,Ke=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,nt=(D,O,A)=>O in D?He(D,O,{enumerable:!0,configurable:!0,writable:!0,value:A}):D[O]=A;let ct=["uid","nickname","env","service","version","custom","namespace"];class dt{constructor(O){var A;this.isInit=!1,this.pendingPlugins=[],this.pluginMap={},this.session=(()=>{let F=oe(),ie=J();return{getSessionId:()=>F,getPageId:()=>ie,refreshPageId:()=>{ie=J()}}})(),this.options=O,this.use({name:w.InternalPlugin.LOG_SEND,run:function(){}}),this.use(Ze()),this.options.env=(A=O.env)!=null?A:"prod",this.options.version=(A=O.version)!=null?A:"-"}initPlugin(O){if(O==null||typeof O!="object")console.error("plugin is not a object");else if(O.name==null||O.name==="")console.error("plugin name is required.");else if(this.pluginMap[O.name])console.error(`plugin name: ${O.name} is conflict`);else if(typeof O.run!="function")console.error("plugin.run is not a function");else{A=((ie,Z)=>{for(var ne in Z=Z||{})et.call(Z,ne)&&nt(ie,ne,Z[ne]);if(tt)for(var ne of tt(Z))ze.call(Z,ne)&&nt(ie,ne,Z[ne]);return ie})({},this.context);let F=Ke(A,Be({subscribe:(ie,Z,ne)=>{this.sub.subscribe(O.name,ie,Z,ne)},notify:ie=>{this.sub.notify(O.name,ie)}}));var A;u(()=>O.run.call(F),`plugin ${O.name} init failed`)()}}addLog(O){this.isInit?(Se(O,O={t:w.WebEventType.LOG},w.WebEventType.LOG),O={start:1e3*E(),attribute:O,resource:{}},this.sub.notify(w.InternalPlugin.LOG_SEND,{otBase:O,extra:{}})):console.error("log should call after start")}setOptions(O){this.isInit?ct.forEach(A=>{O[A]!==this.options[A]&&O[A]!=null&&O[A]!=""&&(this.options[A]=O[A],A==="uid")&&typeof this.setLocalStorage=="function"&&this.setLocalStorage(w.SLS_TRACE_UID_KEY,O[A])}):console.error("setOptions should call after start")}start(){if(!this.isInit){this.isInit=!0;let F=this.options.uid;F!=null&&F!==""||(F=typeof this.getLocalStorage=="function"?this.getLocalStorage(w.SLS_TRACE_UID_KEY):F)!=null&&F!==""||(F=_()),this.options.uid=F,typeof this.setLocalStorage=="function"&&this.setLocalStorage(w.SLS_TRACE_UID_KEY,F);var O,A=this.pendingPlugins.map(ie=>ie==null?void 0:ie.name).filter(ie=>ie!=null);this.sub=new Fe(A),this.context={options:this.options,session:this.session};for(O of this.pendingPlugins)this.initPlugin(O)}}use(O){this.isInit?console.error(`plugin: ${O==null?void 0:O.name} use should run before start`):this.pendingPlugins.push(O)}}var it=Object.defineProperty,ce=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,V=(D,O,A)=>O in D?it(D,O,{enumerable:!0,configurable:!0,writable:!0,value:A}):D[O]=A;j.ONE_DAY=864e5,j.ONE_HOUR=36e5,j.ONE_KILO_BYTE=1024,j.ONE_MINUTE=6e4,j.ONE_SECOND=1e3,j.ONE_YEAR=31536e6,j.Observable=class{constructor(D){this.onFirstSubscribe=D,this.observers=[]}subscribe(D){return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(D),{unsubscribe:()=>{this.observers=this.observers.filter(O=>D!==O),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(D){this.observers.forEach(O=>O(D))}},j.SDK_VERSION="0.3.8",j.SLSClient=dt,j.Subscribe=class{constructor(){this.dep=new Map}subscribe(D,O){var A=this.dep.get(D);A?this.dep.set(D,A.concat(O)):this.dep.set(D,[O])}notify(D,O){var A=this.dep.get(D);D&&A&&A.forEach(F=>{try{F(O)}catch(ie){console.error(ie)}})}},j.assembleOTAttribute=Se,j.buildHttpInfo=function(D,O,A,F){return D={url:D,method:O,status_code:A},F==null?D:(O=((ie,Z)=>{for(var ne in Z=Z||{})o.call(Z,ne)&&g(ie,ne,Z[ne]);if(a)for(var ne of a(Z))s.call(Z,ne)&&g(ie,ne,Z[ne]);return ie})({},D),A={host:F.host,scheme:F.protocol},t(O,e(A)))},j.callMonitored=d,j.catchUserErrors=u,j.clocksNow=function(){return{relative:S(),timeStamp:E()}},j.clocksOrigin=function(){return{relative:0,timeStamp:k()}},j.computeStackTrace=C,j.createHandlingStack=function(){let D=new Error,O;return d(()=>{var A=C(D);A!=null&&A.stack&&(A.stack=M(A.stack)),O=q(A)}),O},j.currentDrift=function(){return Math.round(Date.now()-(k()+performance.now()))},j.debugLog=l,j.defineGlobal=function(D,O,A,F){F?F(()=>{p(D,O,A)}):p(D,O,A)},j.defineGlobalValue=p,j.elapsed=function(D,O){return O-D},j.formatErrorMessage=K,j.formatUnknownError=function(D,O,A,F=!0){return D&&(D.message!==void 0||O instanceof Error)?(D!=null&&D.stack&&F&&(D.stack=M(D.stack)),O=(A=D==null?void 0:D.stack)==null?void 0:A[0],{message:encodeURIComponent(D.message||"Empty message"),stacktrace:q(D),type:D.name,col:O?O.column:void 0,line:O?O.line:void 0,file:encodeURIComponent(O&&O.url?O.url:""),id:y()}):{message:A+" "+JSON.stringify(O),stacktrace:"",type:D&&D.name,id:y()}},j.genUid=_,j.generateSpanId=J,j.generateTraceId=oe,j.generateUUID=y,j.getB3Header=ae,j.getConsoleLogStatus=function(){return!1},j.getCorrectedTimeStamp=T,j.getInternalUrl=r,j.getJaegerTraceHeaderr=ge,j.getRelativeTime=function(D){return D-k()},j.getTimeStamp=P,j.getW3CTraceHeader=ue,j.includes=function(D,O){return D.indexOf(O)!==-1},j.instrumentMethod=U,j.instrumentMethodAndCallOriginal=Y,j.isError=function(D){return Object.prototype.toString.call(D)==="[object Error]"},j.isInternalUrl=function(D,O){return D.includes("/track?APIVersion=0.6.0")||D===r(O)},j.isNumber=c,j.isString=function(D){return Object.prototype.toString.call(D)==="[object String]"},j.isURL=function(D){return typeof D=="string"&&h.test(D)},j.looksLikeRelativeTime=function(D){return D<31536e6},j.makeWebPublicApi=function(D,O){let A,F={current:void 0},ie=[],Z={};return((ne,he)=>{for(var ye in he=he||{})fe.call(he,ye)&&V(ne,ye,he[ye]);if(ce)for(var ye of ce(he))me.call(he,ye)&&V(ne,ye,he[ye]);return ne})({init:ne=>{if(F.current==null){F.current=D(ne);let he=F.current;ie.forEach(ye=>{he.use(ye)}),he.start()}},use:ne=>{ie.push(ne)},addLog:ne=>{var he=F.current;he&&he.addLog(ne)},onReady(ne){ne()},setOptions:ne=>{var he=F.current;he&&he.setOptions(ne)}},Z=typeof O=="function"?(A=O(F))!=null?A:{}:Z)},j.matchCondition=v,j.matchSample=function(D){return D!==0&&Math.random()<=D},j.matchWithDefault=function(D,O){return D==null?O:!!D},j.monitor=function(D){return function(){return d(D,this,arguments)}},j.noop=function(){},j.parseUri=function(D){var O,A;return(D=(F=>{try{return decodeURIComponent(F)}catch{return unescape(F)}})(D||"").match(h))==null?null:(A=(O=(D[3]||"").split(":")).length?(D[2]||"").replace(/(.*\@)/,""):D[2],{uri:D[0],protocol:D[1],host:A,hostname:D[4],port:D[5],auth:D[3],user:O[0],password:O[1],path:D[6],search:D[7],hash:D[8]})},j.patchHeaderOnRequest=function(D,O,A,F,ie,Z="headers"){var ne=A??{};ne[Z]=(A=ne[Z])!=null?A:{},ne[Z].constructor.name==="Headers"?(ne[Z].append("b3",ae(D,O)),ne[Z].append(B,ue(D,O)),ne[Z].append(R,ge(D,O)),ie&&ne[Z].append(H,D),ie&&ne[Z].append(X,O)):(ne[Z].b3=ae(D,O),ne[Z][B]=ue(D,O),ne[Z][R]=ge(D,O),ie&&(ne[Z][H]=D),ie&&(ne[Z][X]=O));try{if(F)if(F instanceof Function){var he=u(F,"run customTraceHeaders func error.")(D,O);if(he)for(var[ye,de]of Object.entries(he))ne[Z].constructor.name==="Headers"?ne[Z].append(ye,de):ne[Z][ye]=de}else for(var[le,Te]of Object.entries(F))_e[Te]&&(ne[Z].constructor.name==="Headers"?ne[Z].append(le,_e[Te].getter(D,O)):ne[Z][le]=_e[Te].getter(D,O))}catch(be){console.error("Failed utilizing customTraceHeaders.",be)}return ne},j.patchHeaderOnXhr=function(D,O,A,F,ie){D.setRequestHeader("b3",ae(O,A)),D.setRequestHeader(B,ue(O,A)),D.setRequestHeader(R,ge(O,A)),ie&&D.setRequestHeader(H,O),ie&&D.setRequestHeader(X,A);try{if(F)if(F instanceof Function){var Z=u(F,"run customTraceHeaders func error.")(O,A);if(Z)for(var[ne,he]of Object.entries(Z))D.setRequestHeader(ne,he)}else for(var[ye,de]of Object.entries(F))_e[de]&&D.setRequestHeader(ye,_e[de].getter(O,A))}catch(le){console.error("Failed utilizing customTraceHeaders.",le)}},j.relativeNow=S,j.relativeToClocks=function(D){return{relative:D,timeStamp:T(D)}},j.resetNavigationStart=function(){b=void 0},j.round=f,j.shouldTrace=function(D,O){return O==null||v(D,O)},j.shouldTrackBody=function(D,O,A){return D!==!1&&(D===!0||D==="error"&&!A||typeof D=="function"&&u(D,"call shouldTrackBody failed")(O))},j.startUnhandledErrorCollection=function(D){let O=(A=D,Y(window,"onerror",{before(Z,ne,he,ye,de){let le;if(de)le=C(de),A(le,de);else{de={url:ne,column:ye,line:he};let Te,be=Z;({}).toString.call(Z)==="[object String]"&&(ne=z.exec(be))&&(Te=ne[1],be=ne[2]),le={name:Te,message:typeof be=="string"?be:void 0,stack:[de]},A(le,Z)}}})).stop;var A,F;let ie=(F=D,Y(window,"onunhandledrejection",{before(ne){var ne=ne.reason||"Empty reason",he=C(ne);F(he,ne)}})).stop;return{stop:()=>{O(),ie()}}},j.throttle=function(D,O){let A=!0;return function(...F){A&&(D.apply(this,F),A=!1,setTimeout(()=>{A=!0},O))}},j.timeStampNow=E,j.toServerDuration=function(D){return c(D)?f(1e6*D,0):D},j.toStackTraceString=q},{"@aliyun-sls/web-types":5}],3:[function(x,m,j){class w{constructor(d){this.total=0,this.count=0,this.peddings=[],this.total=d}append(d){this.peddings.push(d),this.run()}run(){var d;!this.peddings.length||this.count>=this.total||(d=this.peddings.shift())&&(this.count++,d().finally(()=>{this.count--,this.run()}))}}m.exports=class{constructor(p){var d;this.timer=null,this.time=10,this.count=10,this.arr=[],this.time=(d=p.time)!=null?d:10,this.count=(d=p.count)!=null?d:10,this.ccController=new w((d=p.maxReqCount)!=null?d:10),p.host.startsWith("http://")||p.host.startsWith("https://")?this.url=p.host+"/logstores/"+p.logstore+"/track":this.url="https://"+p.project+"."+p.host+"/logstores/"+p.logstore+"/track",(this.opt=p).installUnloadHook&&typeof p.installUnloadHook=="function"&&p.installUnloadHook(()=>{this.sendImmediateInner()})}assemblePayload(p){return p={__logs__:p},this.opt.tags&&(p.__tags__=this.opt.tags),this.opt.topic&&(p.__topic__=this.opt.topic),this.opt.source&&(p.__source__=this.opt.source),JSON.stringify(p)}platformSend(){if(this.opt.sendPayload&&typeof this.opt.sendPayload=="function"){let p=this.assemblePayload(this.arr);this.ccController.append(()=>this.opt.sendPayload(this.url,p))}}transString(p){var d,l={};for(d in p)typeof p[d]=="object"?l[d]=JSON.stringify(p[d]):l[d]=String(p[d]);return l}sendImmediateInner(){this.arr&&0<this.arr.length&&(this.platformSend(),this.timer!=null&&(clearTimeout(this.timer),this.timer=null),this.arr=[])}sendInner(){if(this.timer)this.arr.length>=this.count&&(clearTimeout(this.timer),this.timer=null,this.sendImmediateInner());else{let p=this;this.arr.length>=this.count||this.time<=0?this.sendImmediateInner():this.timer=setTimeout(function(){p.sendImmediateInner()},1e3*this.time)}}send(p){p=this.transString(p),this.arr.push(p),this.sendInner()}sendImmediate(p){p=this.transString(p),this.arr.push(p),this.sendImmediateInner()}sendBatchLogs(p){p=p.map(d=>this.transString(d)),this.arr.push(...p),this.sendInner()}sendBatchLogsImmediate(p){p=p.map(d=>this.transString(d)),this.arr.push(...p),this.sendImmediateInner()}overwriteTransString(p){this.transString=p.transString}getOpt(){return this.opt}}},{}],4:[function(p,m,j){var w=p("@aliyun-sls/web-base"),p=p("@aliyun-sls/web-track-base"),d=(e,a,o)=>new Promise((s,g)=>{var c=_=>{try{y(o.next(_))}catch(u){g(u)}},f=_=>{try{y(o.throw(_))}catch(u){g(u)}},y=_=>_.done?s(_.value):Promise.resolve(_.value).then(c,f);y((o=o.apply(e,a)).next())});function l(e,a){var o=new window.XMLHttpRequest;o.open("POST",e+"?APIVersion=0.6.0",!0),o.send(a)}function n(e,a){try{32768<=a.length?l(e,a):(o=e,s=a,navigator&&navigator.sendBeacon&&navigator.sendBeacon(o+"?APIVersion=0.6.0",s)||l(e,a))}catch(g){window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+g),console.error("Failed log data:",e))}var o,s}class t extends p{constructor(a){super(Object.assign({},a,{installUnloadHook:o=>{window.addEventListener("beforeunload",()=>{o()})},sendPayload:(o,s)=>d(this,null,function*(){n(o,s)})}))}useStsPlugin(a){this.getOpt().sendPayload=(o,s)=>d(this,null,function*(){yield function(g,c,f){return d(this,null,function*(){return new Promise(y=>d(this,null,function*(){try{g=g.slice(0,-6);var _,{data:u,header:r}=yield f.process(g,c);let h=new window.XMLHttpRequest;for(_ in h.open("POST",g,!0),r)h.setRequestHeader(_,r[_]);h.onreadystatechange=()=>{h.readyState===4&&(h.status!==200&&window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+h.status),console.error("Failed logdata:",g)),y())},h.send(u)}catch(h){window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+h),console.error("Failed log data:",g))}}))})}(o,s,a)}),this.overwriteTransString(a)}}w.defineGlobal(window,"SLS_Tracker",t),m.exports=t},{"@aliyun-sls/web-base":2,"@aliyun-sls/web-track-base":3}],5:[function(x,m,j){var w=(n=>(n.ERROR="error",n.LOG="log",n.LOCATION="pv",n.API="api",n.RESOURCE="res",n.RESOURCE_ERROR="res_err",n.PERF="perf",n.CONSOLE_LOG="console",n.DOM_CLICK="dom_click",n))({}),p=(n=>(n.LOG_SEND="LOG_SEND",n.BROWSER_SEND="BROWSER_SEND",n.BASE_TRANSFORM="BASE_TRANSFORM",n.BROWSER_BASE_TRANSFORM="BROWSER_BASE_TRANSFORM",n.BROWSER_FETCH="BROWSER_FETCH",n.BROWSER_XHR="BROWSER_XHR",n.BROWSER_DOM="BROWSER_DOM",n.BROWSER_LOCATION="BROWSER_LOCATION",n.BROWSER_RUNTIME_ERROR="BROWSER_RUNTIME_ERROR",n.BROWSER_CUSTOM_ERROR="BROWSER_CUSTOM_ERROR",n.BROWSER_RESOURCE_ERROR="BROWSER_RESOURCE_ERROR",n.BROWSER_CONSOLE="BROWSER_CONSOLE",n.BROWSER_PERF="BROWSER_PERF",n.BROWSER_RESOURSE="BROWSER_RESOURSE",n.MINI_SEND="MINI_SEND",n.MINI_REQUEST="MINI_REQUEST",n.MINI_BASE_TRANSFORM="MINI_BASE_TRANSFORM",n.MINI_ROUTE="MINI_ROUTE",n))({}),d={BROWSER_SEND:-1,MINI_SEND:-2,BASE_TRANSFORM:100,BROWSER_BASE_TRANSFORM:200,MINI_BASE_TRANSFORM:201,BROWSER_PERF:301,BROWSER_FETCH:400,BROWSER_XHR:401,MINI_REQUEST:402,BROWSER_RUNTIME_ERROR:500},l=(n=>(n.OK="OK",n.ERROR="ERROR",n.UNSET="UNSET",n))({});j.InternalPlugin=p,j.InternalPluginPriority=d,j.OTStatusCode=l,j.SLS_CLIENT_NAME="SLS_CLIENT",j.SLS_TRACE_UID_KEY="sls-trace-uid",j.WebEventType=w},{}],6:[function(x,m,j){},{}],7:[function(x,m,j){(function(w){(function(){var p,d;p=this,d=function(){var l,n=Math;if(typeof window<"u"&&window.crypto&&(l=window.crypto),typeof self<"u"&&self.crypto&&(l=self.crypto),!(l=!(l=!(l=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:l)&&typeof window<"u"&&window.msCrypto?window.msCrypto:l)&&w!==void 0&&w.crypto?w.crypto:l)&&typeof x=="function")try{l=x("crypto")}catch{}var t=Object.create||function(h){return e.prototype=h,h=new e,e.prototype=null,h};function e(){}var a={},o=a.lib={},s=o.Base={extend:function(h){var v=t(this);return h&&v.mixIn(h),v.hasOwnProperty("init")&&this.init!==v.init||(v.init=function(){v.$super.init.apply(this,arguments)}),(v.init.prototype=v).$super=this,v},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var v in h)h.hasOwnProperty(v)&&(this[v]=h[v]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}},g=o.WordArray=s.extend({init:function(h,v){h=this.words=h||[],this.sigBytes=v??4*h.length},toString:function(h){return(h||f).stringify(this)},concat:function(h){var v=this.words,T=h.words,E=this.sigBytes,S=h.sigBytes;if(this.clamp(),E%4)for(var P=0;P<S;P++){var b=T[P>>>2]>>>24-P%4*8&255;v[E+P>>>2]|=b<<24-(E+P)%4*8}else for(var k=0;k<S;k+=4)v[E+k>>>2]=T[k>>>2];return this.sigBytes+=S,this},clamp:function(){var h=this.words,v=this.sigBytes;h[v>>>2]&=4294967295<<32-v%4*8,h.length=n.ceil(v/4)},clone:function(){var h=s.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var v=[],T=0;T<h;T+=4)v.push((()=>{if(l){if(typeof l.getRandomValues=="function")try{return l.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof l.randomBytes=="function")try{return l.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")})());return new g.init(v,h)}}),c=a.enc={},f=c.Hex={stringify:function(h){for(var v=h.words,T=h.sigBytes,E=[],S=0;S<T;S++){var P=v[S>>>2]>>>24-S%4*8&255;E.push((P>>>4).toString(16)),E.push((15&P).toString(16))}return E.join("")},parse:function(h){for(var v=h.length,T=[],E=0;E<v;E+=2)T[E>>>3]|=parseInt(h.substr(E,2),16)<<24-E%8*4;return new g.init(T,v/2)}},y=c.Latin1={stringify:function(h){for(var v=h.words,T=h.sigBytes,E=[],S=0;S<T;S++){var P=v[S>>>2]>>>24-S%4*8&255;E.push(String.fromCharCode(P))}return E.join("")},parse:function(h){for(var v=h.length,T=[],E=0;E<v;E++)T[E>>>2]|=(255&h.charCodeAt(E))<<24-E%4*8;return new g.init(T,v)}},_=c.Utf8={stringify:function(h){try{return decodeURIComponent(escape(y.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return y.parse(unescape(encodeURIComponent(h)))}},u=o.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=_.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(I){var v,T=this._data,E=T.words,S=T.sigBytes,P=this.blockSize,b=S/(4*P),k=(b=I?n.ceil(b):n.max((0|b)-this._minBufferSize,0))*P,I=n.min(4*k,S);if(k){for(var C=0;C<k;C+=P)this._doProcessBlock(E,C);v=E.splice(0,k),T.sigBytes-=I}return new g.init(v,I)},clone:function(){var h=s.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),r=(o.Hasher=u.extend({cfg:s.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){return h&&this._append(h),this._doFinalize()},blockSize:16,_createHelper:function(h){return function(v,T){return new h.init(T).finalize(v)}},_createHmacHelper:function(h){return function(v,T){return new r.HMAC.init(h,T).finalize(v)}}}),a.algo={});return a},typeof j=="object"?m.exports=j=d():p.CryptoJS=d()}).call(this)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{crypto:6}],8:[function(x,m,j){var w,p;w=this,p=function(d){var l;return l=d.lib.WordArray,d.enc.Base64={stringify:function(n){for(var t=n.words,e=n.sigBytes,a=this._map,o=(n.clamp(),[]),s=0;s<e;s+=3)for(var g=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<e;c++)o.push(a.charAt(g>>>6*(3-c)&63));var f=a.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(n){var t=n.length,e=this._map;if(!(a=this._reverseMap))for(var a=this._reverseMap=[],o=0;o<e.length;o++)a[e.charCodeAt(o)]=o;for(var s,g,c=e.charAt(64),f=(c&&(c=n.indexOf(c))!==-1&&(t=c),n),y=t,_=a,u=[],r=0,h=0;h<y;h++)h%4&&(s=_[f.charCodeAt(h-1)]<<h%4*2,g=_[f.charCodeAt(h)]>>>6-h%4*2,u[r>>>2]|=(s|g)<<24-r%4*8,r++);return l.create(u,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},d.enc.Base64},typeof j=="object"?m.exports=j=p(x("crypto-js/core")):p(w.CryptoJS)},{"crypto-js/core":7}],9:[function(x,m,j){var w,p;w=this,p=function(d){return d.enc.Utf8},typeof j=="object"?m.exports=j=p(x("crypto-js/core")):p(w.CryptoJS)},{"crypto-js/core":7}],10:[function(x,m,j){var w,p;w=this,p=function(d){return d.HmacSHA1},typeof j=="object"?m.exports=j=p(x("crypto-js/core"),x("crypto-js/sha1"),x("crypto-js/hmac")):p(w.CryptoJS)},{"crypto-js/core":7,"crypto-js/hmac":11,"crypto-js/sha1":12}],11:[function(x,m,j){var w,p;w=this,p=function(d){var l,n;l=d.lib.Base,n=d.enc.Utf8,d.algo.HMAC=l.extend({init:function(t,e){t=this._hasher=new t.init,typeof e=="string"&&(e=n.parse(e));for(var a=t.blockSize,o=4*a,t=((e=e.sigBytes>o?t.finalize(e):e).clamp(),this._oKey=e.clone()),e=this._iKey=e.clone(),s=t.words,g=e.words,c=0;c<a;c++)s[c]^=1549556828,g[c]^=909522486;t.sigBytes=e.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(a){var e=this._hasher,a=e.finalize(a);return e.reset(),e.finalize(this._oKey.clone().concat(a))}})},typeof j=="object"?m.exports=j=p(x("crypto-js/core")):p(w.CryptoJS)},{"crypto-js/core":7}],12:[function(x,m,j){var w,p;w=this,p=function(d){var l,n,t,e,a;return n=(l=d).lib,t=n.WordArray,e=n.Hasher,a=[],n=l.algo.SHA1=e.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(o,s){for(var g=this._hash.words,c=g[0],f=g[1],y=g[2],_=g[3],u=g[4],r=0;r<80;r++){a[r]=r<16?0|o[s+r]:(h=a[r-3]^a[r-8]^a[r-14]^a[r-16])<<1|h>>>31;var h=(c<<5|c>>>27)+u+a[r];h+=r<20?1518500249+(f&y|~f&_):r<40?1859775393+(f^y^_):r<60?(f&y|f&_|y&_)-1894007588:(f^y^_)-899497514,u=_,_=y,y=f<<30|f>>>2,f=c,c=h}g[0]=g[0]+c|0,g[1]=g[1]+f|0,g[2]=g[2]+y|0,g[3]=g[3]+_|0,g[4]=g[4]+u|0},_doFinalize:function(){var o=this._data,s=o.words,g=8*this._nDataBytes,c=8*o.sigBytes;return s[c>>>5]|=128<<24-c%32,s[14+(64+c>>>9<<4)]=Math.floor(g/4294967296),s[15+(64+c>>>9<<4)]=g,o.sigBytes=4*s.length,this._process(),this._hash},clone:function(){var o=e.clone.call(this);return o._hash=this._hash.clone(),o}}),l.SHA1=e._createHelper(n),l.HmacSHA1=e._createHmacHelper(n),d.SHA1},typeof j=="object"?m.exports=j=p(x("crypto-js/core")):p(w.CryptoJS)},{"crypto-js/core":7}],13:[function(x,m,j){(function(w,p){(function(){var d,l;d=this,l=function(){function n(J){return typeof J=="function"}var t=Array.isArray||function(J){return Object.prototype.toString.call(J)==="[object Array]"},e=0,a=void 0,o=void 0,s=function(J,ae){u[e]=J,u[e+1]=ae,(e+=2)===2&&(o?o(r):b())},g=typeof window<"u"?window:void 0,c=g||{},c=c.MutationObserver||c.WebKitMutationObserver,f=typeof self>"u"&&w!==void 0&&{}.toString.call(w)==="[object process]",y=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function _(){var J=setTimeout;return function(){return J(r,1)}}var u=new Array(1e3);function r(){for(var J=0;J<e;J+=2)(0,u[J])(u[J+1]),u[J]=void 0,u[J+1]=void 0;e=0}function h(){try{var J=Function("return this")().require("vertx");return(a=J.runOnLoop||J.runOnContext)!==void 0?function(){a(r)}:_()}catch{return _()}}var v,T,E,b=void 0;function S(J,ae){var ue,ge=this,_e=new this.constructor(I),Se=(_e[k]===void 0&&H(_e),ge._state);return Se?(ue=arguments[Se-1],s(function(){return B(Se,_e,ue,ge._result)})):ee(ge,_e,J,ae),_e}function P(J){var ae;return J&&typeof J=="object"&&J.constructor===this?J:(z(ae=new this(I),J),ae)}var b=f?function(){return w.nextTick(r)}:c?(T=0,f=new c(r),E=document.createTextNode(""),f.observe(E,{characterData:!0}),function(){E.data=T=++T%2}):y?((v=new MessageChannel).port1.onmessage=r,function(){return v.port2.postMessage(0)}):(g===void 0&&typeof x=="function"?h:_)(),k=Math.random().toString(36).substring(2);function I(){}var C=void 0,L=1,N=2;function U(J,ae,ue){s(function(ge){var _e=!1,Se=((xe,Pe,Ae,Ge)=>{try{xe.call(Pe,Ae,Ge)}catch(Qe){return Qe}})(ue,ae,function(xe){_e||(_e=!0,(ae!==xe?z:M)(ge,xe))},function(xe){_e||(_e=!0,q(ge,xe))},ge._label);!_e&&Se&&(_e=!0,q(ge,Se))},J)}function Y(J,ae,ue){var ge,_e;ae.constructor===J.constructor&&ue===S&&ae.constructor.resolve===P?(ge=J,(_e=ae)._state===L?M(ge,_e._result):_e._state===N?q(ge,_e._result):ee(_e,void 0,function(Se){return z(ge,Se)},function(Se){return q(ge,Se)})):ue!==void 0&&n(ue)?U(J,ae,ue):M(J,ae)}function z(J,ae){if(J===ae)q(J,new TypeError("You cannot resolve a promise with itself"));else if(ue=typeof ae,ae===null||ue!="object"&&ue!="function")M(J,ae);else{ue=void 0;try{ue=ae.then}catch(ge){return void q(J,ge)}Y(J,ae,ue)}var ue}function K(J){J._onerror&&J._onerror(J._result),Q(J)}function M(J,ae){J._state===C&&(J._result=ae,J._state=L,J._subscribers.length!==0)&&s(Q,J)}function q(J,ae){J._state===C&&(J._state=N,J._result=ae,s(K,J))}function ee(J,ae,ue,ge){var _e=J._subscribers,Se=_e.length;J._onerror=null,_e[Se]=ae,_e[Se+L]=ue,_e[Se+N]=ge,Se===0&&J._state&&s(Q,J)}function Q(J){var ae=J._subscribers,ue=J._state;if(ae.length!==0){for(var ge,_e=void 0,Se=J._result,xe=0;xe<ae.length;xe+=3)ge=ae[xe],_e=ae[xe+ue],ge?B(ue,ge,_e,Se):_e(Se);J._subscribers.length=0}}function B(J,ae,ue,ge){var _e=n(ue),Se=void 0,xe=void 0,Pe=!0;if(_e){try{Se=ue(ge)}catch(Ae){Pe=!1,xe=Ae}if(ae===Se)return void q(ae,new TypeError("A promises callback cannot return that same promise."))}else Se=ge;ae._state===C&&(_e&&Pe?z(ae,Se):Pe===!1?q(ae,xe):J===L?M(ae,Se):J===N&&q(ae,Se))}var R=0;function H(J){J[k]=R++,J._state=void 0,J._result=void 0,J._subscribers=[]}se.prototype._enumerate=function(J){for(var ae=0;this._state===C&&ae<J.length;ae++)this._eachEntry(J[ae],ae)},se.prototype._eachEntry=function(J,ae){var ue=this._instanceConstructor,ge=ue.resolve;if(ge===P){var _e,Se=void 0,xe=void 0,Pe=!1;try{Se=J.then}catch(Ae){Pe=!0,xe=Ae}Se===S&&J._state!==C?this._settledAt(J._state,ae,J._result):typeof Se!="function"?(this._remaining--,this._result[ae]=J):ue===te?(_e=new ue(I),Pe?q(_e,xe):Y(_e,J,Se),this._willSettleAt(_e,ae)):this._willSettleAt(new ue(function(Ae){return Ae(J)}),ae)}else this._willSettleAt(ge(J),ae)},se.prototype._settledAt=function(J,ae,ue){var ge=this.promise;ge._state===C&&(this._remaining--,J===N?q(ge,ue):this._result[ae]=ue),this._remaining===0&&M(ge,this._result)},se.prototype._willSettleAt=function(J,ae){var ue=this;ee(J,void 0,function(ge){return ue._settledAt(L,ae,ge)},function(ge){return ue._settledAt(N,ae,ge)})};var X=se;function se(J,ae){this._instanceConstructor=J,this.promise=new J(I),this.promise[k]||H(this.promise),t(ae)?(this.length=ae.length,this._remaining=ae.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ae),this._remaining!==0)||M(this.promise,this._result)):q(this.promise,new Error("Array Methods must be provided an Array"))}oe.prototype.catch=function(J){return this.then(null,J)},oe.prototype.finally=function(J){var ae=this.constructor;return n(J)?this.then(function(ue){return ae.resolve(J()).then(function(){return ue})},function(ue){return ae.resolve(J()).then(function(){throw ue})}):this.then(J,J)};var te=oe;function oe(J){if(this[k]=R++,this._result=this._state=void 0,this._subscribers=[],I!==J){if(typeof J!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof oe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ae=this;try{J(function(ue){z(ae,ue)},function(ue){q(ae,ue)})}catch(ue){q(ae,ue)}}}return te.prototype.then=S,te.all=function(J){return new X(this,J).promise},te.race=function(J){var ae=this;return t(J)?new ae(function(ue,ge){for(var _e=J.length,Se=0;Se<_e;Se++)ae.resolve(J[Se]).then(ue,ge)}):new ae(function(ue,ge){return ge(new TypeError("You must pass an array to race."))})},te.resolve=P,te.reject=function(J){var ae=new this(I);return q(ae,J),ae},te._setScheduler=function(J){o=J},te._setAsap=function(J){s=J},te._asap=s,te.polyfill=function(){var J=void 0;if(p!==void 0)J=p;else if(typeof self<"u")J=self;else try{J=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ae=J.Promise;if(ae){var ue=null;try{ue=Object.prototype.toString.call(ae.resolve())}catch{}if(ue==="[object Promise]"&&!ae.cast)return}J.Promise=te},te.Promise=te},typeof j=="object"&&m!==void 0?m.exports=l():d.ES6Promise=l()}).call(this)}).call(this,x("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:14}],14:[function(x,d,j){var w,p,d=d.exports={};function l(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}try{w=typeof setTimeout=="function"?setTimeout:l}catch{w=l}try{p=typeof clearTimeout=="function"?clearTimeout:n}catch{p=n}function t(_){if(w===setTimeout)return setTimeout(_,0);if((w===l||!w)&&setTimeout)return(w=setTimeout)(_,0);try{return w(_,0)}catch{try{return w.call(null,_,0)}catch{return w.call(this,_,0)}}}var e,a=[],o=!1,s=-1;function g(){o&&e&&(o=!1,e.length?a=e.concat(a):s=-1,a.length)&&c()}function c(){if(!o){for(var _=t(g),u=(o=!0,a.length);u;){for(e=a,a=[];++s<u;)e&&e[s].run();s=-1,u=a.length}e=null,o=!1,function(r){if(p===clearTimeout)return clearTimeout(r);if((p===n||!p)&&clearTimeout)return(p=clearTimeout)(r);try{p(r)}catch{try{return p.call(null,r)}catch{return p.call(this,r)}}}(_)}}function f(_,u){this.fun=_,this.array=u}function y(){}d.nextTick=function(_){var u=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)u[r-1]=arguments[r];a.push(new f(_,u)),a.length!==1||o||t(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=y,d.addListener=y,d.once=y,d.off=y,d.removeListener=y,d.removeAllListeners=y,d.emit=y,d.prependListener=y,d.prependOnceListener=y,d.listeners=function(_){return[]},d.binding=function(_){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(_){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],15:[function(x,m,j){m.exports={name:"aliyun-aliplayer",version:"2.35.4",description:" Web ",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live","start:hls":"npx grunt live --hls=true","start:flv":"npx grunt live --flv=true",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build","test:unit":"karma start","test:unit:watch":"karma start --no-single-run","test:e2e:install":"npx playwright install","test:e2e:test-all":"npm run build && cp -r build/* e2e/pages/build && npx playwright test ; rm -rf e2e/pages/build/*","ci:e2e-test":"tnpm install && tnpm run build && cp -r ./build ./e2e/pages/build/ && npm run ci:e2e-test-install && npm run ci:e2e-test-run","ci:e2e-test-install":"PLAYWRIGHT_DOWNLOAD_HOST=https://anpm.alibaba-inc.com/mirrors/playwright playwright install chrome","ci:e2e-test-run":"playwright test --project 'Google Chrome'","ci:e2e-test-show":"playwright show-report .ci/e2e"},devDependencies:{"@ali/mediabox-quality-tracer":"^0.26.0","@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@playwright/test":"^1.53.0","@types/chai":"^5.0.1","@types/mocha":"^10.0.10","@types/node":"^24.0.0","babel-loader":"^9.2.1","babel-plugin-es6-promise":"^1.1.1","babel-plugin-istanbul":"^7.0.0",babelify:"^10.0.0",chai:"^5.1.2","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0",karma:"^6.4.4","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-webpack":"^5.0.1",mocha:"^11.0.1","node-args":"^2.1.8",sinon:"^19.0.2","sinon-chai":"^4.0.0",webpack:"^5.97.1"},dependencies:{"@aliyun-sls/web-track-browser":"^0.3.9","crypto-js":"^4.1.1"},optionalDependencies:{puppeteer:"^23.11.1"}}},{}],16:[function(t,m,j){var w=t("../ui/component"),p=(t("../lib/util"),t("../lib/dom")),d=t("../lib/event"),l=(t("../lib/ua"),t("../lang/index")),n=t("../player/base/event/eventtype"),t=w.extend({init:function(e,a){w.call(this,e,a),this.className=a.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=w.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+l.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+l.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var e=this,a=(e._player.on(n.Private.AutoStreamShow,function(o){var s,g=document.querySelector("#"+e.getId()+" .tip-text");e._player._getLowerQualityLevel&&(s=e._player._getLowerQualityLevel())&&(e._switchUrl=s,g.innerText=l.get("Auto_Stream_Tip_Text").replace("$$",s.item.desc),p.css(e.el(),"display","block"))}),e._player.on(n.Private.AutoStreamHide,function(o){document.querySelector("#"+e.getId()+" .tip-text"),p.css(e.el(),"display","none")}),document.querySelector("#"+e.getId()+" .prism-button-ok")),a=(d.on(a,"click",function(){e._player._changeStream&&e._switchUrl&&(e._player._changeStream(e._switchUrl.index,l.get("Quality_Change_Text")),e._player.trigger(n.Private.SettingListHide)),p.css(e.el(),"display","none")}),document.querySelector("#"+e.getId()+" .prism-button-cancel"));d.on(a,"click",function(){p.css(e.el(),"display","none"),e._player.trigger(n.Private.SettingListHide)})}});m.exports=t},{"../lang/index":28,"../lib/dom":37,"../lib/event":38,"../lib/ua":53,"../lib/util":55,"../player/base/event/eventtype":84,"../ui/component":150}],17:[function(s,m,j){var w=s("../ui/component"),p=s("../lib/dom"),d=s("../lib/event"),l=s("../lib/ua"),n=s("../lib/function"),t=(s("../lang/index"),s("../lib/util")),e=s("../config"),a=s("../lib/playerutil"),o=s("../player/base/event/eventtype"),s=w.extend({init:function(g,c){w.call(this,g,c),this.className=c.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=g._liveshiftService},createEl:function(){var g=w.prototype.createEl.call(this);return g.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',g},bindEvent:function(){function g(_){c._progressDown=_}var c=this,f=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),y="//"+e.domain+e.path+e.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?y=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":e.domain?-1<e.domain.indexOf("localhost")&&(y="//"+e.domain+"/build/skins/default/img/dragcursor.png"):y=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+e.path+e.h5Version+"/skins/default/img/dragcursor.png":(e.path||"").substring(1)+e.h5Version+"/skins/default/img/dragcursor.png",f.src=y,d.on(this.cursorNode,"mousedown",function(_){c._onMouseDown(_)}),d.on(this.cursorNode,"touchstart",function(_){c._onMouseDown(_)}),d.on(this.progressNode,"mousemove",function(_){c._progressMove(_)}),d.on(this.progressNode,"touchmove",function(_){c._progressMove(_)}),d.on(this.progressNode,"mousedown",function(_){g(!0)}),d.on(this.progressNode,"touchstart",function(_){g(!0)}),d.on(this.progressNode,"mouseup",function(_){g(!1)}),d.on(this.progressNode,"touchend",function(_){g(!1)}),d.on(this._el,"click",function(_){c._onMouseClick(_)}),this._player.on(o.Private.HideProgress,function(_){c._hideProgress(_)}),this._player.on(o.Private.CancelHideProgress,function(_){c._cancelHideProgress(_)}),this._player.on(o.Private.ShowBar,function(){c._updateLayout()}),d.on(this.progressNode,o.Private.MouseOver,function(_){c._onMouseOver(_)}),d.on(this.progressNode,o.Private.MouseOut,function(_){c._onMouseOut(_)}),this.bindTimeupdate=n.bind(this,this._onTimeupdate),this._player.on(o.Player.TimeUpdate,this.bindTimeupdate),a.isLiveShift(this._player._options)&&c._liveshiftService.start(6e4,function(_){_={mediaId:c._player._options.vid||"",error_code:_.Code,error_msg:_.Message},c._player.logError(_),c._player.trigger(o.Player.Error,_)}),this._player.on(o.Private.LiveShiftQueryCompleted,function(){c._updateSeperator(),c._updateLayout()}),this._player.on(o.Private.LiveShiftSwitchToLive,function(){c._updateCursorPosition()}),this._player.on(o.Player.Pause,function(){c._liveshiftService.stop()}),l.IS_IPAD?this.interval=setInterval(function(){c._onProgress()},500):this._player.on(o.Video.Progress,function(){c._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var g=this.seperatorNode.offsetWidth,c=this.el().offsetWidth,f=c-g;g!=0&&f!=0&&(p.css(this.progressNode,"width",100*(f-10)/c+"%"),p.css(this.seperatorNode,"right",-1*(g+10)+"px"))},_progressMove:function(g){var c=this._getSeconds(g),f=this._liveshiftService.availableLiveShiftTime,c=(this.timeNode.innerText="-"+t.formatTime(f-c),f?c/f:0),f=1-this.timeNode.clientWidth/this.el().clientWidth,y=(f<c&&(c=f),this.timeNode&&(p.css(this.timeNode,"display","block"),p.css(this.timeNode,"left",100*c+"%")),this);!l.IS_PC&&y._progressDown&&(y.progressSeekTimer&&clearTimeout(y.progressSeekTimer),y.progressSeekTimer=setTimeout(function(){y._progressDown||y._onMouseClick(g)},200))},_hideProgress:function(g){d.off(this.cursorNode,"mousedown"),d.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(g){var c=this;d.on(this.cursorNode,"mousedown",function(f){c._onMouseDown(f)}),d.on(this.cursorNode,"touchstart",function(f){c._onMouseDown(f)})},_canSeekable:function(g){var c=!0;return c=typeof this._player.canSeekable=="function"?this._player.canSeekable(g):c},_onMouseOver:function(g){this._updateCursorPosition(this._getCurrentTime()),p.css(this.timeNode,"display","block")},_onMouseOut:function(g){p.css(this.timeNode,"display","none")},_getSeconds:function(r){for(var c=this.el().offsetLeft,f=this.el();f=f.offsetParent;){var y=p.getTranslateX(f);c+=f.offsetLeft+y}var r=(r.touches&&r.touches.length?r.touches[0]:r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r).pageX,_=this.progressNode.offsetWidth,u=this._liveshiftService.availableLiveShiftTime,r=u?(r-c)/_*u:0;return r=u<(r=r<0?0:r)?u:r},_onMouseClick:function(f){var c=this,f=this._getSeconds(f),y=this._liveshiftService.availableLiveShiftTime,y=this._liveshiftService._performSeek(f,y-f,this._getCurrentTime());this._updateProgressBar(this.playedNode,y.sec),this._updateCursorPosition(y.sec),setTimeout(function(){c._progressDown||c._onMouseOut()},500)},_onMouseDown:function(g){var c=this;g.preventDefault(),this._player.trigger(o.Private.SeekStart,{fromTime:this._getCurrentTime()}),d.on(this.controlNode,"mousemove",function(f){c._onMouseMove(f)}),d.on(this.controlNode,"touchmove",function(f){c._onMouseMove(f)}),d.on(this.controlNode,"mouseup",function(f){c._onMouseUp(f)}),d.on(this.controlNode,"touchend",function(f){c._onMouseUp(f)})},_onMouseUp:function(g){g.preventDefault(),d.off(this.controlNode,"mousemove"),d.off(this.controlNode,"touchmove"),d.off(this._player.tag,"mouseup"),d.off(this._player.tag,"touchend"),d.off(this.controlNode,"mouseup"),d.off(this.controlNode,"touchend"),this._onMouseClick(g)},_onMouseMove:function(g){g.preventDefault()},_onTimeupdate:function(g){this._player._seeking||(l.IS_ANDROID&&l.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(o.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var g=this._liveshiftService.seekTime,g=(g==-1&&(g=0),this._player.getCurrentTime()+g);return l.IS_ANDROID&&l.IS_UC&&(g-=this._basePtsUC||0),g},_onProgress:function(g){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(g,c){var f,y;this._player._switchSourcing!=1&&(y=0,this._liveshiftService.seekTime==-1?y=1:1<(y=(f=this._liveshiftService.availableLiveShiftTime)?c/f:0)&&(this._liveshiftService.seekTime=-(y=1)),this.liveShiftStartDisplay,g)&&p.css(g,"width",100*y+"%")},_updateCursorPosition:function(g){var c,f,y,_;this._player.el()&&this._player._switchSourcing!=1&&(y=0,_=1,c=this._player.el().clientWidth,this._liveshiftService.seekTime==-1?y=1:1<(y=(f=this._liveshiftService.availableLiveShiftTime)?g/f:0)&&(this._liveshiftService.seekTime=-1),c!=0&&(_=1-(g=10/c),y-=g),y=y<0?0:y,this.cursorNode)&&(_<y?(p.css(this.cursorNode,"right","0px"),p.css(this.cursorNode,"left","auto")):(p.css(this.cursorNode,"right","auto"),p.css(this.cursorNode,"left",100*y+"%")))}});m.exports=s},{"../config":19,"../lang/index":28,"../lib/dom":37,"../lib/event":38,"../lib/function":40,"../lib/playerutil":50,"../lib/ua":53,"../lib/util":55,"../player/base/event/eventtype":84,"../ui/component":150}],18:[function(l,m,j){var w=l("../ui/component"),p=l("../lib/util"),d=l("../player/base/event/eventtype"),l=w.extend({init:function(n,t){w.call(this,n,t),this.className=t.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=n._liveshiftService},createEl:function(){var n=w.prototype.createEl.call(this,"div");return n.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',n},bindEvent:function(){var n=this;this._player.on(d.Video.TimeUpdate,function(){var t,e=n._liveshiftService,a=document.querySelector("#"+n.id()+" .current-time");e.liveShiftStartDisplay&&e.availableLiveShiftTime>e.seekTime&&e.seekTime!=-1?(t=n._liveshiftService.getBaseTime(),t=p.formatTime(t+n._player.getCurrentTime()),a.innerText=t):e.currentTimeDisplay&&(a.innerText=e.currentTimeDisplay)}),this._player.on(d.Private.LiveShiftQueryCompleted,function(){n.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});m.exports=l},{"../lib/util":55,"../player/base/event/eventtype":84,"../ui/component":150}],19:[function(x,m,j){x=x("../package.json"),m.exports={domain:"g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:x.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":15}],20:[function(x,m,j){(function(w){(function(){var p,d,l,n,t,e,a,o=x("../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs").MediaboxQualityTracer;x("./lib/patch-ssr").isSSR||(d=function(s){var g=window&&window.location.host||"";if(!(-1<g.indexOf("localhost")||/(?:\d{1,3}\.){3}\d{1,3}/.test(g))){if(s&&s.msg&&(["","playauth property is required"].some(function(c){return-1<s.msg.indexOf(c)})||/code:(\d+);msg:(.+)/.test(s.msg)))return void console.log("ignore error report");if(!(s.stack&&-1<s.stack.indexOf("alivc-im.iife.js")||s.file&&-1<s.file.indexOf("imp-interaction")))return s}console.log("ignore error report")},x("./lang/index").load(),l=x("./player/adaptiveplayer"),n=x("./lib/reloadInstanceUtil"),e=x("./lib/componentutil"),t=x("./config"),(a=function(s,g){p&&(p.updateOptions({cid:s.license&&s.license.key,region:s.env==="SEA"?"ap-southeast-1":"cn-hangzhou",beforeSend:d}),p.setReady());var c=l.create(s,g);return p&&p.updateOptions({beforeSend:function(f){if(f=d(f))return f.c3="likely_ri="+(c._monitor&&c._monitor.sessionId),f}}),n.storeUserEvents(c),c}).getVersion=function(){return t.h5Version},e.register(a),a.players={},a.reloadInstance=n.reloadInstance,e=(p=new o({businessName:"imp-web-player",version:t.h5Version||"unknown",deferRegionSet:!0,env:w!=="dev"?"prod":"local",disabled:!0})).wrap(a),(a=window.Aliplayer=e).tracer=p,typeof Uint8Array>"u")||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),m.exports=a}).call(this)}).call(this,"prod")},{"../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs":1,"./config":19,"./lang/index":28,"./lib/componentutil":32,"./lib/patch-ssr":49,"./lib/reloadInstanceUtil":51,"./player/adaptiveplayer":81}],21:[function(x,m,j){var w=x("../player/base/event/eventtype"),p=x("../lib/constants"),d=x("../lang/index");m.exports=(()=>{function l(t){var e=this;t===void 0&&(t={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=t.player,this.player.on(w.Player.Init,function(){e.playerInitDone=!0})}var n=l.prototype;return n.start=function(){var t=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){t.playerInitDone&&t.check()},this.interval))},n.stop=function(){this.clearTimer()},n.check=function(){var t=!1,e=this.detectPrototype()||this.detectNativeFn();return(e||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",e),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),t=!0),t},n.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},n.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},n.displayError=function(){var t=this.player,e={mediaId:t._options&&t._options.vid?t._options.vid:"",error_code:p.ErrorCode.RecordNotAllowed,error_msg:d.get("Record_Not_Allowed")};t.logError(e),t.trigger(w.Player.Error,e)},n.setupErrorStyle=function(){this.hideRetry();var t=document.querySelector(".prism-ErrorMessage");t&&(t.style.opacity="1",t.style.visibility="visible")},n.hideRetry=function(){var t=document.querySelector("#"+this.player.id()+" .prism-button-retry");t&&(t.style.display="none")},n.destroyVideo=function(){this.player._drm&&this.player.destroy();var t=this.player.tag;t&&t.parentNode&&t.parentNode.removeChild(t)},n.detectPrototype=function(){var t=window,e=t.MediaSource;return e&&t.EventTarget&&e.__proto__.__proto__===t.EventTarget},n.detectNativeFn=function(){var t=window.MediaSource;return t&&!this.isNativeFn(t.prototype.addSourceBuffer)},n.isNativeFn=function(t){var e=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),a=typeof t;return t!==null&&(a=="object"||a=="function")&&e.test(t)},n.detectDeperateVideo=function(){var t=this.player.tag;if(t)return(t.getAttribute("id")||"").indexOf("360")!==-1},l})()},{"../lang/index":28,"../lib/constants":33,"../player/base/event/eventtype":84}],22:[function(d,m,j){var w=d("../lib/oo"),p=d("../lang/index"),d=w.extend({init:function(n,t){this._player=n,this._options=n.options()}}),l=(d.prototype.handle=function(n){var t,e;this._options.autoPlayDelay&&(t=(t=this._options.autoPlayDelayDisplayText)||p.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(e=this)._timeHandler=setTimeout(function(){e._player.trigger("info_hide"),e._options.autoPlayDelay=0,n&&n()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){l(e)}),this._player.on("pause",function(){l(e)}))},d.prototype.dispose=function(){l(this),this._player=null},function(n){n._timeHandler&&(clearTimeout(n._timeHandler),n._timeHandler=null)});m.exports=d},{"../lang/index":28,"../lib/oo":48}],23:[function(n,m,j){var w=n("../lib/event"),p=n("../lib/data"),d=n("../player/base/event/eventtype"),l=p.guid(),n={};function t(o){var s,g,c=this._options.keyFastForwardStep,f=this._options.isLive;switch(o&&o.keyCode){case 39:f||(o.preventDefault(),s=this.getDuration(),g=this.getCurrentTime()+c,this.seek(g=s<g?s:g),e.call(this,g),a.call(this,g));break;case 37:f||(o.preventDefault(),g=this.getCurrentTime()-c,this.seek(g=g<0?0:g),e.call(this,g),a.call(this,g));break;case 38:o.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:o.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(f)return;o.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function e(o){this.trigger(d.Private.UpdateProgress,{targetTime:o})}function a(o){this.trigger(d.Private.UpdateCursorPosition,{targetTime:o})}n.init=function(){var o;this._options.keyShortCuts&&((o=t.bind(this)).guid=l,w.on(window.document,"keydown",o))},n.dispose=function(){var o;this._options.keyShortCuts&&((o=t.bind(this)).guid=l,w.off(window.document,"keydown",o))},m.exports=n},{"../lib/data":35,"../lib/event":38,"../player/base/event/eventtype":84}],24:[function(n,m,j){var w=typeof Promise>"u"?n("es6-promise").Promise:Promise,p=n("../lib/constants").LicenseResultCode,d=n("../lib/io"),l=((n={})[p.ResourceIncorrect]="license resource init error",n[p.LicenseKeyInvalid]="invalid license key",n[p.DomainInvalid]="invalid domain",n[p.CertInvalid]="invalid cert content",n[p.NotFound]="license not found",n[p.Expired]="license expired",n),n=(()=>{function t(){}return t.getLicense=function(e,a,o,s){var g=this;return this.isWasmSupported()?a?e?this.instance?w.resolve(this.instance):new w(function(c,f){g.resolvers.push(c),g.rejecters.push(f),g.resolvers.length===1&&d.loadJS(s?s+"/license/0.6.0/index.js":"https://g.alicdn.com/apsara-media-components/amcom-web-license/0.6.0/index.js",function(){window.loadLicenseSource().then(function(y){var _=new y({business_id:2,domain_identity:e,license_key:a,region:o});return _.update().then(function(){g.instance=_,g.resolvers.forEach(function(u){u(_)})}).catch(function(u){g.rejecters.forEach(function(r){r(p.CertInvalid+"#"+(u||"").trim().split(":")[0])})})}).catch(function(){g.rejecters.forEach(function(y){y(p.ResourceIncorrect)})}).finally(function(){g.resolvers=[],g.rejecters=[]})},function(){g.rejecters.forEach(function(y){y(p.ResourceIncorrect)})})}):w.reject(p.DomainInvalid):w.reject(p.LicenseKeyInvalid):w.reject(p.WasmNotSupported)},t.isWasmSupported=function(){return typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"},t.logError=function(e){l[e]&&console.error(l[e])},t})();n.instance=void 0,n.resolvers=[],n.rejecters=[],m.exports=n},{"../lib/constants":33,"../lib/io":45,"es6-promise":13}],25:[function(g,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var _,u=arguments[y];for(_ in u)!{}.hasOwnProperty.call(u,_)||(f[_]=u[_])}return f}).apply(null,arguments)}function p(f,y){for(var _=0;_<y.length;_++){var u=y[_];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,(r=>typeof(r=((h,v)=>{if(typeof h!="object"||!h)return h;var T=h[Symbol.toPrimitive];if(T===void 0)return(v==="string"?String:Number)(h);if(typeof(T=T.call(h,v))!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")})(r,"string"))=="symbol"?r:r+"")(u.key),u)}}var d=g("../lib/event"),l="box",n="content",t="top-left",e="top-right",a="bottom-left",o="bottom-right",s="percentage",g=(()=>{function f(u){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new c,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(u.logo),this._setElements(u.container,u.video)}var y,_=f.prototype;return _.dispose=function(){this._observer.dispose(),this._observer=void 0,d.off(this._video,"resize",this._handleVideoResize),d.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(u){u.logo&&u.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},_._setElements=function(u,r){this._container=u,this._video=r,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):d.on(r,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),d.on(document,"fullscreenchange",this._handleWindowResize)},_._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(u){return u.logo})||this._logoList.forEach(this._setupLogo.bind(this))},_._handleWindowResize=function(){var u=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){u._resizeDone=!0,u._logoList.forEach(u._placeLogo.bind(u))}))},_._setLogo=function(u){this._logoList=u.map(this._defauleValue)},_._setupLogo=function(u){var r=this,h=this._createLogo(u);(u.logo=h).onload=function(){r._placeLogo(u)}},_._createLogo=function(u){var r=document.createElement("img");return r.setAttribute("class","prism-logo"),r.src=u.src,r},_._placeLogo=function(u){var r=u.logo,h=this._calcSize(u),v=(h.width&&r.setAttribute("width",h.width+"px"),h.height&&r.setAttribute("height",h.height+"px"),this._calcMatrix(u));r.style.position="absolute",Object.keys(v).forEach(function(T){r.style[T]=v[T]+"px"}),this._container.appendChild(u.logo)},_._calcSize=function(u){return this._getPixel(u)},_._calcMatrix=function(u){var r=this._getPosition(u),h=this._getPixel(u,{width:u.offsetX,height:u.offsetY});return Object.keys(r).forEach(function(v){switch(v){case"top":r[v]+=h.height;break;case"bottom":r[v]-=h.height;break;case"left":r[v]+=h.width;break;case"right":r[v]-=h.width}}),r},_._getPosition=function(h){var r=h.origin,h=h.position,v=0,T=0;switch(r===n&&(v=Math.abs(this.videoSize.height-this.contentSize.height)/2,T=Math.abs(this.videoSize.width-this.contentSize.width)/2),h){case t:return{top:0+v,left:0+T};case e:return{top:0+v,right:0+T};case a:return{bottom:0+v,left:0+T};case o:return{bottom:0+v,right:0+T};default:return{top:0,left:0}}},_._formalize=function(u,r){var h=1,h=u.width/u.height>r.width/r.height?r.width/u.width:r.height/u.height;return{width:u.width*h,height:u.height*h}},_._getPixel=function(u,v){var v=v===void 0?{}:v,h=v.width,v=v.height,T=u.unit,E=u.origin;return isNaN(h)&&(h=u.width),isNaN(v)&&(v=u.height),T===s?{width:(u=E===l?this.videoSize:this.contentSize).width*h/100,height:u.height*v/100}:{width:h,height:v}},_._defauleValue=function(u){return w({},u,{position:u.position||t,offsetX:u.offsetX||0,offsetY:u.offsetY||0,origin:u.origin||l,unit:u.unit||s})},_=f,(y=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var u;return this._video?(u={width:this._video.videoWidth,height:this._video.videoHeight},{width:(u=this._formalize(u,this.videoSize)).width,height:u.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&p(_.prototype,y),Object.defineProperty(_,"prototype",{writable:!1}),_})(),c=(m.exports=g,(()=>{function f(){this._frame=void 0}var y=f.prototype;return y.observe=function(_,u){var r=document.createElement("iframe");return r.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",r.onload=function(){r.contentWindow.onresize=function(){u(_)}},_.appendChild(r),this._frame=r},y.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},f})())},{"../lib/event":38}],26:[function(x,m,j){var w=x("../lib/event"),p=x("../player/base/event/eventtype");m.exports=(()=>{function d(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var l=d.prototype;return l.autoResize=function(n,t,e){e===void 0&&(e="height"),typeof n!="number"?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=e,this.ratio=n,this.player=t,w.on(window,"resize",this.resize),this.resize())},l._resize=function(){var n,t,e;(n=this.player.fullscreenService)!=null&&n.isFullScreen||(n=(n=this.player)==null?void 0:n.el())&&(this.target==="height"?(e=(t=n.offsetWidth)/this.ratio,n.style.height=e+"px"):(t=(e=n.offsetHeight)*this.ratio,n.style.width=t+"px"),(n=this.player)!=null)&&n.trigger(p.Player.AutoResize,{width:t,height:e})},l.dispose=function(){w.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},d})()},{"../lib/event":38,"../player/base/event/eventtype":84}],27:[function(x,m,j){m.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"2x speed",Refresh_Text:"Refresh",Open_Url:"URL Test",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Default:"Default",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switching to ",Quality_Change_Result:"Switched to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"(HttpCode-403)Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod serviceplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parsing error  please provide the correct parameters",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"(HttpCode-0)The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occoredwhen them3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout,please close or refresh",Error_Invalidate_Source:"Video shoud be mp4mp3m3u8mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"(HttpCode-404)Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Drm_Params_Missing:"Parameters for drm.widevine/fairplay, etc. are missing",Error_Region_Block_Text:"(HttpCode-403)This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and manifest and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Info_Missing:"Please make sure the parameters of drm.widevine/fairplay you provided are valid",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Tip_License_Required:"Starting 2024-12-01, the new version of the player must be configured with a license to use. The license for the basic functions of the player can be applied for free and is valid for 1 year. Please apply in advance to avoid any disruption in usage ",Tip_License_Params:"After completing the application, please refer to this document to pass the license information into the SDK ",Tip_License_Check:"Please ensure that the provided license key/domain parameters match exactly with what were obtained from the VOD/LIVE console.",Tip_License_Domain:"The current website domain does not match with your licensed domain",Tip_License_Feature:"The feature is not authorized by your license:",Tip_License_Reason:"The playback failed because your license verification was unsuccessful. Specific reason:",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"(HttpCode-0)there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flvrmtp can't be supported on mobileplease use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_Empty:"License params are required",License_Not_Found:"Unregistered license",License_Expired:"Expired license",License_License_Key_Invalid:"Invalid license key",License_Domain_Invalid:"Unexpected domain",License_Feature_Unauthorized:"Unauthorized feature",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],28:[function(x,m,j){function w(s,g,c){var f=o(s),_="",y=a(),_=y=="en-us"?x("./en-us"):y=="zh-cn"?x("./zh-cn"):g[y];c&&(_=Object.assign({},_,c[y])),d.set(f,JSON.stringify(_)),e(s,_),c&&x("../lib/constants").updateByLanguage()}var p=x("../config"),d=x("../lib/storage"),l=(x("../lib/io"),"aliplayer_lang_data"),n="aliplayer_lang",t=function(){var s;return window[n]!==void 0&&window[n]||(s=(s=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<s.indexOf("zh")?"zh-cn":"en-us",window[n]=s),window[n]},e=function(s,g){s=o(s),window[s]=g},a=function(){return t()},o=function(s){var g=a();return l+"_"+(s=s||"h5")+"_"+p.h5Version.replace(/\./g,"_")+"_"+g};m.exports.setCurrentLanguage=function(s,g,c,f){var y=window[n];(s=s!==void 0&&s?s:t())=="en-us"||s=="zh-cn"||c&&c[s]||(console.warn("There is no language resource for "+s+", please specify the language resource by languageTexts property"),s="zh-cn"),window[n]=s,w(g,c,f),s!=y&&x("../lib/constants").updateByLanguage()},m.exports.getCurrentLanguage=t,m.exports.getLanguageData=function(s,g){return s=o(s),window[s]},m.exports.load=w,m.exports.get=function(s,g,c){if(g=o(g=g||"h5"),g=window[g],g){var f=g[s];if(c)for(var y in c)f=f.replace(new RegExp("@"+y+"@","g"),c[y]);return f}}},{"../config":19,"../lib/constants":33,"../lib/io":45,"../lib/storage":52,"./en-us":27,"./zh-cn":29}],29:[function(x,m,j){m.exports={OD:"",FD:"",LD:"",SD:"",HD:"","2K":"2K","4K":"4K",FHD:"",XLD:"",SQ:"",HQ:"",Speed:"",Speed_05X_Text:"0.5X",Speed_1X_Text:"",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"",Quality_Change_Fail_Switch_Text:"",Quality_Change_Text:" ",Quality_Change_Result:" ",Quality_The_Url:"",Refresh_Text:"",Open_Url:"",Detection_Text:"",Cancel:"",Mute:"",Click_To_Unmute:"",Snapshot:"",Play_DateTime:"",Default:"",AutoPlayDelayDisplayText:"$$",Error_Load_Abort_Text:"",Error_Network_Text:"",Error_Decode_Text:"",Error_No_Decoder_Text:"",Error_Server_Network_NotSupport_Text:"",Error_Offline_Text:"",Error_Play_Text:"",Error_Retry_Text:"",Error_AuthKey_Text:"HttpCode-403",Error_H5_Not_Support_Text:"",Error_Not_Support_M3U8_Text:"m3u8",Error_Not_Support_MP4_Text:"mp4",Error_Not_Support_encrypt_Text:"encryptType1",Error_Encrypt_Fetch_Failed_Text:"",Error_Vod_URL_Is_Empty_Text:"",Error_Vod_Fetch_Urls_Text:"",Fetch_Playauth_Error:"",Error_Playauth_Decode_Text:"playauth",Error_Vid_Not_Same_Text:"vid",Error_Playauth_Expired_Text:"",Error_MTS_Fetch_Urls_Text:"MTS",Error_Load_M3U8_Failed_Text:"HttpCode-0m3u8,httpsDNS",Error_Load_M3U8_Timeout_Text:"m3u8",Error_Liveshift_M3U8_Not_Found_Text:"",Error_M3U8_Decode_Text:"m3u8",Error_TX_Decode_Text:"",Error_Manifest_Decode_Text:"Manifest",Error_Waiting_Timeout_Text:"",Error_Invalidate_Source:"mp4mp3m3u8mpdflv",Error_Empty_Source:"",Error_Vid_Empty_Source:"vid",Error_Mediaauth_Empty_Source:"mediaAuth",Error_Fetch_NotStream:"vid",Error_Fetch_Media_Not_Found:"",Error_Not_Found:"HttpCode-404",Error_Drm_License_Request_Failed:"DRM License ",Error_Drm_Not_Supported:" DRM ",Error_Drm_Load:"DRM ",Error_Drm_No_Sts:"DRM STS(accessKeyId/accessKeySecret/securityToken)",Error_Drm_Params_Missing:"drm.widevine/fairplay",Error_Region_Block_Text:"HttpCode-403",Error_SW_Conflict:"ServiceWorker",Error_SW_Register_Failed:"Service Worker",Error_SW_ScriptURL_Empty:" swScriptURL ",Error_SW_ScriptURL_Https:"swScriptURL https:// ",Error_SW_ScriptURL_Scope:"swScriptURL(:@scope1@)(:@scope2@)",Error_SW_Version_Not_Match:"swScriptURL(@swVersion@)(@playerVersion@)",Error_SW_ScriptURL_ILlegal:"swScriptURL(@detail@)",Error_SW_Https_required:" https ",Tip_Err_Common:":<br />",Tip_Err_Common_Short:":<br />",Tip_Drm_Request_Err:"https<br />",Tip_Drm_Secure_Context:"DRMhttpslocalhost127.0.0.1manifesthttps",Tip_Drm_Key_System_Unavailable:"1.WidevineWidevine<br />2.<br />3.",Tip_Drm_File_Not_Allowed:"file://https://",Tip_Drm_Playlist_Hierarchy:"HLS master playlist",Tip_Drm_Info_Missing:"drm.widevine/fairplay",Tip_Drm_Unsupported:" Widevine Chrome chrome://components/ Widevine Content Decryption Module DRM ",Tip_Err_Decode:"/<br />1.chrome/edge chrome://flags Hardware-accelerated video decode disabled<br />2.<br />3.firefoxabout:supportAAC",Tip_Err_Rts_Http_Failed:"RTShttphttpsDNSJS<br>1.2.3.<br>SSLhttps<br>NOT RESOLVEDDNS<br><a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'></a>",Tip_Err_Not_found:"//",Tip_Err_Blocked:"",Tip_Err_Splayer:" H.265/H.266 ",Tip_Err_Splayer_Doc:"",Tip_SW_Register:"1.https<br>2.swScriptURLhttps://",Tip_License_Required:"2024121LicenseLicense 1 ",Tip_License_Params:"LicenseSDK",Tip_License_Check:" license key/domain /",Tip_License_Domain:" license ",Tip_License_Feature:"license",Tip_License_Reason:" License ",Live_End:"",Play_Before_Fullscreen:"",Can_Not_Seekable:"seek",Cancel_Text:"",OK_Text:"",Auto_Stream_Tip_Text:"$$",Request_Block_Text:"httphttps",Open_Html_By_File:"html",Maybe_Cors_Error:"HttpCode-0httpsDNS",Speed_Switch_To:" ",Curent_Volume:"",Volume_Mute:"",Volume_UnMute:"",ShiftLiveTime_Error:"",Error_Not_Support_Format_On_Mobile:"flvrmtpm3u8",Error_Not_Support_Mse_Flv:" flv ",Error_Not_Support_Mse_Dash:" dash ",Error_Not_Support_RTMP:" rtmp ",SessionId_Ticket_Invalid:"DRMsessionIdticket",Http_Error:"Http",Http_Timeout:"http",DRM_License_Expired:"DRM license",Not_Support_DRM:"DRM",CC_Switch_To:" ",AudioTrack_Switch_To:" ",Subtitle:"",AudioTrack:"",Quality:"",Auto:"",Quality_Switch_To:" ",Fullscreen:"",Setting:"",Volume:"",Play:"",Pause:"",CloseSubtitle:"",OpenSubtitle:"",ExistFullScreen:"",Muted:"",Retry:"",SwitchToLive:"",iOSNotSupportVodEncription:"iOS17.1",iOSVodEncriptionBlacklist:"Safari/Chrome",UseChromeForVodEncription:"Chrome/Edge",Record_Not_Allowed:"",License_Empty:"License",License_Not_Found:"License",License_Expired:"License",License_License_Key_Invalid:"LicenseKey",License_Domain_Invalid:"",License_Feature_Unauthorized:"",Rts_Err_Http_Signal_Error:"(RTS)",Rts_Err_Play_Failed:"(RTS)",Rts_Err_No_Data_For:"",Rts_Err_Browser_Not_Support:"(RTS)",Rts_Err_Not_Support_Webrtc:"(RTS)webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)",Rts_Err_Not_Support_H264:"(RTS)H264",Rts_Err_Create_Offer_Error:"(RTS)create offer",Rts_Err_Play_Url_Error:"(RTS)url",Rts_Err_Subscribe_Nonthing:"(RTS)",Rts_Err_Http_Request_Failed:"(RTS)HTTP",Rts_Err_Http_Answer_Failed:"(RTS)answer",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection",Splayer_Err_Env_Check:"(SP)",Splayer_Err_Coroutine:"(SP)Coroutine ",Splayer_Err_Decode:"(SP)",Splayer_Err_Buffering:"(SP)",Splayer_Err_Parser_Not_Found:"(SP)"}},{}],30:[function(x,m,j){var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var p=new Uint8Array(256),d=0;d<w.length;d++)p[w.charCodeAt(d)]=d;var l=function(n){for(var t="",e=0;e<n.length;e+=16e3){var a=n.subarray(e,e+16e3);t+=String.fromCharCode.apply(null,a)}return t};m.exports={decode:function(n){for(var t,e,a,o,c=.75*n.length,s=n.length,g=0,c=(n[n.length-1]==="="&&(c--,n[n.length-2]==="=")&&c--,new ArrayBuffer(c)),f=new Uint8Array(c),y=0;y<s;y+=4)t=p[n.charCodeAt(y)],e=p[n.charCodeAt(y+1)],a=p[n.charCodeAt(y+2)],o=p[n.charCodeAt(y+3)],f[g++]=t<<2|e>>4,f[g++]=(15&e)<<4|a>>2,f[g++]=(3&a)<<6|63&o;return c},encode:function(n){for(var t=new Uint8Array(n),e=t.length,a="",o=0;o<e;o+=3)a=(a=(a=(a+=w[t[o]>>2])+w[(3&t[o])<<4|t[o+1]>>4])+w[(15&t[o+1])<<2|t[o+2]>>6])+w[63&t[o+2]];return e%3==2?a=a.substring(0,a.length-1)+"=":e%3==1&&(a=a.substring(0,a.length-2)+"=="),a},unpackPlayReady:function(n){if(n=((g,c,f)=>{if(!g)return"";f||g.byteLength%2==0||console.log("Data has an incorrect length, must be even."),f=g instanceof ArrayBuffer?g:((f=new Uint8Array(g.byteLength)).set(new Uint8Array(g)),f.buffer);for(var y=Math.floor(g.byteLength/2),_=new Uint16Array(y),u=new DataView(f),r=0;r<y;r++)_[r]=u.getUint16(2*r,c);return l(_)})(n,!0,!0),n.indexOf("PlayReadyKeyMessage")!=-1){for(var n=new DOMParser().parseFromString(n,"application/xml"),t=n.getElementsByTagName("HttpHeader"),e={},a=0;a<t.length;++a){var o=t[a].querySelector("name"),s=t[a].querySelector("value");e[o.textContent]=s.textContent}return{header:e,changange:n.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],31:[function(x,m,j){function w(){var o,h=typeof Symbol=="function"?Symbol:{},s=h.iterator||"@@iterator",g=h.toStringTag||"@@toStringTag";function c(E,M,P,b){var k,I,C,L,N,U,Y,z,K,M=M&&M.prototype instanceof y?M:y,M=Object.create(M.prototype);return p(M,"_invoke",(k=E,I=P,Y=b||[],z=!1,K={p:U=0,n:0,v:o,a:q,f:q.bind(o,4),d:function(ee,Q){return C=ee,L=0,N=o,K.n=Q,f}},function(ee,Q,B){if(1<U)throw TypeError("Generator is already running");for(z&&Q===1&&q(Q,B),L=Q,N=B;(r=L<2?o:N)||!z;){C||(L?L<3?(1<L&&(K.n=-1),q(L,N)):K.n=N:K.v=N);try{if(U=2,C){if(r=C[ee=L?ee:"next"]){if(!(r=r.call(C,N)))throw TypeError("iterator result is not an object");if(!r.done)return r;N=r.value,L<2&&(L=0)}else L===1&&(r=C.return)&&r.call(C),L<2&&(N=TypeError("The iterator does not provide a '"+ee+"' method"),L=1);C=o}else if((r=(z=K.n<0)?N:k.call(I,K))!==f)break}catch(R){C=o,L=1,N=R}finally{U=1}}return{value:r,done:z}}),!0),M;function q(ee,Q){for(L=ee,N=Q,r=0;!z&&U&&!B&&r<Y.length;r++){var B,R=Y[r],H=K.p,X=R[2];3<ee?(B=X===Q)&&(N=R[(L=R[4])?5:L=3],R[4]=R[5]=o):R[0]<=H&&((B=ee<2&&H<R[1])?(L=0,K.v=Q,K.n=R[1]):H<X&&(B=ee<3||R[0]>Q||X<Q)&&(R[4]=ee,R[5]=Q,K.n=X,L=0))}if(B||1<ee)return f;throw z=!0,Q}}var f={};function y(){}function _(){}function u(){}var r=Object.getPrototypeOf,h=[][s]?r(r([][s]())):(p(r={},s,function(){return this}),r),v=u.prototype=y.prototype=Object.create(h);function T(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,u):(E.__proto__=u,p(E,g,"GeneratorFunction")),E.prototype=Object.create(v),E}return p(v,"constructor",_.prototype=u),p(u,"constructor",_),p(u,g,_.displayName="GeneratorFunction"),p(v),p(v,g,"Generator"),p(v,s,function(){return this}),p(v,"toString",function(){return"[object Generator]"}),(w=function(){return{w:c,m:T}})()}function p(o,s,g,c){var f=Object.defineProperty;try{f({},"",{})}catch{f=0}(p=function(y,_,u,r){function h(v,T){p(y,v,function(E){return this._invoke(v,T,E)})}_?f?f(y,_,{value:u,enumerable:!r,configurable:!r,writable:!r}):y[_]=u:(h("next",0),h("throw",1),h("return",2))})(o,s,g,c)}function d(o,s,g,c,f,y,_){try{var u=o[y](_),r=u.value}catch(h){return g(h)}u.done?s(r):Promise.resolve(r).then(c,f)}var l=typeof Promise>"u"?x("es6-promise").Promise:Promise,n=x("./io"),t=x("../config");function e(){}function a(){var o;return o=w().m(function s(g,c,f,y){var _,u;return w().w(function(r){for(;;)switch(r.p=r.n){case 0:if(c===void 0&&(c={}),f===void 0&&(f=e),y===void 0&&(y=e),window.VideoxMuxer){r.n=4;break}r.p=1,r.n=2;var h=c;return new l(function(v,T){var E="videox-muxer.min.js",S="https://"+t.domain+t.path+t.h5Version+"/splayer/"+E;h.assetPrefix&&(S=h.assetPrefix+"/splayer/"+E),n.loadJS(S,function(){v()},function(){T()})});case 2:r.n=4;break;case 3:return r.p=3,console.error("load videox-demuxer failed"),y("load videox-demuxer failed"),r.a(2);case 4:_=window.VideoxMuxer.Demuxer,(u=new _({progressive:!0})).on("loadedmetadata",function(v){v===void 0&&(v={}),u.suspend(),u.destroy(),u=null,f(v)}),u.on("error",function(v){y(v),u.suspend(),u.destroy(),u=null}),u.load(g);case 5:return r.a(2)}},s,null,[[1,3]])}),(a=function(){var s=this,g=arguments;return new Promise(function(c,f){var y=o.apply(s,g);function _(r){d(y,c,f,_,u,"next",r)}function u(r){d(y,c,f,_,u,"throw",r)}_(void 0)})}).apply(this,arguments)}m.exports=function(o,s,g,c){return a.apply(this,arguments)}},{"../config":19,"./io":45,"es6-promise":13}],32:[function(x,m,j){var w=x("./oo"),p=x("../player/base/event/eventtype");m.exports.stopPropagation=function(d){window.event?window.event.cancelBubble=!0:d.stopPropagation()},m.exports.register=function(d){d.util={stopPropagation:m.exports.stopPropagation},d.Component=w.extend,d.EventType=p.Player}},{"../player/base/event/eventtype":84,"./oo":48}],33:[function(x,m,j){function w(){m.exports.VideoErrorCodeText={1:p.get("Error_Load_Abort_Text"),2:p.get("Error_Network_Text"),3:p.get("Error_Decode_Text"),4:p.get("Error_Server_Network_NotSupport_Text")},m.exports.VideoLevels={0:p.get("OD"),640:p.get("FD"),960:p.get("LD"),1280:p.get("SD"),1920:p.get("HD"),2580:p.get("2K"),3840:p.get("4K")},m.exports.QualityLevels={OD:p.get("OD"),LD:p.get("LD"),FD:p.get("FD"),SD:p.get("SD"),HD:p.get("HD"),"2K":p.get("2K"),"4K":p.get("4K"),XLD:p.get("XLD"),FHD:p.get("FHD"),SQ:p.get("SQ"),HQ:p.get("HQ")},m.exports.SpeedLevels=[{key:.5,text:p.get("Speed_05X_Text")},{key:1,text:p.get("Speed_1X_Text")},{key:1.25,text:p.get("Speed_125X_Text")},{key:1.5,text:p.get("Speed_15X_Text")},{key:2,text:p.get("Speed_2X_Text")}]}var p=x("../lang/index");m.exports.LOAD_START="loadstart",m.exports.LOADED_METADATA="loadedmetadata",m.exports.LOADED_DATA="loadeddata",m.exports.PROGRESS="progress",m.exports.CAN_PLAY="canplay",m.exports.CAN_PLYA_THROUGH="canplaythrough",m.exports.PLAY="play",m.exports.PAUSE="pause",m.exports.ENDED="ended",m.exports.PLAYING="playing",m.exports.WAITING="waiting",m.exports.ERROR="error",m.exports.SUSPEND="suspend",m.exports.STALLED="stalled",m.exports.DASH_QUALITY_PROTOCOL="quality_index://",m.exports.AuthKeyExpiredEvent="authkeyexpired",m.exports.USER_EVENT_NAME="__user_events__",m.exports.PLAYER_SCOPE="__aliplayerMessage__",m.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},m.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},m.exports.PLAYER_SDK_CODE_LEGACY=9201,m.exports.PLAYER_SDK_CODE=9203,m.exports.FEATURE_ID_H265=30001,m.exports.FEATURE_ID_H266=30002,m.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},m.exports.LicenseErrorKey={Empty:"License_Empty",NotFound:"License_Not_Found",Expired:"License_Expired",CertInvalid:"License_Cert_Invalid",LicenseKeyInvalid:"License_License_Key_Invalid",DomainInvalid:"License_Domain_Invalid",Unauthorized:"License_Feature_Unauthorized"},m.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},m.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},m.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},m.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},m.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,VodNonceUsed:4024,UrlForbidden:4025,CrossDomain:4027,ModuleLoadError:4034,LicenseError:4035,LicenseEmpty:4036,LicenseNotFound:4037,LicenseExpired:4038,LicenseKeyInvalid:4039,LicenseDomainInvalid:4040,LicenseFeatrueUnauthorized:4041,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},m.exports.AuthKeyExpired=7200,m.exports.AuthKeyRefreshExpired=7e3,m.exports.AuthInfoExpired=100,m.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},m.exports.RegionBlockMessages=["black location","denied by region block"],m.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},m.exports.SelectedStreamLevel="selectedStreamLevel",m.exports.SelectedCC="selectedCC",m.exports.HWDetectHvc1="HWDetectHvc1",m.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",m.exports.HWDetectHev1="HWDetectHev1",m.exports.HWDetectHev1Hls="HWDetectHev1Hls",m.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},w(),m.exports.updateByLanguage=w},{"../lang/index":28}],34:[function(x,m,j){m.exports.get=function(w){for(var p=w+"",d=document.cookie.split(";"),l=0;l<d.length;l++){var n=d[l].trim();if(n.indexOf(p)==0)return unescape(n.substring(p.length+1,n.length))}return""},m.exports.set=function(w,p,n){var l=new Date,n=(l.setTime(l.getTime()+24*n*60*60*1e3),"expires="+l.toGMTString());document.cookie=w+"="+escape(p)+"; "+n}},{}],35:[function(x,m,j){var w=x("./object");m.exports.cache={},m.exports.guid=function(p,d){var l,n,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[];if(d=d||t.length,p)for(l=0;l<p;l++)e[l]=t[0|Math.random()*d];else for(e[8]=e[13]=e[18]=e[23]="-",e[14]="4",l=0;l<36;l++)e[l]||(n=0|16*Math.random(),e[l]=t[l==19?3&n|8:n]);return e.join("")},m.exports.expando="vdata"+new Date().getTime(),m.exports.getData=function(p){var d=p[m.exports.expando];return d||(d=p[m.exports.expando]=m.exports.guid(),m.exports.cache[d]={}),m.exports.cache[d]},m.exports.hasData=function(p){var d="";return!(!(d=p?p[m.exports.expando]:d)||w.isEmpty(m.exports.cache[d]))},m.exports.removeData=function(p){var d="";if(d=p?p[m.exports.expando]:d){delete m.exports.cache[d];try{delete p[m.exports.expando]}catch{p.removeAttribute?p.removeAttribute(m.exports.expando):p[m.exports.expando]=null}}}},{"./object":47}],36:[function(x,m,j){var w,p=typeof Promise>"u"?x("es6-promise").Promise:Promise;x=typeof self<"u"?self:this,w=function(){return l=[function(t,o,s){s.d(o,"i",function(){return g}),s.d(o,"d",function(){return c}),s.d(o,"e",function(){return f}),s.d(o,"c",function(){return y}),s.d(o,"h",function(){return _}),s.d(o,"f",function(){return u}),s.d(o,"b",function(){return r}),s.d(o,"g",function(){return h}),s.d(o,"a",function(){return v});var o=s(3),s=Object(o.b)(),g=((o=s==null?void 0:s.navigator)==null?void 0:o.userAgent)||"unknown",c="InstallTrigger"in((s==null?void 0:s.window)||{})||/firefox/i.test(g),f=/trident/i.test(g)||/msie/i.test(g),y=/edge/i.test(g)||/EdgiOS/i.test(g),_=/webkit/i.test(g),u=/IqiyiApp/.test(g),r=((o=s==null?void 0:s.window)==null?void 0:o.chrome)!==void 0||/chrome/i.test(g)||/CriOS/i.test(g),h=(((o=(o=s==null?void 0:s.window)==null?void 0:o.safari)==null?void 0:o.pushNotification)||!1).toString()==="[object SafariRemoteNotification]"||/safari/i.test(g)&&!r,v=typeof((o=s.document)==null?void 0:o.createElement)=="function"},function(t,e,a){a.d(e,"b",function(){return g}),a.d(e,"c",function(){return c}),a.d(e,"a",function(){return f});var o=a(0);function s(y){if(o.a&&console){if(!o.e&&!o.c)return console[y];if(y==="log"||y==="clear")return function(){for(var _=[],u=0;u<arguments.length;u++)_[u]=arguments[u];console[y].apply(console,_)}}return function(){}}var g=s("log"),c=s("table"),f=s("clear")},function(t,e,a){e.a=function(o){for(var s=(o=o===void 0?{}:o).includes,o=o.excludes,o=o===void 0?[]:o,g=!1,c=!1,f=0,y=s===void 0?[]:s;f<y.length;f++)if(y[f]===!0){g=!0;break}for(var _=0,u=o;_<u.length;_++)if(u[_]===!0){c=!0;break}return g&&!c}},function(t,e,a){(function(o){e.b=y,e.a=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];var v=y();return v!=null&&v.document?(v=v.document).createElement.apply(v,r):{}},e.c=function(){if(s)return s;if(_){var r=new Blob([g.a.workerScript]);try{var h=URL.createObjectURL(r);s=new g.a(new Worker(h)),URL.revokeObjectURL(h)}catch{try{s=new g.a(new Worker("data:text/javascript;base64,".concat(btoa(g.a.workerScript))))}catch{_=!1}}return s}},a.d(e,"d",function(){return u});var s,g=a(10),c=this&&this.__awaiter||function(r,h,v,T){return new(v=v||p)(function(E,S){function P(I){try{k(T.next(I))}catch(C){S(C)}}function b(I){try{k(T.throw(I))}catch(C){S(C)}}function k(I){var C;I.done?E(I.value):((C=I.value)instanceof v?C:new v(function(L){L(C)})).then(P,b)}k((T=T.apply(r,h||[])).next())})},f=this&&this.__generator||function(r,h){var v,T,E,S={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]},P={next:b(0),throw:b(1),return:b(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function b(k){return function(I){var C=[k,I];if(v)throw new TypeError("Generator is already executing.");for(;S=P&&C[P=0]?0:S;)try{if(v=1,T&&(E=2&C[0]?T.return:C[0]?T.throw||((E=T.return)&&E.call(T),0):T.next)&&!(E=E.call(T,C[1])).done)return E;switch(T=0,(C=E?[2&C[0],E.value]:C)[0]){case 0:case 1:E=C;break;case 4:return S.label++,{value:C[1],done:!1};case 5:S.label++,T=C[1],C=[0];continue;case 7:C=S.ops.pop(),S.trys.pop();continue;default:if(!(E=0<(E=S.trys).length&&E[E.length-1])&&(C[0]===6||C[0]===2)){S=0;continue}if(C[0]===3&&(!E||C[1]>E[0]&&C[1]<E[3]))S.label=C[1];else if(C[0]===6&&S.label<E[1])S.label=E[1],E=C;else{if(!(E&&S.label<E[2])){E[2]&&S.ops.pop(),S.trys.pop();continue}S.label=E[2],S.ops.push(C)}}C=h.call(r,S)}catch(L){C=[6,L],T=0}finally{v=E=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}};function y(){return typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:this}var _=!0,u=function(){return c(this,void 0,void 0,function(){var r;return f(this,function(h){switch(h.label){case 0:if(r=!1,!navigator.brave)return[3,4];if(!navigator.brave.isBrave)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,p.race([navigator.brave.isBrave(),new p(function(v){return setTimeout(function(){return v(!1)},1e3)})])];case 2:return r=h.sent(),[3,4];case 3:return h.sent(),[3,4];case 4:return u=function(){return c(this,void 0,void 0,function(){return f(this,function(v){return[2,r]})})},[2,r]}})})}}).call(e,a(9))},function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.addListener=function(v){h.addListener(v)},e.removeListener=function(v){h.removeListener(v)},e.isLaunch=function(){return h.isLaunch()},e.launch=function(){h.launch()},e.stop=function(){h.stop()},e.setDetectDelay=function(v){h.setDetectDelay(v)};var o=a(8),s=a(12),g=(a.d(e,"DevtoolsDetector",function(){return o.a}),a.d(e,"checkers",function(){return s}),a(23)),c=(a.d(e,"crashBrowserCurrentTab",function(){return g.b}),a.d(e,"crashBrowser",function(){return g.a}),a(2)),f=(a.d(e,"match",function(){return c.a}),a(3)),y=(a.d(e,"getGlobalThis",function(){return f.b}),a.d(e,"createElement",function(){return f.a}),a.d(e,"getWorkerConsole",function(){return f.c}),a.d(e,"isBrave",function(){return f.d}),a(24)),_=(a.d(e,"versionMap",function(){return y.a}),a(0)),u=(a.d(e,"userAgent",function(){return _.i}),a.d(e,"isFirefox",function(){return _.d}),a.d(e,"isIE",function(){return _.e}),a.d(e,"isEdge",function(){return _.c}),a.d(e,"isWebkit",function(){return _.h}),a.d(e,"isIqiyiApp",function(){return _.f}),a.d(e,"isChrome",function(){return _.b}),a.d(e,"isSafari",function(){return _.g}),a.d(e,"inBrowser",function(){return _.a}),a(1)),r=(a.d(e,"log",function(){return u.b}),a.d(e,"table",function(){return u.c}),a.d(e,"clear",function(){return u.a}),a(5)),h=(a.d(e,"isMac",function(){return r.d}),a.d(e,"isIpad",function(){return r.b}),a.d(e,"isIphone",function(){return r.c}),a.d(e,"isAndroid",function(){return r.a}),a.d(e,"isWindows",function(){return r.e}),new o.a({checkers:[s.erudaChecker,s.elementIdChecker,s.devtoolsFormatterChecker,s.performanceChecker,s.debuggerChecker]}));e.default=h},function(t,o,a){a.d(o,"d",function(){return s}),a.d(o,"b",function(){return g}),a.d(o,"c",function(){return c}),a.d(o,"a",function(){return f}),a.d(o,"e",function(){return y});var o=a(0),s=/macintosh/i.test(o.i),g=/ipad/i.test(o.i)||s&&1<navigator.maxTouchPoints,c=/iphone/i.test(o.i),f=/android/i.test(o.i),y=/windows/i.test(o.i)},function(t,e,a){e.a=function(){return(typeof performance<"u"?performance:Date).now()}},function(t,e,a){e.a=function(){return o=o===null?(()=>{for(var s=(()=>{for(var f={},y=0;y<500;y++)f["".concat(y)]="".concat(y);return f})(),g=[],c=0;c<50;c++)g.push(s);return g})():o};var o=null},function(t,e,a){a.d(e,"a",function(){return c});var o=a(0),s=this&&this.__awaiter||function(y,_,u,r){return new(u=u||p)(function(h,v){function T(P){try{S(r.next(P))}catch(b){v(b)}}function E(P){try{S(r.throw(P))}catch(b){v(b)}}function S(P){var b;P.done?h(P.value):((b=P.value)instanceof u?b:new u(function(k){k(b)})).then(T,E)}S((r=r.apply(y,_||[])).next())})},g=this&&this.__generator||function(y,_){var u,r,h,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]},T={next:E(0),throw:E(1),return:E(2)};return typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function E(S){return function(P){var b=[S,P];if(u)throw new TypeError("Generator is already executing.");for(;v=T&&b[T=0]?0:v;)try{if(u=1,r&&(h=2&b[0]?r.return:b[0]?r.throw||((h=r.return)&&h.call(r),0):r.next)&&!(h=h.call(r,b[1])).done)return h;switch(r=0,(b=h?[2&b[0],h.value]:b)[0]){case 0:case 1:h=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,r=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!(h=0<(h=v.trys).length&&h[h.length-1])&&(b[0]===6||b[0]===2)){v=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3]))v.label=b[1];else if(b[0]===6&&v.label<h[1])v.label=h[1],h=b;else{if(!(h&&v.label<h[2])){h[2]&&v.ops.pop(),v.trys.pop();continue}v.label=h[2],v.ops.push(b)}}b=_.call(y,v)}catch(k){b=[6,k],r=0}finally{u=h=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}},c=(Object.defineProperty(f.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!1,configurable:!0}),f.prototype.launch=function(){o.a&&(this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped)&&(this._detectLoopStopped=!1,this._detectLoop())},f.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,this._isOpen=!1,clearTimeout(this._timer))},f.prototype.isLaunch=function(){return!this._detectLoopStopped},f.prototype.setDetectDelay=function(y){this._detectLoopDelay=y},f.prototype.addListener=function(y){this._listeners.push(y)},f.prototype.removeListener=function(y){this._listeners=this._listeners.filter(function(_){return _!==y})},f.prototype._broadcast=function(y){for(var _=0,u=this._listeners;_<u.length;_++){var r=u[_];try{r(y.isOpen,y)}catch{}}},f.prototype._detectLoop=function(){return s(this,void 0,void 0,function(){var y,_,u,r,h,v=this;return g(this,function(T){switch(T.label){case 0:y=!1,_="",u=0,r=this._checkers,T.label=1;case 1:return u<r.length?[4,(h=r[u]).isEnable()]:[3,6];case 2:return T.sent()?(_=h.name,[4,h.isOpen()]):[3,4];case 3:y=T.sent(),T.label=4;case 4:if(y)return[3,6];T.label=5;case 5:return u++,[3,1];case 6:return y!==this._isOpen&&(this._isOpen=y,this._broadcast({isOpen:y,checkerName:_})),0<this._detectLoopDelay&&!this._detectLoopStopped?this._timer=setTimeout(function(){return v._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},f);function f(y){y=y.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=y.slice()}},function(t,e){var a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(a=window)}t.exports=a},function(t,e,a){a.d(e,"a",function(){return f});var o=a(11),s=this&&this.__awaiter||function(_,u,r,h){return new(r=r||p)(function(v,T){function E(b){try{P(h.next(b))}catch(k){T(k)}}function S(b){try{P(h.throw(b))}catch(k){T(k)}}function P(b){var k;b.done?v(b.value):((k=b.value)instanceof r?k:new r(function(I){I(k)})).then(E,S)}P((h=h.apply(_,u||[])).next())})},g=this&&this.__generator||function(_,u){var r,h,v,T={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]},E={next:S(0),throw:S(1),return:S(2)};return typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(P){return function(b){var k=[P,b];if(r)throw new TypeError("Generator is already executing.");for(;T=E&&k[E=0]?0:T;)try{if(r=1,h&&(v=2&k[0]?h.return:k[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,k[1])).done)return v;switch(h=0,(k=v?[2&k[0],v.value]:k)[0]){case 0:case 1:v=k;break;case 4:return T.label++,{value:k[1],done:!1};case 5:T.label++,h=k[1],k=[0];continue;case 7:k=T.ops.pop(),T.trys.pop();continue;default:if(!(v=0<(v=T.trys).length&&v[v.length-1])&&(k[0]===6||k[0]===2)){T=0;continue}if(k[0]===3&&(!v||k[1]>v[0]&&k[1]<v[3]))T.label=k[1];else if(k[0]===6&&T.label<v[1])T.label=v[1],v=k;else{if(!(v&&T.label<v[2])){v[2]&&T.ops.pop(),T.trys.pop();continue}T.label=v[2],T.ops.push(k)}}k=u.call(_,T)}catch(I){k=[6,I],h=0}finally{r=v=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},c=this&&this.__spreadArray||function(_,u,r){if(r||arguments.length===2)for(var h,v=0,T=u.length;v<T;v++)!h&&v in u||((h=h||Array.prototype.slice.call(u,0,v))[v]=u[v]);return _.concat(h||Array.prototype.slice.call(u))},f=(y.prototype.send=function(_){for(var u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return s(this,void 0,void 0,function(){var h,v=this;return g(this,function(T){return h=Object(o.a)(),[2,new p(function(E,S){v.callbacks.set(h,E),v.worker.postMessage({id:h,type:_,payload:u}),setTimeout(function(){S(new Error("timeout")),v.callbacks.delete(h)},2e3)})]})})},y.workerScript=`
onmessage = function(event) {
  var action = event.data;
  var startTime = performance.now()

  console[action.type](...action.payload);
  postMessage({
    id: action.id,
    time: performance.now() - startTime
  })
}
`,y);function y(_){var u=this;this.callbacks=new Map,this.worker=_,this.worker.onmessage=function(h){var h=h.data,v=h.id,T=u.callbacks.get(h.id);T&&(T({time:h.time}),u.callbacks.delete(v))},this.log=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];return u.send.apply(u,c(["log"],r,!1))},this.table=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];return u.send.apply(u,c(["table"],r,!1))},this.clear=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];return u.send.apply(u,c(["clear"],r,!1))}}},function(t,e,a){e.a=function(){return o>Number.MAX_SAFE_INTEGER&&(o=0),o++};var o=0},function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0});var o=a(13),s=(a.d(e,"depRegToStringChecker",function(){return o.a}),a(14)),g=(a.d(e,"elementIdChecker",function(){return s.a}),a(15)),c=(a.d(e,"functionToStringChecker",function(){return g.a}),a(16)),f=(a.d(e,"regToStringChecker",function(){return c.a}),a(17)),y=(a.d(e,"debuggerChecker",function(){return f.a}),a(18)),_=(a.d(e,"dateToStringChecker",function(){return y.a}),a(19)),u=(a.d(e,"performanceChecker",function(){return _.a}),a(20)),r=(a.d(e,"erudaChecker",function(){return u.a}),a(21)),h=(a.d(e,"devtoolsFormatterChecker",function(){return r.a}),a(22));a.d(e,"workerPerformanceChecker",function(){return h.a})},function(t,e,a){a.d(e,"a",function(){return u});var o=a(0),s=a(1),g=a(2),c=this&&this.__awaiter||function(r,h,v,T){return new(v=v||p)(function(E,S){function P(I){try{k(T.next(I))}catch(C){S(C)}}function b(I){try{k(T.throw(I))}catch(C){S(C)}}function k(I){var C;I.done?E(I.value):((C=I.value)instanceof v?C:new v(function(L){L(C)})).then(P,b)}k((T=T.apply(r,h||[])).next())})},f=this&&this.__generator||function(r,h){var v,T,E,S={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]},P={next:b(0),throw:b(1),return:b(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function b(k){return function(I){var C=[k,I];if(v)throw new TypeError("Generator is already executing.");for(;S=P&&C[P=0]?0:S;)try{if(v=1,T&&(E=2&C[0]?T.return:C[0]?T.throw||((E=T.return)&&E.call(T),0):T.next)&&!(E=E.call(T,C[1])).done)return E;switch(T=0,(C=E?[2&C[0],E.value]:C)[0]){case 0:case 1:E=C;break;case 4:return S.label++,{value:C[1],done:!1};case 5:S.label++,T=C[1],C=[0];continue;case 7:C=S.ops.pop(),S.trys.pop();continue;default:if(!(E=0<(E=S.trys).length&&E[E.length-1])&&(C[0]===6||C[0]===2)){S=0;continue}if(C[0]===3&&(!E||C[1]>E[0]&&C[1]<E[3]))S.label=C[1];else if(C[0]===6&&S.label<E[1])S.label=E[1],E=C;else{if(!(E&&S.label<E[2])){E[2]&&S.ops.pop(),S.trys.pop();continue}S.label=E[2],S.ops.push(C)}}C=h.call(r,S)}catch(L){C=[6,L],T=0}finally{v=E=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}},y=/ /,_=!1,u=(y.toString=function(){return _=!0,u.name},{name:"dep-reg-to-string",isOpen:function(){return c(this,void 0,void 0,function(){return f(this,function(r){return _=!1,Object(s.c)({dep:y}),Object(s.a)(),[2,_]})})},isEnable:function(){return c(this,void 0,void 0,function(){return f(this,function(r){return[2,Object(g.a)({includes:[!0],excludes:[o.d,o.e]})]})})}})},function(t,c,a){a.d(c,"a",function(){return r});var o=a(0),s=a(1),g=a(2),c=a(3),f=this&&this.__awaiter||function(h,v,T,E){return new(T=T||p)(function(S,P){function b(C){try{I(E.next(C))}catch(L){P(L)}}function k(C){try{I(E.throw(C))}catch(L){P(L)}}function I(C){var L;C.done?S(C.value):((L=C.value)instanceof T?L:new T(function(N){N(L)})).then(b,k)}I((E=E.apply(h,v||[])).next())})},y=this&&this.__generator||function(h,v){var T,E,S,P={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]},b={next:k(0),throw:k(1),return:k(2)};return typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function k(I){return function(C){var L=[I,C];if(T)throw new TypeError("Generator is already executing.");for(;P=b&&L[b=0]?0:P;)try{if(T=1,E&&(S=2&L[0]?E.return:L[0]?E.throw||((S=E.return)&&S.call(E),0):E.next)&&!(S=S.call(E,L[1])).done)return S;switch(E=0,(L=S?[2&L[0],S.value]:L)[0]){case 0:case 1:S=L;break;case 4:return P.label++,{value:L[1],done:!1};case 5:P.label++,E=L[1],L=[0];continue;case 7:L=P.ops.pop(),P.trys.pop();continue;default:if(!(S=0<(S=P.trys).length&&S[S.length-1])&&(L[0]===6||L[0]===2)){P=0;continue}if(L[0]===3&&(!S||L[1]>S[0]&&L[1]<S[3]))P.label=L[1];else if(L[0]===6&&P.label<S[1])P.label=S[1],S=L;else{if(!(S&&P.label<S[2])){S[2]&&P.ops.pop(),P.trys.pop();continue}P.label=S[2],P.ops.push(L)}}L=v.call(h,P)}catch(N){L=[6,N],E=0}finally{T=S=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}}},_=Object(c.a)("div"),u=!1,r=(Object.defineProperty(_,"id",{get:function(){return u=!0,r.name},configurable:!0}),{name:"element-id",isOpen:function(){return f(this,void 0,void 0,function(){return y(this,function(h){return u=!1,Object(s.b)(_),Object(s.a)(),[2,u]})})},isEnable:function(){return f(this,void 0,void 0,function(){return y(this,function(h){return[2,Object(g.a)({includes:[o.g]})]})})}})},function(t,e,a){a.d(e,"a",function(){return r});var o=a(0),s=a(1),g=a(5),c=a(2),f=this&&this.__awaiter||function(h,v,T,E){return new(T=T||p)(function(S,P){function b(C){try{I(E.next(C))}catch(L){P(L)}}function k(C){try{I(E.throw(C))}catch(L){P(L)}}function I(C){var L;C.done?S(C.value):((L=C.value)instanceof T?L:new T(function(N){N(L)})).then(b,k)}I((E=E.apply(h,v||[])).next())})},y=this&&this.__generator||function(h,v){var T,E,S,P={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]},b={next:k(0),throw:k(1),return:k(2)};return typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function k(I){return function(C){var L=[I,C];if(T)throw new TypeError("Generator is already executing.");for(;P=b&&L[b=0]?0:P;)try{if(T=1,E&&(S=2&L[0]?E.return:L[0]?E.throw||((S=E.return)&&S.call(E),0):E.next)&&!(S=S.call(E,L[1])).done)return S;switch(E=0,(L=S?[2&L[0],S.value]:L)[0]){case 0:case 1:S=L;break;case 4:return P.label++,{value:L[1],done:!1};case 5:P.label++,E=L[1],L=[0];continue;case 7:L=P.ops.pop(),P.trys.pop();continue;default:if(!(S=0<(S=P.trys).length&&S[S.length-1])&&(L[0]===6||L[0]===2)){P=0;continue}if(L[0]===3&&(!S||L[1]>S[0]&&L[1]<S[3]))P.label=L[1];else if(L[0]===6&&P.label<S[1])P.label=S[1],S=L;else{if(!(S&&P.label<S[2])){S[2]&&P.ops.pop(),P.trys.pop();continue}P.label=S[2],P.ops.push(L)}}L=v.call(h,P)}catch(N){L=[6,N],E=0}finally{T=S=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}}};function _(){}var u=0,r=(_.toString=function(){return u++,""},{name:"function-to-string",isOpen:function(){return f(this,void 0,void 0,function(){return y(this,function(h){return u=0,Object(s.b)(_),Object(s.a)(),[2,u===2]})})},isEnable:function(){return f(this,void 0,void 0,function(){var h;return y(this,function(v){return h=g.b||g.c,[2,Object(c.a)({includes:[!0],excludes:[o.f,o.d,h&&o.b,h&&o.c]})]})})}})},function(t,e,a){a.d(e,"a",function(){return u});var o=a(1),s=a(0),g=a(2),c=this&&this.__awaiter||function(r,h,v,T){return new(v=v||p)(function(E,S){function P(I){try{k(T.next(I))}catch(C){S(C)}}function b(I){try{k(T.throw(I))}catch(C){S(C)}}function k(I){var C;I.done?E(I.value):((C=I.value)instanceof v?C:new v(function(L){L(C)})).then(P,b)}k((T=T.apply(r,h||[])).next())})},f=this&&this.__generator||function(r,h){var v,T,E,S={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]},P={next:b(0),throw:b(1),return:b(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function b(k){return function(I){var C=[k,I];if(v)throw new TypeError("Generator is already executing.");for(;S=P&&C[P=0]?0:S;)try{if(v=1,T&&(E=2&C[0]?T.return:C[0]?T.throw||((E=T.return)&&E.call(T),0):T.next)&&!(E=E.call(T,C[1])).done)return E;switch(T=0,(C=E?[2&C[0],E.value]:C)[0]){case 0:case 1:E=C;break;case 4:return S.label++,{value:C[1],done:!1};case 5:S.label++,T=C[1],C=[0];continue;case 7:C=S.ops.pop(),S.trys.pop();continue;default:if(!(E=0<(E=S.trys).length&&E[E.length-1])&&(C[0]===6||C[0]===2)){S=0;continue}if(C[0]===3&&(!E||C[1]>E[0]&&C[1]<E[3]))S.label=C[1];else if(C[0]===6&&S.label<E[1])S.label=E[1],E=C;else{if(!(E&&S.label<E[2])){E[2]&&S.ops.pop(),S.trys.pop();continue}S.label=E[2],S.ops.push(C)}}C=h.call(r,S)}catch(L){C=[6,L],T=0}finally{v=E=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}},y=/ /,_=!1,u=(y.toString=function(){return _=!0,u.name},{name:"reg-to-string",isOpen:function(){return c(this,void 0,void 0,function(){return f(this,function(r){return _=!1,Object(o.b)(y),Object(o.a)(),[2,_]})})},isEnable:function(){return c(this,void 0,void 0,function(){return f(this,function(r){return[2,Object(g.a)({includes:[!0],excludes:[s.h]})]})})}})},function(t,e,a){a.d(e,"a",function(){return c});var o=a(6),s=this&&this.__awaiter||function(f,y,_,u){return new(_=_||p)(function(r,h){function v(S){try{E(u.next(S))}catch(P){h(P)}}function T(S){try{E(u.throw(S))}catch(P){h(P)}}function E(S){var P;S.done?r(S.value):((P=S.value)instanceof _?P:new _(function(b){b(P)})).then(v,T)}E((u=u.apply(f,y||[])).next())})},g=this&&this.__generator||function(f,y){var _,u,r,h={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},v={next:T(0),throw:T(1),return:T(2)};return typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function T(E){return function(S){var P=[E,S];if(_)throw new TypeError("Generator is already executing.");for(;h=v&&P[v=0]?0:h;)try{if(_=1,u&&(r=2&P[0]?u.return:P[0]?u.throw||((r=u.return)&&r.call(u),0):u.next)&&!(r=r.call(u,P[1])).done)return r;switch(u=0,(P=r?[2&P[0],r.value]:P)[0]){case 0:case 1:r=P;break;case 4:return h.label++,{value:P[1],done:!1};case 5:h.label++,u=P[1],P=[0];continue;case 7:P=h.ops.pop(),h.trys.pop();continue;default:if(!(r=0<(r=h.trys).length&&r[r.length-1])&&(P[0]===6||P[0]===2)){h=0;continue}if(P[0]===3&&(!r||P[1]>r[0]&&P[1]<r[3]))h.label=P[1];else if(P[0]===6&&h.label<r[1])h.label=r[1],r=P;else{if(!(r&&h.label<r[2])){r[2]&&h.ops.pop(),h.trys.pop();continue}h.label=r[2],h.ops.push(P)}}P=y.call(f,h)}catch(b){P=[6,b],u=0}finally{_=r=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}}},c={name:"debugger-checker",isOpen:function(){return s(this,void 0,void 0,function(){var f;return g(this,function(y){f=Object(o.a)();try{(function(){}).constructor("debugger")()}catch{}return[2,100<Object(o.a)()-f]})})},isEnable:function(){return s(this,void 0,void 0,function(){return g(this,function(f){return[2,!0]})})}}},function(t,e,a){a.d(e,"a",function(){return r});var o=a(0),s=a(1),g=a(2),c=a(4),f=this&&this.__awaiter||function(h,v,T,E){return new(T=T||p)(function(S,P){function b(C){try{I(E.next(C))}catch(L){P(L)}}function k(C){try{I(E.throw(C))}catch(L){P(L)}}function I(C){var L;C.done?S(C.value):((L=C.value)instanceof T?L:new T(function(N){N(L)})).then(b,k)}I((E=E.apply(h,v||[])).next())})},y=this&&this.__generator||function(h,v){var T,E,S,P={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]},b={next:k(0),throw:k(1),return:k(2)};return typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function k(I){return function(C){var L=[I,C];if(T)throw new TypeError("Generator is already executing.");for(;P=b&&L[b=0]?0:P;)try{if(T=1,E&&(S=2&L[0]?E.return:L[0]?E.throw||((S=E.return)&&S.call(E),0):E.next)&&!(S=S.call(E,L[1])).done)return S;switch(E=0,(L=S?[2&L[0],S.value]:L)[0]){case 0:case 1:S=L;break;case 4:return P.label++,{value:L[1],done:!1};case 5:P.label++,E=L[1],L=[0];continue;case 7:L=P.ops.pop(),P.trys.pop();continue;default:if(!(S=0<(S=P.trys).length&&S[S.length-1])&&(L[0]===6||L[0]===2)){P=0;continue}if(L[0]===3&&(!S||L[1]>S[0]&&L[1]<S[3]))P.label=L[1];else if(L[0]===6&&P.label<S[1])P.label=S[1],S=L;else{if(!(S&&P.label<S[2])){S[2]&&P.ops.pop(),P.trys.pop();continue}P.label=S[2],P.ops.push(L)}}L=v.call(h,P)}catch(N){L=[6,N],E=0}finally{T=S=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}}},_=new Date,u=0,r=(_.toString=function(){return u++,""},{name:"date-to-string",isOpen:function(){return f(this,void 0,void 0,function(){return y(this,function(h){return u=0,Object(s.b)(_),Object(s.a)(),[2,u===2]})})},isEnable:function(){return f(this,void 0,void 0,function(){return y(this,function(h){return[2,Object(g.a)({includes:[o.b],excludes:[(c.isIpad||c.isIphone)&&o.b]})]})})}})},function(t,e,a){a.d(e,"a",function(){return h});var o=a(1),s=a(0),g=a(7),c=a(2),f=a(3),y=a(6),_=this&&this.__awaiter||function(T,E,S,P){return new(S=S||p)(function(b,k){function I(N){try{L(P.next(N))}catch(U){k(U)}}function C(N){try{L(P.throw(N))}catch(U){k(U)}}function L(N){var U;N.done?b(N.value):((U=N.value)instanceof S?U:new S(function(Y){Y(U)})).then(I,C)}L((P=P.apply(T,E||[])).next())})},u=this&&this.__generator||function(T,E){var S,P,b,k={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]},I={next:C(0),throw:C(1),return:C(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function C(L){return function(N){var U=[L,N];if(S)throw new TypeError("Generator is already executing.");for(;k=I&&U[I=0]?0:k;)try{if(S=1,P&&(b=2&U[0]?P.return:U[0]?P.throw||((b=P.return)&&b.call(P),0):P.next)&&!(b=b.call(P,U[1])).done)return b;switch(P=0,(U=b?[2&U[0],b.value]:U)[0]){case 0:case 1:b=U;break;case 4:return k.label++,{value:U[1],done:!1};case 5:k.label++,P=U[1],U=[0];continue;case 7:U=k.ops.pop(),k.trys.pop();continue;default:if(!(b=0<(b=k.trys).length&&b[b.length-1])&&(U[0]===6||U[0]===2)){k=0;continue}if(U[0]===3&&(!b||U[1]>b[0]&&U[1]<b[3]))k.label=U[1];else if(U[0]===6&&k.label<b[1])k.label=b[1],b=U;else{if(!(b&&k.label<b[2])){b[2]&&k.ops.pop(),k.trys.pop();continue}k.label=b[2],k.ops.push(U)}}U=E.call(T,k)}catch(Y){U=[6,Y],P=0}finally{S=b=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}}},r=0,h={name:"performance",isOpen:function(){return _(this,void 0,void 0,function(){var T,E;return u(this,function(S){switch(S.label){case 0:return P=Object(g.a)(),b=Object(y.a)(),Object(o.c)(P),T=Object(y.a)()-b,E=Math.max(v(),v()),r=Math.max(r,E),Object(o.a)(),T===0?[2,!1]:r!==0?[3,2]:[4,Object(f.d)()];case 1:return S.sent()?[2,!0]:[2,!1];case 2:return[2,10*r<T]}var P,b})})},isEnable:function(){return _(this,void 0,void 0,function(){return u(this,function(T){return[2,Object(c.a)({includes:[s.b,s.g,s.d],excludes:[]})]})})}};function v(){var T=Object(g.a)(),E=Object(y.a)();return Object(o.b)(T),Object(y.a)()-E}},function(t,e,a){a.d(e,"a",function(){return g});var o=this&&this.__awaiter||function(c,f,y,_){return new(y=y||p)(function(u,r){function h(E){try{T(_.next(E))}catch(S){r(S)}}function v(E){try{T(_.throw(E))}catch(S){r(S)}}function T(E){var S;E.done?u(E.value):((S=E.value)instanceof y?S:new y(function(P){P(S)})).then(h,v)}T((_=_.apply(c,f||[])).next())})},s=this&&this.__generator||function(c,f){var y,_,u,r={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},h={next:v(0),throw:v(1),return:v(2)};return typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(T){return function(E){var S=[T,E];if(y)throw new TypeError("Generator is already executing.");for(;r=h&&S[h=0]?0:r;)try{if(y=1,_&&(u=2&S[0]?_.return:S[0]?_.throw||((u=_.return)&&u.call(_),0):_.next)&&!(u=u.call(_,S[1])).done)return u;switch(_=0,(S=u?[2&S[0],u.value]:S)[0]){case 0:case 1:u=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,_=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(!(u=0<(u=r.trys).length&&u[u.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!u||S[1]>u[0]&&S[1]<u[3]))r.label=S[1];else if(S[0]===6&&r.label<u[1])r.label=u[1],u=S;else{if(!(u&&r.label<u[2])){u[2]&&r.ops.pop(),r.trys.pop();continue}r.label=u[2],r.ops.push(S)}}S=f.call(c,r)}catch(P){S=[6,P],_=0}finally{y=u=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}},g={name:"eruda",isOpen:function(){var c;return o(this,void 0,void 0,function(){return s(this,function(f){return typeof eruda<"u"?[2,((c=eruda==null?void 0:eruda._devTools)==null?void 0:c._isShow)===!0]:[2,!1]})})},isEnable:function(){return o(this,void 0,void 0,function(){return s(this,function(c){return[2,!0]})})}}},function(t,e,a){a.d(e,"a",function(){return y});var o=a(1),s=this&&this.__awaiter||function(_,u,r,h){return new(r=r||p)(function(v,T){function E(b){try{P(h.next(b))}catch(k){T(k)}}function S(b){try{P(h.throw(b))}catch(k){T(k)}}function P(b){var k;b.done?v(b.value):((k=b.value)instanceof r?k:new r(function(I){I(k)})).then(E,S)}P((h=h.apply(_,u||[])).next())})},g=this&&this.__generator||function(_,u){var r,h,v,T={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]},E={next:S(0),throw:S(1),return:S(2)};return typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(P){return function(b){var k=[P,b];if(r)throw new TypeError("Generator is already executing.");for(;T=E&&k[E=0]?0:T;)try{if(r=1,h&&(v=2&k[0]?h.return:k[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,k[1])).done)return v;switch(h=0,(k=v?[2&k[0],v.value]:k)[0]){case 0:case 1:v=k;break;case 4:return T.label++,{value:k[1],done:!1};case 5:T.label++,h=k[1],k=[0];continue;case 7:k=T.ops.pop(),T.trys.pop();continue;default:if(!(v=0<(v=T.trys).length&&v[v.length-1])&&(k[0]===6||k[0]===2)){T=0;continue}if(k[0]===3&&(!v||k[1]>v[0]&&k[1]<v[3]))T.label=k[1];else if(k[0]===6&&T.label<v[1])T.label=v[1],v=k;else{if(!(v&&T.label<v[2])){v[2]&&T.ops.pop(),T.trys.pop();continue}T.label=v[2],T.ops.push(k)}}k=u.call(_,T)}catch(I){k=[6,I],h=0}finally{r=v=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},c=!1,f={header:function(){return c=!0,null}},y={name:"DevtoolsFormatters",isOpen:function(){return s(this,void 0,void 0,function(){return g(this,function(_){return window.devtoolsFormatters?window.devtoolsFormatters.indexOf(f)===-1&&window.devtoolsFormatters.push(f):window.devtoolsFormatters=[f],c=!1,Object(o.b)({}),Object(o.a)(),[2,c]})})},isEnable:function(){return s(this,void 0,void 0,function(){return g(this,function(_){return[2,!0]})})}}},function(t,e,a){a.d(e,"a",function(){return u});var o=a(0),s=a(2),g=a(3),c=a(7),f=this&&this.__awaiter||function(r,h,v,T){return new(v=v||p)(function(E,S){function P(I){try{k(T.next(I))}catch(C){S(C)}}function b(I){try{k(T.throw(I))}catch(C){S(C)}}function k(I){var C;I.done?E(I.value):((C=I.value)instanceof v?C:new v(function(L){L(C)})).then(P,b)}k((T=T.apply(r,h||[])).next())})},y=this&&this.__generator||function(r,h){var v,T,E,S={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]},P={next:b(0),throw:b(1),return:b(2)};return typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function b(k){return function(I){var C=[k,I];if(v)throw new TypeError("Generator is already executing.");for(;S=P&&C[P=0]?0:S;)try{if(v=1,T&&(E=2&C[0]?T.return:C[0]?T.throw||((E=T.return)&&E.call(T),0):T.next)&&!(E=E.call(T,C[1])).done)return E;switch(T=0,(C=E?[2&C[0],E.value]:C)[0]){case 0:case 1:E=C;break;case 4:return S.label++,{value:C[1],done:!1};case 5:S.label++,T=C[1],C=[0];continue;case 7:C=S.ops.pop(),S.trys.pop();continue;default:if(!(E=0<(E=S.trys).length&&E[E.length-1])&&(C[0]===6||C[0]===2)){S=0;continue}if(C[0]===3&&(!E||C[1]>E[0]&&C[1]<E[3]))S.label=C[1];else if(C[0]===6&&S.label<E[1])S.label=E[1],E=C;else{if(!(E&&S.label<E[2])){E[2]&&S.ops.pop(),S.trys.pop();continue}S.label=E[2],S.ops.push(C)}}C=h.call(r,S)}catch(L){C=[6,L],T=0}finally{v=E=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}},_=0,u={name:"worker-performance",isOpen:function(){return f(this,void 0,void 0,function(){var r,h,v;return y(this,function(T){switch(T.label){case 0:return(r=Object(g.c)())==null?[2,!1]:[4,function(E){return f(this,void 0,void 0,function(){var S;return y(this,function(P){switch(P.label){case 0:return S=Object(c.a)(),[4,E.table(S)];case 1:return[2,P.sent().time]}})})}(r)];case 1:return h=T.sent(),[4,function(E){return f(this,void 0,void 0,function(){var S;return y(this,function(P){switch(P.label){case 0:return S=Object(c.a)(),[4,E.log(S)];case 1:return[2,P.sent().time]}})})}(r)];case 2:return v=T.sent(),_=Math.max(_,v),[4,r.clear()];case 3:return T.sent(),h===0?[2,!1]:_!==0?[3,5]:[4,Object(g.d)()];case 4:return T.sent()?[2,!0]:[2,!1];case 5:return[2,10*_<h]}})})},isEnable:function(){return f(this,void 0,void 0,function(){return y(this,function(r){return[2,Object(s.a)({includes:[o.b],excludes:[]})]})})}}},function(t,e,a){e.b=function(){if(o.a)for(var s=0;s<Number.MAX_VALUE;s++)window["".concat(s)]=new Array(Math.pow(2,32)-1).fill(0)},e.a=function(){if(o.a)for(var s=[];;)s.push(0),location.reload()};var o=a(0)},function(t,e,a){a.d(e,"a",function(){return o});for(var o={},s=0,g=(a(0).i||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];s<g.length;s++){var c=g[s].split("/"),f=c[0];o[f]=c[1]}}],n={},d.m=l,d.c=n,d.d=function(t,e,a){d.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},d.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="",d(d.s=4);function d(t){var e;return(n[t]||(e=n[t]={i:t,l:!1,exports:{}},l[t].call(e.exports,e,e.exports,d),e.l=!0,e)).exports}var l,n},typeof j=="object"&&typeof m=="object"?m.exports=w():typeof j=="object"?j.devtoolsDetector=w():x.devtoolsDetector=w()},{"es6-promise":13}],37:[function(x,m,j){var w=x("./object");m.exports.el=function(p){return document.getElementById(p)},m.exports.createEl=function(p,d){var l;return p=p||"div",d=d||{},l=document.createElement(p),w.each(d,function(n,t){n.indexOf("aria-")!==-1||n=="role"?l.setAttribute(n,t):l[n]=t}),l},m.exports.addClass=function(p,d){p&&(" "+p.className+" ").indexOf(" "+d+" ")==-1&&(p.className=p.className===""?d:p.className+" "+d)},m.exports.removeClass=function(p,d){var l,n;if(p.className.indexOf(d)!=-1){for(n=(l=p.className.split(" ")).length-1;0<=n;n--)l[n]===d&&l.splice(n,1);p.className=l.join(" ")}},m.exports.hasClass=function(p,d){return p.className.indexOf(d)!=-1},m.exports.getClasses=function(p){return p.className?p.className.split(" "):[]},m.exports.getElementAttributes=function(p){var d,l,n={};if(p&&p.attributes&&0<p.attributes.length)for(var t,e=(t=p.attributes).length-1;0<=e;e--)d=t[e].name,l=t[e].value,typeof p[d]!="boolean"&&",autoplay,controls,loop,muted,default,".indexOf(","+d+",")===-1||(l=l!==null),n[d]=l;return n},m.exports.insertFirst=function(p,d){d.firstChild?d.insertBefore(p,d.firstChild):d.appendChild(p)},m.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},m.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},m.exports.css=function(p,d,l){return!(!p||!p.style)&&(d&&l?(p.style[d]=l,!0):l||typeof d!="string"?!l&&typeof d=="object"&&(w.each(d,function(n,t){p.style[n]=t}),!0):p.style[d])},m.exports.getTransformName=function(p){for(var d=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],l=d[0],n=0,t=d.length;n<t;n++)if(p.style[d[n]]!==void 0){l=d[n];break}return l},m.exports.getTransformEventName=function(p,d){for(var l=["","Webkit","Moz","ms","O"],n=d.toLowerCase(),t=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],e=0,a=t.length;e<a;e++)if(p.style[t[e]]!==void 0){e!=0&&(n=l[e]+d);break}return n},m.exports.addCssByStyle=function(n){var d=document,l=d.createElement("style"),n=(l.setAttribute("type","text/css"),l.styleSheet?l.styleSheet.cssText=n:(n=d.createTextNode(n),l.appendChild(n)),d.getElementsByTagName("head"));(n.length?n[0]:d.documentElement).appendChild(l)},m.exports.getTranslateX=function(p){var d=0;if(p)try{var l=window.getComputedStyle(p),n=m.exports.getTransformName(p),d=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(l[n]).m41}catch(t){console.log(t)}return d},m.exports.getPointerPosition=function(t,d){var l={},a=m.exports.findPosition(t),n=t.offsetWidth,t=t.offsetHeight,e=a.top,a=a.left,o=d.pageY,s=d.pageX;return d.changedTouches&&(s=d.changedTouches[0].pageX,o=d.changedTouches[0].pageY),l.y=Math.max(0,Math.min(1,(e-o+t)/t)),l.x=Math.max(0,Math.min(1,(s-a)/n)),l},m.exports.findPosition=function(p){var d,l,n,t;return(d=p.getBoundingClientRect&&p.parentNode?p.getBoundingClientRect():d)?(p=document.documentElement,t=document.body,n=p.clientLeft||t.clientLeft||0,l=window.pageXOffset||t.scrollLeft,l=d.left+l-n,n=p.clientTop||t.clientTop||0,p=window.pageYOffset||t.scrollTop,t=d.top+p-n,{left:Math.round(l),top:Math.round(t)}):{left:0,top:0}}},{"./object":47}],38:[function(x,m,j){var w=x("./object"),p=x("./data"),d=x("./ua"),l=x("./fastclick");function n(t,e,a,o){w.each(a,function(s){t(e,s,o)})}m.exports.on=function(t,e,a){if(t){if(w.isArray(e))return n(m.exports.on,t,e,a);d.IS_MOBILE&&e=="click"&&l.attach(t);var o=p.getData(t);o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),a.guid||(a.guid=p.guid()),o.handlers[e].push(a),o.dispatcher||(o.disabled=!1,o.dispatcher=function(s){if(!o.disabled){s=m.exports.fixEvent(s);var g=o.handlers[s.type];if(g)for(var c=g.slice(0),f=0,y=c.length;f<y&&!s.isImmediatePropagationStopped();f++)c[f].call(t,s)}}),o.handlers[e].length==1&&(t.addEventListener?t.addEventListener(e,o.dispatcher,!1):t.attachEvent&&t.attachEvent("on"+e,o.dispatcher))}},m.exports.off=function(t,e,a){if(t&&p.hasData(t)){var o=p.getData(t);if(o.handlers){if(w.isArray(e))return n(m.exports.off,t,e,a);var s=function(y){o.handlers[y]=[],m.exports.cleanUpEvents(t,y)};if(e){var g=o.handlers[e];if(g)if(a){if(a.guid)for(var c=0;c<g.length;c++)g[c].guid===a.guid&&g.splice(c--,1);m.exports.cleanUpEvents(t,e)}else s(e)}else for(var f in o.handlers)s(f)}}},m.exports.cleanUpEvents=function(t,e){var a=p.getData(t);a.handlers[e].length===0&&(delete a.handlers[e],t.removeEventListener?t.removeEventListener(e,a.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,a.dispatcher)),w.isEmpty(a.handlers)&&(delete a.handlers,delete a.dispatcher,delete a.disabled),w.isEmpty(a)&&p.removeData(t)},m.exports.fixEvent=function(t){function e(){return!0}function a(){return!1}if(!t||!t.isPropagationStopped){var o,s,g,c=t||window.event;for(o in t={},c)o==="layerX"||o==="layerY"||o==="keyboardEvent.keyLocation"||o=="returnValue"&&c.preventDefault||(t[o]=c[o]);t.target||(t.target=t.srcElement||document),t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement,t.preventDefault=function(){c.preventDefault&&c.preventDefault(),t.returnValue=!1,t.isDefaultPrevented=e,t.defaultPrevented=!0},t.isDefaultPrevented=a,t.defaultPrevented=!1,t.stopPropagation=function(){c.stopPropagation&&c.stopPropagation(),t.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=a,t.stopImmediatePropagation=function(){c.stopImmediatePropagation&&c.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=a,t.clientX!=null&&(s=document.documentElement,g=document.body,t.pageX=t.clientX+(s&&s.scrollLeft||g&&g.scrollLeft||0)-(s&&s.clientLeft||g&&g.clientLeft||0),t.pageY=t.clientY+(s&&s.scrollTop||g&&g.scrollTop||0)-(s&&s.clientTop||g&&g.clientTop||0)),t.which=t.charCode||t.keyCode,t.button!=null&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t},m.exports.trigger=function(t,e){var a,o,s;if(t)return a=p.hasData(t)?p.getData(t):{},o=t.parentNode||t.ownerDocument,typeof e=="string"&&(s=null,!t.paramData&&t.paramData!=0||(s=t.paramData,t.paramData=null,typeof s!="string")||t.removeAttribute(s),e={type:e,target:t,paramData:s}),e=m.exports.fixEvent(e),a.dispatcher&&a.dispatcher.call(t,e),o&&!e.isPropagationStopped()&&e.bubbles!==!1?m.exports.trigger(o,e):o||e.defaultPrevented||(s=p.getData(e.target),e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)),!e.defaultPrevented},m.exports.one=function(t,e,a){if(t){if(w.isArray(e))return n(m.exports.one,t,e,a);var o=function(){m.exports.off(t,e,o),a.apply(this,arguments)};o.guid=a.guid=a.guid||p.guid(),m.exports.on(t,e,o)}}},{"./data":35,"./fastclick":39,"./object":47,"./ua":53}],39:[function(x,m,j){function w(a,o){var s;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=a,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!w.notNeeded(a)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=0,f=g.length;c<f;c++)this[g[c]]=((y,_)=>function(){return y.apply(_,arguments)})(this[g[c]],this);d&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(y,_,u){var r=Node.prototype.removeEventListener;y==="click"?r.call(a,y,_.hijacked||_,u):r.call(a,y,_,u)},a.addEventListener=function(y,_,u){var r=Node.prototype.addEventListener;y==="click"?r.call(a,y,_.hijacked||(_.hijacked=function(h){h.propagationStopped||_(h)}),u):r.call(a,y,_,u)}),typeof a.onclick=="function"&&(s=a.onclick,a.addEventListener("click",function(y){s(y)},!1),a.onclick=null)}}var p=0<=navigator.userAgent.indexOf("Windows Phone"),d=0<navigator.userAgent.indexOf("Android")&&!p,l=/iP(ad|hone|od)/.test(navigator.userAgent)&&!p,n=l&&/OS 4_\d(_\d)?/.test(navigator.userAgent),t=l&&/OS [6-7]_\d/.test(navigator.userAgent),e=0<navigator.userAgent.indexOf("BB10");w.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(l&&a.type==="file"||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},w.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!d;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},w.prototype.sendClick=function(a,o){var s;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),o=o.changedTouches[0],(s=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(a),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),s.forwardedTouchEvent=!0,a.dispatchEvent(s)},w.prototype.determineEventType=function(a){return d&&a.tagName.toLowerCase()==="select"?"mousedown":"click"},w.prototype.focus=function(a){var o;l&&a.setSelectionRange&&a.type.indexOf("date")!==0&&a.type!=="time"&&a.type!=="month"&&a.type!=="email"?(o=a.value.length,a.setSelectionRange(o,o)):a.focus()},w.prototype.updateScrollParent=function(a){var o,s=a.fastClickScrollParent;if(!s||!s.contains(a)){o=a;do if(o.scrollHeight>o.offsetHeight){s=o,a.fastClickScrollParent=o;break}while(o=o.parentElement)}s&&(s.fastClickLastScrollTop=s.scrollTop)},w.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},w.prototype.onTouchStart=function(a){var o,s,g;if(!(1<a.targetTouches.length)){if(o=this.getTargetElementFromEventTarget(a.target),s=a.targetTouches[0],l){if((g=window.getSelection()).rangeCount&&!g.isCollapsed)return!0;if(!n){if(s.identifier&&s.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=s.identifier,this.updateScrollParent(o)}}this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=o,this.touchStartX=s.pageX,this.touchStartY=s.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault()}return!0},w.prototype.touchHasMoved=function(o){var o=o.changedTouches[0],s=this.touchBoundary;return Math.abs(o.pageX-this.touchStartX)>s||Math.abs(o.pageY-this.touchStartY)>s},w.prototype.onTouchMove=function(a){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0},w.prototype.findControl=function(a){return a.control!==void 0?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},w.prototype.onTouchEnd=function(a){var o,s,g,c=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,t&&(g=a.changedTouches[0],(c=document.elementFromPoint(g.pageX-window.pageXOffset,g.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),(g=c.tagName.toLowerCase())==="label"){if(s=this.findControl(c)){if(this.focus(c),d)return!1;c=s}}else if(this.needsFocus(c))return 100<a.timeStamp-o||l&&window.top!==window&&g==="input"?this.targetElement=null:(this.focus(c),this.sendClick(c,a),l&&g==="select"||(this.targetElement=null,a.preventDefault())),!1;return!(!l||n||!(s=c.fastClickScrollParent)||s.fastClickLastScrollTop===s.scrollTop)||(this.needsClick(c)||(a.preventDefault(),this.sendClick(c,a)),!1)},w.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},w.prototype.onMouse=function(a){return!this.targetElement||!(!a.forwardedTouchEvent&&a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),1))},w.prototype.onClick=function(a){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):a.target.type==="submit"&&a.detail===0||((a=this.onMouse(a))||(this.targetElement=null),a)},w.prototype.destroy=function(){var a=this.layer;d&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},w.notNeeded=function(a){var o,s;return window.ontouchstart===void 0||(s=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!d||(o=document.querySelector("meta[name=viewport]"))&&(o.content.indexOf("user-scalable=no")!==-1||31<s&&document.documentElement.scrollWidth<=window.outerWidth))||e&&10<=(s=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=s[2]&&(o=document.querySelector("meta[name=viewport]"))&&(o.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)?!0:a.style.msTouchAction==="none"||a.style.touchAction==="manipulation"||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(o=document.querySelector("meta[name=viewport]"))&&(o.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))||a.style.touchAction==="none"||a.style.touchAction==="manipulation"},w.attach=function(a,o){return new w(a,o)},m.exports=w},{}],40:[function(x,m,j){var w=x("./data");m.exports.bind=function(p,d,l){d.guid||(d.guid=w.guid());function n(){return d.apply(p,arguments)}return n.guid=l?l+"_"+d.guid:d.guid,n}},{"./data":35}],41:[function(x,m,j){function w(){var e,u=typeof Symbol=="function"?Symbol:{},a=u.iterator||"@@iterator",o=u.toStringTag||"@@toStringTag";function s(v,z,E,S){var P,b,k,I,C,L,N,U,Y,z=z&&z.prototype instanceof c?z:c,z=Object.create(z.prototype);return p(z,"_invoke",(P=v,b=E,N=S||[],U=!1,Y={p:L=0,n:0,v:e,a:K,f:K.bind(e,4),d:function(M,q){return k=M,I=0,C=e,Y.n=q,g}},function(M,q,ee){if(1<L)throw TypeError("Generator is already running");for(U&&q===1&&K(q,ee),I=q,C=ee;(_=I<2?e:C)||!U;){k||(I?I<3?(1<I&&(Y.n=-1),K(I,C)):Y.n=C:Y.v=C);try{if(L=2,k){if(_=k[M=I?M:"next"]){if(!(_=_.call(k,C)))throw TypeError("iterator result is not an object");if(!_.done)return _;C=_.value,I<2&&(I=0)}else I===1&&(_=k.return)&&_.call(k),I<2&&(C=TypeError("The iterator does not provide a '"+M+"' method"),I=1);k=e}else if((_=(U=Y.n<0)?C:P.call(b,Y))!==g)break}catch(Q){k=e,I=1,C=Q}finally{L=1}}return{value:_,done:U}}),!0),z;function K(M,q){for(I=M,C=q,_=0;!U&&L&&!ee&&_<N.length;_++){var ee,Q=N[_],B=Y.p,R=Q[2];3<M?(ee=R===q)&&(C=Q[(I=Q[4])?5:I=3],Q[4]=Q[5]=e):Q[0]<=B&&((ee=M<2&&B<Q[1])?(I=0,Y.v=q,Y.n=Q[1]):B<R&&(ee=M<3||Q[0]>q||R<q)&&(Q[4]=M,Q[5]=q,Y.n=R,I=0))}if(ee||1<M)return g;throw U=!0,q}}var g={};function c(){}function f(){}function y(){}var _=Object.getPrototypeOf,u=[][a]?_(_([][a]())):(p(_={},a,function(){return this}),_),r=y.prototype=c.prototype=Object.create(u);function h(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,y):(v.__proto__=y,p(v,o,"GeneratorFunction")),v.prototype=Object.create(r),v}return p(r,"constructor",f.prototype=y),p(y,"constructor",f),p(y,o,f.displayName="GeneratorFunction"),p(r),p(r,o,"Generator"),p(r,a,function(){return this}),p(r,"toString",function(){return"[object Generator]"}),(w=function(){return{w:s,m:h}})()}function p(e,a,o,s){var g=Object.defineProperty;try{g({},"",{})}catch{g=0}(p=function(c,f,y,_){function u(r,h){p(c,r,function(v){return this._invoke(r,h,v)})}f?g?g(c,f,{value:y,enumerable:!_,configurable:!_,writable:!_}):c[f]=y:(u("next",0),u("throw",1),u("return",2))})(e,a,o,s)}function d(e,a,o,s,g,c,f){try{var y=e[c](f),_=y.value}catch(u){return o(u)}y.done?a(_):Promise.resolve(_).then(s,g)}function l(e){return function(){var a=this,o=arguments;return new Promise(function(s,g){var c=e.apply(a,o);function f(_){d(c,s,g,f,y,"next",_)}function y(_){d(c,s,g,f,y,"throw",_)}f(void 0)})}}var n,t=typeof Promise>"u"?x("es6-promise").Promise:Promise;x=self,n=function(){return(o={d:function(v,T){for(var E in T)o.o(T,E)&&!o.o(v,E)&&Object.defineProperty(v,E,{enumerable:!0,get:T[E]})},o:function(v,T){return Object.prototype.hasOwnProperty.call(v,T)}}).d(s={},{default:function(){return h}}),g=navigator.userAgent,c=/qqbrowser/i.test(g.toLowerCase()),f=/Edge/i.test(g),f=/Chrome/i.test(g)&&!f&&!c,y=/Safari/i.test(g)&&!f,c=g.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),f=c&&c[1],_=f&&Number(f.split(".")[0]),u=(()=>{var v=l(w().m(function T(E){var S;return w().w(function(P){for(;;)switch(P.n){case 0:return P.n=1,fetch(E);case 1:return S=P.v,P.n=2,S.blob();case 2:return S=P.v,P.a(2,URL.createObjectURL(S))}},T)}));return function(T){return v.apply(this,arguments)}})(),r={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},h=function(v){return v===void 0&&(v={}),new t((()=>{var T=l(w().m(function E(S){var P,b,k,I,C,L,N,U,Y,z,K,M,q;return w().w(function(ee){for(;;)switch(ee.n){case 0:if(I=Object.assign({},r,v),P=I.includeSystemHijack,b=I.showVideo,N=I.codecTags,k=I.format,I=I.timeout,C=performance.now(),L=-1<N.indexOf("hvc1"),N=-1<N.indexOf("hev1"),Y=U=!1,!(y&&_&&11<=_)){ee.n=4;break}if(z=e("hvc1",k),P){ee.n=2;break}return ee.n=1,u(z);case 1:z=ee.v;case 2:return ee.n=3,a(z,b,"hvc1",I);case 3:U=ee.v,ee.n=12;break;case 4:if(!L){ee.n=8;break}if(K=e("hvc1",k),P){ee.n=6;break}return ee.n=5,u(K);case 5:K=ee.v;case 6:return ee.n=7,a(K,b,"hvc1",I);case 7:U=ee.v;case 8:if(!N){ee.n=12;break}if(M=e("hev1",k),P){ee.n=10;break}return ee.n=9,u(M);case 9:M=ee.v;case 10:return ee.n=11,a(M,b,"hev1",I);case 11:Y=ee.v;case 12:q=performance.now(),S({isHvc1Supported:U,isHev1Supported:Y,time:Math.ceil(q-C)});case 13:return ee.a(2)}},E)}));return function(E){return T.apply(this,arguments)}})())},s.default;function e(v,T){var E=(T=T===void 0?"mp4":T)==="hls",S="";switch(v=v===void 0?"":v){case"hvc1":S=E?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":S=E?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:S=""}return S}function a(v,T,E,S){T===void 0&&(T=!1),E===void 0&&(E="");var P=performance.now(),b=S;return new t(function(k){I=v,(C=T?100:0)===void 0&&(C=100),(L=document.createElement("video")).setAttribute("width",""+C),L.setAttribute("height",""+C),L.setAttribute("muted","muted"),L.setAttribute("crossorigin","anonymous"),L.setAttribute("preload","preload"),L.setAttribute("autoplay","autoplay"),L.setAttribute("webkit-playsinline","webkit-playsinline"),L.setAttribute("playsinline","playsinline"),L.setAttribute("x-webkit-airplay","x-webkit-airplay"),L.setAttribute("playsinline","playsinline"),L.src=I;var I,C,L,N=L,U=setInterval(function(){var Y,z,K,M,q;(performance.now()-P>b||N.videoWidth!==0)&&(clearInterval(U),Y=N.videoWidth!==0,T?(N.setAttribute("controls","controls"),z=N,(K=E)===void 0&&(K=""),M=document.createElement("dv"),(q=document.createElement("h3")).innerText=K,M.appendChild(z),M.appendChild(q),document.body.appendChild(M)):(N.pause(),N=null),k(Y))})})}var o,s,g,c,f,y,_,u,r,h},typeof j=="object"&&typeof m=="object"?m.exports=n():typeof j=="object"?j.hevcDetector=n():x.hevcDetector=n()},{"es6-promise":13}],42:[function(x,m,j){function w(l){for(var n in l=typeof l=="string"?this.parseAttrList(l):l)l.hasOwnProperty(n)&&(this[n]=l[n])}var p=/^(\d+)x(\d+)$/,d=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;w.prototype={decimalInteger:function(l){return l=parseInt(this[l],10),l>Number.MAX_SAFE_INTEGER?1/0:l},hexadecimalInteger:function(l){if(this[l]){for(var n=(1&(n=(this[l]||"0x").slice(2)).length?"0":"")+n,t=new Uint8Array(n.length/2),e=0;e<n.length/2;e++)t[e]=parseInt(n.slice(2*e,2*e+2),16);return t}return null},hexadecimalIntegerAsNumber:function(l){return l=parseInt(this[l],16),l>Number.MAX_SAFE_INTEGER?1/0:l},decimalFloatingPoint:function(l){return parseFloat(this[l])},enumeratedString:function(l){return this[l]},decimalResolution:function(l){if(l=p.exec(this[l]),l!==null)return{width:parseInt(l[1],10),height:parseInt(l[2],10)}},parseAttrList:function(l){var n,t={};for(d.lastIndex=0;(n=d.exec(l))!==null;){var e=n[2];e.indexOf('"')===0&&e.lastIndexOf('"')===e.length-1&&(e=e.slice(1,-1)),t[n[1]]=e}return t}},m.exports=w},{}],43:[function(x,m,j){function w(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function p(){this.loaders={}}var d=x("../constants"),l=x("../playerutil"),n=x("./attrlist"),t=x("../io"),e=x("./urltoolkit"),a=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,o=/#EXT-X-MEDIA:(.*)/g,s=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),g=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,c="RegionBlock",f=function(){this.method=null,this.key=null,this.iv=null,this._uri=null};w.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=e.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},w.prototype.Seturl=function(y){this._url=y},w.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},w.prototype.GetbyteRange=function(){var y,_,u;return this._byteRange||(y=this._byteRange=[],this.rawByteRange&&((_=this.rawByteRange.split("@",2)).length===1?(u=this.lastByteRangeEndOffset,y[0]=u||0):y[0]=parseInt(_[1]),y[1]=parseInt(_[0])+y[0])),this._byteRange},w.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},w.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},w.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},p.prototype=((x={parseMasterPlaylist:function(y,_){var u=[];for(a.lastIndex=0;(v=a.exec(y))!=null;){var r={},h=r.attrs=new n(v[1]),v=(r.url=this.resolve(v[2],_),h.decimalResolution("RESOLUTION"));if(v&&(r.width=v.width,r.height=v.height),r.bitrate=h.decimalInteger("AVERAGE-BANDWIDTH")||h.decimalInteger("BANDWIDTH"),r.name=h.NAME,T=h.CODECS)for(var T=T.split(/[ ,]+/),E=0;E<T.length;E++){var S=T[E];S.indexOf("avc1")!==-1?r.videoCodec=this.avc1toavcoti(S):S.indexOf("hvc1")!==-1?r.videoCodec=S:r.audioCodec=S}u.push(r)}return u},parseMasterPlaylistMedia:function(y,_,u,r){var h=[],v=0;for(o.lastIndex=0;(E=o.exec(y))!=null;){var T={},E=new n(E[1]);E.TYPE===u&&(T.groupId=E["GROUP-ID"],T.name=E.NAME,T.type=u,T.default=E.DEFAULT==="YES",T.autoselect=E.AUTOSELECT==="YES",T.forced=E.FORCED==="YES",E.URI&&(T.url=this.resolve(E.URI,_)),T.lang=E.LANGUAGE,T.name||(T.name=T.lang),r&&(T.audioCodec=r),T.id=v++,h.push(T))}return h},avc1toavcoti:function(y){var _=y.split("."),u=2<_.length?(u=_.shift()+".",(u+=parseInt(_.shift()).toString(16))+("000"+parseInt(_.shift()).toString(16)).substr(-4)):y;return u},load:function(y,_,u){var r=this;t.get(y,function(h){var v,T,E,S=r.parseMasterPlaylist(h,y);S.length&&(v=r.parseMasterPlaylistMedia(h,y,"AUDIO",S[0].audioCodec),T=r.parseMasterPlaylistMedia(h,y,"SUBTITLES"),v.length)&&(E=!1,v.forEach(function(P){P.url||(E=!0)}),E===!1)&&S[0].audioCodec&&!S[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main"})),_({levels:S,audioTracks:v,subtitles:T,url:y,string:h})},function(h,v,T){u&&((T=l.parseHttpHeaders(T)["x-tengine-error"])&&-1<d.RegionBlockMessages.indexOf(T)&&(h=c),u(h,v))})},loadMediaPlaylist:function(y,_,u){var r=this,h=(y=y||{}).string,v=y.url;h?(y=r.parseLevelPlaylist(h,v),_(y)):t.get(v,function(T){T=r.parseLevelPlaylist(T,v),_(T)},function(T){u&&u(T)})},resolve:function(y,_){return e.buildAbsoluteURL(_,y,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(y,_){var u=[];for(a.lastIndex=0;(v=a.exec(y))!=null;){var r={},h=r.attrs=new n(v[1]),v=(r.url=this.resolve(v[2],_),h.decimalResolution("RESOLUTION"));if(v&&(r.width=v.width,r.height=v.height),r.bitrate=h.decimalInteger("AVERAGE-BANDWIDTH")||h.decimalInteger("BANDWIDTH"),r.name=h.NAME,T=h.CODECS)for(var T=T.split(/[ ,]+/),E=0;E<T.length;E++){var S=T[E];S.indexOf("avc1")!==-1?r.videoCodec=this.avc1toavcoti(S):S.indexOf("hvc1")!==-1?r.videoCodec=S:r.audioCodec=S}u.push(r)}return u},x.parseMasterPlaylistMedia=function(y,_,u,r){var h=[],v=0;for(o.lastIndex=0;(E=o.exec(y))!=null;){var T={},E=new n(E[1]);E.TYPE===u&&(T.groupId=E["GROUP-ID"],T.name=E.NAME,T.type=u,T.default=E.DEFAULT==="YES",T.autoselect=E.AUTOSELECT==="YES",T.forced=E.FORCED==="YES",E.URI&&(T.url=this.resolve(E.URI,_)),T.lang=E.LANGUAGE,T.name||(T.name=T.lang),r&&(T.audioCodec=r),T.id=v++,h.push(T))}return h},x.avc1toavcoti=function(y){var _=y.split("."),u=2<_.length?(u=_.shift()+".",(u+=parseInt(_.shift()).toString(16))+("000"+parseInt(_.shift()).toString(16)).substr(-4)):y;return u},x.parseLevelPlaylist=function(y,_,u,r){var h,v,T=0,E=0,S={type:null,version:null,url:_,fragments:[],live:!0,startSN:0},P=new f,b=0,k=null,I=new w;for(s.lastIndex=0;(h=s.exec(y))!==null;){var C=h[1];if(C){I.duration=parseFloat(C);var L=(" "+h[2]).slice(1);I.title=L||null,I.tagList.push(L?["INF",C,L]:["INF",C])}else if(h[3])isNaN(I.duration)||(L=T++,I.type=r,I.start=E,I.levelkey=P,I.sn=L,I.level=u,I.cc=b,I.baseurl=_,I.relurl=(" "+h[3]).slice(1),S.fragments.push(I),E+=(k=I).duration,I=new w);else if(h[4])I.rawByteRange=(" "+h[4]).slice(1),k&&(C=k.byteRangeEndOffset)&&(I.lastByteRangeEndOffset=C);else if(h[5])I.rawProgramDateTime=(" "+h[5]).slice(1),I.tagList.push(["PROGRAM-DATE-TIME",I.rawProgramDateTime]),S.programDateTime===void 0&&(S.programDateTime=new Date(new Date(Date.parse(h[5]))-1e3*E));else{for(h=h[0].match(g),v=1;v<h.length&&h[v]===void 0;v++);var N=(" "+h[v+1]).slice(1),U=(" "+h[v+2]).slice(1);switch(h[v]){case"#":I.tagList.push(U?[N,U]:[N]);break;case"PLAYLIST-TYPE":S.type=N.toUpperCase();break;case"MEDIA-SEQUENCE":T=S.startSN=parseInt(N);break;case"TARGETDURATION":S.targetduration=parseFloat(N);break;case"VERSION":S.version=parseInt(N);break;case"EXTM3U":break;case"ENDLIST":S.live=!1;break;case"DIS":b++,I.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":b=parseInt(N);break;case"KEY":var K=new n(N),Y=K.enumeratedString("METHOD"),z=K.URI,K=K.hexadecimalInteger("IV");Y&&(P=new f,z)&&0<=["AES-128","SAMPLE-AES"].indexOf(Y)&&(P.method=Y,P.baseuri=_,P.reluri=z,P.key=null,P.iv=K);break;case"START":Y=new n(N).decimalFloatingPoint("TIME-OFFSET"),isNaN(Y)||(S.startTimeOffset=Y);break;case"MAP":z=new n(N),I.relurl=z.URI,I.rawByteRange=z.BYTERANGE,I.baseurl=_,I.level=u,I.type=r,I.sn="initSegment",S.initSegment=I,I=new w;break;case"PART-INF":K=new n(N),S.partTarget=K.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+h)}}}return(I=k)&&!I.relurl&&(S.fragments.pop(),E-=I.duration),S.totalduration=E,S.averagetargetduration=E/S.fragments.length,S.endSN=T-1,S},x),p.ERROR_REGION_BLOCK=c,m.exports=p},{"../constants":33,"../io":45,"../playerutil":50,"./attrlist":42,"./urltoolkit":44}],44:[function(x,m,j){var w=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,p=/^([^\/;?#]*)(.*)$/,d=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,n={buildAbsoluteURL:function(g,e,a){if(a=a||{},g=g.trim(),!(e=e.trim())){if(!a.alwaysNormalize)return g;var o=n.parseURL(g);if(o)return o.path=n.normalizePath(o.path),n.buildURLFromParts(o);throw new Error("Error trying to parse base URL.")}if(o=n.parseURL(e),!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return a.alwaysNormalize?(o.path=n.normalizePath(o.path),n.buildURLFromParts(o)):e;if(e=n.parseURL(g),!e)throw new Error("Error trying to parse base URL.");!e.netLoc&&e.path&&e.path[0]!=="/"&&(g=p.exec(e.path),e.netLoc=g[1],e.path=g[2]),e.netLoc&&!e.path&&(e.path="/");var s,g={scheme:e.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};return o.netLoc||(g.netLoc=e.netLoc,o.path[0]!=="/"&&(o.path?(s=(s=e.path).substring(0,s.lastIndexOf("/")+1)+o.path,g.path=n.normalizePath(s)):(g.path=e.path,o.params||(g.params=e.params,o.query)||(g.query=e.query)))),g.path===null&&(g.path=a.alwaysNormalize?n.normalizePath(o.path):o.path),n.buildURLFromParts(g)},parseURL:function(t){return t=w.exec(t),t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(d,"");t.length!==(t=t.replace(l,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};m.exports=n},{}],45:[function(x,m,j){var w=x("./url");m.exports.get=function(p,d,l,n,t,e){m.exports.ajax.call(this,"GET",p,{},d,l,n,t,void 0,e)},m.exports.post=function(p,d,l,n,t,e){var a={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};m.exports.ajax("POST",p,d,l,n,t,e,a)},m.exports.postWithHeader=function(p,d,l,n,t){m.exports.ajax("POST",p,d,n,t,!0,!1,l)},m.exports.ajax=function(p,d,l,n,t,e,a,o,s){var g,c,f;t=t||function(){},typeof XMLHttpRequest>"u"&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("This browser does not support XMLHttpRequest.")}),c=new XMLHttpRequest,s&&(c.timeout=s),s=w.parseUrl(d),f=window.location,s.protocol+s.host===f.protocol+f.host||!window.XDomainRequest||"withCredentials"in c?(g=s.protocol=="file:"||f.protocol=="file:",c.onreadystatechange=function(){c.readyState===4&&(c.status===200||g&&c.status===0?n(c.responseText):t(c.responseText,c.status,c))}):((c=new window.XDomainRequest).onload=function(){n(c.responseText)},c.onerror=t,c.onprogress=function(){},c.ontimeout=t);try{if(e===void 0&&(e=!0),c.open(p,d,e),a&&(c.withCredentials=!0),o)for(var y in o)o.hasOwnProperty(y)&&c.setRequestHeader(y,o[y])}catch(_){return void t(_)}try{c.send(l)}catch(_){t(_)}},m.exports.jsonp=function(p,d,l){var n="jsonp_callback_"+Math.round(1e5*Math.random()),t=document.createElement("script");p&&(t.src=p+(0<=p.indexOf("?")?"&":"?")+"callback="+n+"&cb="+n,t.onerror=function(){delete window[n],document.body.removeChild(t),l()},t.onload=function(){setTimeout(function(){window[n]&&(delete window[n],document.body.removeChild(t))},0)},window[n]=function(e){delete window[n],document.body.removeChild(t),d(e)},document.body.appendChild(t))},m.exports.loadJS=function(p,d,l){var n=document.getElementsByTagName("HEAD").item(0),t=document.createElement("script"),e=(t.setAttribute("crossorigin","anonymous"),p&&p.toLowerCase());e&&e.indexOf("https://")<0&&e.indexOf("http://")<0&&e.indexOf("file://")<0&&e.indexOf("C:\\")<0&&(p=document.URL.replace(/(\/[^\/]*?)$/i,"")+p),t.type="text/javascript",t.src=p,t.onload=function(){d&&d()},t.onerror=function(){l&&l()},n.appendChild(t)}},{"./url":54}],46:[function(x,m,j){var w=x("./dom");m.exports.render=function(p,t){var l=t.align||(t.className?"":"tl"),n=t.x||0,t=t.y||0,e=n.indexOf&&0<n.indexOf("%")?"":"px",a=t.indexOf&&0<t.indexOf("%")?"":"px";l==="tl"?w.css(p,{float:"left","margin-left":n+e,"margin-top":t+a}):l==="tr"?w.css(p,{float:"right","margin-right":n+e,"margin-top":t+a}):l==="tlabs"?w.css(p,{position:"absolute",left:n+e,top:t+a}):l==="trabs"?w.css(p,{position:"absolute",right:n+e,top:t+a}):l==="blabs"?w.css(p,{position:"absolute",left:n+e,bottom:t+a}):l==="brabs"?w.css(p,{position:"absolute",right:n+e,bottom:t+a}):l==="cc"&&w.addClass(p,"loading-center")}},{"./dom":37}],47:[function(x,m,j){var w=Object.prototype.hasOwnProperty;m.exports.create=Object.create||function(p){function d(){}return d.prototype=p,new d},m.exports.isArray=function(p){return Object.prototype.toString.call(arg)==="[object Array]"},m.exports.isEmpty=function(p){for(var d in p)if(p[d]!==null)return!1;return!0},m.exports.each=function(p,d,l){if(m.exports.isArray(p))for(var n=0,t=p.length;n<t&&d.call(l||this,p[n],n)!==!1;++n);else for(var e in p)if(w.call(p,e)&&d.call(l||this,e,p[e])===!1)break;return p},m.exports.merge=function(p,d){if(d)for(var l in d)w.call(d,l)&&(p[l]=d[l]);return p},m.exports.deepMerge=function(p,d){var l,n,t;for(l in p=m.exports.copy(p),d)w.call(d,l)&&(n=p[l],t=d[l],m.exports.isPlain(n)&&m.exports.isPlain(t)?p[l]=m.exports.deepMerge(n,t):p[l]=d[l]);return p},m.exports.copy=function(p){return m.exports.merge({},p)},m.exports.isPlain=function(p){return!!p&&typeof p=="object"&&p.toString()==="[object Object]"&&p.constructor===Object},m.exports.isArray=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},m.exports.unescape=function(p){return p.replace(/&([^;]+);/g,function(d,l){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[l.toLowerCase()]||d})}},{}],48:[function(x,m,j){var w,p=x("./object");(w=function(){}).extend=function(d){var l,n,t=(d=d||{}).init||this.prototype.init||function(){};for(n in(((l=function(){t.apply(this,arguments)}).prototype=p.create(this.prototype)).constructor=l).extend=w.extend,l.create=w.create,d)d.hasOwnProperty(n)&&(l.prototype[n]=d[n]);return l},w.create=function(){var d=p.create(this.prototype);return this.apply(d,arguments),d},m.exports=w},{"./object":47}],49:[function(x,m,j){var w=!new Function("try {return this===window;}catch(e){ return false;}")();m.exports.isSSR=w},{}],50:[function(x,m,j){function w(u,r){var h,v=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(v)return(v=v.call(u)).next.bind(v);if(Array.isArray(u)||(v=((T,E)=>{var S;if(T)return typeof T=="string"?p(T,E):(S=(S={}.toString.call(T).slice(8,-1))==="Object"&&T.constructor?T.constructor.name:S)==="Map"||S==="Set"?Array.from(T):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?p(T,E):void 0})(u))||r)return v&&(u=v),h=0,function(){return h>=u.length?{done:!0}:{done:!1,value:u[h++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(u,r){(r==null||r>u.length)&&(r=u.length);for(var h=0,v=Array(r);h<r;h++)v[h]=u[h];return v}var d=typeof Promise>"u"?x("es6-promise").Promise:Promise,l=x("./object"),n=x("../config"),t=x("./dom"),e=x("./cookie"),a=x("./constants"),o=x("../lang/index"),s=x("./ua"),g=x("./io"),c=x("../player/base/plugin/defaultemptycomponent"),f=x("./hardware-decoding-detector"),y={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px ",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},drmOption:{},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,useDrm2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!1,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+n.domain+"/de/prismplayer-flash/"+n.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:s.IS_PC,clickPauseDelay:200,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:"",watchStartTime:void 0,watchEndTime:void 0,start:void 0,end:void 0,dbClickFullscreen:s.IS_PC,dbClickFullscreenDelay:200,enableHlsH265:!1,bitrateDisplayHandler:void 0,longPressFastForward:!s.IS_PC,dbClickSkip:!s.IS_PC,customData:void 0,onLogReport:void 0,enableABR:!0,startQuality:void 0,defaultSubtitleLang:void 0,subtitleRenderMode:void 0,disableSubtitlePausedUpdate:!1,subtitleEditor:void 0,subtitleStyleConfig:void 0,progressTransform:{landscape:!1,scale:1}},_=(m.exports.getDefaultH5Layout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:10,y:10}]}]},m.exports.getDefaultAudioLayout=function(){return[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:10,y:10}]}]},m.exports.getDefaultFlashLayout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},m.exports.canPlayType=function(u){var r=document.createElement("video");return r.canPlayType?r.canPlayType(u):""},m.exports.canPlayHls=function(){var u=s.IS_PC&&s.IS_CHROME,r=s.IS_PC&&s.IS_EDGE_NEW;return m.exports.canPlayType("application/x-mpegURL")!=""&&!u&&!r},m.exports.isUsedHlsPluginOnMobile=function(u){return!!(s.IS_MOBILE&&(s.IS_CHROME||s.IS_FIREFOX||s.IS_X5||s.IS_EDGE_NEW)&&m.exports.isSupportHls())},m.exports.isSafariUsedHlsPlugin=function(u){return!!(s.os.pc&&s.browser.safari&&u)},m.exports.validateSource=function(u){return!0},m.exports.supportH5Video=function(){return document.createElement("video").canPlayType!==void 0},m.exports.createWrapper=function(u){var r=u.id,r=typeof r=="string"?(r.indexOf("#")===0&&(r=r.slice(1)),t.el(r)):r;if(r&&r.nodeName)return m.exports.adjustContainerLayout(r,u),r;throw new TypeError("")},m.exports.adjustContainerLayout=function(u,r){r.width&&!u.style.width&&(u.style.width=r.width),r.height&&!u.style.height&&(u.style.height=r.height)},m.exports.isSupportHls=function(){var u=window.MediaSource=window.MediaSource||window.WebKitMediaSource,r=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,u=u&&typeof u.isTypeSupported=="function"&&u.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=(s.IS_ANDROID&&s.is_X5&&(u=!0),!r||r.prototype&&typeof r.prototype.appendBuffer=="function"&&typeof r.prototype.remove=="function");return u&&r},m.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},m.exports.isSupportFlv=function(){return m.exports.isSupportHls()},m.exports.isSupportMSE=function(){return m.exports.isSupportHls()||m.exports.isSupportMMS()},m.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},m.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&m.exports.isSupportMSE()},m.exports.isAudio=function(u,r){if(r)return m.exports.isMp3Format(r);r=!1;try{r=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="mp3"}catch{return u&&0<u.toLowerCase().indexOf(".mp3")}return r},m.exports.isLiveShift=function(u){return u.isLive&&u.liveStartTime&&u.liveOverTime},m.exports.isHls=function(u,r){if(r)return m.exports.isHlsFormat(r);r=!1;try{r=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="m3u8"}catch{return u&&0<u.toLowerCase().indexOf(".m3u8")}return r},m.exports.isDash=function(u,r){if(r)return m.exports.isDashFormat(r);r=!1;try{r=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="mpd"}catch{return u&&0<u.toLowerCase().indexOf(".mpd")}return r},m.exports.isFlv=function(u,r){if(r)return m.exports.isFlvFormat(r);r=!1;try{r=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="flv"}catch{return u&&0<u.toLowerCase().indexOf(".flv")}return r},m.exports.isRTMP=function(u){return u&&-1<u.toLowerCase().indexOf("rtmp:")},m.exports.isRts=function(u){return u&&-1<u.toLowerCase().indexOf("artc:")},m.exports.isMp4=function(u,r){if(r)return m.exports.isMp4Format(r);r=!1;try{r=u&&new URL("http:"+u).pathname.split(".").pop().toLowerCase()==="mp4"}catch{return u&&-1<u.toLowerCase().indexOf(".mp4")}return r},m.exports.isSupportedFormat=function(u){if(!u)return!1;try{var r=u.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(r)}catch{return!1}},m.exports.isMp3Format=function(u){if(!u)return!1;try{var r=u.toLowerCase();return~["mp3"].indexOf(r)}catch{return!1}},m.exports.isMp4Format=function(u){if(!u)return!1;try{var r=u.toLowerCase();return~["mp4"].indexOf(r)}catch{return!1}},m.exports.isFlvFormat=function(u){if(!u)return!1;try{var r=u.toLowerCase();return~["flv"].indexOf(r)}catch{return!1}},m.exports.isHlsFormat=function(u){if(!u)return!1;try{var r=u.toLowerCase();return~["hls","m3u8"].indexOf(r)}catch{return!1}},m.exports.isDashFormat=function(u){if(!u)return!1;try{var r=u.toLowerCase();return~["mpd"].indexOf(r)}catch{return!1}},m.exports.getFormat=function(h){var r={artc:"rts",m3u8:"hls"},h=(h=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(h))==null?void 0:h[0];return h=h&&h.replace(/\.|:|artc|m3u8/gi,function(v){return r[v]||""})},m.exports.checkSecuritSupport=function(){return m.exports.isSupportMSE()?s.IS_IOS&&(s.IS_UC||s.IS_QUARK||s.IS_BAIDU)?o.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:location.protocol==="http:"?o.get("Error_SW_Https_required"):o.get("UseChromeForVodEncription")+"(SW not found)"},m.exports.nativeSupportH265=function(){return s.IS_IOS||s.IS_MAC_SAFARI},m.exports.findSelectedStreamLevel=function(u,r){var h=r;if(h||(h=e.get(a.SelectedStreamLevel))){for(var v=0;v<u.length;v++)if(u[v].definition==h)return v}else e.set(a.SelectedStreamLevel,u[0].definition,365);return 0},m.exports.getHistoryDetectResult=function(u,r){if(u)return r=r==="hls",u==="hvc1"?r?e.get(a.HWDetectHvc1Hls):e.get(a.HWDetectHvc1):u==="hev1"?r?e.get(a.HWDetectHev1Hls):e.get(a.HWDetectHev1):void 0},m.exports.findAllVttUrlsFromHlsMaster=function(u){return new d(function(r,h){g.get(u,function(v){try{for(var T,E,S,P=v.trim().split(`
`),b=[],k=w(P);!(T=k()).done;){var I,C,L,N,U,Y=T.value;Y.startsWith("#EXT-X-MEDIA")&&Y.includes("TYPE=SUBTITLES")&&(I=Y.match(/URI="([^"]+)"/),C=Y.match(/NAME="([^"]+)"/),L=Y.match(/LANGUAGE="([^"]+)"/),I)&&I[1]&&(N=I[1],U=new URL(N,u).href,b.push({name:C?C[1]:"Unknown",language:L?L[1]:"und",playlistUrl:U}))}b.length===0?r([]):(E=0,S=[],b.forEach(function(z){g.get(z.playlistUrl,function(K){try{for(var M,q,ee=K.trim().split(`
`),Q=null,B=w(ee);!(M=B()).done;){var R=M.value;if(!R.startsWith("#")&&R.trim().endsWith(".vtt")){Q=R.trim();break}}Q&&(q=new URL(Q,z.playlistUrl).href,S.push({name:z.name,language:z.language,url:q})),++E===b.length&&r(S)}catch(H){console.error('Error parsing subtitle track "'+z.name+'":',H),console.error("Track details - Name: "+z.name+", Language: "+z.language+", URL: "+z.playlistUrl),++E===b.length&&r(S)}},function(K){console.error('Failed to fetch subtitle track "'+z.name+'":',K),console.error("Track details - Name: "+z.name+", Language: "+z.language+", URL: "+z.playlistUrl),++E===b.length&&r(S)})}))}catch(z){console.error("Top-level error occurred during HLS subtitle parsing:",z),console.error("Master playlist URL:",u),r(null)}},function(v){console.error("Failed to fetch master playlist:",v),console.error("Master playlist URL:",u),r(null)})})},m.exports.detectInnerTextTrack=function(u,r,h){u&&u.getOptions()&&r&&m.exports.isHls(r,u.getOptions().format)&&u.getOptions().subtitleRenderMode===2&&u.getOptions().textTracks===void 0?(t.addCssByStyle("video::cue { visibility: hidden; }"),t.addCssByStyle("video::cue { display: none; }"),m.exports.findAllVttUrlsFromHlsMaster(r).then(function(v){v&&0<v.length?(v=v.map(function(T){return{default:!1,kind:"subtitles",label:T.name,src:T.url,srclang:"prism_cc_"+T.language}}),h&&h(null,v)):h&&h(error,[])}).catch(function(v){h&&h(v,null),console.log("Unexpected error occurred when handling the subtitle track",v)})):h&&h(null,null)},m.exports.setHistoryDetectResult=function(u,T,h){var v="unknownCodec",T=T==="hls";u==="hvc1"?v=T?a.HWDetectHvc1Hls:a.HWDetectHvc1:u==="hev1"&&(v=T?a.HWDetectHev1Hls:a.HWDetectHev1),e.set(v,h)},m.exports.handleOption=function(u,r){m.exports.isRts(u.source)&&(u.isLive=!0);var h,v=l.merge(l.copy(y),u),T=(u.autoplayPolicy&&(v.autoplayPolicy=l.merge(y.autoplayPolicy,u.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:10,y:10}]),E=!1;if(u.useFlashPrism||m.exports.isRTMP(u.source)?(E=!0,T=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(h=m.exports.isLiveShift(v))?(T.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),T.push({name:"playButton",align:"tl",x:15,y:12}),T.push({name:"liveDisplay",align:"tl",x:15,y:6})):T.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),u.isLive){if(u.skinLayout===void 0)v.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:m.exports.isRts(u.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:10,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:T}];else if(u.skinLayout!=0){for(var S=u.skinLayout.length,P=[],b=-1,k=0;k<S;k++)if(v.skinLayout[k].name=="controlBar"){for(var b=k,I=v.skinLayout[k].children.length,C=0;C<I;C++){var L,N=v.skinLayout[k].children[C].name;N!="liveDisplay"&&N!="liveIco"&&N!="fullScreenButton"&&N!="volume"&&N!="snapshot"&&N!="setting"&&N!="subtitle"&&(!h||N!="progress"&&N!="playButton"&&N!="timeDisplay")||(L=v.skinLayout[k].children[C],N=="progress"?L.name="liveShiftProgress":N=="timeDisplay"?L.name="liveShiftTimeDisplay":E&&N=="liveDisplay"&&(L.name="liveIco"),P.push(L))}break}b!=-1&&(v.skinLayout[b].children=P)}}return(u.components===void 0||!u.components||l.isArray(u.components)&&u.components.length==0)&&u.components!="false"&&(v.components=[c]),v},m.exports.ignoreSkinLayouts=function(u,r){var h;if(r!=null&&r.length&&u!=null&&u.length)return h=u,r.forEach(function(v){var T,E,S;-1<v.indexOf(".")?(S=v.split("."),T=S[0],E=S[1],(S=h.find(function(P){return P.name===T}))&&(S.children=S.children.filter(function(P){return P.name!==E}))):h=h.filter(function(P){return P.name!==v})}),h},m.exports.getLiveHostByRegion=function(u){var r="live.aliyuncs.com";return u&&-1<["ap-southeast-1","eu-central-1"].indexOf(u)?"live."+u+".aliyuncs.com":r},m.exports.isVideoTag=function(u){return u&&typeof u.nodeName=="string"&&u.nodeName.toLowerCase()==="video"},m.exports.unqiueTextTracks=function(u){var r=[],r=(u=u===void 0?[]:u).reduce(function(v,T){var E;return v.some(function(S){return S.srclang===T.srclang})?v:((E=T).label=T.label||T.srclang,[].concat(v,[E]))},[]),h={};return r.forEach(function(v,T){h[v.label]?h[v.label].push(T):h[v.label]=[T]}),Object.keys(h).forEach(function(v){v=h[v]||[],1<v.length&&v.forEach(function(T){r[T].label=r[T].label+"("+r[T].srclang+")"})}),r},m.exports.isHvc1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("hvc1")},m.exports.isHev1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("hev1")},m.exports.isVvccCodec=function(u){return-1<(u=u===void 0?"":u).indexOf("vvcC")},m.exports.isVvc1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("vvc1")},m.exports.isVvi1Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("vvi1")},m.exports.isH265Codec=function(u){return m.exports.isHvc1Codec(u=u===void 0?"":u)||m.exports.isHev1Codec(u)},m.exports.isH266Codec=function(u){return m.exports.isVvccCodec(u=u===void 0?"":u)||m.exports.isVvc1Codec(u)||m.exports.isVvi1Codec(u)},m.exports.isH264Codec=function(u){return-1<(u=u===void 0?"":u).indexOf("avc1")},m.exports.getVideoTrack=function(u){var r;return(u=u===void 0?[]:u).forEach(function(h){Number(h.type)===1&&(r=h)}),r},s.IS_ANDROID&&(s.dingTalk()||s.IS_UC||s.is_X5||s.IS_HUAWEI||s.IS_XIAOMI||s.IS_OPPO||s.IS_VIVO||s.IS_MEIZU||s.IS_SAMSUNG||s.IS_WEBVIEW)||s.os&&s.os.name==="windows"&&s.IS_UC);m.exports.shouldUseBasePlayer=function(S,r){var h,v,T,E=S.codecTag,S=S.url,P="unsupported";return!E||(T=m.exports.isHvc1Codec(E),h=m.exports.isMp4(S),S=m.exports.isHls(S),h&&m.exports.nativeSupportH265()&&T)||h&&(()=>{if(!(!_&&(s.IS_CHROME||s.IS_EDGE_NEW)))return!1;var b=0;try{b=s.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch{b=0}return!(parseInt(b)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))})()?r(!0):_?(T=m.exports.getHistoryDetectResult(E,v=S?"hls":"mp4"))==="supported"?r(!0):T===P?r(!1):void f({codecTags:[E],format:v,timeout:2e3}).then(function(b){if(b=b.isHev1Supported||b.isHvc1Supported,m.exports.setHistoryDetectResult(E,v,b?"supported":P),b)return r(!0);r(!1)}).catch(function(b){console.log("hevcDetector ERROR",b),r(!1)}):r(!1)},m.exports.parseHttpHeaders=function(u){if(u){var r={};try{u instanceof Response?u.headers.forEach(function(h,v){r[v]=h}):u.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(T){var T=T.split(": "),v=T.shift(),T=T.join(": ");r[v]=T})}catch{}return r}},m.exports.detectRegionBlock=function(u,r){g.get(u,function(){r(!1)},function(h,v,T){T=m.exports.parseHttpHeaders(T)["x-tengine-error"],v===403&&T&&-1<a.RegionBlockMessages.indexOf(T)?r(!0):r(!1)})},m.exports.enableDbClickSkip=function(u){return u.dbClickSkip&&!u.dbClickFullscreen},m.exports.drawSnapshotText=function(u,r){r=r.snapshotWatermark,r&&r.text&&(u.font=r.font,r.fillColor&&(u.fillStyle=r.fillColor,u.fillText(r.text,r.left,r.top)),r.strokeColor&&(u.strokeStyle=r.strokeColor,u.strokeText(r.text,r.left,r.top)),u.stroke())},m.exports.hasValue=function(u){return u!=null&&u!==""}},{"../config":19,"../lang/index":28,"../player/base/plugin/defaultemptycomponent":110,"./constants":33,"./cookie":34,"./dom":37,"./hardware-decoding-detector":41,"./io":45,"./object":47,"./ua":53,"es6-promise":13}],51:[function(x,m,j){var w=x("./object"),p=x("../player/adaptiveplayer"),d=x("./constants").USER_EVENT_NAME;m.exports.reloadInstance=function(s,n,t){var e=t,a=(e.dispose(),s.readyCallback),o=s._readyCallbackCalled,s=p.create(s,function(g){n(g),o||a(g)});m.exports.restoreUserEvents(t,s),m.exports.removeAllProps(e),(e.__proto__=s)[d]=e[d]},m.exports.storeUserEvents=function(l){var n=l,t=n.__proto__.on,e={};n.on=function(a,o){typeof o=="function"&&(e[a]?e[a].push(o):e[a]=[o],this._el)&&(o.binded=!0,t.call(n,a,o))},n[d]=e},m.exports.restoreUserEvents=function(l,n){var t=l[d];t&&w.each(t,function(e){t[e].forEach(function(a){n.on(e,a)})})},m.exports.removeAllProps=function(l,n){for(var t in n=[].concat(n=n||[],[d]),l)l.hasOwnProperty(t)&&n.indexOf(t)===-1&&delete l[t]}},{"../player/adaptiveplayer":81,"./constants":33,"./object":47}],52:[function(x,m,j){m.exports.set=function(w,p){try{window.localStorage&&localStorage.setItem(w,p)}catch{window[w+"_localStorage"]=p}},m.exports.get=function(w){try{if(window.localStorage)return localStorage.getItem(w)}catch{return window[w+"_localStorage"]}return""}},{}],53:[function(x,m,j){var w,p,d;if(m.exports.USER_AGENT=navigator.userAgent,m.exports.IS_IPHONE=/iPhone/i.test(m.exports.USER_AGENT),m.exports.IS_IPAD=/iPad/i.test(m.exports.USER_AGENT),m.exports.IS_IPOD=/iPod/i.test(m.exports.USER_AGENT),m.exports.IS_MAC=/mac/i.test(m.exports.USER_AGENT),m.exports.IS_EDGE=/Edge/i.test(m.exports.USER_AGENT),m.exports.IS_EDGE_NEW=/Edg/i.test(m.exports.USER_AGENT)&&!m.exports.IS_EDGE,m.exports.IS_IE11=/Trident\/7.0/i.test(m.exports.USER_AGENT),m.exports.IS_X5=/qqbrowser/i.test(m.exports.USER_AGENT.toLowerCase()),m.exports.IS_CHROME=/Chrome/i.test(m.exports.USER_AGENT)&&!m.exports.IS_EDGE&&!m.exports.IS_EDGE_NEW&&!m.exports.IS_X5,m.exports.IS_SAFARI=/Safari/i.test(m.exports.USER_AGENT)&&!m.exports.IS_CHROME&&!m.exports.IS_EDGE_NEW,m.exports.IS_FIREFOX=/Firefox/i.test(m.exports.USER_AGENT),m.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_QUARK=/Quark/i.test(m.exports.USER_AGENT),m.exports.IS_HUAWEI=/HuaweiBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_XIAOMI=/MiuiBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_OPPO=/HeyTapBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_VIVO=/VivoBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_MEIZU=/MZBrowser/i.test(m.exports.USER_AGENT),m.exports.IS_SAMSUNG=/samsungbrowser/i.test(m.exports.USER_AGENT),m.exports.IS_BAIDU=/baiduboxapp/i.test(m.exports.USER_AGENT),document.all)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");m.exports.HAS_FLASH=!!l}catch{m.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(l=navigator.plugins["Shockwave Flash"],m.exports.HAS_FLASH=!!l):m.exports.HAS_FLASH=!1;m.exports.IS_MAC_SAFARI=m.exports.IS_MAC&&m.exports.IS_SAFARI&&!m.exports.IS_CHROME&&!m.exports.HAS_FLASH,m.exports.IS_IOS=m.exports.IS_IPHONE||m.exports.IS_IPAD||m.exports.IS_IPOD,m.exports.IOS_VERSION=(()=>{var n=m.exports.USER_AGENT.match(/OS (\d+)_/i);if(n&&n[1])return n[1]})(),m.exports.IOS_FULL_VERSION=(()=>{var n=m.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(n&&n[1]&&n[2])return n[1]+"."+n[2]})(),m.exports.IS_HARMONY=/OpenHarmony/i.test(m.exports.USER_AGENT),m.exports.IS_ANDROID=/Android/i.test(m.exports.USER_AGENT)||m.exports.IS_HARMONY,m.exports.ANDROID_VERSION=(l=m.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(p=l[1]&&parseFloat(l[1]),w=l[2]&&parseFloat(l[2]),p&&w?parseFloat(l[1]+"."+l[2]):p||null):null,m.exports.IS_OLD_ANDROID=m.exports.IS_ANDROID&&/webkit/i.test(m.exports.USER_AGENT)&&m.exports.ANDROID_VERSION<2.3,m.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),m.exports.IS_MOBILE=m.exports.IS_IOS||m.exports.IS_ANDROID,m.exports.IS_H5=m.exports.IS_MOBILE||!m.exports.HAS_FLASH,m.exports.IS_PC=!m.exports.IS_MOBILE,m.exports.is_X5=/micromessenger/i.test(m.exports.USER_AGENT)||/qqbrowser/i.test(m.exports.USER_AGENT),m.exports.IS_ANDROID_FIREFOX=m.exports.IS_ANDROID&&m.exports.IS_FIREFOX,m.exports.CHROME_VERSION=m.exports.IS_CHROME&&m.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],m.exports.getHost=function(n){var t,e,a="";return n===void 0||n==null||n==""?"":(t=n.indexOf("//"),e=n,a=e=-1<t?n.substring(t+2):e,(n=(a=(n=e.split("/"))&&0<n.length?n[0]:a).split(":"))&&0<n.length?n[0]:a)},m.exports.dingTalk=function(){var n=m.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(n)},m.exports.IS_DINGTALK=m.exports.dingTalk(),m.exports.wechat=function(){var n=m.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(n)},m.exports.inIFrame=function(){return self!=top},m.exports.getReferer=function(){var n=document.referrer;if(m.exports.inIFrame())try{n=top.document.referrer}catch{n=document.referrer}return n},m.exports.getHref=function(){if(m.exports.inIFrame())try{top.location.href}catch{}return location.href},m.exports.check360=function(){return navigator.userAgent.indexOf("Safari")!=-1?(()=>{var n=navigator.userAgent.split(" ");if(n[n.length-1].indexOf("Safari")!=-1){for(var t in navigator.plugins)if(navigator.plugins[t].filename=="np-mswmp.dll")return!0}return!1})():(navigator.msPointerEnabled==null||navigator.msPointerEnabled)&&(navigator.msDoNotTrack==1||window.doNotTrack==1)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(navigator.userAgent.indexOf("MSIE 7.0")!=-1||navigator.userAgent.indexOf("MSIE 8.0")!=-1)&&console.count==null)},(function(n,u){var e=this.os={},a=this.browser={},o=n.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=n.match(/(Android);?[\s\/]+([\d.]+)?/),g=!!n.match(/\(Macintosh\; Intel /),c=n.match(/(iPad).*OS\s([\d_]+)/),f=n.match(/(iPod)(.*OS\s([\d_]+))?/),y=!c&&n.match(/(iPhone\sOS)\s([\d_]+)/),_=n.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=/Win\d{2}|Windows/.test(u),r=n.match(/Windows Phone ([\d.]+)/),h=_&&n.match(/TouchPad/),v=n.match(/Kindle\/([\d.]+)/),T=n.match(/Silk\/([\d._]+)/),E=n.match(/(BlackBerry).*Version\/([\d.]+)/),S=n.match(/(BB10).*Version\/([\d.]+)/),P=n.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=n.match(/PlayBook/),k=n.match(/Chrome\/([\d.]+)/)||n.match(/CriOS\/([\d.]+)/),I=n.match(/Firefox\/([\d.]+)/),C=n.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),L=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),N=!k&&n.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),U=N||n.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(a.webkit=!!o)&&(a.version=o[1]),s&&(e.android=!0,e.version=s[2]),y&&!f&&(e.ios=e.iphone=!0,e.version=y[2].replace(/_/g,".")),c&&(e.ios=e.ipad=!0,e.version=c[2].replace(/_/g,".")),f&&(e.ios=e.ipod=!0,e.version=f[3]?f[3].replace(/_/g,"."):null),r&&(e.wp=!0,e.version=r[1]),_&&(e.webos=!0,e.version=_[2]),h&&(e.touchpad=!0),E&&(e.blackberry=!0,e.version=E[2]),S&&(e.bb10=!0,e.version=S[2]),P&&(e.rimtabletos=!0,e.version=P[2]),b&&(a.playbook=!0),v&&(e.kindle=!0,e.version=v[1]),T&&(a.silk=!0,a.version=T[1]),!T&&e.android&&n.match(/Kindle Fire/)&&(a.silk=!0),k&&(a.chrome=!0,a.version=k[1]),I&&(a.firefox=!0,a.version=I[1]),C&&(e.firefoxos=!0,e.version=C[1]),L&&(a.ie=!0,a.version=L[1]),U&&(g||e.ios||u||s)&&(a.safari=!0,e.ios||e.android||(a.version=U[1])),e.ios&&(a.version=e.version),N&&(a.webview=!0),g&&((o=n.match(/[\d]*_[\d]*_[\d]*/))&&0<o.length&&o[0]&&(e.version=o[0].replace(/_/g,".")),/MQBHD/.test(n))&&(a.version=((n.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),e.tablet=!!(c||b||s&&!n.match(/Mobile/)||I&&n.match(/Tablet/)||L&&!n.match(/Phone/)&&n.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(s||y||_||E||S||k&&n.match(/Android/)||k&&n.match(/CriOS\/([\d.]+)/)||I&&n.match(/Mobile/)||L&&n.match(/Touch/))),e.pc=!e.tablet&&!e.phone,g?e.name="macOS":u?(e.name="windows",e.version=(()=>{var Y=navigator.userAgent,z="";return(-1<Y.indexOf("Windows NT 5.0")||-1<Y.indexOf("Windows 2000"))&&(z="2000"),(-1<Y.indexOf("Windows NT 5.1")||-1<Y.indexOf("Windows XP"))&&(z="XP"),(-1<Y.indexOf("Windows NT 5.2")||-1<Y.indexOf("Windows 2003"))&&(z="2003"),(-1<Y.indexOf("Windows NT 6.0")||-1<Y.indexOf("Windows Vista"))&&(z="Vista"),(-1<Y.indexOf("Windows NT 6.1")||-1<Y.indexOf("Windows 7"))&&(z="7"),(-1<Y.indexOf("Windows NT 6.2")||-1<Y.indexOf("Windows 8"))&&(z="8"),(-1<Y.indexOf("Windows NT 6.3")||-1<Y.indexOf("Windows 8.1"))&&(z="8.1"),z=-1<Y.indexOf("Windows NT 10")||-1<Y.indexOf("Windows 10")?"10":z})()):e.name=(()=>{var Y=navigator.userAgent,z="other",K=m.exports.os;return K.ios?"iOS":K.android?"android":-1<Y.indexOf("OpenHarmony")?"ohos":-1<Y.indexOf("Baiduspider")?"Baiduspider":-1<Y.indexOf("PlayStation")?"PS4":(K=navigator.platform=="Win32"||navigator.platform=="Windows"||-1<Y.indexOf("Windows"),(Y=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel")&&(z="macOS"),navigator.platform!="X11"||K||Y||(z="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(z="Linux"),K?"windows":z)})(),a.name=(f=navigator.userAgent.toLowerCase(),(r=m.exports.browser).firefox?"Firefox":r.ie?/edge/.test(f)?"Edge":"IE":m.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(f)?"":/qqbrowser/.test(f)?"QQ":m.exports.IS_UC?"UC":m.exports.IS_QUARK?"Quark":m.exports.IS_DINGTALK?"Dingtalk":m.exports.IS_HUAWEI?"HuaweiBrowser":m.exports.IS_XIAOMI?"MiBrowser":m.exports.IS_OPPO?"OppoBrowser":m.exports.IS_VIVO?"VivoBrowser":m.exports.IS_MEIZU?"MeizuBrowser":m.exports.IS_SAMSUNG?"SamsungBrowser":m.exports.IS_WEBVIEW||/MQBHD/.test(f)?"webview":r.chrome?"Chrome":r.safari?"Safari":/baiduspider/.test(f)?"Baiduspider":/opera/.test(f)?"Opera":/360se/.test(f)?"360":/bidubrowser/.test(f)?"":/metasr/.test(f)?"":/lbbrowser/.test(f)?"":/playstation/.test(f)?"PS4":void 0)}).call(m.exports,navigator.userAgent,navigator.platform),m.exports.IS_WEBVIEW=(w=m.exports.USER_AGENT,p=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),d=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!w.match(p)&&!w.match(d))},{}],54:[function(x,m,j){var w=x("./dom");m.exports.getAbsoluteURL=function(p){return p=p.match(/^https?:\/\//)?p:w.createEl("div",{innerHTML:'<a href="'+p+'">x</a>'}).firstChild.href},m.exports.parseUrl=function(p){var d,l=["protocol","hostname","port","pathname","search","hash","host"],n=w.createEl("a",{href:p}),t=n.host===""&&n.protocol!=="file:";t&&((d=w.createEl("div")).innerHTML='<a href="'+p+'"></a>',n=d.firstChild,d.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(d));for(var e={},a=0;a<l.length;a++)e[l[a]]=n[l[a]];return e.segments=n.pathname.replace(/^\//,"").split("/"),t&&document.body.removeChild(d),e}},{"./dom":37}],55:[function(x,m,j){var w=x("./dom"),p=x("./ua"),d=x("./playerutil");m.exports.formatTime=function(t){t=Math.max(0,t||0);var n,t=Math.floor(t),e=Math.floor(t/3600);return t%=3600,n=Math.floor(t/60),t=t%60,!(e===1/0||isNaN(e)||n===1/0||isNaN(n)||t==1/0||isNaN(t))&&((e=10<=e?e:"0"+e)==="00"?"":e+":")+(10<=n?n:"0"+n)+":"+(10<=t?t:"0"+t)},m.exports.extractTime=function(l){var n;return l?((n=10<=(n=parseInt(l.getHours()))?n:"0"+n)==="00"?"":n+":")+(n=10<=(n=parseInt(l.getMinutes()))?n:"0"+n)+":"+(n=10<=(n=parseInt(l.getSeconds()))?n:"0"+n):""},m.exports.convertToTimestamp=function(l,n){var t="";return l&&(n?t=l.gettime():(t=Date.parse(l),t/=1e3)),t},m.exports.convertToDate=function(l,n){var t="";return l&&(t=new Date).setTime(1e3*l),t},m.exports.parseTime=function(l){var n,t,e;return l?(e=t=n=0,(l=l.split(":")).length===3?(n=l[0],t=l[1],e=l[2]):l.length===2?(t=l[0],e=l[1]):l.length===1&&(e=l[0]),3600*(n=parseInt(n,10))+60*(t=parseInt(t,10))+(e=Math.ceil(parseFloat(e)))):"00:00:00"},m.exports.formatDate=function(l,n){var t,e={"M+":l.getMonth()+1,"d+":l.getDate(),"H+":l.getHours(),"m+":l.getMinutes(),"s+":l.getSeconds(),"q+":Math.floor((l.getMonth()+3)/3),S:l.getMilliseconds()};for(t in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(l.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?e[t]:("00"+e[t]).substr((""+e[t]).length)));return n},m.exports.sleep=function(l){},m.exports.htmlEncodeAll=function(l){return l==null?"":l.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},m.exports.toBinary=function(l){if(!window.atob)return"";for(var n=atob(l),t=n.length,e=new Uint8Array(t),a=0;a<t;a++)e[a]=n.charCodeAt(a);return e},m.exports.readyBinary=function(l){for(var n=new Uint8Array(l),t=n.length,e="",a=0;a<t;a++)e+=n[a];return e},m.exports.delayHide=function(l,n){l&&(n===void 0&&(n=1e3),l.delayHanlder&&clearTimeout(l.delayHanlder),l.delayHanlder=setTimeout(function(){w.css(l,"display","none")},n))},m.exports.openInFile=function(){return window.location.protocol.toLowerCase().indexOf("file")!=-1},m.exports.contentProtocolMixed=function(l,n,t){return!!((p.os.pc&&(d.isHls(l,t)&&!p.browser.safari||d.isFlv(l,t))||n)&&window.location.protocol.toLowerCase()=="https:"&&l&&-1<l.toLowerCase().indexOf("http://"))},m.exports.queryString=function(l){var n,t,e;return(l=(l=decodeURIComponent(l)).split("?")).length===2&&(n=l[1].split("&"))?(t={},e=0,$(n).each(function(){var a=n[e].split("=");a.length===2&&(t[a[0]]=a[1].replace(/\+/g," ")),e++}),t):{}},m.exports.log=function(l){var n=window.location.href,n=m.exports.queryString(n);n&&n.debug==1&&console.log(l)},m.exports.arrayBufferToB64=function(l){for(var n="",t=new Uint8Array(l),e=t.byteLength,a=0;a<e;a++)n+=String.fromCharCode(t[a]);return window.btoa(n)},m.exports.b64ToArrayBuffer=function(l){for(var n=atob(l),t=new Uint8Array(n.length),e=0;e<n.length;e++)t[e]=n.charCodeAt(e);return t.buffer},m.exports.throttle=function(l,n){var t=null,e=0;return function(){for(var a=this,o=arguments.length,s=new Array(o),g=0;g<o;g++)s[g]=arguments[g];var c=Date.now(),f=n-(c-e);f<=0?(l.apply(this,s),e=c):(clearTimeout(t),t=setTimeout(function(){l.apply(a,s),e=Date.now()},f))}}},{"./dom":37,"./playerutil":50,"./ua":53}],56:[function(x,m,j){function w(d){for(var l=5381,n=d.length;n;)l=33*l^d.charCodeAt(--n);return(l>>>0).toString()}var p=x("./vttparse");m.exports={parse:function(e,l,n){var t,e=e.trim().replace(/\r\n|\n\r|\n|\r/g,`
`).split(`
`),a=[],o=new p;o.oncue=function(s){s.id=w(s.startTime)+w(s.endTime)+w(s.text),s.text=decodeURIComponent(escape(s.text)),s.isBig=!1;var g=s.text.split("#xywh=");g.length==2&&(g=g[1].split(","),s.x=g[0],s.y=g[1],s.w=g[2],s.h=g[3],s.isBig=!0),0<s.endTime&&a.push(s)},o.onparsingerror=function(s){t=s},o.onflush=function(){t&&n?(n(t),console.log(t)):l(a)},e.forEach(function(s){o.parse(s+`
`)}),o.flush()}}},{"./vttparse":58}],57:[function(x,m,j){function w(t){return typeof t=="string"&&!!n[t.toLowerCase()]&&t.toLowerCase()}function p(t){for(var e=1;e<arguments.length;e++){var a,o=arguments[e];for(a in o)t[a]=o[a]}return t}function d(t,e,a){var o=this,s=(()=>{if(typeof navigator<"u")return/MSIE\s8\.0/.test(navigator.userAgent)})(),g={},c=(s?o=document.createElement("custom"):g.enumerable=!0,o.hasBeenReset=!1,""),f=!1,y=t,_=e,u=a,r=null,h="",v=!0,T="auto",E="start",S=50,P="middle",b=50,k="middle";if(Object.defineProperty(o,"id",p({},g,{get:function(){return c},set:function(I){c=""+I}})),Object.defineProperty(o,"pauseOnExit",p({},g,{get:function(){return f},set:function(I){f=!!I}})),Object.defineProperty(o,"startTime",p({},g,{get:function(){return y},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");y=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",p({},g,{get:function(){return _},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");_=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",p({},g,{get:function(){return u},set:function(I){u=""+I,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",p({},g,{get:function(){return r},set:function(I){r=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",p({},g,{get:function(){return h},set:function(I){if(I=typeof(I=I)=="string"&&!!l[I.toLowerCase()]&&I.toLowerCase(),I===!1)throw new SyntaxError("An invalid or illegal string was specified.");h=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",p({},g,{get:function(){return v},set:function(I){v=!!I,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",p({},g,{get:function(){return T},set:function(I){if(typeof I!="number"&&I!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",p({},g,{get:function(){return E},set:function(I){if(I=w(I),!I)throw new SyntaxError("An invalid or illegal string was specified.");E=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",p({},g,{get:function(){return S},set:function(I){if(I<0||100<I)throw new Error("Position must be between 0 and 100.");S=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",p({},g,{get:function(){return P},set:function(I){if(I=w(I),!I)throw new SyntaxError("An invalid or illegal string was specified.");P=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",p({},g,{get:function(){return b},set:function(I){if(I<0||100<I)throw new Error("Size must be between 0 and 100.");b=I,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",p({},g,{get:function(){return k},set:function(I){if(I=w(I),!I)throw new SyntaxError("An invalid or illegal string was specified.");k=I,this.hasBeenReset=!0}})),o.displayState=void 0,s)return o}var l,n;m.exports=typeof window<"u"&&window.VTTCue?window.VTTCue:(l={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0},d.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},d)},{}],58:[function(x,m,j){function w(){return{decode:function(o){if(!o)return"";if(typeof o!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(o))}}}var p=x("./vttcue");function d(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new w,this.regionList=[]}function l(){this.values=Object.create(null)}function n(o,s,g,c){var f,y,_=c?o.split(c):[o];for(f in _)typeof _[f]=="string"&&(y=_[f].split(g)).length===2&&s(y[0],y[1])}l.prototype={set:function(o,s){this.get(o)||s===""||(this.values[o]=s)},get:function(o,s,g){return g?this.has(o)?this.values[o]:s[g]:this.has(o)?this.values[o]:s},has:function(o){return o in this.values},alt:function(o,s,g){for(var c=0;c<g.length;++c)if(s===g[c]){this.set(o,s);break}},integer:function(o,s){/^-?\d+$/.test(s)&&this.set(o,parseInt(s,10))},percent:function(o,s){return!!(s.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(s=parseFloat(s))&&s<=100)&&(this.set(o,s),!0)}};var t=new p(0,0,0),e=t.align==="middle"?"middle":"center";function a(o,s,g){var c,f,y=o;function _(){var r,h=(h=(h=o).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(r=(r=h[4])&&r.replace(".",""),h[3]?v(h[1],h[2],h[3].replace(":",""),r):59<h[1]?v(h[1],h[2],0,r):v(0,h[1],h[2],r)):null;function v(T,E,S,P){return 3600*(0|T)+60*(0|E)+(0|S)+(0|P)/1e3}if(h===null)throw new Error("Malformed timestamp: "+y);return o=o.replace(/^[^\sa-zA-Z-]+/,""),h}function u(){o=o.replace(/^\s+/,"")}if(u(),s.startTime=_(),u(),o.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+y);o=o.substr(3),u(),s.endTime=_(),u(),c=o,s=s,f=new l,n(c,function(r,h){switch(r){case"region":for(var v=g.length-1;0<=v;v--)if(g[v].id===h){f.set(r,g[v].region);break}break;case"vertical":f.alt(r,h,["rl","lr"]);break;case"line":var T=h.split(","),E=T[0];f.integer(r,E),f.percent(r,E)&&f.set("snapToLines",!1),f.alt(r,E,["auto"]),T.length===2&&f.alt("lineAlign",T[1],["start",e,"end"]);break;case"position":T=h.split(","),f.percent(r,T[0]),T.length===2&&f.alt("positionAlign",T[1],["start",e,"end","line-left","line-right","auto"]);break;case"size":f.percent(r,h);break;case"align":f.alt(r,h,["start",e,"end","left","right"])}},/:/,/\s/),s.region=f.get("region",null),s.vertical=f.get("vertical",""),(c=f.get("line","auto"))==="auto"&&t.line===-1&&(c=-1),s.line=c,s.lineAlign=f.get("lineAlign","start"),s.snapToLines=f.get("snapToLines",!0),s.size=f.get("size",100),s.align=f.get("align",e),(c=f.get("position","auto"))==="auto"&&t.position===50&&(c=s.align==="start"||s.align==="left"?0:s.align==="end"||s.align==="right"?100:50),s.position=c}d.prototype={parse:function(o){var s,g,c=this;function f(){for(var v=0,T=(T=c.buffer).replace(/<br(?: \/)?>/gi,`
`);v<T.length&&T[v]!=="\r"&&T[v]!==`
`;)++v;var E=T.substr(0,v);return T[v]==="\r"&&++v,T[v]===`
`&&++v,c.buffer=T.substr(v),E}o&&(c.buffer+=c.decoder.decode(o,{stream:!0}));try{if(c.state==="INITIAL"){if(!/\r\n|\n/.test(c.buffer))return this;var y,_=(y=f()).match(/^WEBVTT([ \t].*)?$/);if(!_||!_[0])throw new Error("Malformed WebVTT signature.");c.state="HEADER"}for(var u,r=!1;c.buffer;){if(!/\r\n|\n/.test(c.buffer))return this;switch(r?r=!1:y=f(),c.state){case"HEADER":/:/.test(y)?n(y,function(v,T){v==="Region"&&console.log("parse region",T)},/:/):y||(c.state="ID");continue;case"NOTE":y||(c.state="ID");continue;case"REGION":y?c.regionBlock.push(y):(parseRegion(c.regionBlock.join(`
`)),c.regionBlock=null,c.state="ID");continue;case"STYLE":y?c.styleBlock.push(y):(u=c.styleBlock.join(`
`),g=void 0,/::cue\(.*\)\s*\{[^}]*\}/.test(s=u)?(g=s.replace(/\s*\{\s*/g,"{").replace(/\s*\}\s*/g,"}").replace(/\s*;\s*/g,";").replace(/;}/g,"}"),c.onstyle&&c.onstyle(g),c.styleList.push(g)):console.warn("Invalid STYLE block:",s),c.styleBlock=null,c.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(y)){c.state="NOTE";break}if(/^REGION($|[ \t])/.test(y)){c.regionBlock=[],c.state="REGION";break}if(/^STYLE($|[ \t])/.test(y)){c.styleBlock=[],c.state="STYLE";break}if(!y)continue;if(c.cue=new p(0,0,""),c.state="CUE",y.indexOf("-->")===-1){c.cue.id=y;continue}case"CUE":try{a(y,c.cue,c.regionList)}catch{c.cue=null,c.state="BADCUE";continue}c.state="CUETEXT";continue;case"CUETEXT":var h=y.indexOf("-->")!==-1;if(!y||h&&(r=!0)){c.oncue&&c.oncue(c.cue),c.cue=null,c.state="ID";continue}c.cue.text&&(c.cue.text+=`
`),c.cue.text+=y;continue;case"BADCUE":y||(c.state="ID");continue}}}catch{c.state==="CUETEXT"&&c.cue&&c.oncue&&c.oncue(c.cue),c.cue=null,c.state=c.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&this.state!=="HEADER"||(this.buffer+=`

`,this.parse()),this.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(o){throw o}return this.onflush&&this.onflush(),this}},m.exports=d},{"./vttcue":57}],59:[function(c,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(y){for(var _=1;_<arguments.length;_++){var u,r=arguments[_];for(u in r)!{}.hasOwnProperty.call(r,u)||(y[u]=r[u])}return y}).apply(null,arguments)}function p(y,_){for(var u=0;u<_.length;u++){var r=_[u];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(y,(h=>typeof(h=((v,T)=>{if(typeof v!="object"||!v)return v;var E=v[Symbol.toPrimitive];if(E===void 0)return(T==="string"?String:Number)(v);if(typeof(E=E.call(v,T))!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")})(h,"string"))=="symbol"?h:h+"")(r.key),r)}}function d(y,_,u){return _&&p(y.prototype,_),Object.defineProperty(y,"prototype",{writable:!1}),y}var l=c("./vtt-parser"),n=c("./vtt-renderer"),t=c("./vtt-loader"),e=c("../../player/base/event/eventtype"),a=c("../../lib/ua"),o=c("../../lib/event"),s=c("../../ui/component/util"),g=n.CTR_BAR_HEIGHT,c=(()=>{function y(u){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this._disableSubtitlePausedUpdate=!1,this.sleeper=new f,this.player=(u=u||{}).player,this.loader=new t,this.parser=new l,this.createRendererInstance(),this.bindEvents()}var _=y.prototype;return _.bindEvents=function(){function u(S){S.paramData.splayer&&h.switchRenderer(n.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var r,h=this,v=this,T=this.player,E=(T.on(e.Private.TextTrackFounded,function(S){if(S.paramData.from==="user")h.hasUserTracks=!0;else if(h.hasUserTracks)return;S=S.paramData.textTracks,S&&S.length&&(h.enabled=!0,h.trackConfigs=S.map(function(P){return w({},P,{label:P.label||P.srclang,language:P.srclang})}),h.trackConfigs.forEach(function(P){h.activeRenderer.addTrack(P),T.getOptions().controlBarVisibility==="always"&&h.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+g+"px")+")"},h.parser.cues)}))}),T.on(e.Private.UserTrackReset,function(){h.hasUserTracks=!1}),T.on(e.Player.H265PlayInfo,u),T.on(e.Player.H266PlayInfo,u),a.IS_IOS?(r=!1,T.on(e.Player.RequestFullScreen,function(){r=!0}),o.on(T.tag,"webkitendfullscreen",function(){r=!1}),o.on(T.tag.textTracks,"change",function(){var S;h.sleeper.isSleep||(h.sleeper.sleep(1e3),h.isCustomRenderer)||r&&(S=T.tag.textTracks,(S=Array.from(S).find(function(P){return P.mode==="showing"}))?h.activeTrackConfig&&h.activeTrackConfig.language===S.language||(h.switchTrack(S.language),T.trigger(e.Private.SelectorValueChange,{type:"cc",text:S.label})):T.trigger(e.Private.CCStateChanged,{value:"off",lang:""}))})):(T.on(e.Player.RequestFullScreen,this.adjustLayout.bind(this)),T.on(e.Player.CancelFullScreen,this.adjustLayout.bind(this)),E=s.debounce(function(){v.isCustomRenderer&&(v.activeRenderer.resetCuesStyle(h.parser.cues),v.activeRenderer.updateOverlayPosition())},100),o.on(window,"resize",E)),s.throttle(function(){v.isShow&&(v.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+g+"px")+")"},v.parser.cues),v.isCustomRenderer)&&v.player.paused()&&(v.activeRenderer.hide(),v.activeRenderer.restore())},100)),E=(T.on(e.Private.ShowBar,E),s.throttle(function(){v.isShow&&(v.activeRenderer.forceUpdateCuesStyle({transform:"none"},v.parser.cues),v.isCustomRenderer)&&v.player.paused()&&(v.activeRenderer.hide(),v.activeRenderer.restore())},100));T.on(e.Private.HideBar,E),T.on(e.Private.VttHide,function(){h.hide()}),T.on(e.Private.VttSwitchTrack,function(S){h.switchTrack(S.paramData)}),T.on(e.Private.VttClearTracks,function(){h.reset()}),T.on(e.Player.VttSwitchResult,function(S){S.paramData.success&&(v.prevPosition=null,v.isCustomRenderer)&&v.player.paused()&&(S=v.player.getCurrentTime(),isNaN(S)||v.activeRenderer.renderCues(v.findTargetCues(S)))})},_.createRendererInstance=function(u){this.activeRenderer&&this.activeRenderer.dispose();var r=this.player.getOptions(),h={player:this.player};this._disableSubtitlePausedUpdate=r.disableSubtitlePausedUpdate===!0,this.adaptPlatform(),u?u===n.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new n.NativeRenderer(h):(h.overlayId=this.getOverlayId(),this.activeRenderer=new n.CustomRenderer(h)):r.useNativeTextRenderer?this.activeRenderer=new n.NativeRenderer(h):(h.overlayId=this.getOverlayId(),this.activeRenderer=new n.CustomRenderer(h))},_.switchTrack=function(u){var r,h=this,v=(u||"").replace("prism_cc_","");this.trackConfigs&&this.trackConfigs.length?((r=this.parser)!=null&&r.dispose(),this.parser=new l,this.activeTrackConfig&&(this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=u,(r=this.trackConfigs.find(function(T){return T.language===u}))?(r=r._loaded?"":(r||{}).src,this.loadVtt(r,function(){h.parseVtt(),h.parser.cues.length?(h.activeRenderer.applyStyles(h.parser._styles),h.activeRenderer.createRegionContainer(h.parser._regions),h.activeRenderer.addCues(h.parser.cues,h.activeTrackConfig.language),h.show(),h.player.trigger(e.Player.VttSwitchResult,{success:!0,language:u,originalLanguage:v})):h.player.trigger(e.Player.VttSwitchResult,{success:!1,language:u,originalLanguage:v,error:"VTT invalid content: "+h.parser.vttText})},function(T,E){h.player.trigger(e.Player.VttSwitchResult,{success:!1,language:u,originalLanguage:v,error:"VTT request failed",detail:{error:T,status:E}})})):this.player.trigger(e.Player.VttSwitchResult,{success:!1,language:u,originalLanguage:v,error:"Target track config not found"})):this.player.trigger(e.Player.VttSwitchResult,{success:!1,language:u,originalLanguage:v,error:"No track configs available"})},_.adaptPlatform=function(){var u=this.player.getOptions();a.IS_IOS&&u.useNativeTextRenderer!==void 0&&u.subtitleRenderMode!==2&&(u.useNativeTextRenderer=!0)},_.loadVtt=function(u,r,h){var v=this;u?this.loader.loadFromUrl(u,function(T){v.activeTrackConfig._loaded=!0,v.vttText[v.activeTrackConfig.language]=T,r&&r()},h):r&&r()},_.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var u=this.player.el().getElementsByClassName("prism-controlbar")[0];u&&((u=u.style)==null?void 0:u.display)==="block"&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+g+"px")+")"},this.parser.cues)},_.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},_.switchRenderer=function(u){var r=this,h=n.VttBasicRenderer.RENDER_TYPE_NATIVE,v=n.VttBasicRenderer.RENDER_TYPE_CUSTOM;(u===h&&this.activeRenderer.type!==h||u===v&&this.activeRenderer.type!==v)&&(this.createRendererInstance(u),this.trackConfigs.forEach(function(T){return r.activeRenderer.addTrack(T)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},_.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},_.adjustLayout=function(){var u=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){u.activeRenderer.restore()},300))},_.startTickTimeListener=function(){var u=this;this.clearTicker(),this.tick(function(){var r=u.player.getCurrentTime();isNaN(r)||u.activeRenderer.renderCues(u.findTargetCues(r))})},_.tick=function(u){var r=this;this.tickTimer=requestAnimationFrame(function(){try{u()}catch{}r.tick(u)})},_.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},_.getOverlayId=function(){var u=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(u)return u.id},_.findTargetCues=function(u){if(this.parser){if(this._disableSubtitlePausedUpdate){if(u===this.prevPosition)return;this.prevPosition=u}for(var r=[],h=0;h<this.parser.cues.length;h++){var v=this.parser.cues[h];if(u>=v.startTime&&u<v.endTime)r.push(v);else if(u<v.startTime)break}return r}},_.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},_.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._disableSubtitlePausedUpdate=!1,this._enabled=!1,this._isShow=!1},d(y,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(u){this._enabled=u}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===n.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var u;return(u=this.trackConfigs)==null?void 0:u.find(function(r){return r._isActive})},set:function(u){this.trackConfigs.forEach(function(r){return r._isActive=r.language===u})}}])})(),f=(()=>{function y(){this.value=!1,this.timer=null}return y.prototype.sleep=function(_){var u=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){u.value=!1},_)},d(y,[{key:"isSleep",get:function(){return this.value}}])})();m.exports=c},{"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":84,"../../ui/component/util":180,"./vtt-loader":61,"./vtt-parser":62,"./vtt-renderer":63}],60:[function(o,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(g){for(var c=1;c<arguments.length;c++){var f,y=arguments[c];for(f in y)!{}.hasOwnProperty.call(y,f)||(g[f]=y[f])}return g}).apply(null,arguments)}function p(g,c){g.prototype=Object.create(c.prototype),d(g.prototype.constructor=g,c)}function d(g,c){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,y){return f.__proto__=y,f})(g,c)}function l(g,c){for(var f=0;f<c.length;f++){var y=c[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,(_=>typeof(_=((u,r)=>{if(typeof u!="object"||!u)return u;var h=u[Symbol.toPrimitive];if(h===void 0)return(r==="string"?String:Number)(u);if(typeof(h=h.call(u,r))!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")})(_,"string"))=="symbol"?_:_+"")(y.key),y)}}function n(g,c,f){return c&&l(g.prototype,c),Object.defineProperty(g,"prototype",{writable:!1}),g}var t=o("../../lib/data"),e={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},a={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},o=(g=>{function c(_){var _=w({},_=_===void 0?{}:_,{kind:_.kind||a.SUBTITLES,language:_.language||_.srclang||""}),u=_.mode||e.DISABLED;return-1<[a.METADATA,a.CHAPTERS].indexOf(_.kind)&&(u=e.HIDDEN),_.mode=u,(u=g.call(this,_)||this)._cues=[],u._activeCues=[],u._settings={},u._nativeTrack=null,u._extData={},u._settings=_,u}p(c,g);var f=c.prototype;return f.setExtData=function(y){this._extData=w({},this._extData,y=y===void 0?{}:y)},f.addCue=function(y){this._cues.push(y),this.nativeTrack&&this.nativeTrack.addCue(y)},f.removeCue=function(y){this._cues=this._cues.filter(function(_){return _!==y}),this.nativeTrack&&this.nativeTrack.removeCue(y)},n(c,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(y){this._settings.mode=y,this.nativeTrack&&(this.nativeTrack.mode=y)}},{key:"language",get:function(){return this._settings.language},set:function(y){this._settings.language=y,this.nativeTrack&&(this.nativeTrack.language=y)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(y){this._nativeTrack=y}}])})(n(function(g){this._id=(g=g===void 0?{}:g).id||"prism-track-"+t.guid(),this._kind=g.kind||"",this._language=g.language||"",this._label=g.label||""},[{key:"label",get:function(){return this._label},set:function(g){this._label=g}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}])),s=(g=>{function c(){return g.call(this)||this}return p(c,g),c})((()=>{function g(){this._trackList=[]}return g.prototype.addTrack=function(c){var f=this.length;""+f in this||Object.defineProperty(this,f,{get:function(){return this._trackList[f]}}),this._trackList.indexOf(c)===-1&&this._trackList.push(c)},n(g,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}])})());m.exports.TextTrack=o,m.exports.TextTrackList=s,m.exports.TRACK_MODE=e,m.exports.TRACK_KIND=a},{"../../lib/data":35}],61:[function(x,m,j){var w=x("../io");m.exports=(()=>{function p(){}return p.prototype.loadFromUrl=function(d,l,n){w.get(d,function(t){l(t)},function(t,e){n&&n(t,e)})},p})()},{"../io":45}],62:[function(d,m,j){function w(l,n){for(var t=0;t<n.length;t++){var e=n[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,(a=>typeof(a=((o,s)=>{if(typeof o!="object"||!o)return o;var g=o[Symbol.toPrimitive];if(g===void 0)return(s==="string"?String:Number)(o);if(typeof(g=g.call(o,s))!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")})(a,"string"))=="symbol"?a:a+"")(e.key),e)}}var p=d("./vttjs").WebVTT,d=(()=>{function l(){var e=this;this._cues=[],this._regions=[],this._styles=[],this._rawText="",this.parser=new p.Parser(window,p.StringDecoder()),this.parser.onregion=function(a){e._regions.push(a)},this.parser.oncue=function(a){e._cues.push(a)},this.parser.onstyle=function(a){e._styles.push(a)},this.parser.onflush=function(){},this.parser.onparsingerror=function(a){}}var n,t=l.prototype;return t.parse=function(e){this._rawText=e,this.parser.parse(e),this.parser.flush()},t.reset=function(){this.parser.flush(),this._cues=[],this._regions=[],this._styles=[],this._rawText=""},t.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[],this._styles=[],this._rawText=""},t=l,(n=[{key:"cues",get:function(){return this._cues}},{key:"vttText",get:function(){return this._rawText||""}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t})();m.exports=d},{"./vttjs":64}],63:[function(g,m,j){function w(f,y){for(var _=0;_<y.length;_++){var u=y[_];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,(r=>typeof(r=((h,v)=>{if(typeof h!="object"||!h)return h;var T=h[Symbol.toPrimitive];if(T===void 0)return(v==="string"?String:Number)(h);if(typeof(T=T.call(h,v))!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")})(r,"string"))=="symbol"?r:r+"")(u.key),u)}}function p(){return(p=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var _,u=arguments[y];for(_ in u)!{}.hasOwnProperty.call(u,_)||(f[_]=u[_])}return f}).apply(null,arguments)}function d(f,y){f.prototype=Object.create(y.prototype),l(f.prototype.constructor=f,y)}function l(f,y){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,u){return _.__proto__=u,_})(f,y)}g("../../player/base/event/eventtype");var c=g("./text-track"),n=g("./vttjs").WebVTT,t=g("../../lib/dom"),e=c.TextTrack,a=c.TextTrackList,o=c.TRACK_MODE,s=(c.TRACK_KIND,(()=>{function f(_){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(_=_||{}).player,this.defineTextTrackGetter(),this.trackList=new a}var y=f.prototype;return y.log=function(){for(var _,u=arguments.length,r=new Array(u),h=0;h<u;h++)r[h]=arguments[h];(_=console).log.apply(_,["[LOG:"+this.type+"]"].concat(r))},y.defineTextTrackGetter=function(){var _=this;this.player.getTextTracks=function(){return _.trackList||[]}},y.show=function(_){_=this.findTrackByLanguage(_),_&&(_.mode=o.SHOWING)},y.findTrackByLanguage=function(_){return this.trackList.list.find(function(u){return u.language===_})},y.clearCurrentCues=function(_){if(_){var u=_.mode;if(u===o.DISABLED&&(_.mode=o.HIDDEN),_.cues)for(var r=_.cues.length;r--;)_.removeCue(_.cues[r]);u===o.DISABLED&&(_.mode=u)}},y.addTrack=function(){},y.addCues=function(){},y.applyStyles=function(){},y.createRegionContainer=function(){},y.restore=function(){},y.renderCues=function(){},y.updateOverlayPosition=function(){},y.updateCuesStyle=function(){},y.clearTrack=function(_){this.clearCurrentCues(this.findTrackByLanguage(_))},y.clearAllTracks=function(){var _=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(u){u.mode=o.DISABLED,_.clearCurrentCues(u)}),this.trackList=new a},y.reset=function(){this.hide(),this.clearAllTracks()},y.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},f})()),g=(s.RENDER_TYPE_CUSTOM="CUSTOM",s.RENDER_TYPE_NATIVE="NATIVE",(f=>{function y(u){var r=f.call(this,u)||this;return r.overlayId=null,r.currentCues=null,r.defaultRegionContainer=null,r.regionContainers=new Map,u=u||{},r.type=s.RENDER_TYPE_CUSTOM,r.overlayId=u.overlayId,r}d(y,f);var _=y.prototype;return _.addTrack=function(u){var r=new e({kind:u.kind,label:u.label,language:u.language,default:u.default});r.mode=u.default?o.SHOWING:o.DISABLED,this.trackList.addTrack(r)},_.hide=function(){var u=this,r=!0;return this.defaultRegionContainer&&(r=n.processCues(window,[],this.defaultRegionContainer,this.player._options.subtitleEditor,this.player._options.subtitleStyleConfig,this.overlayEl)),this.regionContainers&&this.regionContainers.forEach(function(h,v){v!=="default"&&h&&(r=n.processCues(window,[],h,u.player._options.subtitleEditor,u.player._options.subtitleStyleConfig,u.overlayEl))}),r},_.applyStyles=function(u){var r=document.head.querySelectorAll("style[vtt-custom-style]");if(r.forEach(function(v){return v.remove()}),u&&(!Array.isArray(u)||u.length!==0)){if(r=Array.isArray(u)?u:[u],u=r,this.player&&this.player._options.subtitleEditor&&typeof this.player._options.subtitleEditor=="function")try{var h=this.player._options.subtitleEditor(null,{type:"style",styles:r});h&&typeof h=="object"&&(u=Array.isArray(h)?h:this._mergeStyleModifications(r,h))}catch(v){console.error("[VTT] Error in subtitleEditor (style):",v)}u.forEach(function(v){var T,E,S=document.createElement("style"),P=(S.setAttribute("vtt-custom-style","true"),S.type="text/css","");for(T in v)v.hasOwnProperty(T)&&(E=v[T],P+="."+T+" { "+Object.entries(E).map(function(b){return b[0]+": "+b[1]+";"}).join(" ")+` }
`);S.textContent=P,document.head.appendChild(S)})}},_._mergeStyleModifications=function(u,r){var h,v=JSON.parse(JSON.stringify(u));for(h in r)if(r.hasOwnProperty(h)){for(var T,E=r[h],S=!1,P=0;P<v.length;P++)if(v[P][h]){Object.assign(v[P][h],E),S=!0;break}S||v.push(((T={})[h]=E,T))}return v},_.updateOverlayPosition=function(){var u,r,h,v;this.overlayEl&&this.player&&this.player.tag&&(h=(v=this.player.tag).videoWidth,v=v.videoHeight,u=this.overlayEl.parentElement.offsetWidth,r=this.overlayEl.parentElement.offsetHeight,h<=0||v<=0||(h=h/v,v=u/r,this.overlayEl.style.position="absolute",h<v?(this.overlayEl.style.width=(v=r*h)+"px",this.overlayEl.style.height=r+"px",this.overlayEl.style.top="0",this.overlayEl.style.left=(u-v)/2+"px"):(v=u/h,this.overlayEl.style.width=u+"px",this.overlayEl.style.height=v+"px",this.overlayEl.style.top=(r-v)/2+"px",this.overlayEl.style.left="0")))},_.createRegionContainer=function(u){var r=this;!this.overlayEl&&this.overlayId&&(this.overlayEl=document.getElementById(this.overlayId)),this.overlayEl&&(this.overlayEl.innerHTML="",this.regionContainers.clear(),!this.overlayEl&&this.overlayId&&(this.overlayEl=document.getElementById(this.overlayId)),this.overlayEl&&(this.updateOverlayPosition(),this.defaultRegionContainer=document.createElement("div"),this.defaultRegionContainer.className="webvtt-default-region",this.defaultRegionContainer.style.position="absolute",this.defaultRegionContainer.style.top="0",this.defaultRegionContainer.style.left="0",this.defaultRegionContainer.style.width="100%",this.defaultRegionContainer.style.height="100%",this.overlayEl.appendChild(this.defaultRegionContainer)),this.defaultRegionContainer&&this.regionContainers.set("default",this.defaultRegionContainer),u.forEach(function(T){var v=T.id,T=T.region,E=document.createElement("div"),S=(E.className="vtt-custom-region",E.id=v,parseFloat(T.width)),I=T.lines!==void 0?T.lines:3,P=15,b=r.overlayEl.offsetWidth,k=r.overlayEl.offsetHeight,b=Math.min(b,k),k=(b&&(P=.05*b*I/b*100),E.style.position="absolute",E.style.width=S+"%",E.style.height=P+"%",T.viewportAnchorX-S*T.regionAnchorX/100),I=T.viewportAnchorY-P*T.regionAnchorY/100;if(E.style.top=I+"%",E.style.left=k+"%",r.player&&r.player._options.subtitleEditor&&typeof r.player._options.subtitleEditor=="function")try{var C=r.player._options.subtitleEditor(null,{type:"region",regionContainer:E,regionData:{id:v,region:T},overlayEl:r.overlayEl});if(C&&typeof C=="object"&&!C.nodeType)for(var L in C)C.hasOwnProperty(L)&&(L==="innerHTML"||L==="outerHTML"||L==="innerText"?console.warn('[VTT] Unsafe property "'+L+'" in region editor result is ignored'):typeof C[L]!="string"&&typeof C[L]!="number"?console.warn('[VTT] Invalid value type for property "'+L+'" in region editor result'):E.style[L]=C[L])}catch(N){console.error("[VTT] Error in subtitleEditor (region):",N)}r.overlayEl&&(r.overlayEl.appendChild(E),r.regionContainers.set(v,E))}))},_.restore=function(){var u,r=this;this.currentCues&&(this.updateOverlayPosition(),this.currentCues.forEach(function(h){return h.displayState=null}),u=new Map,this.currentCues.forEach(function(h){var v=r.getContainerForCue(h);v&&(u.has(v)||u.set(v,[]),u.get(v).push(h))}),u.forEach(function(h,v){n.processCues(window,h,v,r.player._options.subtitleEditor,r.player._options.subtitleStyleConfig,r.overlayEl),r.updateCuesStyle(h,v)}),this.regionContainers.forEach(function(h){u.has(h)||n.processCues(window,[],h,r.player._options.subtitleEditor,r.player._options.subtitleStyleConfig,r.overlayEl)}))},_.renderCues=function(u){var r,h=this;u&&(this.currentCues=u,this.updateOverlayPosition(),r=new Map,0<u.length&&(u.forEach(function(v){var T=h.getContainerForCue(v);T&&(r.has(T)||r.set(T,[]),r.get(T).push(v))}),r.forEach(function(v,T){n.processCues(window,v,T,h.player._options.subtitleEditor,h.player._options.subtitleStyleConfig,h.overlayEl),h.updateCuesStyle(v,T)})),!r.has(this.defaultRegionContainer)&&this.defaultRegionContainer&&n.processCues(window,[],this.defaultRegionContainer,this.player._options.subtitleEditor,this.player._options.subtitleStyleConfig,this.overlayEl),this.regionContainers.forEach(function(v){r.has(v)||n.processCues(window,[],v,h.player._options.subtitleEditor,h.player._options.subtitleStyleConfig,h.overlayEl)}))},_.getContainerForCue=function(u){if(u){if(u.region_id&&this.regionContainers){var r=this.regionContainers.get(u.region_id);if(r)return r;console.warn("Region container with id '"+u.region_id+"' not found for cue")}return this.defaultRegionContainer}},_.updateCuesStyle=function(u,r){var h=this;u.forEach(function(v){var T,E,S,P=v.displayState;P._styleSetDone||P&&(P.setAttribute("class","prism-cue"),(S=h.player&&h.player._options.subtitleRenderMode===2?(T=.0533,h.overlayEl.offsetHeight):(T=.05,S=h.overlayEl.offsetWidth,E=h.overlayEl.offsetHeight,Math.min(S,E)))&&(P.style.fontSize=S*T+"px",P.style.height="auto",P.style.top="auto"),typeof v.position=="number"?P.style.left=v.position-50+"%":v.position!=="auto"&&v.position!==void 0||(P.style.left="0%"),44<((b,k)=>(b=b.getBoundingClientRect(),k.getBoundingClientRect().bottom-b.bottom))(P,h.overlayEl)&&(h.overrideStyle.transform="none"),h.player&&h.player._options.subtitleRenderMode===2&&(h.overrideStyle.transform="none"),Object.keys(h.overrideStyle).forEach(function(b){h.tryUpdateStyle(P,b,h.overrideStyle[b])}),P._styleSetDone=!0)})},_.updateOverrideStyle=function(u){this.overrideStyle=p({},this.overrideStyle,u=u===void 0?{}:u)},_.forceUpdateCuesStyle=function(u,r){r===void 0&&(r=[]),this.updateOverrideStyle(u=u===void 0?{}:u),this.resetCuesStyle(r)},_.tryUpdateStyle=function(u,r,h){try{u.style[r]=h}catch{}},_.resetCuesStyle=function(u){u&&u.length&&u.forEach(function(r){r.displayState&&(r.displayState=null)})},_.dispose=function(){f.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null,this.defaultRegionContainer=null},y})(s)),c=(f=>{function y(r){return(r=f.call(this,r=r===void 0?{}:r)||this).type=s.RENDER_TYPE_NATIVE,r}d(y,f);var _,u=y.prototype;return u.addTrack=function(r){var h=this.player.tag,v=Array.from(h.textTracks)||[],T=v.find(function(E){return E.language===r.language}),v=T?(this.log("sameLangTrack",T,v),this.clearCurrentCues(T),T.kind=r.kind,T.label=r.label,T):h.addTextTrack(r.kind,r.label,r.language),T=(v.mode=r.default?o.SHOWING:o.DISABLED,new e(r));T.nativeTrack=v,this.trackList.addTrack(T)},u.addCues=function(r,h){var v;r&&r.length&&(v=this.trackList.list.find(function(T){return T.language===h}))&&r.forEach(function(T){v.addCue(T)})},u.hide=function(){this.trackList.list.forEach(function(r){r.mode=r.mode===o.SHOWING?o.HIDDEN:r.mode})},u.invalidAllTracks=function(){},u.forceUpdateCuesStyle=function(r,h){t.addCssByStyle("video::-webkit-media-text-track-container{transform: "+r.transform+";}")},u.dispose=function(){f.prototype.dispose.call(this)},u=y,(_=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(r){return r.mode===o.SHOWING})}}])&&w(u.prototype,_),Object.defineProperty(u,"prototype",{writable:!1}),u})(s);m.exports.VttBasicRenderer=s,m.exports.CustomRenderer=g,m.exports.NativeRenderer=c,m.exports.CTR_BAR_HEIGHT=44},{"../../lib/dom":37,"../../player/base/event/eventtype":84,"./text-track":60,"./vttjs":64}],64:[function(x,m,j){m.exports={WebVTT:x("./vtt.js").WebVTT},window.VTTRegion=x("./vttregion.js").VTTRegion},{"./vtt.js":65,"./vttregion.js":66}],65:[function(x,m,j){var w=this;function p(b,k){return k===void 0&&(k=1),"rgba("+[parseInt(b.substring(0,2),16),parseInt(b.substring(2,4),16),parseInt(b.substring(4,6),16),k].join(",")+")"}var d,l=1;function n(b,k,I){switch(I){case"webvtt.font.color":case"webvtt.font.opacity":var C=Services.prefs.getCharPref("webvtt.font.color"),L=Services.prefs.getIntPref("webvtt.font.opacity")/100;d.fontSet=p(C,L);break;case"webvtt.font.scale":l=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":C=Services.prefs.getCharPref("webvtt.bg.color"),L=Services.prefs.getIntPref("webvtt.bg.opacity")/100,d.backgroundSet=p(C,L);break;case"webvtt.edge.color":case"webvtt.edge.type":C=Services.prefs.getIntPref("webvtt.edge.type"),L=Services.prefs.getCharPref("webvtt.edge.color"),d.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][C]+p(L)}}typeof Services<"u"&&(d={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(b){n(0,0,b),Services.prefs.addObserver(b,n,!1)}));var t=Object.create||function(b){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=b,new e};function e(){}function a(b,k){this.name="ParsingError",this.code=b.code,this.message=k||b.message}function o(b){function k(I,C,L,N){return 3600*(0|I)+60*(0|C)+(0|L)+(0|N)/1e3}return b=b.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/),b?b[3]?k(b[1],b[2],b[3].replace(":",""),b[4]):59<b[1]?k(b[1],b[2],0,b[4]):k(0,b[1],b[2],b[4]):null}function s(){this.values=t(null)}function g(b,k,I,C){var L,N,U=C?b.split(C):[b];for(L in U)typeof U[L]=="string"&&(N=U[L].split(I)).length===2&&k(N[0],N[1])}((a.prototype=t(Error.prototype)).constructor=a).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(b,k){this.get(b)||k===""||(this.values[b]=k)},get:function(b,k,I){return I?this.has(b)?this.values[b]:k[I]:this.has(b)?this.values[b]:k},has:function(b){return b in this.values},alt:function(b,k,I){for(var C=0;C<I.length;++C)if(k===I[C]){this.set(b,k);break}},integer:function(b,k){/^-?\d+$/.test(k)&&this.set(b,parseInt(k,10))},percent:function(b,k){return!!(k.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(k=parseFloat(k))&&k<=100)&&(this.set(b,k),!0)}};var c={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},f={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},y={v:"title",lang:"lang"},_={rt:"ruby"};function u(b,k){function I(ee){return c[ee]}for(var C,L,N,U,Y,z,K=b.document.createElement("div"),M=K,q=[];z=void 0,(z=k?(z=(z=k.match(/^([^<]*)(<[^>]*>?)?/))[1]||z[2],k=k.substr(z.length),z):null)!==null;)z[0]==="<"?z[1]==="/"?q.length&&q[q.length-1]===z.substr(2).replace(">","")&&(q.pop(),M=M.parentNode):(N=o(z.substr(1,z.length-2)))?(C=b.document.createProcessingInstruction("timestamp",N),M.appendChild(C)):(L=z.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(N=L[1],U=L[3],Y=void 0,Y=f[N],C=Y?(Y=b.document.createElement(Y),(N=y[N])&&U&&(Y[N]=U.trim()),Y):null)&&(N=M,_[(U=C).localName]&&_[U.localName]!==N.localName||(L[2]&&(C.className=L[2].substr(1).replace("."," ")),q.push(L[1]+(L[2]||"")),M.appendChild(C),M=C)):(U=Y=void 0,U=(ee=>{for(;L=ee.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)ee=ee.replace(L[0],I);return ee})(z),M.className&&M.className.trim()!==""?(M.className.indexOf("prism-cue-inner")===-1&&(M.className+=" prism-cue-inner"),M.style.paddingLeft="0.2em",M.style.paddingRight="0.2em",M.appendChild(b.document.createTextNode(U))):((Y=b.document.createElement("span")).className="prism-cue-inner",Y.appendChild(b.document.createTextNode(U)),Y.style.paddingLeft="0.2em",Y.style.paddingRight="0.2em",M.appendChild(Y)));return K}var r=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function h(b){var k=[],I="";if(b&&b.childNodes){for(L(k,b);I=function N(U){var Y,z,K;return U&&U.length?(z=(Y=U.pop()).textContent||Y.innerText)?(K=z.match(/^.*(\n|\r)/))?K[U.length=0]:z:Y.tagName==="ruby"?N(U):Y.childNodes?(L(U,Y),N(U)):void 0:null}(k);)for(var C=0;C<I.length;C++)if((N=>{for(var U=0;U<r.length;U++){var Y=r[U];if(N>=Y[0]&&N<=Y[1])return 1}})(I.charCodeAt(C)))return"rtl"}return"ltr";function L(N,U){for(var Y=U.childNodes.length-1;0<=Y;Y--)N.push(U.childNodes[Y])}}function v(){}function T(b,k,I){var C=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent),U="rgba(255, 255, 255, 1)",L="rgba(0, 0, 0, 0.8)",N="",U=(d!==void 0&&(U=d.fontSet,L=d.backgroundSet,N=d.edgeSet),C&&(U="rgb(255, 255, 255)",L="rgb(0, 0, 0)"),v.call(this),this.cue=k,this.cueDiv=u(b,k.text),{color:U,backgroundColor:L,textShadow:N,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),Y=(C||(U.writingMode=k.vertical===""?"horizontal-tb":k.vertical==="lr"?"vertical-lr":"vertical-rl",U.unicodeBidi="plaintext"),this.applyStyles(U,this.cueDiv),this.div=b.document.createElement("div"),U={textAlign:k.align==="middle"?"center":k.align,font:I.font,whiteSpace:"pre-line",position:"absolute"},C||(U.direction=h(this.cueDiv),U.writingMode=k.vertical===""?"horizontal-tb":k.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(U),this.div.appendChild(this.cueDiv),0);switch(k.positionAlign){case"start":Y=k.position;break;case"middle":Y=k.position-k.size/2;break;case"end":Y=k.position-k.size}k.vertical===""?this.applyStyles({left:this.formatStyle(Y,"%"),width:this.formatStyle(k.size,"%")}):this.applyStyles({top:this.formatStyle(Y,"%"),height:this.formatStyle(k.size,"%")}),this.move=function(z){this.applyStyles({top:this.formatStyle(z.top,"px"),bottom:this.formatStyle(z.bottom,"px"),left:this.formatStyle(z.left,"px"),right:this.formatStyle(z.right,"px"),height:this.formatStyle(z.height,"px"),width:this.formatStyle(z.width,"px")})}}function E(b){var k,I,C,L,N=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent);b.div&&(k=b.div.offsetHeight,I=b.div.offsetWidth,C=b.div.offsetTop,L=(L=(L=b.div.childNodes)&&L[0])&&L.getClientRects&&L.getClientRects(),b=b.div.getBoundingClientRect(),L=L?Math.max(L[0]&&L[0].height||0,b.height/L.length):0),this.left=b.left,this.right=b.right,this.top=b.top||C,this.height=b.height||k,this.bottom=b.bottom||C+(b.height||k),this.width=b.width||I,this.lineHeight=L!==void 0?L:b.lineHeight,N&&!this.lineHeight&&(this.lineHeight=13)}function S(b,k,I,C){var L,N=new E(k),U=k.cue,Y=(B=>{if(typeof B.line=="number"&&(B.snapToLines||0<=B.line&&B.line<=100))return B.line;if(!B.track||!B.track.textTrackList||!B.track.textTrackList.mediaElement)return-1;for(var R=B.track,H=R.textTrackList,X=0,se=0;se<H.length&&H[se]!==R;se++)H[se].mode==="showing"&&X++;return-1*++X})(U),z=[];if(U.snapToLines){switch(U.vertical){case"":z=["+y","-y"],L="height";break;case"rl":z=["+x","-x"],L="width";break;case"lr":z=["-x","+x"],L="width"}var K=N.lineHeight,M=K*Math.round(Y),q=I[L]+K,ee=z[0];Math.abs(M)>q&&(M=M<0?-1:1,M*=Math.ceil(q/K)*K),Y<0&&(M+=U.vertical===""?I.height:I.width,z=z.reverse()),N.move(ee,M)}else{var Q=N.lineHeight/I.height*100;switch(U.lineAlign){case"middle":Y-=Q/2;break;case"end":Y-=Q}switch(U.vertical){case"":k.applyStyles({top:k.formatStyle(Y,"%")});break;case"rl":k.applyStyles({left:k.formatStyle(Y,"%")});break;case"lr":k.applyStyles({right:k.formatStyle(Y,"%")})}z=["+y","-x","+x","-y"],N=new E(k)}q=((B,R)=>{for(var H,X=new E(B),se=1,te=0;te<R.length;te++){for(;B.overlapsOppositeAxis(I,R[te])||B.within(I)&&B.overlapsAny(C);)B.move(R[te]);if(B.within(I))return B;var oe=B.intersectPercentage(I);oe<se&&(H=new E(B),se=oe),B=new E(X)}return H||X})(N,z),k.move(q.toCSSCompatValues(I))}function P(){}v.prototype.applyStyles=function(b,k){for(var I in k=k||this.div,b)b.hasOwnProperty(I)&&(k.style[I]=b[I])},v.prototype.formatStyle=function(b,k){return b===0?0:b+k},(T.prototype=t(v.prototype)).constructor=T,E.prototype.move=function(b,k){switch(k=k!==void 0?k:this.lineHeight,b){case"+x":this.left+=k,this.right+=k;break;case"-x":this.left-=k,this.right-=k;break;case"+y":this.top+=k,this.bottom+=k;break;case"-y":this.top-=k,this.bottom-=k}},E.prototype.overlaps=function(b){return this.left<b.right&&this.right>b.left&&this.top<b.bottom&&this.bottom>b.top},E.prototype.overlapsAny=function(b){for(var k=0;k<b.length;k++)if(this.overlaps(b[k]))return!0;return!1},E.prototype.within=function(b){return this.top>=b.top&&this.bottom<=b.bottom&&this.left>=b.left&&this.right<=b.right},E.prototype.overlapsOppositeAxis=function(b,k){switch(k){case"+x":return this.left<b.left;case"-x":return this.right>b.right;case"+y":return this.top<b.top;case"-y":return this.bottom>b.bottom}},E.prototype.intersectPercentage=function(b){return Math.max(0,Math.min(this.right,b.right)-Math.max(this.left,b.left))*Math.max(0,Math.min(this.bottom,b.bottom)-Math.max(this.top,b.top))/(this.height*this.width)},E.prototype.toCSSCompatValues=function(b){return{top:this.top-b.top,bottom:b.bottom-this.bottom,left:this.left-b.left,right:b.right-this.right,height:this.height,width:this.width}},E.getSimpleBoxPosition=function(b){var k=b.div?b.div.offsetHeight:b.tagName?b.offsetHeight:0,I=b.div?b.div.offsetWidth:b.tagName?b.offsetWidth:0,C=b.div?b.div.offsetTop:b.tagName?b.offsetTop:0;return{left:(b=b.div?b.div.getBoundingClientRect():b.tagName?b.getBoundingClientRect():b).left,right:b.right,top:b.top||C,height:b.height||k,bottom:b.bottom||C+(b.height||k),width:b.width||I}},P.StringDecoder=function(){return{decode:function(b){if(!b)return"";if(typeof b!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(b))}}},P.convertCueToDOMTree=function(b,k){return b&&k?u(b,k):null},P.processCues=function(b,k,I,C,L,N){if(!b||!k||!I)return null;for(;I.firstChild;)I.removeChild(I.firstChild);var U=b.document.createElement("div"),Y=(U.style.position="absolute",U.style.left="0",U.style.right="0",U.style.top="0",U.style.bottom="0","1.5%");if(L&&L.containerMargin&&(Y=L.containerMargin),U.style.margin=Y,I.appendChild(U),(te=>{for(var oe=0;oe<te.length;oe++)if(te[oe].hasBeenReset||!te[oe].displayState)return 1})(k))for(var z,K,M,q,ee=[],Q=E.getSimpleBoxPosition(U),B=E.getSimpleBoxPosition(N||I),R={font:Math.round(.05*Q.height*100)/100*l+"px sans-serif"},H=function(){if(K=k[X],z=new T(b,K,R),U.appendChild(z.div),S(0,z,Q,ee),L){var te=z,oe=L,J=B;if(oe){if(oe.cueBoxStyle)for(var ae in oe.cueBoxStyle.borderRadius&&!oe.cueBoxStyle.overflow&&(te.cueDiv.style.overflow="hidden"),oe.cueBoxStyle)oe.cueBoxStyle.hasOwnProperty(ae)&&(te.cueDiv.style[ae]=oe.cueBoxStyle[ae]);oe.textStyle&&te.cueDiv.querySelectorAll(".prism-cue-inner").forEach(function(ge){for(var _e in oe.textStyle){var Se,xe;oe.textStyle.hasOwnProperty(_e)&&(xe=oe.textStyle[_e],_e==="fontSize"&&typeof xe=="string"&&xe.indexOf("%")!==-1&&(Se=parseFloat(xe),!isNaN(Se))&&J&&J.height&&(xe=.0533*J.height*Se/100+"px"),ge.style[_e]=xe)}})}}try{if(C&&typeof C=="function"){var ue=C(z,{type:"cue",cue:K,cueIndex:X,totalCues:k.length,containerBox:Q,paddedOverlay:U});if(ue&&typeof ue=="object"){if(ue.wrapperStyle&&typeof ue.wrapperStyle=="object")try{for(M in ue.wrapperStyle)ue.wrapperStyle.hasOwnProperty(M)&&(M==="innerHTML"||M==="outerHTML"||M==="innerText"?console.warn('[VTT] Unsafe property "'+M+'" in wrapperStyle is ignored'):z.div.style[M]=ue.wrapperStyle[M])}catch(ge){console.error("[VTT] Error applying wrapperStyle:",ge)}if(ue.cueBoxStyle&&typeof ue.cueBoxStyle=="object")try{for(M in ue.cueBoxStyle)ue.cueBoxStyle.hasOwnProperty(M)&&(M==="innerHTML"||M==="outerHTML"||M==="innerText"?console.warn('[VTT] Unsafe property "'+M+'" in cueBoxStyle is ignored'):z.cueDiv.style[M]=ue.cueBoxStyle[M])}catch(ge){console.error("[VTT] Error applying cueBoxStyle:",ge)}if(ue.textStyle&&typeof ue.textStyle=="object")try{(q=z.cueDiv.querySelectorAll(".prism-cue-inner"))&&0<q.length&&q.forEach(function(ge){for(var _e in ue.textStyle)ue.textStyle.hasOwnProperty(_e)&&(_e==="innerHTML"||_e==="outerHTML"||_e==="innerText"?console.warn('[VTT] Unsafe property "'+_e+'" in textStyle is ignored'):ge.style[_e]=ue.textStyle[_e])})}catch(ge){console.error("[VTT] Error applying textStyle:",ge)}}}}catch(ge){console.log(ge)}K.displayState=z.div,ee.push(E.getSimpleBoxPosition(z))},X=0;X<k.length;X++)H();else for(var se=0;se<k.length;se++)U.appendChild(k[se].displayState)},(P.Parser=function(b,k){this.window=b,this.state="INITIAL",this.buffer="",this.decoder=k||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(b){if(!(b instanceof a))throw b;this.onparsingerror&&this.onparsingerror(b)},parse:function(b){var k=this;function I(){for(var K=k.buffer,M=0;M<K.length&&K[M]!=="\r"&&K[M]!==`
`;)++M;var q=K.substr(0,M);return K[M]==="\r"&&++M,K[M]===`
`&&++M,k.buffer=K.substr(M),q}function C(K){var M=new s;g(K.replace(/\n+/g," ").trim(),function(q,ee){switch(q){case"id":M.set(q,ee);break;case"width":M.percent(q,ee);break;case"lines":M.integer(q,ee);break;case"regionanchor":case"viewportanchor":var Q,B=ee.split(",");B.length===2&&((Q=new s).percent("x",B[0]),Q.percent("y",B[1]),Q.has("x")&&Q.has("y"))&&(M.set(q+"X",Q.get("x")),M.set(q+"Y",Q.get("y")));break;case"scroll":M.alt(q,ee,["up"])}},/:/,/\s/),M.has("id")&&((K=new k.window.VTTRegion).width=M.get("width",100),K.lines=M.get("lines",3),K.regionAnchorX=M.get("regionanchorX",0),K.regionAnchorY=M.get("regionanchorY",100),K.viewportAnchorX=M.get("viewportanchorX",0),K.viewportAnchorY=M.get("viewportanchorY",100),K.scroll=M.get("scroll",""),k.onregion&&k.onregion({id:M.get("id"),region:K}),k.regionList.push({id:M.get("id"),region:K}))}function L(K){K=(M=>{for(var q,ee=/::cue(?:\(\.([\w-]+)\))?\s*\{([^}]+)\}/g,Q={};(q=ee.exec(M))!==null;){for(var B=q[1]||"prism-cue-inner",R=q[2],H={},X=/([\w-]+)\s*:\s*([^;]+);?/g,se=void 0;(se=X.exec(R))!==null;){var te=se[1].trim(),oe=se[2].trim();H[te]=oe}Q[B]=H}return Q})(K),k.onstyle&&k.onstyle(K)}b&&(k.buffer+=k.decoder.decode(b,{stream:!0}));try{if(k.state==="INITIAL"){if(!/\r\n|\n/.test(k.buffer))return this;var N,U=(N=I()).match(/^WEBVTT([ \t].*)?$/);if(!U||!U[0])throw new a(a.Errors.BadSignature);k.state="HEADER"}for(var Y=!1;k.buffer;){if(!/\r\n|\n/.test(k.buffer))return this;switch(Y?Y=!1:N=I(),k.state){case"HEADER":/:/.test(N)?g(N,function(K,M){K==="Region"&&C(M)},/:/):N||(k.state="ID");continue;case"NOTE":N||(k.state="ID");continue;case"REGION":N?k.regionBlock.push(N):(C(k.regionBlock.join(`
`)),k.regionBlock=null,k.state="ID");continue;case"STYLE":N?k.styleBlock.push(N):(L(k.styleBlock.join(`
`)),k.styleBlock=null,k.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(N)){k.state="NOTE";break}if(/^REGION($|[ \t])/.test(N)){k.regionBlock=[],k.state="REGION";break}if(/^STYLE($|[ \t])/.test(N)){k.styleBlock=[],k.state="STYLE";break}if(!N)continue;if(k.cue=new k.window.VTTCue(0,0,""),k.state="CUE",N.indexOf("-->")===-1){k.cue.id=N;continue}case"CUE":try{((K,M,q)=>{var ee=K;function Q(){var X=o(K);if(X===null)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+ee);return K=K.replace(/^[^\sa-zA-Z-]+/,""),X}function B(){K=K.replace(/^\s+/,"")}if(B(),M.startTime=Q(),B(),K.substr(0,3)!=="-->")throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+ee);K=K.substr(3),B(),M.endTime=Q(),B();var R=K,H=new s;g(R,function(X,se){switch(X){case"region":for(var te=q.length-1;0<=te;te--)if(q[te].id===se){H.set(X,q[te].region);break}H.set("region_id",se);break;case"vertical":H.alt(X,se,["rl","lr"]);break;case"line":var oe=se.split(","),J=oe[0];H.integer(X,J),H.percent(X,J)&&H.set("snapToLines",!1),H.alt(X,J,["auto"]),oe.length===2&&H.alt("lineAlign",oe[1],["start","middle","end"]);break;case"position":oe=se.split(","),H.percent(X,oe[0]),oe.length===2&&H.alt("positionAlign",oe[1],["start","middle","end"]);break;case"size":H.percent(X,se);break;case"align":H.alt(X,se,["start","middle","end","left","right"])}},/:/,/\s/),M.region_id=H.get("region_id",null),M.vertical=H.get("vertical","");try{M.line=H.get("line","auto")}catch{}M.lineAlign=H.get("lineAlign","start"),M.snapToLines=H.get("snapToLines",!0),M.size=H.get("size",100);try{M.align=H.get("align","center")}catch{M.align=H.get("align","middle")}try{M.position=H.get("position","auto")}catch{M.position=H.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},M.align)}M.positionAlign=H.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},M.align)})(N,k.cue,k.regionList)}catch(K){k.reportOrThrowError(K),k.cue=null,k.state="BADCUE";continue}k.state="CUETEXT";continue;case"CUETEXT":var z=N.indexOf("-->")!==-1;if(!N||z&&(Y=!0)){k.oncue&&k.oncue(k.cue),k.cue=null,k.state="ID";continue}k.cue.text&&(k.cue.text+=`
`),k.cue.text+=N;continue;case"BADCUE":N||(k.state="ID");continue}}}catch(K){k.reportOrThrowError(K),k.state==="CUETEXT"&&k.cue&&k.oncue&&k.oncue(k.cue),k.cue=null,k.state=k.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var b=this;try{if(b.buffer+=b.decoder.decode(),!b.cue&&b.state!=="HEADER"||(b.buffer+=`

`,b.parse()),b.state==="INITIAL")throw new a(a.Errors.BadSignature)}catch(k){b.reportOrThrowError(k)}return b.onflush&&b.onflush(),this}},w.WebVTT=P},{}],66:[function(x,m,j){function w(l){return typeof l=="number"&&0<=l&&l<=100}var p,d;d={"":!0,up:!0},(p=this).VTTRegion=p.VTTRegion||function(){var l=100,n=3,t=0,e=100,a=0,o=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return l},set:function(g){if(!w(g))throw new Error("Width must be between 0 and 100.");l=g}},lines:{enumerable:!0,get:function(){return n},set:function(g){if(typeof g!="number")throw new TypeError("Lines must be set to a number.");n=g}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(g){if(!w(g))throw new Error("RegionAnchorX must be between 0 and 100.");e=g}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(g){if(!w(g))throw new Error("RegionAnchorY must be between 0 and 100.");t=g}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(g){if(!w(g))throw new Error("ViewportAnchorY must be between 0 and 100.");o=g}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(g){if(!w(g))throw new Error("ViewportAnchorX must be between 0 and 100.");a=g}},scroll:{enumerable:!0,get:function(){return s},set:function(g){if(g=typeof(g=g)=="string"&&!!d[g.toLowerCase()]&&g.toLowerCase(),g===!1)throw new SyntaxError("An invalid or illegal string was specified.");s=g}}})}},{}],67:[function(x,m,j){m.exports.VIDEO_TYPE={VOD:"vod",LIVE:"live"},m.exports.TERMINAL_TYPE={PC:"pc",PAD:"pad",PHONE:"phone"},m.exports.EVENT={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,CANPLAY:2015,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,CHANGE_QUALITY_AUTO:2037,CHANGE_QUALITY_START:2039,CHANGE_QUALITY_FINISH:2040,ABR_QUALITY_START:2043,ABR_QUALITY_FINISH:2038,BACKGROUND:2049,FOREGROUND:2050,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},m.exports.AUTOPLAY_RESULT={SUCCEED:"succeed",FAILED:"failed"},m.exports.TRACK_TYPE={VIDEO:0,AUDIO:1,SUBTITLE:2,VOD:3},m.exports.EXCEPTION_STATE={INIT:"init",VOD:"vod",DOWNLOAD:"download",MEDIAPARSER:"parser",COMPATIBILITY:"compatibility"},m.exports.ERROR_ANALYZE_TYPE={FAILURE:"failure",TIMEOUT:"timeout",SW_NOT_FOUND:"sw_not_found",BUFFER_STALLED:"buffer_stalled",BUFFER_APPEND_NOT_EXIST:"buffer_append_not_exist",BUFFER_APPEND_NOT_SUPPORT_CODEC:"buffer_append_not_support_codec",BUFFER_APPEND_OTHER:"buffer_append_other",MEDIA_DECODE_VIDEO:"media_decode_video",MEDIA_RENDER_AUDIO:"media_render_audio"},m.exports.ERROR_ANALYZE_TARGET={MANIFEST:"manifest",FRAG:"frag"}},{}],68:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e,a=arguments[t];for(e in a)!{}.hasOwnProperty.call(a,e)||(n[e]=a[e])}return n}).apply(null,arguments)}var p=x("./errorRules"),d=x("../../lib/ua"),l=x("../../config");m.exports=(()=>{function n(e){this.playerOptions=void 0,this.playerError=void 0,this.playerOptions=e}var t=n.prototype;return t.analyze=function(o){var a={code:(this.playerError=o).error_code,msg:o.error_msg},o=p[o.error_code];return a=o?w({},a,this.collect((o=o[0])==null?void 0:o.attrs)):a},t.pick=function(e,a){for(var o={},s=0;s<a.length;s++){var g=a[s];e[g]&&(o[g]=e[g])}return o},t.collect=function(e){var a=this,o={};return(e=e===void 0?[]:e).forEach(function(s){o[s]=a.getAttrValue(s)}),(o=w({},o,this.pick(this.playerError.analyze||{},e))).ver=l.h5Version,o.vid=this.playerOptions.vid,o.source=this.playerOptions.source,o},t.getAttrValue=function(e){if(e.indexOf("opt")==0)return this.playerOptions[e.substr(3,1).toLowerCase()+e.substr(4)];switch(e){case"hasCustomVod":return this.flag(this.playerOptions.customVodServer);case"os":return d.os.name;default:return""}},t.flag=function(e){return e?1:0},t.runErrorAnalyzerTests=function(){var e=this;console.log(""),Object.keys(p).forEach(function(a){console.log(`
--- `+a+" ---"),p[a].forEach(function(o){o.errorMessage;var s=e.analyze({error_code:a});console.log(":",JSON.stringify(o,null,2)),console.log(":",JSON.stringify(s,null,2))})})},n})()},{"../../config":19,"../../lib/ua":53,"./errorRules":69}],69:[function(d,m,j){var w,p=d("../../lib/constants").ErrorCode,d=d("../constants").EXCEPTION_STATE;(w={})[p.PlayauthDecode]=[{attrs:["optPlayauth"],children:[{stage:d.INIT,suggest:"playauth "}]}],w[p.LicenseEmpty]=[{attrs:["optLicense"],children:[{stage:d.INIT,suggest:"license  license localhost  license key "}]}],w[p.LicenseNotFound]=[{attrs:["optLicense"],children:[{stage:d.INIT,suggest:" license  license"}]}],w[p.LicenseExpired]=[{attrs:["optLicense"],children:[{stage:d.INIT,suggest:" license  license"}]}],w[p.LicenseKeyInvalid]=[{attrs:["optLicense"],children:[{stage:d.INIT,suggest:"license key  license"}]}],w[p.LicenseDomainInvalid]=[{attrs:["optLicense"],children:[{stage:d.INIT,suggest:" license license"}]}],w[p.LicenseFeatrueUnauthorized]=[{attrs:["optLicense"],children:[{stage:d.INIT,suggest:" license  license  SDK  Native  Web SDK H265"}]}],w[p.AuthKeyExpired]=[{attrs:["optPlayauth"],children:[{stage:d.VOD,suggest:" playauth  STS "}]}],w[p.URLsIsEmpty]=[{attrs:["optFormat","optStreamType"],children:[{stage:d.VOD,suggest:""}]}],w[p.VodNonceUsed]=[{attrs:[],children:[{stage:d.VOD,suggest:" VOD  SDK  xxx "}]}],w[p.ServerAPIError]=[{attrs:["hasCustomVod","optCustomVodServer"],children:[{stage:d.VOD,suggest:"aliyuncs.com  DNS  vid [] DNS ",rule:"hasCustomVod=0"},{stage:d.VOD,suggest:"aliyuncs.com  vodCustomServer  DNS  vid  DNS ",rule:"hasCustomVod=1"}]}],w[p.RequestDataError]=[{attrs:["target","type","fragSize","fragDuration","speed","manifestUrl","fragUrl"],children:[{stage:d.DOWNLOAD,suggest:"m3u8  DNS  https  DNS ",rule:"target=manifest&&type=failure"},{stage:d.DOWNLOAD,suggest:"m3u8 ",rule:"target=manifest&&type=timeout"},{stage:d.DOWNLOAD,suggest:"ts  DNS  DNS ",rule:"target=frag&&type=failure"},{stage:d.DOWNLOAD,suggest:" ts  5~10 ",rule:"target=frag&&type=timeout&&(fragSize>10240||fragDuration>30000)"},{stage:d.DOWNLOAD,suggest:"",rule:"target=frag&&type=timeout&&fragSize<10240&&fragDuration<30000"}]}],w[p.UrlForbidden]=[{attrs:["manifestUrl","fragUrl","target"],children:[{stage:d.DOWNLOAD,suggest:"m3u8  403 referer  m3u8  authTimeout [API]",rule:"target=manifest"},{stage:d.DOWNLOAD,suggest:"ts  authTimeout [API]",rule:"target=frag"}]}],w[p.LoadingTimeout]=[{attrs:["manifestUrl","fragUrl","type","target","fragSize","fragDuration","speed"],children:[{stage:d.DOWNLOAD,suggest:" ts  5~10 ",rule:"target=frag&&type=timeout&&(fragSize>10240||fragDuration>30000)"},{stage:d.DOWNLOAD,suggest:"",rule:"TODO: else"}]}],w[p.OtherError]=[{attrs:[],children:[{stage:d.DOWNLOAD,suggest:" video  https//DNS [Console]/[Network]"}]}],w[p.PlayDataDecode]=[{attrs:["fragUrl","type"],children:[{stage:d.MEDIAPARSER,suggest:"ts ",rule:"type=buffer_stalled"},{stage:d.MEDIAPARSER,suggest:"ts //",rule:"type=buffer_append_not_exist"},{stage:d.MEDIAPARSER,suggest:" H.264 ",rule:"type=buffer_append_not_support_codec"},{stage:d.MEDIAPARSER,suggest:"buffer ",rule:"type=buffer_append_other"},{stage:d.MEDIAPARSER,suggest:" iOS/Android profile SPS ",rule:"type=media_decode_video"},{stage:d.COMPATIBILITY,suggest:`\r
1. Windows+R\r\\n2. services.msc Enter \r\\n3.  Windows Audio\r\\n4.  15-20 `,rule:"type=media_render_audio"}]}],w[p.EncrptyVideoNotSupport]=[{attrs:["os","type"],children:[{stage:d.MEDIAPARSER,suggest:" WKWebview  App-Bound Domains Service Worker App-Bound Domains ",rule:"os=iOS&&type=sw_not_found"},{stage:d.MEDIAPARSER,suggest:" Service Worker",rule:"else"}]}],m.exports=w},{"../../lib/constants":33,"../constants":67}],70:[function(x,m,j){m.exports=(()=>{function w(){this.fps=0,this.frameCount=0,this.lastStartTime=0}var p=w.prototype;return p.start=function(d){var l,n=this;d&&"requestVideoFrameCallback"in HTMLVideoElement.prototype&&d.tagName==="VIDEO"&&d.requestVideoFrameCallback(l=function(t){n.lastStartTime===0?n.lastStartTime=t:(t=(t-n.lastStartTime)/1e3,n.fps=(++n.frameCount/t).toFixed(2)),d.requestVideoFrameCallback(l)})},p.reset=function(){this.lastStartTime=0,this.frameCount=0},p.getFps=function(){return this.fps},w})()},{}],71:[function(l,m,j){var w=l("./logCache"),p=l("./fpsObserver"),d=l("./session"),l=l("./errorAnalyzer");m.exports={LogCache:w,FpsObserver:p,Session:d,ErrorAnalyzer:l}},{"./errorAnalyzer":68,"./fpsObserver":70,"./logCache":72,"./session":73}],72:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(d){for(var l=1;l<arguments.length;l++){var n,t=arguments[l];for(n in t)!{}.hasOwnProperty.call(t,n)||(d[n]=t[n])}return d}).apply(null,arguments)}var p=x("../util");m.exports=(()=>{function d(){this.LOG_KEY="_alp_log",this.INTERVAL=5e3,this.init(),this.timer=null,this.session=null}var l=d.prototype;return l.init=function(){var n;if(!localStorage.getItem(this.LOG_KEY))return n=JSON.stringify({}),localStorage.setItem(this.LOG_KEY,n),n},l.observe=function(n,t,e){var a=this;e===void 0&&(e=function(){}),this.session=n,this.reporter=t,this.timer=setInterval(function(){var o;!n.closed&&(e(),o=t.getData())&&a.update(o.vps,t.getData())},this.INTERVAL)},l.update=function(n,t){this.session.closed||(t=this.createLog(t),this.write(n,t))},l.clear=function(n){var t=this.read();t&&(delete t[n],localStorage.setItem(this.LOG_KEY,JSON.stringify(t)))},l.read=function(){var n,t=(t=localStorage.getItem(this.LOG_KEY))||this.init();try{n=JSON.parse(t)}catch{}return n},l.write=function(n,t){if(t){var e;try{e=JSON.stringify(t)}catch{}e&&(e=this.read())&&(e[n]=t,localStorage.setItem(this.LOG_KEY,JSON.stringify(e)))}},l.createLog=function(n){return{log:n,lastUpdate:Date.now(),hidden:document.visibilityState==="hidden"}},l.checkStoreLogs=function(){var n=this,t=this.read();t&&Object.keys(t).length&&Object.keys(t).forEach(function(e){var a,o=t[e];e!==n.session.id&&(a=Date.now()-o.lastUpdate,o.hidden?n.clear(e):a>1.5*n.INTERVAL&&navigator.onLine&&(a=o.log.el||[],a=p.mergeSeekInner(a),a=p.removeInternalEventsVars(a),o.log.el=a,n.reporter.sendImmediate(w({},o.log,{se:999})),n.clear(e)))})},l.dispose=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},d})()},{"../util":77}],73:[function(x,m,j){var w=x("../../lib/data");m.exports=(()=>{function p(){this.id=w.guid(),this.closed=!1,this.reportSequence=0}var d=p.prototype;return d.refresh=function(){this.id=w.guid(),this.reportSequence=0},d.open=function(){this.closed=!1},d.close=function(){this.closed=!0},p})()},{"../../lib/data":35}],74:[function(x,m,j){(function(w){(function(){var p=["args"];function d(){var T,N=typeof Symbol=="function"?Symbol:{},E=N.iterator||"@@iterator",S=N.toStringTag||"@@toStringTag";function P(z,J,M,q){var ee,Q,B,R,H,X,se,te,oe,J=J&&J.prototype instanceof k?J:k,J=Object.create(J.prototype);return l(J,"_invoke",(ee=z,Q=M,se=q||[],te=!1,oe={p:X=0,n:0,v:T,a:ae,f:ae.bind(T,4),d:function(ue,ge){return B=ue,R=0,H=T,oe.n=ge,b}},function(ue,ge,_e){if(1<X)throw TypeError("Generator is already running");for(te&&ge===1&&ae(ge,_e),R=ge,H=_e;(L=R<2?T:H)||!te;){B||(R?R<3?(1<R&&(oe.n=-1),ae(R,H)):oe.n=H:oe.v=H);try{if(X=2,B){if(L=B[ue=R?ue:"next"]){if(!(L=L.call(B,H)))throw TypeError("iterator result is not an object");if(!L.done)return L;H=L.value,R<2&&(R=0)}else R===1&&(L=B.return)&&L.call(B),R<2&&(H=TypeError("The iterator does not provide a '"+ue+"' method"),R=1);B=T}else if((L=(te=oe.n<0)?H:ee.call(Q,oe))!==b)break}catch(Se){B=T,R=1,H=Se}finally{X=1}}return{value:L,done:te}}),!0),J;function ae(ue,ge){for(R=ue,H=ge,L=0;!te&&X&&!_e&&L<se.length;L++){var _e,Se=se[L],xe=oe.p,Pe=Se[2];3<ue?(_e=Pe===ge)&&(H=Se[(R=Se[4])?5:R=3],Se[4]=Se[5]=T):Se[0]<=xe&&((_e=ue<2&&xe<Se[1])?(R=0,oe.v=ge,oe.n=Se[1]):xe<Pe&&(_e=ue<3||Se[0]>ge||Pe<ge)&&(Se[4]=ue,Se[5]=ge,oe.n=Pe,R=0))}if(_e||1<ue)return b;throw te=!0,ge}}var b={};function k(){}function I(){}function C(){}var L=Object.getPrototypeOf,N=[][E]?L(L([][E]())):(l(L={},E,function(){return this}),L),U=C.prototype=k.prototype=Object.create(N);function Y(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,C):(z.__proto__=C,l(z,S,"GeneratorFunction")),z.prototype=Object.create(U),z}return l(U,"constructor",I.prototype=C),l(C,"constructor",I),l(C,S,I.displayName="GeneratorFunction"),l(U),l(U,S,"Generator"),l(U,E,function(){return this}),l(U,"toString",function(){return"[object Generator]"}),(d=function(){return{w:P,m:Y}})()}function l(T,E,S,P){var b=Object.defineProperty;try{b({},"",{})}catch{b=0}(l=function(k,I,C,L){function N(U,Y){l(k,U,function(z){return this._invoke(U,Y,z)})}I?b?b(k,I,{value:C,enumerable:!L,configurable:!L,writable:!L}):k[I]=C:(N("next",0),N("throw",1),N("return",2))})(T,E,S,P)}function n(T,E,S,P,b,k,I){try{var C=T[k](I),L=C.value}catch(N){return S(N)}C.done?E(L):Promise.resolve(L).then(P,b)}function t(T){return function(){var E=this,S=arguments;return new Promise(function(P,b){var k=T.apply(E,S);function I(L){n(k,P,b,I,C,"next",L)}function C(L){n(k,P,b,I,C,"throw",L)}I(void 0)})}}function e(){return(e=Object.assign?Object.assign.bind():function(T){for(var E=1;E<arguments.length;E++){var S,P=arguments[E];for(S in P)!{}.hasOwnProperty.call(P,S)||(T[S]=P[S])}return T}).apply(null,arguments)}var a=x("../lib/ua"),o=x("../config"),s=x("./util"),g=x("../lib/playerutil"),c=x("../feature/license"),f=x("./constants"),y=x("./reporter"),v=x("./modules"),_=v.LogCache,u=v.FpsObserver,r=v.Session,h=v.ErrorAnalyzer,v=(()=>{function T(S,P){var b=this;this.player=S,this.cache=new _,this.session=new r,this.fpsObserver=new u,this.errorAnalyzer=new h(P),this.reporter=new y(P),this.initData(),this.reporter.sendImmediate(e({},this.pruneEmpty(this.reporter.getData()),{e:1e3})),this.listenDocument(),this.cache.observe(this.session,this.reporter,function(){b.updatePlayStatus()}),this.cache.checkStoreLogs(),this.licenseAppId=null}var E=T.prototype;return E.initData=function(){this.createTime=performance.now(),this.firstFrameTime=null,this.latestPlayTime=null,this.playReported=!1,this.canplayReported=!1,this.vodInfoReported=!1,this.errorCode=null,this.pauseStartTime=0,this.seekStartTime=0,this.waitingStartTime=0,this.seekId=0,this.innerEventId=0,this.session.refresh();var S=this.player.getOptions(),P=s.getUuid(),b=this.getCustomData(S.customData),k=window.devicePixelRatio||1;this.reporter.initData({e:9e3,db:1,dm:"h5",el:[],os:a.os.name,ov:a.os.version,uuid:P,ss:this.makeWH(parseInt(window.screen.width*k),parseInt(window.screen.height*k)),tt:this.getTerminalType(),bt:a.browser.name,bv:a.browser.version,ua:a.USER_AGENT,app_n:this.getHost(window.location.href),av:o.h5Version,install_uuid:P,li_ki:(k=S.license)==null?void 0:k.key,li_app_id:this.licenseAppId||((k=S.license)==null?void 0:k.appId),pu:window.location.href,ri:P,vps:this.session.id,tid:S.traceId||void 0,vt:this.getVideoType(S),vu:S.source,srcd:this.getHost(S.source),vid:S.vid,pc:this.getUserOptions(S._userOptions),cd:b,excd:{error:[],firstFrame:[],buffering:[]}}),this.reportEvent(f.EVENT.CREATE,{args:{ri:(k=this.player._monitor)==null?void 0:k.sessionId}}),S.autoplay&&this.reportVV()},E.play=function(){this.session.open(),this.reportVV(),this.pauseEnd(),this.fpsObserver.reset(),this.recordPlay()},E.recordPlay=function(){this.firstFrameTime||(this.latestPlayTime=performance.now())},E.pause=function(){this.pauseStartTime=performance.now(),this.reportEvent(f.EVENT.PAUSE)},E.pauseEnd=function(){var S;this.pauseStartTime&&(S=parseInt(performance.now()-this.pauseStartTime),this.pauseStartTime=0,this.reportEvent(f.EVENT.RECOVER,{args:{cost:S}}))},E.seek=function(){this.seekStartTime=performance.now(),this.reportEvent(f.EVENT.SEEK,{args:{_seekId:++this.seekId}})},E.seekEnd=function(){var S;this.seekStartTime&&(S=parseInt(performance.now()-this.seekStartTime),this.seekStartTime=0,this.reportEvent(f.EVENT.SEEK_END,{args:{cost:S,_seekId:this.seekId}}))},E.waiting=function(){!this.seekStartTime&&this.canplayReported&&(this.waitingStartTime=performance.now(),this.reportEvent(f.EVENT.UNDERLOAD,{args:{speed:this.player.tag.playbackRate}}))},E.waitingEnd=function(){var S;this.waitingStartTime&&(S=parseInt(performance.now()-this.waitingStartTime),this.waitingStartTime=0,this.reportEvent(f.EVENT.LOADED,{args:{cost:S}}))},E.firstFrame=function(){var S;this.firstFrameTime||(this.firstFrameTime=performance.now(),S=0,S=!this.getPlaySummary().vv||this.player.paused()?0:parseInt(this.firstFrameTime-(this.latestPlayTime||this.firstFrameTime)),this.reporter.firstRenderInfo({efc:Math.max(S,0),timeline_web:this.getTimeline((S=this.player._monitor)==null?void 0:S.timeline)}),this.fpsObserver.start(this.player.tag))},E.canplay=function(){this.waitingEnd(),this.canplayReported||(this.canplayReported=!0,this.reportEvent(f.EVENT.CANPLAY))},E.playFinish=(()=>{var S=t(d().m(function P(){return d().w(function(b){for(;;)switch(b.n){case 0:return this.reportEvent(f.EVENT.STOP),this.reporter.lastRenderInfo({t:Date.now(),vt:this.getVt()}),this.reporter.backgroundStop(this.flag(document.visibilityState==="hidden")),b.n=1,this.doReport();case 1:this.session.close(),this.firstFrame();case 2:return b.a(2)}},P,this)}));return function(){return S.apply(this,arguments)}})(),E.playError=(()=>{var S=t(d().m(function P(b){return d().w(function(k){for(;;)switch(k.n){case 0:this.errorCode=b.error_code;try{delete b.requestId,delete b.uuid,b.sri=b.serverRequestId,delete b.serverRequestId}catch{}return this.reportEvent(f.EVENT.ERROR,{args:this.pruneEmpty(b)}),this.reporter.addErrorAnalysis(this.errorAnalyzer.analyze(b)),k.n=1,this.doReport();case 1:this.session.close();case 2:return k.a(2)}},P,this)}));return function(P){return S.apply(this,arguments)}})(),E.playAbort=(()=>{var S=t(d().m(function P(b,k){return d().w(function(I){for(;;)switch(I.n){case 0:if(this.session.closed){I.n=2;break}return this.reportEvent(f.EVENT.PLAYABORT,{args:{from:b,url:k}}),I.n=1,this.doReport({skipAppIdCheck:b==="windowClose"});case 1:this.session.close(),I.n=3;break;case 2:this.traceLog({from:b});case 3:return I.a(2)}},P,this)}));return function(P,b){return S.apply(this,arguments)}})(),E.traceLog=function(S){this.reportEvent(f.EVENT.TRACE,{args:{log:S}})},E.mediaMeta=function(S){S.videoWidth&&S.videoHeight&&(this.reporter.videoDefinition(this.makeWH(S.videoWidth,S.videoHeight)),this.vodInfoReported||this.reporter.mediaInfo([{id:1,type:f.TRACK_TYPE.VIDEO,definition:this.makeWH(S.videoWidth,S.videoHeight)},{id:2,type:f.TRACK_TYPE.AUDIO}]),this.reporter.subMediaInfo([{id:1,type:f.TRACK_TYPE.VIDEO,definition:this.makeWH(S.videoWidth,S.videoHeight)},{id:2,type:f.TRACK_TYPE.AUDIO}]))},E.vodMediaInfo=function(S){var P,b,k=this,I=(this.vodInfoReported=!0,[]),C={},L="";try{S.PlayInfoList.PlayInfo.forEach(function(N,U){U===0&&(N.StreamType==="audio"?P=(N.Format||"").toUpperCase():(P="AAC",L=N.CodecName)),I.push({idx:U,type:f.TRACK_TYPE.VOD,bitrate:parseInt(1e3*N.Bitrate),codecFormat:N.CodecName,avgFps:Number(N.Fps),definition:k.makeWH(N.Width,N.Height)})}),C={RequestId:S.RequestId,PlayInfoList:{PlayInfo:S==null||(b=S.PlayInfoList)==null?void 0:b.PlayInfo.map(function(N){return{StreamType:N.StreamType,Definition:N.Definition,Specification:N.Specification,Duration:N.Duration,Encrypt:N.Encrypt,EncryptType:N.EncryptType,Format:N.Format,Rand:N.Rand,Plaintext:N.Plaintext,Status:N.Status,ModificationTime:N.ModificationTime,CodecName:N.CodecName,PlayURL:N.PlayURL}})}}}catch{}this.reporter.mediaInfo(I),this.reporter.codecFormat(P,L),this.reportEvent(f.EVENT.COMPLETEFETCHDATA,{args:{mi:C}})},E.vodSelectUrl=function(S){this.reporter.startBitrate(parseInt(1e3*S.bitrate))},E.rtsFallback=function(S){this.reportEvent(f.EVENT.RTSFALLBACK,{args:S})},E.vodRequestFatalError=function(S){this.reportEvent(f.EVENT.VOD_REQUEST_FATAL_ERROR,{args:S})},E.vodRequestFatalErrorResume=function(S){this.reportEvent(f.EVENT.VOD_REQUEST_FATAL_ERROR_RESUME,{args:S})},E.changeQualityStart=function(S){this.reportEvent(f.EVENT.CHANGE_QUALITY_START,{args:S})},E.changeQualityFinish=function(S){this.reportEvent(f.EVENT.CHANGE_QUALITY_FINISH,{args:S})},E.changeQualityAuto=function(){this.reportEvent(f.EVENT.CHANGE_QUALITY_AUTO)},E.abrQualityFinish=function(S){this.reportEvent(f.EVENT.ABR_QUALITY_FINISH,{args:S})},E.licenseResult=function(S){this.reportEvent(f.EVENT.LICENSE_RESULT,{args:S})},E.updateLicenseAppId=function(S){this.licenseAppId=S,this.reporter.licenseAppId(S)},E.updateTraceId=function(S){this.reporter.traceId(S)},E.updateSource=function(S){this.reporter.source(S),this.reporter.videoDomain(this.getHost(S)),this.reporter.containerInfo(this.getContainerInfo(S))},E.reportVV=function(){this.playReported||(this.playReported=!0,this.reportEvent(f.EVENT.STARTPLAY),this.reporter.backgroundPlay(this.flag(document.visibilityState==="hidden")))},E.reportEvent=function(S,P){this.reporter.addEvent(this.makeEvent(e({id:S,e:S},P)))},E.mergeSeek=function(){var S=this.reporter.getAllEvents(),S=s.mergeSeekInner(S);this.reporter.replaceEvents(S)},E.removeInternalEventsVars=function(){var S=this.reporter.getAllEvents(),S=s.removeInternalEventsVars(S);this.reporter.replaceEvents(S)},E.listenDocument=function(){var S=this,P=(document.addEventListener("visibilitychange",function(){var b;S.player.__disposed||((b=document.visibilityState)==="visible"?S.reportEvent(f.EVENT.FOREGROUND):b==="hidden"&&(S.reportEvent(f.EVENT.BACKGROUND),S.session.closed||S.doReport({keepData:!0,skipAppIdCheck:!0})),S.cache.update(S.session.id,S.reporter.getData()))}),a.IS_PC?"beforeunload":"pagehide");window.addEventListener(P,function(){S.player.__disposed||S.playAbort("windowClose")})},E.updatePlayStatus=function(){var S=this.getPlayerOptions(),S=(this.updateSource(S.source),this.reporter.businessInfo(S.from),this.reporter.videoDropInfo(this.getVideoDropInfo()),this.reporter.duration(Math.round(1e3*((S=this.player)==null?void 0:S.getDuration()))),this.getPlaySummary());this.reporter.playSummary(S),S.vv||this.reporter.firstRenderInfo({}),this.reporter.playQuitPosition(this.getVt())},E.doReport=(()=>{var S=t(d().m(function P(b){var k,I;return d().w(function(C){for(;;)switch(C.n){case 0:if(I=(k=b=b===void 0?{keepData:!1,skipAppIdCheck:!1}:b).keepData,k.skipAppIdCheck){C.n=1;break}return C.n=1,this.getLicenseAppId();case 1:this.updatePlayStatus(),this.mergeSeek(),this.removeInternalEventsVars(),this.reporter.sequence(this.session.reportSequence++||void 0),I?this.reporter.report():(navigator.onLine?this.cache.clear(this.session.id):this.cache.update(this.session.id,this.reporter.getData()),this.reporter.flush(),this.initData());case 2:return C.a(2)}},P,this)}));return function(P){return S.apply(this,arguments)}})(),E.getPlaySummary=function(){var S=parseInt(this.player._playingTime),b=this.reporter.getEvents(f.EVENT.UNDERLOAD),P=this.reporter.getEvents(f.EVENT.LOADED).reduce(function(N,U){return N+(((N=U.args)==null?void 0:N.cost)||0)},0),b=b.length,I=this.reporter.getEvents(f.EVENT.SEEK_END),k=I.length,I=Math.floor(I.reduce(function(N,U){return N+U.args.cost},0)),C=this.reporter.getData().sbr,L=s.formatDecimal(this.getVt()/this.reporter.getDuration());return{pl:S,bf:P,bfc:b,skc:k,skt:I,df:Number(this.fpsObserver.getFps()),vv:this.flag(this.playReported),ec:this.flag(this.errorCode),ecd:this.errorCode,apb:C,pcr:L}},E.getVideoDropInfo=function(){var S=this.player.tag;if(S&&S instanceof HTMLVideoElement&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype)return{dc:(S=S.getVideoPlaybackQuality()).droppedVideoFrames,tc:S.totalVideoFrames}},E.getVt=function(){return Math.round(1e3*this.player.getCurrentTime())},E.getTerminalType=function(){var S=f.TERMINAL_TYPE.PC;return a.IS_IPAD?S=f.TERMINAL_TYPE.PAD:a.os.phone&&(S=f.TERMINAL_TYPE.PHONE),S},E.getHost=function(S){if(S){var P="";try{var b=new URL(S),P=b.hostname;b.protocol!=="file:"&&b.protocol!=="source:"||(P=b.pathname)}catch{P=S.indexOf("//")===-1?window.location.protocol.indexOf("http")===-1?"local-file":window.location.hostname:a.getHost(S)}return P}},E.getContainerInfo=function(S){var P="";(S=S===void 0?"":S).indexOf("//")===0&&(S=""+window.location.protocol+S);try{var b=new URL(S).pathname;1<b.split(".").length&&(P=b.split(".").pop())}catch{P=""}return{proto:S.split("://")[0],mb:0,cn:P}},E.getVideoType=function(S){var P=f.VIDEO_TYPE.VOD;return P=S.isLive||g.isRts(S.source)?f.VIDEO_TYPE.LIVE:P},E.getUserOptions=function(S){return S=e({},S),(S.playauth||S.PlayAuth)&&(S.playauth=1,S.PlayAuth=void 0),S.accessKeyId&&(S.accessKeyId=1),S.accessKeySecret&&(S.accessKeySecret=1),S.securityToken&&(S.securityToken=1),this.pruneEmpty(S)},E.getTimeline=function(S){var P;return S?(P={},S.forEach(function(b,k){try{var I=k?b.ts-S[k-1].ts:0;P["tl_"+b.name]=k+"#"+parseInt(I)}catch{}}),P):{}},E.getPlayerOptions=function(){return this.player?this.player.getOptions():{}},E.getNameByValue=function(S,P){return Object.keys(S).find(function(b){return S[b]===P})},E.getCustomData=function(S){if(typeof S=="string"&&!(50<S.length))return S},E.getLicenseAppId=(()=>{var S=t(d().m(function P(){var b,k,I,C,L,N;return d().w(function(U){for(;;)switch(U.p=U.n){case 0:if(this.licenseAppId)return U.a(2);U.n=1;break;case 1:if(k=this.player.getOptions(),C=k.license,b=k.env,k=k.assetPrefix,I=C==null?void 0:C.domain,C=C==null?void 0:C.key,w==="dev"||-1<["file:","resource:"].indexOf(window.location.protocol)||!I||!C)return U.a(2);U.n=2;break;case 2:return L=null,U.p=3,U.n=4,c.getLicense(I,C,b==="SEA"?"ap-southeast-1":"cn-shanghai",k);case 4:N=U.v,L=N.appId,U.n=6;break;case 5:U.p=5;case 6:L&&this.updateLicenseAppId(L);case 7:return U.a(2)}},P,this,[[3,5]])}));return function(){return S.apply(this,arguments)}})(),E.makeEvent=function(b){var b=b||{},P=b.args,b=((k,I)=>{if(k==null)return{};var C,L={};for(C in k)if({}.hasOwnProperty.call(k,C)){if(I.indexOf(C)!==-1)continue;L[C]=k[C]}return L})(b,p);return e({_id:++this.innerEventId,t:Date.now()},b,{args:e({vt:this.getVt()},this.pruneEmpty(P||{}))})},E.makeWH=function(S,P){return S+"*"+P},E.flag=function(S){return S?1:0},E.pruneEmpty=function(S){return Object.keys(S).reduce(function(P,b){return S[b]!==void 0&&S[b]!==""&&(P[b]=S[b]),P},{})},E.destroy=function(){this.cache.dispose()},T})();m.exports=v}).call(this)}).call(this,"prod")},{"../config":19,"../feature/license":24,"../lib/playerutil":50,"../lib/ua":53,"./constants":67,"./modules":71,"./reporter":75,"./util":77}],75:[function(d,m,j){var w=d("./sender"),p={e:void 0,db:void 0,dm:void 0,os:void 0,ov:void 0,uuid:void 0,ss:void 0,tt:void 0,bt:void 0,bv:void 0,us:void 0,app_n:void 0,av:void 0,install_uuid:void 0,li_ki:void 0,li_app_id:void 0,lv:void 0,pu:void 0,bi:void 0,bp:void 0,bs:void 0,ri:void 0,t:void 0,vps:void 0,tid:void 0,cd:void 0,vt:void 0,vu:void 0,srcd:void 0,vid:void 0,sbr:void 0,fri:void 0,lri:void 0,vdi:void 0,pc:void 0,mi:void 0,smi:void 0,ps:void 0,vdur:void 0,el:[],se:void 0,ci:void 0,hwd:1,def:void 0,acf:void 0,vcf:void 0,qp:void 0,excd:{error:[],firstFrame:[],buffering:[]}},d=(()=>{function l(t){this.data=p,this.sender=new w(t)}var n=l.prototype;return n.getData=function(){return this.data},n.flush=function(){this.report(),this.data=p},n.report=function(){this.data.t=Date.now(),this.sender.sendImmediate(this.pruneReportData())},n.initData=function(t){this.data=t},n.addEvent=function(t){this.data.el.push(t)},n.getEvents=function(t){return this.data.el.filter(function(e){return e.id===t})},n.getAllEvents=function(){return this.data.el},n.replaceEvents=function(t){this.data.el=t},n.backgroundPlay=function(t){this.data.bp=t},n.licenseAppId=function(t){this.data.li_app_id=t},n.backgroundStop=function(t){this.data.bs=t},n.duration=function(t){this.data.vdur=t},n.getDuration=function(){return this.data.vdur},n.mediaInfo=function(t){this.data.mi=t},n.subMediaInfo=function(t){this.data.smi=t},n.videoDefinition=function(t){this.data.def=t},n.traceId=function(t){this.data.tid=t},n.source=function(t){this.data.vu=t},n.vps=function(t){this.data.vps=t},n.videoDomain=function(t){this.data.srcd=t},n.containerInfo=function(t){this.data.ci=t},n.codecFormat=function(t,e){this.data.acf=t,this.data.vcf=e},n.startBitrate=function(t){this.data.sbr=t},n.firstRenderInfo=function(t){this.data.fri=t},n.videoDropInfo=function(t){this.data.vdi=t},n.businessInfo=function(t){this.data.bi=t},n.lastRenderInfo=function(t){this.data.lri=t},n.playQuitPosition=function(t){this.data.qp=t},n.playSummary=function(t){this.data.ps=t},n.sequence=function(t){this.data.se=t},n.addErrorAnalysis=function(t){this.data.excd.error.push(t)},n.pruneReportData=function(){var t=this;return Object.keys(this.data).reduce(function(e,a){return t.data[a]!==void 0&&(e[a]=t.data[a]),e},{})},n.sendImmediate=function(t){t.t=Date.now(),this.sender.sendImmediate(t)},l})();m.exports=d},{"./sender":76}],76:[function(p,m,j){var w=p("@aliyun-sls/web-track-browser"),p=(typeof __karma__<"u"&&__UNIT_TEST__==="true"&&(w=w.default),(()=>{function d(l){try{var n=["Bytespider","Baiduspider","Sogou web spider","dianjing_ad_spider"].map(function(a){return a.toLowerCase()}),t=navigator.userAgent.toLowerCase();n.some(function(a){return t.includes(a)})&&(l.disableTrack=!0)}catch{}var e;l.disableTrack?this.tracker={sendImmediate:function(){}}:(n="cn-hangzhou.log.aliyuncs.com",e="vod-newplayer",l.env==="SEA"&&(n="ap-southeast-1.log.aliyuncs.com",e="vod-newplayer-sg"),this.tracker=new w({host:n,project:e,logstore:"hermes-player"}),typeof l.onLogReport=="function"&&(this.onLogReport=l.onLogReport))}return d.prototype.sendImmediate=function(l){try{this.onLogReport(l)}catch{}this.tracker.sendImmediate(l)},d})());m.exports=p},{"@aliyun-sls/web-track-browser":4}],77:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e,a=arguments[t];for(e in a)!{}.hasOwnProperty.call(a,e)||(n[e]=a[e])}return n}).apply(null,arguments)}var p=x("../lib/cookie"),d=x("../lib/data"),l=x("./constants");m.exports.getUuid=function(){var n=p.get("p_h5_u");return n||(n=d.guid(),p.set("p_h5_u",n,730)),n},m.exports.mergeSeekInner=function(n){var t=0,e=0,a=0,o=[],s=0,g=0,c=((n=n===void 0?[]:n).forEach(function(f){f._id&&(f.id===l.EVENT.SEEK?((f.t-e<500||f.t-t<500)&&(f._remove=!0,o.push(f.args._seekId),g=g||a),t=f.t):f.id===l.EVENT.SEEK_END&&(e=f.t,a=f._id,o.includes(f.args._seekId))&&(f._remove=!0,s++))}),s);return n.filter(function(f){return f._id===g&&(f._remove=!0),f.id===l.EVENT.SEEK_END&&c--,c===1&&(f._remove=!1,c--,f.args.merge=s),!f._remove})},m.exports.removeInternalEventsVars=function(n){return(n=n===void 0?[]:n).map(function(t){var e=w({},t,{args:w({},t.args)});return Object.keys(e).forEach(function(a){a.indexOf("_")===0&&delete e[a],e.args&&Object.keys(e.args).forEach(function(o){o.indexOf("_")===0&&delete e.args[o]})}),e})},m.exports.getFragInfoFromHlsError=function(n){return n=n.frag||{},{fragUrl:n.url,fragDuration:n.duration,fragSize:n.stats.total}},m.exports.getSpeed=function(n){return Math.floor(n/8)},m.exports.formatDecimal=function(n,t){return t===void 0&&(t=2),parseFloat(n.toFixed(t))}},{"../lib/cookie":34,"../lib/data":35,"./constants":67}],78:[function(x,m,j){var w=x("../lib/io");x("../lib/storage");function p(d){this._uploadDuration=d.logDuration||5,this._uploadCount=d.logCount||10,this._logReportTo=d.logReportTo,this._dumpLogReportTo=d.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var l;try{localStorage?(l=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),l&&(this._logs=JSON.parse(l))):this._supportLocalStorage=!1}catch{this._supportLocalStorage=!1}this._start()}p.prototype.add=function(d){var l=this._logs.length;if(d.__time__=Math.round(new Date/1e3),0<l&&d.e=="4001"){var l=this._logs[l-1];if(l.e=="4001"&&l.__time__-d.__time__<5)return}this._logs.push(d),(this._logs.length>this._uploadCount||d.e=="4001"||d.e=="2002"||d.e=="9002"&&(l=d.args)!=null&&l.includes("dump::"))&&this._report()},p.prototype.dispose=function(){this._report(),this._disposed=!0},p.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},p.prototype._report=function(d){var l,n,t;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(d=d||this._logs.splice(0,this._uploadCount)).length?(t={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(l=JSON.stringify({__logs__:d,__source__:""})).length},w.postWithHeader((n=this)._logReportTo,l,t,function(e){n._tick()},function(e){n._retry==0?(n._retry=1,n._report(d)):n._tick()})):this._tick()},p.prototype.reportDump=function(d){var l;d&&(l={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(d=JSON.stringify({__logs__:[d],__source__:""})).length},w.postWithHeader(this._dumpLogReportTo,d,l,function(n){},function(n){}))},p.prototype._tick=function(){var d;this._disposed||(this._retry=0,(d=this)._logs.length>this._uploadCount?d._report():this._tickHandler=setTimeout(function(){d._report()},1e3*this._uploadDuration))},m.exports=p},{"../lib/io":45,"../lib/storage":52}],79:[function(u,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(r){for(var h=1;h<arguments.length;h++){var v,T=arguments[h];for(v in T)!{}.hasOwnProperty.call(T,v)||(r[v]=T[v])}return r}).apply(null,arguments)}var p,d=u("../lib/oo"),l=u("../lib/object"),n=u("../lib/data"),t=u("../lib/io"),e=u("../lib/ua"),a=u("../lib/event"),o=u("../config"),s=u("../player/base/event/eventtype"),g=u("./util"),c=u("./log"),f=u("../lib/playerutil"),y=0,_={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},u=d.extend({init:function(E,S,T){this.trackLog=T=T===void 0?!0:T,this.player=E,this.requestId="",this.sessionId=n.guid(),this.playId=0,this.firstPlay=!0,this.osName=e.os.name,this.osVersion=e.os.version||"",this.exName=e.browser.name,this.exVersion=e.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],this.checkSeekStuckedTimer=null,o.logReportTo=S.logReportTo||o.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),S.logBatched&&(this._logService=new c(o));var T=this.player.getOptions(),E=S.from||"",S=(T.isLive,T.isLive?"live":"vod"),P="pc",b=(e.IS_IPAD?P="pad":e.os.phone&&(P="phone"),this.encodeURL(e.getReferer())),C=e.getHref(),k=this.encodeURL(C),I="",C=(C&&(I=e.getHost(C)),o.h5Version),L=g.getUuid(),N=T.source?this.encodeURL(T.source):"",U=e.getHost(T.source),Y=T.userId?T.userId+"":"0",z=this.sessionId,K=new Date().getTime(),M=String(T.traceId)||"";this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:K,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:e.USER_AGENT,hn:"0.0.0.0",bi:E,ri:z,e:"0",args:"0",li_ki:T.license.key||"",vt:S,tt:P,dm:"h5",av:C,uuid:L,vu:N,vd:U,ua:Y,dn:"custom",cdn_ip:"0.0.0.0",app_n:I,r:b,pu:k,ti:M},this.bindEvent()},updateVideoInfo:function(r){r=r.from||"",this.opt.bi=r+"",this.updateSourceInfo()},updateSourceInfo:function(){var r,h=this.player.getOptions();h&&(r=h.source?this.encodeURL(h.source):"",h=e.getHost(h.source),this.opt.vu=r,this.opt.vd=h)},updateTraceId:function(r){this.opt.ti=String(r)},updateLightSaasVideoId:function(r){this.lightSaasVideoId=r},replay:function(){this.reset(),this.player.trigger(s.Video.LoadStart),this.player.trigger(s.Video.LoadedMetadata),this.player.trigger(s.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var r=this;this.player.on(s.Private.Create,function(h){r._onCreate(h)}),this.player.on(s.Player.Init,function(){r._onPlayerInit()}),this.player.on(s.Video.LoadStart,function(){r._onPlayerloadstart()}),this.player.on(s.Video.LoadedMetadata,function(){r._onPlayerLoadMetadata()}),this.player.on(s.Video.LoadedData,function(){r._onPlayerLoaddata()}),this.player.on(s.Player.H265PlayInfo,function(h){r._onH265PlayInfo(h),r._onPlayerH265PlayInfo(h)}),this.player.on(s.Player.H266PlayInfo,function(h){r._onH265PlayInfo(h),r._onPlayerH265PlayInfo(h)}),this.player.on(s.Video.Play,function(){r._onPlayerPlay()}),this.player.on(s.Video.Playing,function(){r._onPlayerReady()}),this.player.on(s.Video.Ended,function(){r._onPlayerFinish()}),this.player.on(s.Video.Pause,function(){r._onPlayerPause()}),this.player.on("seeking",function(){r._onPlayerSeeking()}),this.player.on("seeked",function(){r._onPlayerSeeked()}),this.player.on(s.Private.LicenseHasResult,function(h){r._onLicenseHasResult(h)}),this.player.on(s.Private.SeekStart,function(h){r._onPlayerSeekStart(h)}),this.player.on(s.Private.EndStart,function(h){r._seekEndData=h.paramData}),this.player.on(s.Player.Waiting,function(){r._onPlayerLoaded()}),this.player.on(s.Video.CanPlayThrough,function(){}),this.player.on(s.Video.CanPlay,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._onPlayerUnderload(),r._onPlayerCanplay()}),this.player.on(s.Video.TimeUpdate,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._seekEndData&&r.player._seeking&&r._onPlayerSeekEnd()}),this.player.on(s.Player.Error,function(h){r._onPlayerError(h)}),this.player.on(s.Player.RequestFullScreen,function(){r._onFullscreenChange(1)}),this.player.on(s.Player.CancelFullScreen,function(){r._onFullscreenChange(0)}),this.player.on(s.Private.PREPARE,function(h){r._prepareTime=performance.now(),r._log("PREPARE",{dn:h.paramData}),r.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(s.Private.ManualPlay,function(){r.loadedDataReported||(r._prepareTime=performance.now(),r.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(s.Player.Snapshoted,function(){r._log("SNAPSHOT")}),this.player.on(s.Private.Retry,function(h){h=h.paramData||{},r._log("RETRY",{type:h.type,source:h.source})}),this.player.on(s.Player.RtsFallback,function(T){var v,T=T.paramData||{};r._log("RTSFALLBACK",{reason:(v=T.reason)==null?void 0:v.error_msg,url:T.fallbackUrl})}),this.player.on(s.Private.VodRequestException,function(h){h=h.paramData||{},r.reportVodException(h)}),this.player.on(s.Private.VodRequestExceptionResume,function(h){h=h.paramData||{},r.reportVodExceptionResume(h)}),this.player.on(s.Private.TraceLog,function(h){h=h.paramData||{},r._reportTrace(h)}),this.player.on(s.Private.DumpBuffer,function(h){h=h.paramData||{},r._reportDump(h)}),this.player.on(s.Private.StatisticsInfo,function(h){h=h.paramData||{},r._onStatisticsHistoryUpdate(h)}),this.player.on(s.Private.Timeline,function(h){h=h.paramData||{},r._onTimeline(h)}),a.on(this.player.tag,s.Video.Playing,function(){r.reportPlaying()}),a.on(this.player.tag,s.Video.TimeUpdate,function(){r.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var r=this;this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){r.player.trigger(s.Private.TraceLog,"[statistics_history]"+JSON.stringify(r.statisticsHistory)),r.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var r;this.doPlayReported||this.player.paused()||this.player.readyState()===0||(this.doPlayReported=!0,this.first_play_time=performance.now(),r={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",r))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(s.Private.PREPARE),this.player.offAll(s.Player.RtsFallback),a.off(this.player.tag,s.Video.Playing),a.off(this.player.tag,s.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(p),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},y=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),p&&(clearInterval(p),p=null)},encodeURL:function(r){var h;return r?(h=this.player.getOptions())&&!h.logBatched?encodeURIComponent(r):r:""},startHeartBeat:function(){var r=this;p&&clearInterval(p),p=setInterval(function(){var h;r.player.getCurrentTime()&&(h=Math.floor(1e3*r.player.getCurrentTime()),r.player.paused()&&(r.prevStats.timestamp=0),++y>=r.player._options.heartHeatInterval)&&r.updateStats.call(r,function(v){var E=r._imageInfo()||{},S=r.player.tag.playbackRate,T=r.player.getVolume(),E={vt:h,interval:1e3*y,imgLength:E.imgLength,playbackRate:S,volume:T,bw:r._getbwEstimator()+"KB"},S=((E=v?w({},E,{dls:Math.floor(v.downloadSpeedPerSec),dfps:Math.floor(v.decodedFramesPerSec),pkl:Number((v.packageLossRate||0).toFixed(2)),rtt:1e3*v.rtt}):E).player_status=w({},r.heartBeatStatusData),r.player);E.time={play_time:parseFloat((S._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(S._stuckCount.toFixed(2)),stuck_time:parseFloat((S._stuckTime/1e3).toFixed(2))},r._log("HEARTBEAT",E),y=0})},1e3)},updateStats:function(r){r=r||function(){};var h=this;this.player.getStats().then(function(v){var T,E;v?(T=h.prevStats,v.bytesReceived=v.bytesReceived||0,v.framesDecoded=v.framesDecoded||0,v.packetsLost=v.packetsLost||0,v.packetsReceived=v.packetsReceived||0,E=((h.prevStats=v).timestamp-T.timestamp)/1e3,r({downloadSpeedPerSec:(v.bytesReceived-T.bytesReceived)/E,decodedFramesPerSec:(v.framesDecoded-T.framesDecoded)/E,packageLossRate:(v.packetsLost-T.packetsLost)/(v.packetsLost-T.packetsLost+(v.packetsReceived-T.packetsReceived)),rtt:v.rtt,timeGap:E})):r()}).catch(function(v){console.log("error in monitor getStats: ",v),r()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),this.canplayReported=!0)},reportPlayAbort:function(r){this._log("PLAYABORT",{vt:new Date().getTime(),from:r})},reportVodException:function(r){console.log("VOD_REQUEST_FATAL_ERROR",r),this._log("VOD_REQUEST_FATAL_ERROR",r)},reportVodExceptionResume:function(r){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",r),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",r)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=n.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var r=performance.now();this._createTime=r,this.timeline=[{name:"init",ts:r}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(r){this._h265ProbeInfo=r||{}},_onFullscreenChange:function(r){r?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(r){var h=["frag_s","frag_f","frag_parsed"].includes(r.name);this.timeline.some(function(v){return h&&v.name===r.name})||this.timeline.push(r)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=n.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var r,h,v,T,E=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(T=v=0,this.player.tag&&(v=this.player.tag.videoWidth,T=this.player.tag.videoHeight),r={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:v+"*"+T})},this.timeline.forEach(function(S,P){try{var b=P?S.ts-E.timeline[P-1].ts:0;r["tl_"+S.name]=P+"#"+parseInt(b)}catch{}}),(v=this.player.tag)!=null&&v.duration&&(r.vdur=1e3*((T=this.player.tag)==null?void 0:T.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(v=Math.floor(this._h265ProbeInfo.codecCost)||0,T=Math.floor(this._h265ProbeInfo.decoderCost)||0,r.tc+=h=v+T,r.cc+=h,r.pcc=v,r.pdc=T),h=[{type:"audio"}],v={type:"video",codecType:null,isHardwareDecode:null},T=this._h265ProbeInfo.codecTag,f.isH265Codec(T)?v.codecType="h265":f.isH266Codec(T)?v.codecType="h266":f.isH264Codec(T)&&(v.codecType="h264"),h.push(v),r.decode_info=h,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=r,this.h265RenderTypeTimer=setTimeout(function(){E._log("PREPAREEND",r),E.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",r)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(r){this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistory.speed.push(parseInt(r.speed)),this.statisticsHistory.framesDropped.push(r.droppedFrames),r=navigator.connection)&&(this.statisticsHistory.downlink.push(r.downlink),this.statisticsHistory.type.push(r.effectiveType),this.statisticsHistory.rtt.push(r.rtt))},_onH265PlayInfo:function(r){var h,v;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(r=r.paramData,h=this.pendingPrepareEndData,this.pendingPrepareEndData=null,v=h.decode_info[1],r.renderType==="wasm"&&(v.isHardwareDecode=!1),this._log("PREPAREEND",h))},_onPlayerH265PlayInfo:function(r){r=r.paramData||{},this._log("HEVCINFO",{cd:r.codecTag,rd:r.renderType,si:r.simd,sio:r.simdOption,wt:r.wasmThreads,wto:r.wasmThreadsOption,sp:r.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(r){r=r.paramData||{},r.hasPa=!!r.playauth,delete r.playauth,r.hasSk=!!r.accessKeySecret,delete r.accessKeySecret,r.hasSt=!!r.securityToken,delete r.securityToken,this._log("CREATE",r),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var r;this.playstartTime=new Date().getTime(),this.playId==0&&(this.playId=n.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=new Date().getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,r=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:r,pass:r,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=new Date().getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(r){r=r.paramData||{},this._log("LICENSE_RESULT",{li_ri:r.result+" "+(r.errorCode||""),li_ti:r.featureId||"sdk"})},_onPlayerSeekStart:function(r){this.seekStartTime=r.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=new Date().getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=new Date().getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var r,h=this;this.doPlayReported&&!this.stucking&&document.visibilityState!=="hidden"&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),this.checkSeekStuckedTimer&&clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=setTimeout(function(){var v=h.player.readyState()<4;h.player.readyState()||(v=!0),h.player.getCurrentTime()===h.seekingStartTime&&v&&(v=h._getbwEstimator(),h._log("UNDERLOAD",{vt:Math.floor(1e3*h.player.getCurrentTime()),bw:v,cbs:h._getCbs()}),h.stucking=!0,h.stuckStartTime=new Date().getTime(),h._getCbs()===0)&&(h.heartBeatStatusData.t_last_load_start=h.stuckStartTime,h.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=new Date().getTime(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,r=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:r,cbs:this._getCbs()}),this.stuckStartTime=new Date().getTime())))},_onPlayerUnderload:function(){var r,h,v,T;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(r=Math.floor(1e3*this.player.getCurrentTime()),h=this.stuckStartTime||new Date().getTime(),0<(v=Math.floor(new Date().getTime()-h))&&v<(1e3*this.player._options.waitingTimeout||6e4)&&(T=this._getbwEstimator(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_end=new Date().getTime()),this._log("LOADED",{vt:r,cost:v,bw:T,cbs:this._getCbs(),t_last_load_start:h})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var r=this;this.player._splayer?this.player.one("canplay",function(){r._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var r=performance.now(),r=Math.floor(r-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:r})},_reportTrace:function(r){this._log("TRACE",{log:r})},_reportDump:function(r){this._log("DUMP",r)},_onPlayerError:function(r){this._reportTrace(r.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData()),p&&(clearInterval(p),p=null)},_getbwEstimator:function(){var r=NaN;try{r=((r=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch{}return r},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(r,h){if(this.trackLog){this.updateSourceInfo();var v=l.copy(this.opt),T=(this.requestId=n.guid(),o.logReportTo),r=(v.e=_[r]+"",v.en=r,v.ri=this.sessionId,v.bi=v.bi&&String(v.bi),v.t=new Date().getTime()+"",v.cdn_ip=this._userNetInfo.cdnIp,v.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),E=(r!=""&&(v.definition=r.definition),[]),r=(l.each(h,function(k,I){if(typeof I!="string")try{I=JSON.stringify(I)}catch{}E.push(k+"="+I)}),""),h=this.player.getOptions(),r=((r=h&&h.vid||this.lightSaasVideoId?h.vid||this.lightSaasVideoId:r)&&E.push("vid="+r),"");(r=h&&h.mediaAuth?h.mediaAuth:r)&&E.push("pauth="+r);try{Aliplayer&&Aliplayer.__logCallback__&&(v.args=E,Aliplayer.__logCallback__(v))}catch(k){console.log(k)}if((E=E.join("&"))==""&&(E="0"),v.args=this.encodeURL(E),this._logService){if(v.e===String(_.DUMP))return void this._logService.reportDump(v);this._logService.add(v)}else{var S=[];l.each(v,function(k,I){S.push(k+"="+I)}),S=S.join("&"),t.jsonp(T+"?"+S,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var r,h,v,T,E,S,P;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(r=this.player.tag)?(h=document.createElement("canvas"),v=r.videoWidth,T=r.videoHeight,h.width=v,h.height=T,(E=h.getContext("2d")).save(),E.drawImage(r,0,0,v,T),E.restore(),S=h.toDataURL("image/jpeg",1),P="",{imgLength:(P=S?(P=S.substr(S.indexOf(",")+1))||"":P).length}):{}}catch{return{}}}});m.exports=u},{"../config":19,"../lib/data":35,"../lib/event":38,"../lib/io":45,"../lib/object":47,"../lib/oo":48,"../lib/playerutil":50,"../lib/ua":53,"../player/base/event/eventtype":84,"./log":78,"./util":80}],80:[function(x,m,j){var w=x("../lib/cookie"),p=x("../lib/data"),d=x("../lib/ua");m.exports.getUuid=function(){var l=w.get("p_h5_u");return l||(l=p.guid(),w.set("p_h5_u",l,730)),l},m.exports.getTerminalType=function(){var l="pc";return d.IS_IPAD?l="pad":d.IS_ANDROID?l="android":d.IS_IOS&&(l="iphone"),l},m.exports.returnUTCDate=function(g){var n=g.getUTCFullYear(),t=g.getUTCMonth(),e=g.getUTCDate(),a=g.getUTCHours(),o=g.getUTCMinutes(),s=g.getUTCSeconds(),g=g.getUTCMilliseconds();return Date.UTC(n,t,e,a,o,s,g)},m.exports.getRfc822=function(l){return l.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":34,"../lib/data":35,"../lib/ua":53}],81:[function(x,m,j){var w=x("./base/player"),p=x("./saas/mtsplayer"),d=x("./saas/vodplayer"),l=x("./saas/lightPlayer"),n=x("./audio/audioplayer"),t=x("./hls/hlsplayer"),e=x("./flv/flvplayer"),a=x("./dash/dashplayer"),o=x("./rts/rtsplayer"),s=x("./drm/drmplayer"),g=x("./splayer/splayer"),c=x("../lib/ua"),f=x("../lib/playerutil"),y=(x("../lib/dom"),x("../lib/io"),x("../lang/index")),_=x("../lib/constants"),u=x("./base/event/eventtype");m.exports.create=function(T,v){T.PlayAuth&&(T.playauth=T.PlayAuth),typeof T.rtsFallback!="boolean"&&T.rtsFallbackSource&&(T.rtsFallback=!0),T._userOptions||(T._userOptions=Object.assign({},T)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(T.useNativeControls=!0),T.readyCallback=v=typeof v!="function"?function(){}:v,y.setCurrentLanguage(T.language,"h5",T.languageTexts,T.extLanguageTexts);var v=f.handleOption(T),T=v.source,E=v.format;if(E&&T)try{E=E.toLowerCase()}catch(k){console.log("Aliplayer - parsing format failed",k),E=""}else E="";f.isSupportedFormat(E)||(E=""),v.optionFormat=E,v.drm&&(v.isDrm=!0),v.useDrm2===void 0&&(v.useDrm2=!(v.isDrm&&v.accessKeyId));var S,P=f.isAudio(T,E),b=(P&&(v.mediaType="audio"),f.createWrapper(v));if(b.player)return b.player;if(P)S=new n(b,v);else if(f.isRts(T))S=new o(b,v);else if((v.forceH265||v.enableH265)&&(f.isMp4(T,E)||f.isFlv(T,E)||f.isHls(T,E)))S=new g(b,v);else if((v.forceH266||v.enableH266)&&(f.isMp4(T,E)||v.isLive&&(f.isFlv(T,E)||f.isHls(T,E))))S=new g(b,v);else if(!v.useFlashPrism&&f.isFlv(T,E)&&f.isSupportFlv())S=new e(b,v);else if([null,void 0].indexOf(v.mediaAuth)!==-1||v.source)if(v.vid&&!v.source)if(v.authInfo)S=new p(b,v);else{if(!(v.playauth||v.accessKeyId&&v.accessKeySecret))throw P="vid="+v.vid+" playauth='', playauth property is required by VOD() as new Aliplayer.",new Error(P);S=new d(b,v)}else f.isHls(T,E)?f.canPlayHls()?S=new(f.isSupportHls()&&(f.isUsedHlsPluginOnMobile()||f.isSafariUsedHlsPlugin(v.useHlsPluginForSafari))?v.isDrm?s:t:v.isDrm?s:w)(b,v):f.isSupportHls()?S=new(v.isDrm?s:t)(b,v):c.os.pc||(S=new w(b,v)):f.isDash(T,E)&&f.isSupportMSE()?S=new(v.isDrm?s:a)(b,v):(S=new w(b,v),v.source||(P={error_code:_.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:y.get("Error_Empty_Source")},S.trigger(u.Player.Error,P)));else S=new l(b,v);return S}},{"../lang/index":28,"../lib/constants":33,"../lib/dom":37,"../lib/io":45,"../lib/playerutil":50,"../lib/ua":53,"./audio/audioplayer":82,"./base/event/eventtype":84,"./base/player":109,"./dash/dashplayer":116,"./drm/drmplayer":119,"./flv/flvplayer":121,"./hls/hlsplayer":123,"./rts/rtsplayer":125,"./saas/lightPlayer":129,"./saas/mtsplayer":131,"./saas/vodplayer":136,"./splayer/splayer":145}],82:[function(t,m,j){var w=t("../base/player"),p=t("../../ui/component"),d=t("../../lib/dom"),l=t("../../lib/object"),n=t("../../lib/playerutil"),t=w.extend({init:function(e,a){this._isAudio=!0,a.skinLayout===void 0&&(a.skinLayout=n.getDefaultAudioLayout()),w.call(this,e,a)}});t.prototype.createEl=function(){this.tag.tagName!=="AUDIO"&&(this._el=this.tag,this.tag=p.prototype.createEl.call(this,"audio"));var e=this._el,a=this.tag,o=(a.player=this,d.getElementAttributes(a));return l.each(o,function(s){e.setAttribute(s,o[s])}),this.setVideoAttrs(),a.parentNode&&a.parentNode.insertBefore(e,a),d.insertFirst(a,e),e},m.exports=t},{"../../lib/dom":37,"../../lib/object":47,"../../lib/playerutil":50,"../../ui/component":150,"../base/player":109}],83:[function(x,m,j){var w=x("../../../lib/event"),p=x("./eventtype"),d=x("../eventHandler/video/index"),l=x("../eventHandler/player/index");m.exports.offAll=function(n){var t,e,a,o=n.tag,s=n._el;for(t in p.Video)w.off(o,p.Video[t]);for(e in p.Player)w.off(s,p.Player[e]);for(a in p.Private)w.off(s,p.Private[a])},m.exports.offVideoAll=function(n){var t,e=n.tag;for(t in p.Video)w.off(e,p.Video[t])},m.exports.onAll=function(n){d.bind(n),l.bind(n)}},{"../../../lib/event":38,"../eventHandler/player/index":88,"../eventHandler/video/index":98,"./eventtype":84}],84:[function(x,m,j){m.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable",VttSwitchResult:"vttSwitchResult",QualitySwitchResult:"qualitySwitchResult",AbrQualitySwitch:"abrQualitySwitch"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",HideUnmuteButton:"hideUnmuteButton",Timeline:"timeline",ManualPlay:"manualPlay",UpdateWatchTime:"updateWatchTime",FastForwardShow:"fastForwardShow",FastForwardHide:"fastForwardHide",ShowControlBarByAPI:"showControlBarByAPI",HideControlBarByAPI:"hideControlBarByAPI"}}},{}],85:[function(x,m,j){x("../../event/eventtype");var w=x("../../../../lib/dom"),p=x("../../../../lib/ua");m.exports.handle=function(){(this._options.enableMockFullscreen||!p.IS_IOS||p.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&w.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":84}],86:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){var d=this;d.trigger(w.Player.CompleteSeek,p.paramData.toTime),d.one(w.Player.CanPlay,function(){d._enteredProgressMarker&&d.pause()})}},{"../../event/eventtype":84}],87:[function(x,m,j){var w=x("../../event/eventtype"),p=(x("../../../../lib/constants"),x("../../../../lang/index"),x("../../../../monitor/util"));m.exports.handle=function(n){var l=this,n=n.paramData;l.trigger(w.Private.H5_Loading_Hide),l.trigger(w.Private.Cover_Hide),l.trigger(w.Private.Play_Btn_Hide),l.trigger(w.Private.SettingListHide),l.trigger(w.Private.SelectorHide),l.trigger(w.Private.VolumeVisibilityChange,""),n=n||{},l._monitor&&(n.uuid=p.getUuid(),n.serverRequestId=l._serverRequestId,n.requestId=l._monitor2.session.id,n.cdnIp=l._monitor._userNetInfo.cdnIp,n.localIp=l._monitor._userNetInfo.localIp),l._isError=!0,l.trigger(w.Private.Error_Show,n),l.trigger(w.Private.LifeCycleChanged,{type:w.Player.Error,data:n}),l._monitor2.playError(n)}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../monitor/util":80,"../../event/eventtype":84}],88:[function(x,m,j){var w=x("../../event/eventtype"),p=x("../../../../lib/event"),d=x("./lifecyclecommon"),l={endStart:x("./endstart"),seekStart:x("./seekstart"),requestFullScreen:x("./requestfullscreen"),cancelFullScreen:x("./cancelfullscreen"),error:x("./error"),privateSeiFrame:x("./seiframe"),patchWaiting:x("../video/waiting")},n=[w.Private.EndStart,w.Private.SeekStart,w.Player.RequestFullScreen,w.Player.CancelFullScreen,w.Player.Error,w.Player.Ready,w.Private.Dispose,w.Private.Created,w.Private.SeiFrame,w.Private.PatchWaiting];m.exports.bind=function(t){t.el();for(var e=0;e<n.length;e++){var a=n[e];l[a]!="undefined"&&((o,s,g)=>{var c=o.el();p.on(c,s,function(f){var y=(g&&g.handle?g:d).handle;y.call(o,f,s)})})(t,a,l[a])}}},{"../../../../lib/event":38,"../../event/eventtype":84,"../video/waiting":108,"./cancelfullscreen":85,"./endstart":86,"./error":87,"./lifecyclecommon":89,"./requestfullscreen":90,"./seekstart":91,"./seiframe":92}],89:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p,d){this.trigger(w.Private.LifeCycleChanged,{type:d,data:p})}},{"../../event/eventtype":84}],90:[function(x,m,j){x("../../event/eventtype");var w=x("../../../../lib/dom"),p=x("../../../../lib/ua");m.exports.handle=function(){(this._options.enableMockFullscreen||!p.IS_IOS||p.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&w.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":84}],91:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){this._seeking=!0,this.trigger(w.Player.StartSeek,p.paramData.fromTime)}},{"../../event/eventtype":84}],92:[function(x,m,j){x("../../event/eventtype"),m.exports.handle=function(l){var p,d,l=l.paramData,n=l.pts;this._hls2?n=parseInt(1e3*n):this._hls&&(p=l.pts,d=this._initPTS,n=parseInt((p-d)/90,10)),this._seis[n]=this._seis[n]||[],this._seis[n].push(l.dataContent)}},{"../../event/eventtype":84}],93:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){var d=this,l=(d._retrySwitchUrlCount=0,d._liveRetryCount=0,d._clearLiveErrorHandle(),d._dumpBuffer="ABORTED",new Date().getTime()-d.readyTime),n=(d._options.autoplay||d._options._autoplay||!d.paused()||(d.trigger(w.Private.H5_Loading_Hide),d.trigger(w.Private.Play_Btn_Show)),d.tag);if(d._options&&d._options.subtitleRenderMode===2)for(var t=0;t<n.textTracks.length;t++){var e=n.textTracks[t];if(e.mode==="showing"){e.mode="disabled";break}}d.trigger(w.Player.CanPlay,{loadtime:l}),d._monitor2.canplay(),(l=d._qualityService)!=null&&l._urlSwitchCompleteHandler()}},{"../../event/eventtype":84}],94:[function(x,m,j){var w=x("../../event/eventtype"),p=x("../../../../lib/dom"),d=x("../../../../lib/ua");m.exports.handle=function(l){this._seeking=!1;var n=this.tag;n.style.display==="none"&&d.IS_IOS&&setTimeout(function(){p.css(n,"display","block")},100),this.trigger(w.Video.CanPlayThrough)}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":84}],95:[function(x,m,j){m.exports.handle=function(w,p){var d="";w&&w.paramData&&(d=w.paramData),this.trigger(p,d)}},{}],96:[function(x,m,j){var w=x("../../event/eventtype");x("../../../../lang/index"),x("../../../../lib/event"),m.exports.handle=function(p){var d=this;d.waiting=!1,d._ended=!0,d._currentTimeForDisableSeek=0,d.traceLog("video/ended.js","event::ended"),d._monitor2.playFinish(),d.trigger(w.Private.Play_Btn_Show),d.trigger(w.Player.Ended,{playTime:d.getPlayTime()}),d.__disposed||(d._monitor&&d._monitor._onPlayerInit(),d._options.rePlay?(d._monitor&&d._monitor.startHeartBeat(),this._splayer||(d.seek(d._getPlayStartTime()),d.tag.play())):d._options.isLive&&d.trigger(w.Private.H5_Loading_Hide))}},{"../../../../lang/index":28,"../../../../lib/event":38,"../../event/eventtype":84}],97:[function(x,m,j){var w=x("../../event/eventtype"),p=x("../../../../lib/constants"),d=x("../../../../lang/index"),l=(x("../../../../lib/event"),x("../../../../lib/ua")),n=(x("../../../../lib/io"),x("../../../../lib/playerutil")),t=x("../../../../monitor-new/constants").ERROR_ANALYZE_TYPE,e="video/error.js";function a(o,s,g){var c=o._options,f=c.source||"";(s=s!==4&&l.IS_IOS&&/qqbrowser/i.test(l.USER_AGENT)?4:s)===4&&n.isHls(f)?n.detectRegionBlock(f,function(y){y?(y={mediaId:c.isLive?"ISLIVE":c.vid||"",error_code:p.ErrorCode.RegionBlock,error_msg:d.get("Error_Region_Block_Text"),diagnosis_info:d.get("Tip_Err_Blocked")},o.logError(y),o.trigger("error",y)):g()}):g()}m.exports.handle=function(o){if((o.target||o.srcElement).error){var s=this;if(s.waiting=!1,s._clearTimeout(),s.checkOnline()&&!s._splayer&&!s._drm){var g,y="",c=o.target||o.srcElement,f=c.error&&c.error.message||"",y="",_={type:null};if(c.error&&c.error.code&&(g=c.error.code,y=p.VideoErrorCode[c.error.code],f=g+" || "+f,y===p.VideoErrorCode[3])&&(/AUDIO_RENDERER_ERROR/i.test(f)?_.type=t.MEDIA_RENDER_AUDIO:_.type=t.MEDIA_DECODE_VIDEO),s.traceLog(e,"event::error#"+g+"#"+f),s._reportDumpBuffer&&s._reportDumpBuffer(),s._options.isLive)a(s,g,function(){s._options.liveRetry>s._liveRetryCount?s._reloadAndPlayForM3u8():(s._liveRetryCount=0,s.trigger(w.Player.LiveStreamStop),s._liveErrorHandle=setTimeout(function(){var r={mediaId:"ISLIVE",error_code:y,error_msg:f||d.get("Error_Play_Text")+""+d.get("Error_Retry_Text"),analyze:_};s.logError(r),r.display_msg=p.VideoErrorCodeText[g]||r.error_msg,s.trigger("error",r)}),l.IS_UC&&(s._liveErrorHandle=null))});else if(g==3){if(c="",-1<f.indexOf("no decoder found"))c=d.get("Error_No_Decoder_Text");else if(s._nudgeCount=s._nudgeCount||0,s._nudgeCount<5){s._nudgeCount++;var u=+s._nudgeCount,u=s.getCurrentTime()+u;if(s.traceLog(e,"decode error, try to nudge("+s._nudgeCount+"/5) from "+s.getCurrentTime()+" to "+u+"s, duration: "+s.getDuration()+"("+f+")",!0),u<s.getDuration())return void s._loadByUrlInner(s._options.source,u,!0)}else if((function(){var r=!1,h=this.getOptions();{var v;this._fallback||!n.isHls(h.source)||this._options._native||!n.canPlayHls()||this.swPlayer||(r=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(e,"fallback to native player"),v=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(T){T._fallback=!0,h.isLive||T.seek(v)},this))}return r}).call(s)||(function(){var r=!1,h=this.getOptions();{var v;!this._fallback&&n.isHls(h.source)&&this._options._native&&n.isSupportHls()&&(r=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(e,"fallback to MSE player"),v=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(T){T._fallback=!0,h.isLive||T.seek(v)},this)}return r}).call(s))return;u={mediaId:s._options.vid||"",error_code:y,error_msg:f,analyze:_},s.logError(u),u.display_msg=p.VideoErrorCodeText[g]+(c?""+c:""),u.diagnosis_info=d.get("Tip_Err_Decode")+"<br />"+d.get("Tip_Err_Common_Short")+f,s.trigger(w.Player.Error,u)}else a(s,g,function(){var r,h,v;r=d.get("Error_Play_Text"),h=!1,g<3?r=p.VideoErrorCodeText[g]:s._eventState==p.SUSPEND?(r=d.get("Error_Load_Abort_Text"),y=p.ErrorCode.RequestDataError):s._eventState==p.LOAD_START?(r=d.get("Error_Network_Text"),0<s._options.source.indexOf("auth_key")&&(r=r+""+d.get("Error_AuthKey_Text")),y=p.ErrorCode.StartLoadData):s._eventState==p.LOADED_METADATA&&(r=d.get("Error_Play_Text"),y=p.ErrorCode.PlayingError),r=r+""+d.get("Error_Retry_Text"),1<s._urls.length&&s._retrySwitchUrlCount<3&&s._options.source.indexOf(".mpd")==-1&&(s.switchUrl(),h=!0),v={mediaId:s._options.vid||"",error_code:y,error_msg:f},h||(s.logError(v),v.display_msg=r,s.trigger(w.Player.Error,v))})}}else this.traceLog(e,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(o.target||o.srcElement).poster+")")}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../lib/event":38,"../../../../lib/io":45,"../../../../lib/playerutil":50,"../../../../lib/ua":53,"../../../../monitor-new/constants":67,"../../event/eventtype":84}],98:[function(x,m,j){var w=x("../../../../lib/event"),p=x("../../event/eventtype"),d={canplay:x("./canplay"),canplaythrough:x("./canplaythrough"),common:x("./common"),ended:x("./ended"),error:x("./error"),pause:x("./pause"),play:x("./play"),playing:x("./playing"),waiting:x("./waiting"),timeupdate:x("./timeupdate"),manualended:x("./ended"),loadedmetadata:x("./loadedmetadata"),loadeddata:x("./loadeddata"),seeking:x("./seeking"),seeked:x("./seeked"),resize:x("./resize")};m.exports.bind=function(l){l.tag;for(var n in p.Video)n=p.Video[n],((t,e,a)=>{var o=t.tag;w.on(o,e,function(s){e!=p.Video.Error&&(e==p.Video.ManualEnded&&(e=p.Video.Ended),t.trigger(p.Private.LifeCycleChanged,{type:e,data:s})),a.handle.call(t,s,e)})})(l,n,d[n]!==void 0?d[n]:d.common)}},{"../../../../lib/event":38,"../../event/eventtype":84,"./canplay":93,"./canplaythrough":94,"./common":95,"./ended":96,"./error":97,"./loadeddata":99,"./loadedmetadata":100,"./pause":101,"./play":102,"./playing":103,"./resize":104,"./seeked":105,"./seeking":106,"./timeupdate":107,"./waiting":108}],99:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){this.trigger(w.Video.LoadedData),this._monitor2.firstFrame()}},{"../../event/eventtype":84}],100:[function(x,m,j){var w=x("../../event/eventtype");x("../../../../lib/playerutil"),m.exports.handle=function(p){var d=this.tag,l=d.duration<1?0:d.duration;this._getSubVideoConfig().start>l-1&&(console.warn("Params.start ["+this._getSubVideoConfig().start+"] is greater than video.duration ["+l+"] - 1, seeking to 0"),this.setStartEnd(0,this._getSubVideoConfig().end)),this._getWatchTimeConfig().watchStartTime>l-1&&(console.warn("Params.watchStartTime ["+this._getWatchTimeConfig().watchStartTime+"] is greater than video.duration ["+l+"] - 1, seeking to 0"),this.setWatchTime(0,this._getWatchTimeConfig().watchEndTime)),this.trigger(w.Private.ReadyState),this._splayer&&this.trigger(w.Video.DurationChange),this.trigger(w.Video.LoadedMetadata),d.videoWidth&&d.videoHeight||this.trigger(w.Player.VideoUnavailable),this._monitor2.mediaMeta({duration:l,videoWidth:d.videoWidth,videoHeight:d.videoHeight})}},{"../../../../lib/playerutil":50,"../../event/eventtype":84}],101:[function(x,m,j){var w=x("../../event/eventtype"),p=x("../../../../lib/ua");m.exports.handle=function(d){var l=this;l._seeking&&l._splayer||(l._hls&&l._options&&l._options.isLive&&p.IS_FIREFOX&&l.trigger(w.Private.Play_Btn_Show),l._clearTimeout(),l.trigger(w.Private.AutoStreamHide),l.trigger(w.Player.Pause),l._isManualPause&&(l.trigger(w.Private.Play_Btn_Show),l.trigger(w.Private.H5_Loading_Hide),l._monitor2.pause()),l.waiting=!1)}},{"../../../../lib/ua":53,"../../event/eventtype":84}],102:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){this.trigger(w.Private.Error_Hide),this.trigger(w.Private.Cover_Hide),this.trigger(w.Private.AutoStreamHide),this.waiting=!1,this.trigger(w.Player.Play)}},{"../../event/eventtype":84}],103:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){var d,l=this;this.tag.paused||(l.trigger(w.Private.H5_Loading_Hide),l.trigger(w.Private.Cover_Hide),l.trigger(w.Private.Info_Hide),l.waiting=!1,l._ended=!1,l._liveRetryCount=0,l._vodRetryCount=0,l._seeking=!1,d=l.getCurrentTime(),l._waitingReloadTime!=d&&(l._waitingTimeoutCount=0),l._checkTimeoutHandle&&(clearTimeout(l._checkTimeoutHandle),l._checkTimeoutHandle=null),l._waitingLoadedHandle&&(clearTimeout(l._waitingLoadedHandle),l._waitingLoadedHandle=null),l._ucSourceHandle&&(clearTimeout(l._ucSourceHandle),l._ucSourceHandle=null),l._waitingDelayLoadingShowHandle&&(clearTimeout(l._waitingDelayLoadingShowHandle),l._waitingDelayLoadingShowHandle=null),l._waitingTimeoutHandle&&(clearTimeout(l._waitingTimeoutHandle),l._waitingTimeoutHandle=null,l._ccService)&&l._options.isLive&&(d=l._ccService.getCurrentSubtitle(),l._setDefaultCC=!0,d)&&l._ccService.switch(d),(d=l._qualityService)!=null&&d._urlSwitchCompleteHandler(),l.trigger(w.Private.AutoStreamHide),l.trigger(w.Player.Playing),l.trigger(w.Private.Error_Hide),l.trigger(w.Private.Play_Btn_Hide))}},{"../../event/eventtype":84}],104:[function(x,m,j){var w=x("../../event/eventtype"),p=x("../../../../feature/ratioAdapter");m.exports.handle=function(d){this.trigger(w.Video.Resize);var l=this.getOptions();if(l.autoSize){if(!this._ratioAdapter){if(l.autoSize!==!0&&l.autoSize!=="width"&&l.autoSize!=="height")return void console.warn("Unknown parameter [autoSize]: "+l.autoSize+", only true/height/width are supported");l.autoSize===!0&&(l.autoSize="height"),this._ratioAdapter=new p}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,l.autoSize)}(l=this._qualityService)!=null&&l._handleAbrQualityChange({width:this.tag.videoWidth,height:this.tag.videoHeight})}},{"../../../../feature/ratioAdapter":26,"../../event/eventtype":84}],105:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){this.trigger(w.Video.Seeked),this._monitor2.seekEnd()}},{"../../event/eventtype":84}],106:[function(x,m,j){var w=x("../../event/eventtype");m.exports.handle=function(p){var d,l,n,t=this.tag,e=(this.getOptions().disableSeek&&(e=t.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(e))&&(t.currentTime=this._currentTimeForDisableSeek),t.currentTime);this._canSeek(e)||(d=this._getWatchTimeConfig(),n=0,(l=this._getSubVideoConfig()).start||l.end?n=e>l.end?l.end:l.start:(d.watchStartTime||d.watchEndTime)&&(n=e>d.watchEndTime?d.watchEndTime:d.watchStartTime),t.currentTime=n),this.trigger(w.Video.Seeking),this._monitor2.seek()}},{"../../event/eventtype":84}],107:[function(x,m,j){var w=x("../../event/eventtype"),p=x("../../../../lib/ua"),d=x("../../../../lib/event"),l=x("../../plugin/status");function n(t){var e=this;t!=null&&t.length&&t.forEach(function(a){e.trigger(w.Player.SeiFrame,a)})}m.exports.handle=function(t){var e=this;if(e._isError||e.trigger(w.Player.TimeUpdate,t.timeStamp),!e.__disposed){e._decodeErrorNudgeTimer||(e._decodeErrorNudgeTimer=setTimeout(function(){e._nudgeCount=0},3e3)),(p.IS_IOS||p.IS_MAC_SAFARI)&&(clearTimeout(e._waitingPatchTimer),e._waitingPatchTimer=setTimeout(function(){e.waiting||e._isError||e.paused()||e._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),e.trigger(w.Private.PatchWaiting))},3e3));var a,o,s,g=e.getCurrentTime(),t=(e.tag.seeking||(e._currentTimeForDisableSeek=g),e.waiting&&!e._TimeUpdateStamp&&(e._TimeUpdateStamp=g),e.waiting!=0&&e._TimeUpdateStamp==g||g===0||(e.trigger(w.Private.H5_Loading_Hide),e.trigger(w.Private.AutoStreamHide),e._checkTimeoutHandle&&clearTimeout(e._checkTimeoutHandle),e._waitingTimeoutHandle&&clearTimeout(e._waitingTimeoutHandle),e._waitingLoadedHandle&&clearTimeout(e._waitingLoadedHandle),e._ucSourceHandle&&(clearTimeout(e._ucSourceHandle),e._ucSourceHandle=null),e.waiting=!1),p.IS_ANDROID&&p.IS_UC&&(e._timeNotUpdateCount=e._timeNotUpdateCount||0,e.waiting||g!==e._TimeUpdateStamp||(e._timeNotUpdateCount++,2<=e._timeNotUpdateCount&&(e._timeNotUpdateCount=0,e.trigger(w.Private.PatchWaiting)))),e._TimeUpdateStamp=g,e._options.isLive||(a=e.getDuration(),t=!1,o=0,a<g&&!e.paused()?(o=1,t=!0):a-g<.2&&0<=p.browser.version.indexOf("49.")&&!e.paused()?(o=2,t=!0):e.exceedPreviewTime(g)?(o=3,t=!0):g>=e._getWatchTimeConfig().watchEndTime&&(o=4,t=!0,e.pause()),t&&setTimeout(function(){e._ended||(e._splayer||e.paused()||e.pause(),d.trigger(e.tag,w.Video.ManualEnded),e.traceLog&&e.traceLog("video/timeupdate.js","ManualEnded#"+o+"#"+g+"#"+a))},100)),e._player.tag),c=(t&&e._options.isLive&&(e._player.resolution&&0<t.videoWidth&&0<t.videoHeight&&(0<e._player.resolution.width||0<e._player.resolution.height)&&(e._player.resolution.width!==t.videoWidth||e._player.resolution.height!==t.videoHeight)&&(s={oldResolution:{width:e._player.resolution.width,height:e._player.resolution.height},newResolution:{width:t.videoWidth,height:t.videoHeight}},e.trigger(w.Player.ResolutionChange,s)),e._player.resolution.width=t.videoWidth==0?e._player.resolution.width:t.videoWidth,e._player.resolution.height=t.videoHeight==0?e._player.resolution.height:t.videoHeight),p.IS_CHROME&&Number(p.CHROME_VERSION)<50&&(e._playingSlientPause&&(clearTimeout(e._playingSlientPause),e._playingSlientPause=null),e._playingSlientPause=setTimeout(function(){var h,v;e._status!=l.playing||e.paused()||e._drm||e._urls.length||(h=e.getCurrentTime(),v=e._options.isLive?0:h,e._loadByUrlInner(e._options.source,v,h))},3e3)),e._seis||{}),f=Object.keys(c);if(f.length!==0)for(var y=parseInt(1e3*g,10)+300,_=0;_<f.length;_++){var u=f[_];if(!(u<=y))break;n.call(e,c[u]),delete c[u]}}}},{"../../../../lib/event":38,"../../../../lib/ua":53,"../../event/eventtype":84,"../../plugin/status":113}],108:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(y){for(var _=1;_<arguments.length;_++){var u,r=arguments[_];for(u in r)!{}.hasOwnProperty.call(r,u)||(y[u]=r[u])}return y}).apply(null,arguments)}var p=x("../../event/eventtype"),d=x("../../../../lib/constants"),l=x("../../../../lib/event"),n=x("../../../../lang/index"),t=x("../../../../lib/ua"),e=x("../../../../lib/playerutil"),s=x("../../../../monitor-new/constants"),a=s.ERROR_ANALYZE_TARGET,o=s.ERROR_ANALYZE_TYPE,s=x("../../../../monitor-new/util"),g=s.getFragInfoFromHlsError,c=s.getSpeed,f="video/waiting.js";m.exports.handle=function(y){var _=this;if(_._monitor2.waiting(),!_._options.isLive){var u=this.getCurrentTime(),r=this.getDuration();if(!_._ended&&0<r&&(r-u<.5||r<u))return _.pause(),_._ended=!0,l.trigger(this.tag,p.Video.ManualEnded),void(_.traceLog&&_.traceLog(f,"ManualEnded#"+u+"#"+r))}_.waiting=!0;function h(){_._checkTimeoutHandle&&(clearTimeout(_._checkTimeoutHandle),_._checkTimeoutHandle=null),_._waitingTimeoutHandle&&(clearTimeout(_._waitingTimeoutHandle),_._waitingTimeoutHandle=null),_._waitingLoadedHandle&&(clearTimeout(_._waitingLoadedHandle),_._waitingLoadedHandle=null),_._waitingDelayLoadingShowHandle&&(clearTimeout(_._waitingDelayLoadingShowHandle),_._waitingDelayLoadingShowHandle=null),_._ucSourceHandle&&(clearTimeout(_._ucSourceHandle),_._ucSourceHandle=null)}h(),_._waitingDelayLoadingShowHandle=setTimeout(function(){t.IS_IOS&&_.paused()||_._isError||_.trigger(p.Private.H5_Loading_Show)},1e3*_._options.delayLoadingShow),_._TimeUpdateStamp=null,_._checkTimeoutHandle=setTimeout(function(){_.trigger(p.Private.AutoStreamShow)},1e3*_._options.loadDataTimeout),_.trigger(p.Player.Waiting),_._waitingTimeoutHandle=setTimeout(function(){var v,T;_.tag&&_._options&&(_.pause(),v={mediaId:_._options.vid||"",error_code:d.ErrorCode.LoadingTimeout,error_msg:n.get("Error_Waiting_Timeout_Text")},_._hls&&(T=_._latestHlsError)!=null&&T.length&&(T=_._latestHlsError.find(function(E){return E.details==="fragLoadTimeOut"}))&&(T=w({type:o.TIMEOUT,target:a.FRAG,speed:c(_._getbwEstimator())},g(T)),v.analyze=T),_.logError(v),_.trigger("error",v))},1e3*_._options.waitingTimeout),u=_._options,u.disableLiveHalfRetry&&u.isLive||u.disableVodHalfRetry&&!u.isLive||(_._waitingLoadedHandle=setTimeout(function(){var v=_.getCurrentTime();_._waitingTimeoutCount==0&&v!=_._waitingReloadTime&&(_.traceLog(f,"half-retry::"+_._options.waitingTimeout/2),_._waitingTimeoutCount=1,_._waitingReloadTime=v,v=_._options.isLive?0:v,_._loadByUrlInner(_._options.source,v,!0))},_._options.waitingTimeout/2*1e3)),t.IS_ANDROID&&t.IS_DINGTALK&&(_._ucSourceHandle=setTimeout(function(){e.detectRegionBlock(_._options.source,function(v){v&&(v={mediaId:_._options.vid,error_code:d.ErrorCode.RegionBlock,error_msg:n.get("Error_Region_Block_Text"),diagnosis_info:n.get("Tip_Err_Blocked")},_.logError(v),_.trigger("error",v))})},5e3)),_.on("error",function(){h()})}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../lib/event":38,"../../../../lib/playerutil":50,"../../../../lib/ua":53,"../../../../monitor-new/constants":67,"../../../../monitor-new/util":77,"../../event/eventtype":84}],109:[function(x,m,j){(function(w){(function(){var p=typeof Promise>"u"?x("es6-promise").Promise:Promise,d=x("../../ui/component"),l=x("../../lib/object"),n=x("../../lib/dom"),t=x("../../lib/event"),e=x("../../ui/exports"),a=x("../../monitor/monitor"),o=x("../../lib/ua"),s=x("../../lib/constants"),g=x("../../lib/playerutil"),c=x("../../lib/util"),f=x("./x5play"),y=x("../../lib/cookie"),_=x("../../lang/index"),u=x("../../feature/autoplaydelay"),r=x("./event/eventmanager"),h=x("../../ui/component/cover"),v=x("../../feature/license"),T=x("../../ui/component/text-track-display"),E=x("../../ui/component/press-fast-forward"),S=x("../../ui/component/double-click-skip"),P=x("../../commonui/autostreamselector"),b=x("./event/eventtype"),k=x("./plugin/lifecyclemanager"),I=x("../service/export"),C=x("../../ui/component/progressmarker"),L=x("../../feature/keyboardControl"),N=x("../../feature/AntiRecord"),U=x("../../lib/vttnext/index"),Y=x("../../lib/codec-probe"),z=x("../splayer/splayerinjector"),K=x("../../ui/component/util").throttle,M=x("../../feature/ratioAdapter"),q=x("../../feature/logoManager"),ee=x("../../monitor-new/monitor"),Q="base/player.js",B=d.extend({init:function(R,H){var X;function se(te){var oe,J=this;w==="dev"||window.location.protocol==="file:"||window.location.protocol==="resource:"||-1<window.location.href.indexOf("resource://")||this._licenseHasResult||(this._licenseHasResult=!0,H.license&&H.license.key&&H.license.domain?(te&&te.paramData.renderType!=="native"&&(te=te.paramData.codecTag,g.isH265Codec(te)?oe=s.FEATURE_ID_H265:g.isH266Codec(te)&&(oe=s.FEATURE_ID_H266)),v.getLicense(H.license.domain,H.license.key,H.env==="SEA"?"ap-southeast-1":"cn-shanghai",H.assetPrefix).then(function(ge){J._monitor2.updateLicenseAppId(ge.appId);var ue=ge.validate(s.PLAYER_SDK_CODE_LEGACY,oe),ge=ge.validate(s.PLAYER_SDK_CODE,oe),_e=ue===0||ge===0;if(_e||console.log(s.PLAYER_SDK_CODE_LEGACY,ue,s.PLAYER_SDK_CODE,ge),_e)J.trigger(b.Private.LicenseHasResult,{result:s.LicenseResultCode.Success,featureId:oe});else{if(ue===2||ge===2)return p.reject(s.LicenseResultCode.Expired);{if(ue===1&&ge===1)return p.reject(s.LicenseResultCode.NotFound);console.error("license validate unknown error")}}}).catch(function(ae){var ue=String(ae).split("#"),ue=(ae=Number(ue[0]),ue[1]);J.trigger(b.Private.LicenseHasResult,{result:ae,errorCode:ue,featureId:oe}),v.logError(ae)})):(console.error(_.get("Tip_License_Required")+": https://help.aliyun.com/zh/vod/developer-reference/license-authorization-and-management#13133fa053843"),console.error(_.get("Tip_License_Params")+": https://help.aliyun.com/zh/vod/developer-reference/integration#387d8a4c094im"),this.trigger(b.Private.LicenseHasResult,{result:s.LicenseResultCode.LicenseKeyInvalid})))}this.tag=R,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._loadByUrlStartTime=0,this._posOffset=0,this._onceLogged=!1,this._licenseHasResult=!1,this.__disposed=!1,this.resolution={width:0,height:0},H.skinLayout===void 0&&(H.skinLayout=g.getDefaultH5Layout()),(R=H.skinLayoutIgnore)!=null&&R.length&&(H.skinLayout=g.ignoreSkinLayouts(H.skinLayout,H.skinLayoutIgnore)),g.isRts(H.source)&&!H.autoplay&&(H.preload=!1),H.env==="SEA"&&(H.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",H.disableDumpBuffer=!0),d.call(this,this,H),this.addClass("prism-player"),H.plugins&&l.each(H.plugins,function(te,oe){this[te](oe)},this),this._createService(),this.UI={},H.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=e,H.errorDisplay==0&&(this.UI.errorDisplay=void 0)),H.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),this._handleLongPress(H),this._handleClickPause_dbClickFullscreen(H),this.initChildren(),this._options.trackLog&&(this._monitor=new a(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),this._monitor2=new ee(this,H),r.onAll(this),this.trigger(b.Private.Create,H._userOptions),this._options.preventRecord&&(this._antiRecord=new N({player:this}),this._antiRecord.start()),this._lifeCycleManager=new k(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(R={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidParameter,error_msg:_.get("ShiftLiveTime_Error")},this.trigger(b.Player.Error,R)):(this._posOffset=this._getSubVideoConfig().start||0,this._options.extraInfo&&(R=this._options.extraInfo).liveRetry&&(this._options.liveRetry=R.liveRetry),this.on(b.Private.ReadyState,function(){this.trigger(b.Player.Ready)}),this.on(b.Private.LicenseHasResult,function(ge){var oe=this,ge=(this._monitor2.licenseResult(ge.paramData),ge.paramData||{}),J=ge.result,ae=ge.errorCode,ue=ge.featureId,ge=s.LicenseResultCode,_e="",Se=null;switch(J){case ge.LicenseKeyInvalid:case ge.DomainInvalid:_e=_.get(s.LicenseErrorKey.Empty),Se=s.ErrorCode.LicenseEmpty;break;case ge.NotFound:var _e=_.get(s.LicenseErrorKey.Unauthorized),Se=s.ErrorCode.LicenseFeatrueUnauthorized,xe="";ue===s.FEATURE_ID_H265&&(xe="H265"),ue===s.FEATURE_ID_H266&&(xe="H266"),console.error(_.get("Tip_License_Feature"),xe);break;case ge.Expired:_e=_.get(s.LicenseErrorKey.Expired),Se=s.ErrorCode.LicenseExpired;break;case ge.CertInvalid:-1<["E003","E005","E006"].indexOf(ae)?(_e=_.get(s.LicenseErrorKey.LicenseKeyInvalid)+"("+ae+")",Se=s.ErrorCode.LicenseKeyInvalid,console.error(_.get("Tip_License_Check"))):ae==="E008"?(_e=_.get(s.LicenseErrorKey.DomainInvalid)+"("+ae+")",Se=s.ErrorCode.LicenseDomainInvalid,console.error(_.get("Tip_License_Domain"))):ae==="E010"&&(_e=_.get(s.LicenseErrorKey.NotFound)+"("+ae+")",Se=s.ErrorCode.LicenseNotFound,console.error(_.get("Tip_License_Check")))}_e&&(console.error(_.get("Tip_License_Reason")+" "+_e),setTimeout(function(){oe.trigger(b.Player.Error,{mediaId:oe._options.vid||"",error_code:Se,display_msg:_.get("Error_Play_Text")+" (LICENSE ERROR)",error_msg:_e}),oe.tag.pause(),oe.trigger(b.Private.HideUnmuteButton),r.offAll(oe),oe.tag&&oe.tag.parentNode&&oe.tag.parentNode.removeChild(oe.tag),oe.play=function(){},oe.loadByUrl=function(){}}))}),H.enableH265||H.forceH265||H.enableH266||H.forceH266?(this.on(b.Player.H265PlayInfo,se),this.on(b.Player.H266PlayInfo,se),this.one(b.Player.CanPlay,se)):se.call(this),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(b.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay?this.trigger(b.Private.H5_Loading_Show):this.trigger(b.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(b.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new u(this),(X=this)._autoPlayDelay.handle(function(){X.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new M,this._ratioAdapter.autoResize(this._options.ratio,this))),L.init.call(this),(R=this._options.logo)!=null&&R.length&&(this._logoManager=new q({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new U({player:this}),this._getUserTextTracks())}});B.prototype.isSupportMSE=function(){return g.isSupportMSE()},B.prototype.initPlay=function(R){this._initPlayBehavior(R,this._options.source)},B.prototype.initChildren=function(){var R=this.options(),H=R.skinLayout;if(H!==!1&&!l.isArray(H))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");H!==!1&&H.length!==0&&(this.options({children:H}),d.prototype.initChildren.call(this)),this.UI.cover=h,R.className="",this.addChild("cover",R),this.UI.autoStreamSelector=P,this.addChild("autoStreamSelector",R),this.UI.progressMarker=C,this.addChild("progressMarker",R),this.UI.textTrackDisplay=T,this.addChild("textTrackDisplay",R),R.longPressFastForward&&(this.UI.pressFastForward=E,this.addChild("pressFastForward",{name:"pressFastForward",align:"free"})),g.enableDbClickSkip(R)&&(this.UI.doubleClickSkip=S,this.addChild("doubleClickSkip",{name:"doubleClickSkip",align:"free"})),this.trigger(b.Private.UiH5Ready)},B.prototype.createEl=function(){var R=!1,H=(this.tag.tagName!=="VIDEO"?(this._el=this.tag,this.tag=d.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(R=!0,this._el=this.tag.parentNode),this._el),X=this.tag,se=(this._options.enableSystemMenu||(X.addEventListener?X.addEventListener("contextmenu",function(te){te.preventDefault()},!1):X.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),X.player=this,n.getElementAttributes(X));return l.each(se,function(te){H.setAttribute(te,se[te])}),this.setVideoAttrs(),R||(X.parentNode&&X.parentNode.insertBefore(H,X),n.insertFirst(X,H)),H},B.prototype.setVideoAttrs=function(){var R=this._options.preload,H=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",R&&this.tag.setAttribute("preload","preload"),H&&o.IOS_VERSION!=="15"&&this.tag.setAttribute("autoplay","autoplay"),o.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(o.IS_UC||o.dingTalk()||o.IS_QUARK)&&this.tag.setAttribute("renderer","standard"),o.IS_FIREFOX&&this.tag.setAttribute("crossOrigin","anonymous"),this._options.extraInfo)for(var X in this._options.extraInfo)o.IS_OPPO&&X==="crossOrigin"||this.tag.setAttribute(X,this._options.extraInfo[X]);f.adaptX5Play(this)},B.prototype.checkOnline=function(){var R;return!(this._options&&!this._options.debug&&navigator.onLine==0&&((R={mediaId:this._options.vid||"",error_code:s.ErrorCode.NetworkUnavaiable,error_msg:_.get("Error_Offline_Text")}).display_msg=_.get("Error_Offline_Text"),this.trigger(b.Player.Error,R),1))},B.prototype.id=function(){return this.el().id},B.prototype.renderUI=function(){},B.prototype.switchUrl=function(){var R,H;this.traceLog(Q,"switchUrl"),this._urls.length!=0&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),R=this._urls[this._currentPlayIndex],y.set(s.SelectedStreamLevel,R.definition,365),this.trigger(b.Private.QualityChange,_.get("Quality_Change_Fail_Switch_Text")),H=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(R.Url,H,!0))},B.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},B.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},B.prototype._initControlBar=function(R){return new ControlBar(this,R)},B.prototype.getMetaData=function(){},B.prototype.getReadyTime=function(){return this.readyTime},B.prototype.readyState=function(){return this.tag.readyState},B.prototype.getError=function(){return this.tag.error},B.prototype.getRecentOccuredEvent=function(){return this._eventState},B.prototype.getSourceUrl=function(){return this._options?this._options.source:""},B.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},B.prototype.getCurrentQuality=function(){var R;return 0<this._urls.length?{width:(R=this._urls[this._currentPlayIndex]).width,url:R.Url,definition:R.definition}:""},B.prototype.getCurrentPDT=function(){var R;if((o.IS_SAFARI||o.IS_IOS)&&this.tag)return R=Date.parse(this.tag.getStartDate()),isNaN(R)?0:R+1e3*this.getCurrentTime()},B.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},B.prototype.startPlayTimeMonitor=function(){var R=this,H=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),X=0,se=0,te=!1,oe=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var J=R.paused()?te=!0:!R.tag,ae=1e3*R.getCurrentTime(),ue=(ae<1e3&&(J=!0),ae>=1e3*R.tag.duration-1e3&&(J=!0),performance.now()),ge=ue-H,_e=(H=ue,(ae-X)/R.tag.playbackRate);X=ae,_e<0&&(J=!0),(ae=R._monitor)!=null&&ae.canplayReported||(J=!0),R._monitor2.firstFrameTime||(J=!0),(J=document.visibilityState==="hidden"?!0:J)||(te?te=!1:_e<.8*ge?(ge<ue-se&&(R._stuckCount++,oe=ue),ue-oe>=1e3*R.getOptions().waitingTimeout?R.stopPlayTimeMonitor():(se=ue,R._playingTime+=_e,R._stuckTime+=ge-_e)):R._playingTime+=ge)},1e3)},B.prototype.setSpeed=function(R,H){H===void 0&&(H=!0),this.tag&&(this._originalPlaybackRate=R,this.tag.playbackRate=R,H)&&this.trigger(b.Private.PlaybackRateChanged,R)},B.prototype.play=function(R){return this.traceLog(Q,"play::"+R),R&&this.trigger(b.Private.ManualPlay),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(b.Private.Cover_Hide),this.tag.play())),this._isManualPlay=R||!1,this},B.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(this._getPlayStartTime()),this.tag.play(),this},B.prototype._getPlayStartTime=function(){return Math.max(0,this._getWatchTimeConfig().watchStartTime||0,this._loadByUrlStartTime||0)},B.prototype._getWatchTimeConfig=function(){var se=this.getOptions(),R=se.start,H=se.end,X=se.watchStartTime,se=se.watchEndTime,X=Number(X),se=Number(se);return(X||se)&&(g.hasValue(R)||g.hasValue(H))?(this._logOnce("Params.watchStartTime and Params.watchEndTime will be ignored when Params.start or Params.end is set","warn"),{watchStartTime:void 0,watchEndTime:void 0}):(se=se||void 0,(X=X||void 0)<0&&(this._logOnce("Params.watchStartTime is less than 0 ["+X+"], setting to undefined","warn"),X=void 0),se<0&&(this._logOnce("Params.watchEndTime is less than 0 ["+se+"], setting to undefined","warn"),se=void 0),se<=X&&(this._logOnce("Params.watchEndTime("+se+") is less than Params.watchStartTime("+X+"), setting to [undefined, "+se+"]","warn"),X=void 0),{watchStartTime:X,watchEndTime:se})},B.prototype._getSubVideoConfig=function(){var R=this.getOptions(),H=R.start,R=R.end,H=Number(H);return R=(R=Number(R))||void 0,(H=H||void 0)<0&&(this._logOnce("Params.start is less than 0 ["+H+"], setting to undefined","warn"),H=void 0),R<0&&(this._logOnce("Params.end is less than 0 ["+R+"], setting to undefined","warn"),R=void 0),R<=H&&(this._logOnce("Params.start("+H+") is greater than Params.end("+R+"), setting to [undefined, "+R+"]","warn"),H=void 0),{start:H,end:R}},B.prototype.pause=function(R){return this.tag&&this.tag.pause(),this._isManualPause=R||!1,this},B.prototype.stop=function(){return this.traceLog(Q,"stop"),this.tag.setAttribute("src",null),this},B.prototype.paused=function(){if(this.tag)return this.tag.paused!==!1},B.prototype.getDuration=function(){var R=0,X=(this.tag&&(R=this.isPreview()&&this._vodDuration||this.tag.duration),this._getSubVideoConfig()),H=X.start,X=X.end;return R=H||X?Math.min(this.tag.duration,X||this.tag.duration)-Math.max(0,H||0):R},B.prototype.getDisplayDuration=function(){var R=0,X=(this.tag&&(R=this._vodDuration||this.getDuration()),this._getSubVideoConfig()),H=X.start,X=X.end;return R=H||X?Math.min(this.tag.duration,X||this.tag.duration)-Math.max(0,H||0):R},B.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime-this._posOffset:0},B.prototype.seek=function(R){var H;if(!Number.isNaN(R)&&(R=Number(R),R+=this._posOffset,this._canSeek(R)))return this._ended=!1,H=this.tag.duration,this._doSeek(this,R=H<=R?H:R),this},B.prototype._doSeek=K(function(X){var H=X[0],X=X[1];try{var se=H._originalPlaybackRate||H.tag.playbackRate;["16"].indexOf(o.IOS_VERSION)!==-1&&!H.oncePlayed||(H.tag.currentTime=X),H._seeking=!0,H.traceLog(Q,"doSeek::"+X),o.IS_IE11&&setTimeout(function(){H.tag&&(H.tag.playbackRate=se)})}catch(te){console.log(te)}},100),B.prototype.traceLog=function(R,H,X){R="["+R+"]"+H,this.trigger(b.Private.TraceLog,R),X&&this._monitor2.traceLog(R)},B.prototype._loadByUrlInner=function(R,H,X){this.loadByUrl(R,H,X,!0)},B.prototype.loadByUrlWithConfig=function(R,J){J===void 0&&(J={}),this.traceLog(Q,"loadByUrlWithConfig::"+R+"#"+JSON.stringify(J),!0);var X=J.seconds,se=J.autoPlay,te=J.enableABR,oe=J.startQuality,J=J.defaultSubtitleLang;typeof te=="boolean"&&(this._options.enableABR=te),typeof oe=="object"&&(this._options.startQuality=oe),typeof J=="string"&&J.trim()!==""&&(this._options.defaultSubtitleLang=J.trim()),this.loadByUrl(R,X,se)},B.prototype.loadByUrl=function(R,H,X,se){var te,oe=this,J=(this.traceLog(Q,"loadByUrl::"+R+"#"+H+"#"+X+"#"+se),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!se&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),se||this._monitor2.playAbort("loadByUrl",(te=R,(J=H)&&(te+="#sec-"+J),(J=X)&&(te+="#atp-"+J),te)),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),ae=((this._options.source||"").match(J)||[])[0]!==((R||"").match(J)||[])[0];if(this._options.liveShiftSource&&(ae=!1),this._options.enableH266&&(ae=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!ae&&(g.isMp4(R)||g.isFlv(R)||g.isHls(R)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||o.IS_ANDROID&&o.dingTalk()&&!g.isFlv(R)?void ue.call(this):void Y(R,this._options,function(_e){var _e=g.getVideoTrack(_e.tracks),Se=(_e||{}).codecTag||((Se=(_e||{}).codec)==null?void 0:Se.split(".")[0]);oe._probeInfo.codecTag=Se,_e&&g.isH265Codec(Se)?g.isFlv(R)||g.isHls(R)?(oe._splayer||(ae=!0),ue.call(oe)):g.shouldUseBasePlayer({codecTag:Se,url:R},function(xe){xe?(oe._splayer&&(ae=!0),oe._probeInfo.codecTag&&z.reportH265PlayInfo.call(oe,{renderType:"native",codecTag:oe._probeInfo.codecTag})):oe._splayer||(ae=!0),ue.call(oe)}):(_e&&g.isH266Codec(Se)?oe._splayer||(ae=!0):oe._splayer&&(ae=!0),ue.call(oe))},function(ge){ue.call(oe)});function ue(){var ge,_e,Se=this;ae&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(Q,"reloadInstance::"+R),this._options.source=R,window.Aliplayer.reloadInstance(this._options,function(){},this)):(se||(this._urls=[]),this._monitor&&!se&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._clearTimeout(),this.trigger(b.Private.Error_Hide),this._options.source=R,this._posOffset=this._getSubVideoConfig().start||0,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:R,from:this._options.from}),se||(this.trigger(b.Private.ChangeURL),this._vodRetryCount=0),H&&this._canSeek(H)?this._loadByUrlStartTime=H-this._posOffset:this._loadByUrlStartTime=0,g.detectInnerTextTrack(ge=this,R,function(xe,Pe){xe||Pe&&0<Pe.length&&ge.trigger(b.Private.TextTrackFounded,{from:"detector",textTracks:Pe})}),this._options._autoplay=X,this.initPlay(X),(_e=this._options.autoplay||X)&&this.trigger(b.Private.Cover_Hide),_e?this.trigger(b.Player.Play):this.trigger(b.Player.Pause),this._options.isLive||!H&&H!=0||isNaN(H)||t.one(this.tag,b.Video.CanPlay,function(xe){_e&&(o.IS_IOS||o.IS_MAC_SAFARI)&&Se._splayer&&Se.play()}))}ue.call(this)},B.prototype.setLogo=function(R){this._logoManager&&this._logoManager.dispose(),this._logoManager=new q({container:this.el(),video:this.tag,logo:R})},B.prototype.dispose=function(){this.__disposed||(this.__disposed=!0,this.trigger(b.Private.Dispose),this.tag.pause(),r.offAll(this),L.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._monitor2.playAbort("dispose"),this._monitor2.destroy(),this._monitor2=void 0,this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._posOffset=0,this._onceLogged=!1)},B.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},B.prototype.mute=function(R){return this._muteInner(),this._originalVolumn=this.tag.volume,R||(R=_.get("Volume_Mute"),this._player.trigger(b.Private.Info_Show,{text:R,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},B.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(b.Private.VolumnChanged,-1)},B.prototype.unMute=function(R){return this._unMuteInner(),R||(R=_.get("Volume_UnMute"),this._player.trigger(b.Private.Info_Show,{text:R,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},B.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(b.Private.VolumnChanged,-2)},B.prototype.muted=function(){return this.tag&&this.tag.muted},B.prototype.getVolume=function(){return this.tag&&this.tag.volume},B.prototype.getOptions=function(){return this._options||{}},B.prototype.setVolume=function(R,H){(R=Math.min(1,Math.max(0,R)))!=0?this._unMuteInner():R==0&&this._muteInner(),this._setInnerVolume(R),R=_.get("Curent_Volume")+"<span>"+(100*R).toFixed()+"%</span>",this._player.trigger(b.Private.Info_Show,{text:R,duration:1e3,align:"lb"})},B.prototype._setInnerVolume=function(R){this.tag.volume=R,this.trigger(b.Private.VolumnChanged,R)},B.prototype.hideProgress=function(){this.trigger(b.Private.HideProgress)},B.prototype.cancelHideProgress=function(){this.trigger(b.Private.CancelHideProgress)},B.prototype.setPlayerSize=function(R,H){this._el&&(this._el.style.width=R,this._el.style.height=H)},B.prototype.getBuffered=function(){return this.tag.buffered},B.prototype.setRotate=function(R){this.tag&&(this._rotate=R,this._setTransform(),this.log("ROTATE",{rotation:R}))},B.prototype.getRotate=function(R){return this._rotate===void 0?0:this._rotate},B.prototype.setImage=function(R){this.tag&&(this._image=R,this._setTransform(),this.log("IMAGE",{mirror:R=="horizon"?2:1,text:R}))},B.prototype.getImage=function(){return this._image},B.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},B.prototype.setCover=function(R){var H=document.querySelector("#"+this.id()+" .prism-cover");H&&R&&(H.style.backgroundImage="url("+R+")",this._options.cover=R,this._options.autoplay||this.trigger(b.Private.Cover_Show))},B.prototype.setTextTracks=function(R){this._options.textTracks=R,R=g.unqiueTextTracks(R||[]),this.trigger(b.Private.VttClearTracks),R&&R.length&&this.trigger(b.Private.TextTrackFounded,{from:"user",textTracks:R}),this.trigger(b.Private.CCReset)},B.prototype._setTransform=function(){this._transformProp||(this._transformProp=n.getTransformName(this.tag));var R=" translate(-50%, -50%)";this._rotate&&(R+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?R+=" scaleY(-1)":this._image=="horizon"&&(R+=" scaleX(-1)")),this.tag.style[this._transformProp]=R},B.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},B.prototype._initPlayBehavior=function(R,H){var X=this;return!this._checkSupportVideoType()&&(g.validateSource(H)?(R===void 0&&(R=!1),this._created||(this._created=!0,this.trigger(b.Private.Created)),this.loaded||this.trigger(b.Player.Init),this._options.mute&&this.mute(!0),this.one(b.Video.CanPlay,function(){var se;X._options.isLive||(se=X._getPlayStartTime(),X.getCurrentTime()<se&&X.seek(se),X._loadByUrlStartTime=0,X.tag.playbackRate!==1&&X.setSpeed(X.tag.playbackRate))}),this._options.autoplay||this._options._autoplay||this._options.preload||R||this._isLiveRetrying()?(this._options._preload=!0,this._initLoad(H),!this._options.autoplay&&!this._options._autoplay||this._isError||this._dash||this._startPlay()):this.trigger(b.Private.Play_Btn_Show),!0):((R={mediaId:this._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=_.get("Error_Invalidate_Source"),this.trigger(b.Player.Error,R),!1))},B.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},B.prototype._isLiveRetrying=function(){return 0<this._liveRetryCount},B.prototype._initLoad=function(R){R&&(this._isPreload()&&!o.IS_MOBILE?this.trigger(b.Private.H5_Loading_Show):(this.trigger(b.Private.H5_Loading_Hide),this.trigger(b.Private.Play_Btn_Show)),this.tag.setAttribute("src",R),this.oncePlayed=!1,this.loaded=!0)},B.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},B.prototype._reloadAndPlayForM3u8=function(){this._liveRetryCount==0&&this.trigger(b.Player.OnM3u8Retry);var R=this._options,H=R.liveRetryInterval+R.liveRetryStep*this._liveRetryCount,X=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(Q,"reloadAndPlayForM3u8::#"+X._options.source+"#"+1e3*H),this._liveRetryTimer=setTimeout(function(){X._liveRetryCount++,X._loadByUrlInner(X._options.source,void 0,R.autoplay)},1e3*H)},B.prototype._checkSupportVideoType=function(){var R,H=this,X=this._options.source,se="";if(g.isRTMP(X)&&!this._options.useFlashPrism)se=_.get("Error_Not_Support_RTMP");else if(g.isDash(X)&&!g.isSupportMSE())se=_.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!o.IS_MOBILE)return"";return 0<X.indexOf("m3u8")?this.tag.canPlayType("application/x-mpegURL")!=""||g.isSupportHls()||(se=_.get("Error_Not_Support_M3U8_Text")):0<X.indexOf("mp4")?this.tag.canPlayType("video/mp4")==""&&(se=_.get("Error_Not_Support_MP4_Text")):(g.isRTMP(X)||g.isFlv(X))&&o.IS_MOBILE&&(this._options.useFlvPlugOnMobile?g.isSupportFlv()||(se=_.get("Error_Not_Support_Mse_Flv")):se=_.get("Error_Not_Support_Format_On_Mobile")),se&&(X=g.getFormat(X),R={mediaId:this._options.vid||"",error_code:s.ErrorCode.FormatNotSupport,error_msg:se+(X?"(format:"+X+")":"")},this.logError(R),R.display_msg=se,setTimeout(function(){H.trigger(b.Player.Error,R)})),se},B.prototype._handleLongPress=function(R,H){var X,se,te=this;function oe(){se?(clearTimeout(se),se=null):t.trigger(H,"longPressEnd")}R.longPressFastForward&&(H=H||this.tag,t.on(H,"longPress",function(){te.trigger(b.Private.FastForwardShow),X=te.tag.playbackRate,te.tag.playbackRate=2}),t.on(H,"longPressEnd",function(){te.trigger(b.Private.FastForwardHide),te.tag.playbackRate=X||1}),se=null,t.on(H,"touchstart",function(){se&&clearTimeout(se),se=setTimeout(function(){se=null,t.trigger(H,"longPress")},500)}),t.on(H,"touchend",oe),t.on(H,"touchcancel",oe))},B.prototype._handleClickPause_dbClickFullscreen=function(R,H){var X,se,te,oe=this,J=null;!R.isLive&&R.clickPause&&(this._clickPauseEnabled=!0,X=o.IS_IOS?"touchstart":"click",H=H||this.tag,t.on(H,X,function(){oe._clickPauseEnabled&&(R.dbClickFullscreen?(J&&clearTimeout(J),J=setTimeout(function(){oe.paused()?oe.play(!0):oe.pause(!0),J=null},R.clickPauseDelay)):oe.paused()?oe.play(!0):oe.pause(!0))})),R.dbClickFullscreen&&(se=function(){J&&(clearTimeout(J),J=null);var ae=this.fullscreenService;ae.getIsFullScreen()?ae.cancelFullScreen():ae.requestFullScreen(),this.trigger(b.Private.MarkerTextHide),t.trigger(this.tag,"touchend")},o.IS_IOS?(te=null,t.on(this.tag,"touchstart",function(){te=te?(se.call(oe),clearTimeout(te),null):setTimeout(function(){te=null},R.dbClickFullscreenDelay)})):t.on(this.tag,"dblclick",function(){se.call(oe)}))},B.prototype.getComponent=function(R){return this._lifeCycleManager.getComponent(R)},B.prototype.getBuildInComponent=function(R){return this.getChild(R)},B.prototype.logError=function(R,H){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(R=R||{}).vt=this.getCurrentTime(),this.log(H?"ERRORRETRY":"ERROR",R)},B.prototype.log=function(R,H){var X=0,se=0;if(this._monitor)return this._options&&(X=this._options.vid||"0",se=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:X,album_id:0,source:this._options.source,from:se}),this._monitor._log(R,H)},B.prototype.setSanpshotProperties=function(R,H,X){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=R,this._snapshotMatric.height=H,1<X)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=X},B.prototype.setSnapshotProperties=function(R,H,X){this.setSanpshotProperties(R,H,X)},B.prototype.takeSnapshot=function(){var R=document.createElement("canvas"),J=this.tag,H=J.videoWidth,X=J.videoHeight,se=this._getSanpshotMatric(),te=(R.width=se.width||H,R.height=se.height||X,this.getCurrentTime()),oe=R.getContext("2d"),ae=(oe.save(),this.getImage()),ae=(ae=="vertical"?(oe.translate(0,R.height),oe.scale(1,-1)):ae=="horizon"&&(oe.translate(R.width,0),oe.scale(-1,1)),J),J=(this._splayer&&(ae=this._splayer.renderType===2?this._el.querySelector("canvas"):this._el.querySelector("video")),oe.drawImage(ae,0,0,H,X),oe.restore(),g.drawSnapshotText(oe,this.getOptions()),""),ae="";try{J=R.toDataURL("image/jpeg",se.rate||1)}catch(ue){(ae=ue)&&ae.message&&-1<ae.message.indexOf("Tainted canvases")&&(ae=new Error(' extraInfo: { crossOrigin:"anonymous" }'))}return H="",X="",J&&(oe=(H=J).substr(H.indexOf(",")+1),X=c.toBinary(oe)),{time:te,base64:H,binary:X,error:ae}},B.prototype.getStatus=function(){return this._status||"init"},B.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},B.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},B.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},B.prototype.setProgressMarkers=function(R){this.trigger(b.Private.ProgressMarkerChanged,R=R||[])},B.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},B.prototype.setPreviewTime=function(R){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=R},B.prototype.getPreviewTime=function(){var R=0;return R=this._options.playConfig?this._options.playConfig.PreviewTime:R},B.prototype.exceedPreviewTime=function(R){return this.isPreview()&&R>=this._options.playConfig.PreviewTime},B.prototype.isPreview=function(){var R=this._options.playConfig.PreviewTime,H=this._vodDuration||this.tag.duration;return 0<R&&R<H},B.prototype.getStats=function(){return new p(function(R){R()})},B.prototype.setTraceId=function(R){this._monitor&&this._monitor.updateTraceId(R),this._monitor2.updateTraceId(R)},B.prototype._canSeek=function(R){var X=this._getSubVideoConfig(),H=X.start,X=X.end;return H||X?!(R<H||X<R):!(!(H=this._getWatchTimeConfig()).watchStartTime||H.watchEndTime)||!(R<H.watchStartTime||R>H.watchEndTime)},B.prototype.setWatchTime=function(R,H){this._options.watchStartTime=R,this._options.watchEndTime=H,this.trigger(b.Private.UpdateWatchTime),R=this.getCurrentTime(),H=this._getWatchTimeConfig(),R<H.watchStartTime?this.seek(H.watchStartTime):R>H.watchEndTime&&this.seek(H.watchEndTime)},B.prototype.setNextWatchTime=function(R,H){this._options.watchStartTime=R,this._options.watchEndTime=H},B.prototype.setStartEnd=function(R,H){this._options.start=R,this._options.end=H,R=this._getSubVideoConfig(),this._posOffset=R.start||0,this.trigger(b.Player.DurationChange),H=this.getCurrentTime()+this._posOffset,H<R.start?this.seek(0):H>R.end&&this.seek(R.end-this._posOffset)},B.prototype.setNextStartEnd=function(R,H){this._options.start=R,this._options.end=H},B.prototype.getPlayTime=function(){return Math.round(this._playingTime/1e3)},B.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},B.prototype._autoplayFailedHandler=function(){var R,H=this;(R=this.getOptions().autoplayPolicy)!=null&&R.fallbackToMute&&!this.muted()?(this.mute(!0),(R=this.tag.play())?R.then(function(){H.trigger(b.Private.MutedAutoplay)}).catch(function(X){H.tag.paused?(console.warn("Muted autoplay failed",X),H.unMute(!0)):H.one("canplay",function(){H.trigger(b.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(b.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(b.Private.Play_Btn_Show),this.trigger(b.Private.H5_Loading_Hide),this.trigger(b.Player.AutoPlayPrevented),this.trigger(b.Player.AutoPlay,!1),this._options.cover&&this.trigger(b.Private.Cover_Show))},B.prototype._overrideNativePlay=function(){var R=this.tag.play,H=this;this.tag.play=function(){if(H._monitor&&H._monitor.reportStartPlay(),H._monitor2.play(),H._isManualPause=!1,!H._options.source)return X={mediaId:H._options.vid||"",error_code:s.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},H._options.vid||H._options.mediaAuth?void 0:(X.display_msg=_.get("Error_Empty_Source"),void H.trigger(b.Player.Error,X));H.readyTime=new Date().getTime();var X=R.apply(H.tag),se=(H.oncePlayed=!0,X!==void 0&&X.then(function(){H._isAutoPlay()&&H.trigger(b.Player.AutoPlay,!0)}).catch(function(te){!H.tag||!H.tag.paused||H._isError||H._options._autoplay||H._switchedLevel||H._autoplayFailedHandler()}),H._originalPlaybackRate||H.tag.playbackRate);return setTimeout(function(){H.tag&&(H.tag.playbackRate=se)}),X}},B.prototype._extraMultiSources=function(){var R=this._options.source;if(R&&-1<R.indexOf("{")&&-1<R.indexOf("}")){var H="";try{H=JSON.parse(R)}catch(oe){console.error(oe),console.error("json")}var X,se,te=[];for(X in H)H.hasOwnProperty(X)&&(se=s.QualityLevels[X],te.push({definition:X,Url:H[X],desc:se||X}));this._setupSourceList(te)}return te},B.prototype._setupSourceList=function(R){var H;(R=R===void 0?[]:R).length&&(this._currentPlayIndex=g.findSelectedStreamLevel(R,this._options.defaultDefinition),H=R[this._currentPlayIndex],this._urls=R,this._options.source=H.Url,this.trigger(b.Private.SourceLoaded,H))},B.prototype._createService=function(){if(I)for(var R=I.length,H=0;H<R;H++){var X=I[H],se=X.condition;se===void 0?se=!0:typeof se=="function"&&(se=se.call(this)),se&&(this[X.name]=new X.service(this))}},B.prototype._disposeService=function(){if(I)for(var R=I.length,H=0;H<R;H++){var X=this[I[H].name];X!==void 0&&X.dispose&&X.dispose()}},B.prototype._executeReadyCallback=function(){if(!this._options._readyCallbackCalled){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(b.Private.H5_Loading_Hide),this.trigger(b.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(R){console.log(R)}}},B.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},B.prototype._reloadForVod=function(){var R,H,X;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(R=this.getCurrentTime(),(H=this._originalSource).indexOf("auth_key=")<0&&(H=H&&0<H.indexOf("?")?H+"&_t="+new Date().valueOf():H+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(X=this).traceLog(Q,"reloadForVod::#"+H+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){X._loadByUrlInner(H,R,X.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},B.prototype._getUserTextTracks=function(){var R=this._options.textTracks||[];(R=g.unqiueTextTracks(R)).length&&this.trigger(b.Private.TextTrackFounded,{from:"user",textTracks:R})},B.prototype._isAutoPlay=function(){return this._options.autoplay||this._options._autoplay},B.prototype._logOnce=function(R,H){this._onceLogged||(console[H||"log"](R),this._onceLogged=!0)},B.prototype.showControlBar=function(){this.trigger(b.Private.ShowControlBarByAPI)},B.prototype.hideControlBar=function(){this.trigger(b.Private.HideControlBarByAPI)},m.exports=B}).call(this)}).call(this,"prod")},{"../../commonui/autostreamselector":16,"../../feature/AntiRecord":21,"../../feature/autoplaydelay":22,"../../feature/keyboardControl":23,"../../feature/license":24,"../../feature/logoManager":25,"../../feature/ratioAdapter":26,"../../lang/index":28,"../../lib/codec-probe":31,"../../lib/constants":33,"../../lib/cookie":34,"../../lib/dom":37,"../../lib/event":38,"../../lib/object":47,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../lib/vttnext/index":59,"../../monitor-new/monitor":74,"../../monitor/monitor":79,"../../ui/component":150,"../../ui/component/cover":154,"../../ui/component/double-click-skip":155,"../../ui/component/press-fast-forward":162,"../../ui/component/progressmarker":164,"../../ui/component/text-track-display":175,"../../ui/component/util":180,"../../ui/exports":183,"../service/export":139,"../splayer/splayerinjector":146,"./event/eventmanager":83,"./event/eventtype":84,"./plugin/lifecyclemanager":112,"./x5play":114,"es6-promise":13}],110:[function(x,m,j){x=x("../../../lib/oo").extend({}),m.exports=x},{"../../../lib/oo":48}],111:[function(x,m,j){m.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],112:[function(x,m,j){function w(a){(this._player=a)._status="init",this.components=[];var o=a.getOptions().components;if(o&&p.isArray(o)&&0<o.length)for(var s=0;s<o.length;s++){var f=o[s];if(!f)return void console.log("The "+s+" custome component is "+f);var g=f.type===void 0?f:f.type,c=f.args===void 0?[]:f.args,f=f.name===void 0?"":f.name;if(!g)return void console.log(f+" compenent is "+g);c=c&&0<c.length?[].concat.call([g],c):[],g=new(Function.prototype.bind.apply(g,c)),c=g[l.createEl],c&&typeof c=="function"&&c.call(g,a.el(),a),this.components.push({name:f,obj:g})}var y=this;a.on(d.Private.LifeCycleChanged,function(_){var u=_.paramData,r=u.type;r===d.Video.CanPlayThrough&&y._player.trigger(d.Player.TimeUpdate,u.data.target.currentTime),r===d.Video.Ended&&y._player.trigger(d.Player.TimeUpdate,y._player.getDuration()),y.components.length!=0&&t.call(y,a,_)})}var p=x("../../../lib/object"),d=x("../event/eventtype"),l=x("./lifecycle"),n=x("./status"),t=(w.prototype.getComponent=function(a){var o=null,s=this.components.length;if(a){for(var g=0;g<s;g++)if(this.components[g].name==a){o=this.components[g].obj;break}}return o},function(a,o){if(o){for(var o=o.paramData,s=o.type,g=o.data,c=((o=s)!=d.Video.LoadStart&&o!=d.Video.LoadedData&&o!=d.Video.LoadedMetadata||(s=l.loading),e(a,s),this.components.length),f=0;f<c;f++){var y=this.components[f].obj,_=y[s];_&&typeof _=="function"&&_.call(y,a,g)}s==d.Private.Dispose&&(this.components=[])}}),e=function(a,o){n[o]===void 0||o==n.pause&&(a._status==n.error||a._status==n.ended)||o==n.ready&&a._status==n.playing||(a._status=o)};m.exports=w},{"../../../lib/object":47,"../event/eventtype":84,"./lifecycle":111,"./status":113}],113:[function(x,m,j){m.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],114:[function(x,m,j){function w(l,n){var t=l.el().style.height,e=l.el().style.width,a=(l.originalLayout={container:{height:t,width:e},video:{width:l.tag.style.width,height:l.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),o=document.body.clientWidth+"px";width=n?(height=a,o):(height=t.indexOf("%")?t:t+"px",e.indexOf("%")?e:e+"px"),l.tag.style.width=o,l.tag.style.height=a,l.el().style.height=n?a:height}var p=x("../../lib/ua"),d=x("../../lib/dom");m.exports.isAndroidX5=function(){return p.os.android&&p.is_X5||p.dingTalk()},m.exports.adaptX5Play=function(l){p.os.android&&p.is_X5&&(l._options.x5_type=="h5"&&(l.tag.setAttribute("x5-video-player-type",l._options.x5_type),window.onresize=function(){var n,t;w(l,l._options.x5_fullscreen||l._options.x5_video_position=="center"),(n=l)._x5VideoOrientation=="landscape"&&(n._originalTagWidth=n.tag.style.width,n._originalTagHeight=n.tag.style.height,(t=document.querySelector("#"+n.id()+" .prism-controlbar"))&&parseFloat(t.offsetHeight),n.tag.style.height="100%",n.tag.style.width=window.screen.width+"px")},l.tag.addEventListener("x5videoenterfullscreen",function(){w(l,l._options.x5_fullscreen||l._options.x5_video_position=="center"),l.trigger("x5requestFullScreen")}),l.tag.addEventListener("x5videoexitfullscreen",function(){var n,t;(n=l).originalLayout&&(t=n.originalLayout,n.el().style.height=t.container.height,n.el().style.width=t.container.width,n.tag.style.width=t.video.width,n.tag.style.height=t.video.height),l.trigger("x5cancelFullScreen"),l.fullscreenService.getIsFullScreen()&&l.fullscreenService.cancelFullScreen()}),l.on("requestFullScreen",function(){l._options.x5_video_position=="top"&&d.removeClass(l.tag,"x5-top-left"),p.os.android&&p.is_X5&&l._options.x5LandscapeAsFullScreen&&(l.tag.setAttribute("x5-video-orientation","landscape"),l._x5VideoOrientation="landscape")}),l.on("cancelFullScreen",function(){l._options.x5_video_position=="top"&&d.addClass(l.tag,"x5-top-left"),p.os.android&&p.is_X5&&l._options.x5LandscapeAsFullScreen&&(l.tag.setAttribute("x5-video-orientation","portrait"),w(l,l._options.x5_fullscreen||l._options.x5_video_position=="center"),l._x5VideoOrientation="portrait")})),l._options.x5_fullscreen!==void 0&&l._options.x5_fullscreen&&(l.tag.setAttribute("x5-video-player-fullscreen",l._options.x5_fullscreen),d.addClass(l.tag,"x5-full-screen")),l._options.x5_video_position=="top"&&d.addClass(l.tag,"x5-top-left"),l._options.x5_orientation!==void 0)&&l.tag.setAttribute("x5-video-orientation",l._options.x5_orientation)}},{"../../lib/dom":37,"../../lib/ua":53}],115:[function(x,m,j){var w=x("../../lib/object"),p=x("../../lib/io"),d=x("../../config"),l=x("../../lang/index"),n=x("../../lib/constants"),t=x("../../lib/playerutil"),e=x("../base/event/eventtype"),a="dashinjector.js";m.exports.inject=function(o,s,g,c){var f=c.source;if(!(function(_){return!this._dash&&t.isDash(_)&&t.isSupportMSE()}).call(o,f))return console.warn("Should not inject dash player");function y(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),s.prototype.play=this._superPt.play,s.prototype.pause=this._superPt.pause,s.prototype.initPlay=this._superPt.initPlay,s.prototype.seek=this._superPt.seek,s.prototype.canSeekable=this._superPt.canSeekable))}o._Type=s,o._superType=g,o._superPt=g.prototype,o._disposed=!1,o._dash=null,s.prototype.initPlay=function(){var _=this,u=(this.trigger(e.Private.H5_Loading_Show),performance.now());(function(r,h){var v="aliplayer-dash-min.js",T=this.getOptions(),E=T.dashjsUrl||"https://"+d.domain+d.path+d.h5Version+"/dash/"+v;T.assetPrefix&&(E=T.assetPrefix+"/dash/"+v),p.loadJS(E,r,h)}).call(this,function(){_.traceLog(a,"got js#"+parseInt(performance.now()-u)+"ms"),(function(){var r,h,v,T=!this._dash;this._disposed||(this._destroyDash(),(r=this.getOptions()).vid||(r.isVBR=!0),h={streaming:{retryAttempts:{MPD:r.isLive?r.liveRetry:r.vodRetry}}},h=w.deepMerge(h,r.dashOption),v=dashjs.MediaPlayer().create(),this._dash=v,(function(){var E=this,S=this._dash,P=this.getOptions(),b=!1;S.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(k){var I,C;b||(b=!0,C=(C=S.getBitrateInfoListFor("video"))==null?void 0:C.map(function(L){return{url:""+n.DASH_QUALITY_PROTOCOL+L.qualityIndex,width:L.width,height:L.height,bitrate:L.bitrate,attrs:{BANDWIDTH:L.bitrate,RESOLUTION:L.width+"x"+L.height}}}),E.trigger(e.Player.LevelsLoaded,{levels:C}),I=S.getCurrentTrackFor("audio"),C=S.getTracksFor("audio").map(function(L){return{id:L.index,language:L.lang,enabled:(I==null?void 0:I.index)===L.index}}),E.trigger(e.Player.AudioTrackUpdated,{audioTracks:C}))}),S.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(k){var I,C;k.mediaType==="video"&&(I=E._qualityService.levels||[],C=""+n.DASH_QUALITY_PROTOCOL+k.newQuality,k=I.find(function(L){return L.Url===C}),E.trigger(e.Private.QualityChange,{levelSwitch:!0,url:C,desc:k==null?void 0:k.desc}))}),S.on("bytesAppendedEndFragment",function(k){try{var I,C;k.mediaType==="video"&&(I=k.bufferedRanges.length)&&(C=k.bufferedRanges.end(I-1),k.startTime>C)&&(S.refreshManifest(),E.traceLog(a,"PTS rollback, refresh manifest, expectedStart: "+k.startTime+", resultBufferEnd: "+C),console.warn("PTS rollback, refresh manifest"))}catch(L){console.log("exception",L)}}),S.on(dashjs.MediaPlayer.events.ERROR,function(k){var I=k.error,C=dashjs.MediaPlayer.errors,L=(q=>{var ee,Q,B={};for(ee in q)q.hasOwnProperty(ee)&&(Q=q[ee],B[Q]=ee);return B})(C)[I.code],N=[C.TIME_SYNC_FAILED_ERROR_CODE,C.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",k,"code:",L),E.traceLog(a,"dashjs-error::"+L+"#"+I.message+"#"+((k=I.data)==null||(k=k.response)==null?void 0:k.status),!0),!N.includes(I.code)){E._clearTimeout();var U,Y,z,K=I.code;switch(K){case C.DOWNLOAD_ERROR_ID_CONTENT_CODE:case C.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case C.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case C.DOWNLOAD_ERROR_ID_SIDX_CODE:case C.DOWNLOAD_ERROR_ID_XLINK_CODE:case C.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var M=(M=I.data)==null||(M=M.response)==null?void 0:M.status;if(M===404){if(S.isDynamic()&&K===C.DOWNLOAD_ERROR_ID_CONTENT_CODE)return E.traceLog(a,"dashjs::reload mpd because seg 404"),void S.attachSource(P.source);U=n.ErrorCode.NotFoundSourceURL,Y=l.get("Error_Not_Found"),z=l.get("Tip_Err_Not_found")}else Y=M===403?(U=n.ErrorCode.UrlForbidden,l.get("Error_AuthKey_Text")):M===0?(U=n.ErrorCode.RequestDataError,l.get("Error_Play_Text")+","+l.get("Maybe_Cors_Error")):(U=n.ErrorCode.RequestDataError,l.get("Error_Network_Text")+"("+L+"|"+M+")");break;case C.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case C.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case C.MANIFEST_ERROR_ID_PARSE_CODE:case C.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case C.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:U=n.ErrorCode.LoadedMetadata,Y=l.get("Error_Manifest_Decode_Text")+"("+L+")";break;default:U=n.ErrorCode.OtherError,Y=l.get("Error_Play_Text")+"("+L+")"}Y+="<br>"+I.message,k={mediaId:P.vid||"",mediaAuth:P.mediaAuth||"",error_code:U,error_msg:Y,diagnosis_info:z},E.logError(k),E.trigger(e.Player.Error,k),E._dash.reset()}})}).call(this),v.initialize(),v.updateSettings(h),v.setAutoPlay(r.autoplay),v.attachView(this.tag),v.attachSource(r.source),this._initPlayBehavior(),T&&this._executeReadyCallback())}).call(_)},function(){var r={mediaId:c.vid||"",mediaAuth:c.mediaAuth||"",error_code:n.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};_.trigger(e.Player.Error,r)})},Object.defineProperty(s.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return y},set:function(){return y}}),s.prototype._switchLevel=function(_){this.traceLog(a,"switchLevel::"+_);var u=this._dash;_?(_=Number(_.replace(n.DASH_QUALITY_PROTOCOL,"")),u.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),u.setQualityFor("video",_)):u.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},s.prototype._switchAudioTrack=function(_){var u=this._dash,r=u.getTracksFor("audio").find(function(h){return h.index===_});r&&u.setCurrentTrack(r)},s.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":84}],116:[function(x,m,j){var w=x("../base/player"),p=x("./dashinjector"),d=w.extend({init:function(l,n){n._native=!1,p.inject(this,d,w,n),w.call(this,l,n)}});m.exports=d},{"../base/player":109,"./dashinjector":115}],117:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(f){for(var y=1;y<arguments.length;y++){var _,u=arguments[y];for(_ in u)!{}.hasOwnProperty.call(u,_)||(f[_]=u[_])}return f}).apply(null,arguments)}var p=x("../../lib/io"),d=x("../../config"),l=x("../../lib/constants"),n=x("../../lib/util"),t=x("../../lib/playerutil"),e=(x("../../lib/dom"),x("../../lang/index")),a=x("../base/event/eventtype"),o=x("../saas/drm"),s=x("../../lib/ua"),g="drminjector.js",c=(()=>{function f(){}var y=f.prototype;return y.destroy=function(){},y.append=function(_){},y.remove=function(_,u){},y.isTextVisible=function(){},y.setTextVisibility=function(_){},f})();m.exports.inject=function(f,y,_,u,r,h,v){var T,E=u.source;function S(N){var U=shaka.util.Error.Code,Y="",z=N.data||[];switch(N.code){case U.BAD_HTTP_STATUS:case U.HTTP_ERROR:case U.TIMEOUT:case U.LICENSE_REQUEST_FAILED:Y=e.get("Tip_Drm_Request_Err")+P(z);break;case U.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case U.SESSION_TIMEOUT:window.isSecureContext?(Y=e.get("Tip_Drm_Key_System_Unavailable"),z.length&&(Y+="<br />"+e.get("Tip_Err_Common_Short")+z)):Y=e.get("Tip_Drm_Secure_Context");break;case U.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(Y=e.get("Tip_Drm_File_Not_Allowed"));break;case U.HLS_INVALID_PLAYLIST_HIERARCHY:Y=e.get("Tip_Drm_Playlist_Hierarchy")}return N=P(z),Y||N}function P(N){return e.get("Tip_Err_Common")+N}function b(N){var U=this;this._drm.load(this._options.source,N.startTime).then(function(){if(U.trigger(a.Private.H5_Loading_Hide),N.continuePlay&&(U.play(),N.prevVariant)&&N.prevVariant!==0){for(var Y,z=U._drm.getVariantTracks(),K=0;K<z.length;K++)if(z[K].id===N.prevVariant){Y=z[K];break}Y&&U._drm.selectVariantTrack(Y,!0)}}).catch(function(Y){I.call(U,Y)})}function k(){C();var U=l.ErrorCode.DrmNotSupported,N=e.get("Error_Drm_Not_Supported"),U={mediaId:this._options.vid||"",error_code:U,error_msg:N,diagnosis_info:e.get("Tip_Drm_Unsupported")};this.logError(U),this.trigger(a.Player.Error,U)}function I(N){C();var Y=l.ErrorCode.DrmLoadError,U=e.get("Error_Drm_Load"),Y={mediaId:this._options.vid||"",error_code:Y,error_msg:U+" | "+this._shakaCodeMap[N.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(Y),Y.diagnosis_info=S.call(this,N),this.trigger(a.Player.Error,Y)}function C(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function L(N,U){U=U.getVariantTracks().find(function(Y){return Y.active}),console.log("activeTrack",U),N.trigger(a.Private.QualityChange,{levelSwitch:!0,bitrate:U.bandwidth,desc:U.height})}!h&&(u=E,f._drm||!t.isDash(u)&&!t.isHls(u))||(f._isDrm=!0,f._drm=null,f._isLoadedDrm=!1,f._sessionTimer=null,f._isFairPlay=s.IS_MAC_SAFARI||s.IS_IOS,f._fairPlayHandlers={},f._shakaCodeMap={},f._cdmData="",f._licenseData="",console.log("use FairPlay",f._isFairPlay),y.prototype._checkDrmReady=function(){return!(this._drm==null&&!this._isFairPlay&&(console.warn("please invoke this method after ready event"),1))},y.prototype.play=function(N){if(this.traceLog(g,"play::"+N),this._checkDrmReady())return this._isManualPlay=N||!1,this.trigger(a.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},y.prototype.initPlay=function(N){var U,Y,z;function K(M,q){var ee,Q,B,R;M._antiRecord&&(console.log("Manual check before load source"),M._antiRecord.check())||(!shaka.Player.isBrowserSupported()||!(!s.IS_ANDROID||!s.IS_UC&&!s.IS_FIREFOX)?k.call(M):(ee=null,shaka.Player.probeSupport().then(function(H){ee&&(clearTimeout(ee),ee=null),H&&H.drm&&H.drm["com.widevine.alpha"]?M.destroy(R):k.call(M)}),ee=setTimeout(function(){k.call(M)},5e3),Q=!M._drm,B=function(){var H,X,se;M._drm=new shaka.Player(M.tag),T(M,M._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",M._shakaCodeMap=(H=shaka.util.Error.Code,X={},Object.keys(H).forEach(function(te){X[H[te]]=te}),X),se=M._options.isLive?"https://"+t.getLiveHostByRegion(M._options.region):"https://vod."+M._options.region+".aliyuncs.com",M._drm.configure(w({drm:{servers:{"com.widevine.alpha":se,"com.microsoft.playready":se},retryParameters:{maxAttempts:1}}},M._options.drmOption||{},{textDisplayFactory:function(){return new c}})),M._drm.getNetworkingEngine().registerRequestFilter(function(te,oe){shaka.util.StringUtils;var J=shaka.util.Uint8ArrayUtils;te==shaka.net.NetworkingEngine.RequestType.LICENSE&&(te=J.toBase64(new Uint8Array(oe.body)),J=M._options.isLive?o.getRequestUrl(te,M):o.postData(te,M),M._cdmData=te,oe.uris[0]=J.url,oe.headers["content-type"]="application/x-www-form-urlencoded",oe.body=J.data)}),M._drm.getNetworkingEngine().registerResponseFilter(function(te,oe){var J=shaka.util.StringUtils,ae=shaka.util.Uint8ArrayUtils;te==shaka.net.NetworkingEngine.RequestType.LICENSE&&(te=J.fromUTF8(oe.data),J=JSON.parse(te),te=M._options.isLive?J.Response.B64License:JSON.parse(J.License).b64License,M._licenseData=te,oe.data=ae.fromBase64(te))}),M._drm.addEventListener("error",function(te){console.log("errorMessage"),console.log(te.detail.code),console.log(te.detail)}),M._drm.load(M._options.source).then(function(){M._initPlayBehavior(q)}).catch(function(te){I.call(M,te)}),C.call(M),M.one(a.Video.CanPlay,function(){C.call(M)}),M._sessionTimer=setTimeout(function(){M._isError||(I.call(M,{code:"SESSION_TIMEOUT"}),M._drm&&M._drm.destroy())},M._player.getOptions().drmSessionTimeout||5e3),r&&r(M._drm),Q&&(M._executeReadyCallback(),M._urls)&&0<M._urls.length&&(M._currentPlayIndex=t.findSelectedStreamLevel(M._urls,M._options.defaultDefinition),se=M._urls[M._currentPlayIndex],M.trigger(a.Private.SourceLoaded,se))},R=function(H){try{B()}catch(X){console.log(X)}}))}n.contentProtocolMixed(E)?(C(),(U={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=e.get("Request_Block_Text"),this.trigger(a.Player.Error,U)):this._options.accessKeyId&&this._options.accessKeySecret?((Y=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(a.Private.H5_Loading_Show),(function(M,q){var ee;this._isFairPlay&&((()=>{var Q;return s.IS_IOS?(Q=parseInt(s.os.version),console.log("osVersion",Q),12<=Q):s.IS_MAC_SAFARI?(Q=parseInt(s.browser.version),console.log("browserVersion",Q),12<=Q):void 0})()?((ee=this).destroy(),o.loadCertificate(this,function(){M&&M(),ee._initPlayBehavior(q,ee._options.source),ee._executeReadyCallback()})):k.call(this))}).call(this,r,N)):this._isLoadedDrm&&typeof shaka<"u"?K(this,N):(this.trigger(a.Private.H5_Loading_Show),z=performance.now(),(function(M,q){var ee="aliplayer-drm-min.js",Q="",Q=d.domain?"https://"+d.domain+d.path+d.h5Version+"/drm/"+ee:"/build/drm/"+ee,B=(this._options.shakaUrl&&(Q=this._options.shakaUrl),this);p.loadJS(Q,function(){shaka.polyfill.installAll(),M.apply(B)},function(R){q&&q(R)})}).call(Y,function(){this.traceLog(g,"got js#"+parseInt(performance.now()-z)),this._isLoadedDrm=!0,K(this,N)},function(M){M={mediaId:Y._options.vid||"",mediaAuth:Y._options.mediaAuth||"",error_code:l.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(M?M.message:"")},Y.trigger(a.Player.Error,M)}))):(C(),(U={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=e.get("Error_Drm_No_Sts"),this.trigger(a.Player.Error,U))},y.prototype.destroy=function(N){var U;this._drm?(C.call(U=this),this._drm.destroy().then(function(){U._drm=null,typeof N=="function"&&N(U)})):(this._isFairPlay&&this._destroyFairPlay(),typeof N=="function"&&N(this))},y.prototype._destroyFairPlay=function(){o.destroyFairPlay.call(this)},y.prototype.dispose=function(){_.dispose.call(this),this.destroy()},y.prototype._switchLevel=function(N,U){if(U=U||{isAuto:!0},this.trigger(a.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!U.isAuto;var Y=this.autoplay||this._status!="pause";this._loadByUrlInner(N,this.getCurrentTime(),Y)}else if(U.isAuto)this._drm.configure({abr:{enabled:!0}}),L(this._player,this._drm);else{for(var z,K=this._drm.getVariantTracks(),M=0;M<K.length;M++){var q=K[M];if(Number(q.bandwidth)===Number(U.bitrate)&&Number(q.height)===Number(U.resolution.split("x")[1])){z=q;break}}z||console.warn("cannot find target track",U),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(z,!this._options.seamlessHandover)}var ee=this;setTimeout(function(){ee.trigger(a.Player.LevelSwitched),this._switchedLevel=!1},1e3)},y.prototype._getDRMEncryptItem=function(){var N=this._urls;if(N&&0<N.length)for(var U=N.length,Y=0;Y<U;Y++){var z=N[Y];if(z.Url==this._options.source&&+z.encryption)return z}return""},y.prototype._getItemBySource=function(){var N=this._urls;if(N&&0<N.length)for(var U=N.length,Y=0;Y<U;Y++){var z=N[Y];if(z.Url==this._options.source)return z}return""},T=function(N,U){U.addEventListener("error",function(M){var z,K=N,M=M.detail,ee="Error code:"+M.code+"message:"+M.message,q=(K.traceLog(g,ee,!0),console.log(ee),l.ErrorCode.OtherError),ee=e.get("Error_Play_Text");M.code==shaka.util.Error.Code.EXPIRED?(function(){var Q=this,B=(this.trigger(a.Private.H5_Loading_Show),null);this._options.isLive||(B=this.getCurrentTime());var R,H=!this.paused(),X=this._drm.getConfiguration().abr.enabled;if(!X){for(var se=this._drm.getVariantTracks(),te=0;te<se.length;te++)if(se[te].active){R=se[te].id;break}}var oe={startTime:B,continuePlay:H,prevVariant:R,isAdaptive:X};typeof this._options.refreshAccessInfo=="function"?this._options.refreshAccessInfo().then(function(J){(J=J||{}).accessKeyId&&(Q._options.accessKeyId=J.accessKeyId),J.securityToken&&(Q._options.securityToken=J.securityToken),J.accessKeySecret&&(Q._options.accessKeySecret=J.accessKeySecret),b.call(Q,oe)}):b.call(Q,oe)}).call(K):(M.code==shaka.util.Error.Code.HTTP_ERROR?(q=l.ErrorCode.NetworkError,ee=e.get("Http_Error")):M.code==shaka.util.Error.Code.TIMEOUT?(q=l.ErrorCode.LoadingTimeout,ee=e.get("Error_Waiting_Timeout_Text")):M.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(q=l.ErrorCode.DrmLicenseRequestFailed,ee=e.get("Error_Drm_License_Request_Failed")):M.Category==shaka.util.Error.NETWORK&&(q=l.ErrorCode.NetworkError,ee=e.get("Error_Network_Text")),C.call(K),setTimeout(function(){K.trigger(a.Private.Play_Btn_Hide)}),K.checkOnline()&&(z=K._drm.drmInfo()||{},z={keyIds:Array.from(z.keyIds||[]),initData:String(((z=(z.initData||[])[0])==null?void 0:z.initData)||[]),cdmData:K._cdmData,licenseData:K._licenseData},z={mediaId:K._options.vid||"",error_code:q,error_msg:M.message,shaka_error:JSON.stringify(M.data||[]),drm_info:JSON.stringify(z)},K.logError(z),z.display_msg=ee+" | "+K._shakaCodeMap[M.code],z.diagnosis_info=S.call(K,M),K.trigger(a.Player.Error,z)))}),U.addEventListener("variantchanged",function(Y){console.log("DRM Event: variantchanged",Y)}),U.addEventListener("abrstatuschanged",function(Y){console.log("DRM Event: abrstatuschanged",Y)}),U.addEventListener("drmsessionupdate",function(Y){console.log("DRM Event: drmsessionupdate",Y),C.call(N)}),U.addEventListener("expirationupdated",function(Y){console.log("DRM Event: expirationupdated",Y),console.log("Exp:",this.getExpiration())}),U.addEventListener("adaptation",function(Y){console.log("adaptation",Y),L(N,U)}),U.addEventListener("trackschanged",function(Y){console.log("DRM EVENT: trackschanged",U.getTextLanguages(),U.getTextTracks());var z=U.getTextLanguages();z&&z.length&&(z=(K=>{var M={subtitle:"subtitles",caption:"captions"},q=(console.log("Building track config"),K.getManifest().textStreams||[]),ee=(console.log("textStreams",q),K.getTextLanguages()),Q=(console.log("languageList",ee),[]);try{q.forEach(function(B){ee.includes(B.language)&&Q.push({kind:M[B.kind]||B.kind,label:B.label,srclang:B.language,src:Array.from(B.segmentIndex)[0].getUris()[0]})})}catch(B){console.log("error in retrieving text track url: ",B)}return Q})(U),N.trigger(a.Private.TextTrackFounded,{from:"drm",textTracks:z}),N.trigger(a.Private.CCReset))})})}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":84,"../saas/drm":127}],118:[function(x,m,j){function w(){var K,se=typeof Symbol=="function"?Symbol:{},M=se.iterator||"@@iterator",q=se.toStringTag||"@@toStringTag";function ee(J,qe,ue,ge){var _e,Se,xe,Pe,Ae,Ge,Qe,Xe,Ue,qe=qe&&qe.prototype instanceof B?qe:B,qe=Object.create(qe.prototype);return p(qe,"_invoke",(_e=J,Se=ue,Qe=ge||[],Xe=!1,Ue={p:Ge=0,n:0,v:K,a:Ze,f:Ze.bind(K,4),d:function(Fe,He){return xe=Fe,Pe=0,Ae=K,Ue.n=He,Q}},function(Fe,He,Ke){if(1<Ge)throw TypeError("Generator is already running");for(Xe&&He===1&&Ze(He,Ke),Pe=He,Ae=Ke;(X=Pe<2?K:Ae)||!Xe;){xe||(Pe?Pe<3?(1<Pe&&(Ue.n=-1),Ze(Pe,Ae)):Ue.n=Ae:Ue.v=Ae);try{if(Ge=2,xe){if(X=xe[Fe=Pe?Fe:"next"]){if(!(X=X.call(xe,Ae)))throw TypeError("iterator result is not an object");if(!X.done)return X;Ae=X.value,Pe<2&&(Pe=0)}else Pe===1&&(X=xe.return)&&X.call(xe),Pe<2&&(Ae=TypeError("The iterator does not provide a '"+Fe+"' method"),Pe=1);xe=K}else if((X=(Xe=Ue.n<0)?Ae:_e.call(Se,Ue))!==Q)break}catch(Be){xe=K,Pe=1,Ae=Be}finally{Ge=1}}return{value:X,done:Xe}}),!0),qe;function Ze(Fe,He){for(Pe=Fe,Ae=He,X=0;!Xe&&Ge&&!Ke&&X<Qe.length;X++){var Ke,Be=Qe[X],tt=Ue.p,et=Be[2];3<Fe?(Ke=et===He)&&(Ae=Be[(Pe=Be[4])?5:Pe=3],Be[4]=Be[5]=K):Be[0]<=tt&&((Ke=Fe<2&&tt<Be[1])?(Pe=0,Ue.v=He,Ue.n=Be[1]):tt<et&&(Ke=Fe<3||Be[0]>He||et<He)&&(Be[4]=Fe,Be[5]=He,Ue.n=et,Pe=0))}if(Ke||1<Fe)return Q;throw Xe=!0,He}}var Q={};function B(){}function R(){}function H(){}var X=Object.getPrototypeOf,se=[][M]?X(X([][M]())):(p(X={},M,function(){return this}),X),te=H.prototype=B.prototype=Object.create(se);function oe(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,H):(J.__proto__=H,p(J,q,"GeneratorFunction")),J.prototype=Object.create(te),J}return p(te,"constructor",R.prototype=H),p(H,"constructor",R),p(H,q,R.displayName="GeneratorFunction"),p(te),p(te,q,"Generator"),p(te,M,function(){return this}),p(te,"toString",function(){return"[object Generator]"}),(w=function(){return{w:ee,m:oe}})()}function p(K,M,q,ee){var Q=Object.defineProperty;try{Q({},"",{})}catch{Q=0}(p=function(B,R,H,X){function se(te,oe){p(B,te,function(J){return this._invoke(te,oe,J)})}R?Q?Q(B,R,{value:H,enumerable:!X,configurable:!X,writable:!X}):B[R]=H:(se("next",0),se("throw",1),se("return",2))})(K,M,q,ee)}function d(K,M,q,ee,Q,B,R){try{var H=K[B](R),X=H.value}catch(se){return q(se)}H.done?M(X):Promise.resolve(X).then(ee,Q)}function l(K){return function(){var M=this,q=arguments;return new Promise(function(ee,Q){var B=K.apply(M,q);function R(X){d(B,ee,Q,R,H,"next",X)}function H(X){d(B,ee,Q,R,H,"throw",X)}R(void 0)})}}var n=typeof Promise>"u"?x("es6-promise").Promise:Promise,t=x("../../lib/io"),e=x("../../config"),a=x("../../lang/index"),o=x("../base/event/eventtype"),s=x("../../lib/constants"),g="drminjectorNg.js",c={LoadJs:1,LoadSource:2,PlayerError:3,SupportError:4,ParamsError:5},f={Widevine:"com.widevine.alpha",FairPlay:"com.apple.fps"},y={},_={};function u(K){return r.apply(this,arguments)}function r(){return(r=l(w().m(function K(M){var q,ee,Q,B,R,H=this;return w().w(function(X){for(;;)switch(X.p=X.n){case 0:if(this._drm)return X.n=1,this._drm.destroy();X.n=2;break;case 1:this._drm=null;case 2:X.p=2,U.call(this,"mod_shaka_s"),X.n=3;var se=M;return new n(function(te,oe){var J="https://"+e.domain+e.path+e.h5Version+"/drm/aliplayer-drm2-min.js";se!=null&&se.shakaUrl&&(J=se==null?void 0:se.shakaUrl),t.loadJS(J,te,oe)});case 3:U.call(this,"mod_shaka_f"),X.n=5;break;case 4:return X.p=4,B=X.v,console.log("[load shaka-player error]",B),X.a(2,k.call(this,c.LoadJs,B));case 5:if(shaka.polyfill.installAll(),y=I(shaka.util.Error.Code),_=I(shaka.net.NetworkingEngine.RequestType),shaka.Player.isBrowserSupported()){X.n=6;break}return X.a(2,k.call(this,c.SupportError));case 6:if(window.isSecureContext){X.n=7;break}return X.a(2,k.call(this,c.SupportError,{_code:"no-secure-context"}));case 7:if(B=(te=>{var oe=null;return(te=te||{}).widevine||te.fairplay||(oe={message:a.get("Error_Drm_Params_Missing")}),[te,oe]})(M.drm),q=B[0],ee=B[1])return X.a(2,k.call(this,c.ParamsError,ee));X.n=8;break;case 8:return M.vid||(this._options.isVBR=!0),ee=new shaka.Player,b.call(this,ee),this._drm=ee,Q={drm:{servers:((Q={})[f.Widevine]=(R=q.widevine)==null?void 0:R.licenseUrl,Q[f.FairPlay]=(R=q.fairplay)==null?void 0:R.licenseUrl,Q),advanced:((R={})[f.Widevine]={serverCertificateUri:(Q=q.widevine)==null?void 0:Q.certificateUrl},R[f.FairPlay]={serverCertificateUri:(Q=q.fairplay)==null?void 0:Q.certificateUrl,serverCertificate:(Q=q.fairplay)==null?void 0:Q.certificate},R)},autoShowText:1},shaka.util.PlayerConfiguration.mergeConfigObjects(Q,M.drmOption||{}),ee.configure(Q),ee.attach(this.tag),ee.getNetworkingEngine().registerRequestFilter(function(te,oe,J){if((ue=oe.drmInfo)!=null&&ue.keySystem&&(H._keySystem=oe.drmInfo.keySystem),te===shaka.net.NetworkingEngine.RequestType.LICENSE){U.call(H,"drm_li_s");var ae=Y.call(H);if(ae.licenseHeaders&&Object.keys(ae.licenseHeaders).forEach(function(ge){oe.headers[ge]=ae.licenseHeaders[ge]}),typeof ae.licenseRequestFilter=="function")return ae.licenseRequestFilter(oe,shaka.util)}else if(te===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE){U.call(H,"drm_cer_s");var ue=Y.call(H);if(typeof ue.certificateRequestFilter=="function")return ue.certificateRequestFilter(oe,shaka.util)}}),ee.getNetworkingEngine().registerResponseFilter(function(te,oe,J){if(te===shaka.net.NetworkingEngine.RequestType.LICENSE){U.call(H,"drm_li_f"),z.call(H,te,oe);var ae=Y.call(H);if(typeof ae.licenseResponseFilter=="function")return ae.licenseResponseFilter(oe,shaka.util)}else if(te===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE&&(U.call(H,"drm_cer_f"),z.call(H,te,oe),ae=Y.call(H),typeof ae.certificateResponseFilter=="function"))return ae.certificateResponseFilter(oe,shaka.util)}),X.p=9,X.n=10,ee.load(M.source);case 10:X.n=12;break;case 11:X.p=11,R=X.v,console.log("error when load source",R),k.call(this,c.LoadSource,R);case 12:this._initPlayBehavior(),this._executeReadyCallback();case 13:return X.a(2)}},K,this,[[9,11],[2,4]])}))).apply(this,arguments)}function h(K){this.traceLog(g,"play::"+K),K&&this.trigger(o.Private.ManualPlay),this._isManualPlay=!!K,this.tag.ended||this._ended?this.replay():this.tag.paused&&this.tag.play()}function v(){this._switchingDesc=null,this._keySystem=null,this._baseType.dispose.call(this),this._drm&&(this._drm.destroy(),this._drm=null)}function T(K,M){var q,ee,Q,B=this._drm;K?(q=Number(K.split(s.DASH_QUALITY_PROTOCOL)[1]),(K=B.getVariantTracks().find(function(R){return R.id===q}))&&(B.configure({abr:{enabled:!1}}),ee=!1,Q=this.getOptions().seamlessHandover,B.selectVariantTrack(K,ee=typeof Q=="boolean"?!Q:ee),ee||(this._switchingDesc=M.desc))):(B.configure({abr:{enabled:!0}}),this._switchingDesc=null)}function E(){var K=this._drm;if(K)return K.getTextTracks().map(function(M){return{language:M.language,label:M.label,kind:M.kind==="subtitle"?"subtitles":"captions",default:M.active}});console.warn("shaka has not been initialized but _getTextTracks is called")}function S(K){var M=this._drm;M&&(K?(M.setTextTrackVisibility(!0),M.selectTextLanguage(K)):M.setTextTrackVisibility(!1))}function P(K){K&&this._drm.selectAudioLanguage(K),N.call(this)}function b(K){var M=this;K.addEventListener("error",function(q){k.call(M,c.PlayerError,q.detail)}),K.addEventListener("trackschanged",function(){(function(){var q,ee,Q,B=this._drm,R=B.getAudioLanguages(),H=(q=B.getVariantTracks())==null?void 0:q.find(function(X){return X.active});H&&(ee=[],R.length===1&&R[0]==="und"?ee.push({id:"und",language:a.get("Default"),enabled:!0}):R.length&&(Q=B.getAudioLanguagesAndRoles()||[],R.forEach(function(X){var se;ee.push({id:X,language:((se=Q.find(function(te){return te.language===X}))==null?void 0:se.label)||X,enabled:X===H.language})})),this.trigger(o.Player.AudioTrackUpdated,{audioTracks:ee}))}).call(M),K.keySystem()===f.FairPlay?M.trigger(o.Player.LevelsLoaded,{levels:[{}]}):(N.call(M),L.call(M,K))}),K.addEventListener("adaptation",function(){K.keySystem()!==f.FairPlay&&L.call(M,K)}),this.tag.addEventListener("resize",function(){M._switchingDesc&&M.trigger(o.Private.Info_Show,{text:a.get("Quality_Change_Result")+"<span>"+M._switchingDesc+"</span>",duration:3e3,align:"lb"})})}function k(K,M){var q=this;if(console.log("to handle error of:",K,M,"this._isError",this._isError),this._isError)this.traceLog(g,"drm extra error ["+K+"]"+M+"}",!0);else{M=M||{};var ee={mediaId:this.getOptions().vid||"",error_code:"",error_msg:""};switch(K){case c.LoadJs:ee.error_code=s.ErrorCode.ModuleLoadError,ee.error_msg="drm player module load error."+((M==null?void 0:M.message)||"");break;case c.LoadSource:case c.PlayerError:ee.error_code=s.ErrorCode.DrmLoadError,ee.error_msg=a.get("Error_Drm_Load")+" | "+(y[M.code]||"")+" "+(Q=>{var B="";return B=Q.code===shaka.util.Error.Code.BAD_HTTP_STATUS?(Q==null||(Q=Q.data)==null?void 0:Q[1])||"":B})(M),ee.diagnosis_info=(Q=>{var B=shaka.util.Error.Code,R="",H=Q.data||[];switch(Q.code){case B.BAD_HTTP_STATUS:case B.HTTP_ERROR:case B.TIMEOUT:case B.LICENSE_REQUEST_FAILED:R=a.get("Tip_Drm_Request_Err")+C(H);break;case B.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case B.SESSION_TIMEOUT:window.isSecureContext?(R=a.get("Tip_Drm_Key_System_Unavailable"),H.length&&(R+="<br />"+a.get("Tip_Err_Common_Short")+H)):R=a.get("Tip_Drm_Secure_Context");break;case B.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(R=a.get("Tip_Drm_File_Not_Allowed"));break;case B.HLS_INVALID_PLAYLIST_HIERARCHY:R=a.get("Tip_Drm_Playlist_Hierarchy");break;case B.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:R=a.get("Tip_Drm_Info_Missing")}return Q=C(H),R||Q})(M),ee.shaka_error=M||{},M.code===shaka.util.Error.Code.LICENSE_REQUEST_FAILED&&console.log("LICENSE_REQUEST_FAILED => ",M.data[0]);break;case c.SupportError:ee.error_code=s.ErrorCode.DrmNotSupported,M._code==="no-secure-context"?ee.error_msg=a.get("Tip_Drm_Secure_Context"):(ee.error_msg=a.get("Error_Drm_Not_Supported"),ee.diagnosis_info=a.get("Tip_Drm_Unsupported"));break;case c.ParamsError:ee.error_code=s.ErrorCode.InvalidParameter,ee.error_msg=M.message||""}this.logError(ee),this.trigger(o.Player.Error,ee),shaka.Player.probeSupport().then(function(Q){q.traceLog(g,"probeSupport::"+JSON.stringify(Q),!0)}).catch(function(Q){q.traceLog(g,"probeSupport::"+Q,!0)})}}function I(K){var M={};return Object.keys(K).forEach(function(q){M[K[q]]=q}),M}function C(K){return a.get("Tip_Err_Common")+K}function L(){var K=(M=this._drm.getVariantTracks())==null?void 0:M.find(function(q){return q.active}),M=(this._qualityService.levels||[]).find(function(q){return q.Url===""+s.DASH_QUALITY_PROTOCOL+K.id});K&&M?this.trigger(o.Private.QualityChange,{levelSwitch:!0,desc:M.desc}):console.warn("no activeTrack or activeDisplayItem found",K,M)}function N(){var K=this._drm,M=K.getVariantTracks(),q=(ee=K.getVariantTracks())==null?void 0:ee.find(function(Q){return Q.active}),ee=(M=M.filter(function(Q){return Q.audioId===q.audioId})).map(function(Q){return{url:""+s.DASH_QUALITY_PROTOCOL+Q.id,width:Q.width,height:Q.height,bitrate:Q.bandwidth,attrs:{BANDWIDTH:Q.bandwidth,RESOLUTION:Q.width+"x"+Q.height}}});this.trigger(o.Player.LevelsLoaded,{levels:ee}),this.trigger(o.Private.SelectorGenerateList,{type:"quality"}),K.getConfiguration().abr.enabled||(M=(this._qualityService.levels||[]).find(function(Q){return Q.Url===""+s.DASH_QUALITY_PROTOCOL+q.id}))&&this.trigger(o.Private.SelectorValueChange,{type:"quality",text:M.desc})}function U(K){this.trigger(o.Private.Timeline,{name:K,ts:performance.now()})}function Y(){var K={},M=this.getOptions().drm||{},q=this._keySystem||((q=this._drm)==null?void 0:q.keySystem())||"";return q===f.Widevine?K=M.widevine||{}:q===f.FairPlay&&(K=M.fairplay||{}),K}function z(K,M){if((q=this.getOptions())==null||(q=q.drm)==null||!q.disableReportLicense){var q=M.data,M="";if(typeof q=="string")M=q;else if(q instanceof ArrayBuffer)try{M=new TextDecoder().decode(q)}catch(Q){console.log("error in decode license provider response",Q),M="[ArrayBuffer] decode error: "+Q}this.traceLog(g,"DRM-"+_[K]+"-response: "+M,!0)}}m.exports.inject=(()=>{var K=l(w().m(function M(q,ee,Q,B){var R;return w().w(function(H){for(;;)switch(H.n){case 0:(R=q)._baseType=Q,R._keySystem=null,R.initPlay=u.bind(R,B),R.play=h.bind(R),R.dispose=v.bind(R),R._getDrmTextTracks=E.bind(R),R._switchDrmTextTrack=S.bind(R),R._switchLevel=T.bind(R),R._switchAudioTrack=P.bind(R);case 1:return H.a(2)}},M)}));return function(M,q,ee,Q){return K.apply(this,arguments)}})(),m.exports.play=h,m.exports._switchLevel=T,m.exports._getTextTracks=E,m.exports._switchTextTrack=S,m.exports._switchAudioTrack=P,m.exports.updateLevelList=N,m.exports.logProviderResponse=z},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":84,"es6-promise":13}],119:[function(x,m,j){var w=x("../base/player"),p=x("./drminjector"),d=x("./drminjectorNg"),l=w.extend({init:function(n,t){t.useDrm2?d.inject(this,l,w.prototype,t):p.inject(this,l,w.prototype,t,function(e){}),t._native=!1,w.call(this,n,t)}});m.exports=l},{"../base/player":109,"./drminjector":117,"./drminjectorNg":118}],120:[function(x,m,j){(function(w){(function(){var p=x("../../lib/io"),d=x("../../config"),l=x("../../lib/constants"),n=x("../../lib/util"),t=x("../../lib/playerutil"),e=x("../../lib/ua"),a=x("../../lib/data"),o=x("../../lang/index"),s=x("../base/event/eventtype"),g="flvinjector.js";m.exports.inject=function(c,f,y,_,u,r){var h,v=_.source,T=_.optionFormat;function E(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(f.prototype.play=this._superPt.play,f.prototype.pause=this._superPt.pause,f.prototype.initPlay=this._superPt.initPlay,f.prototype.seek=this._superPt.seek,f.prototype.canSeekable=this._superPt.canSeekable))}function S(P){try{for(var b=P.buffered.length,k="Len:"+b+";",I=0;I<b;I++)k+="["+(I+1)+"]"+P.buffered.start(I)+"~"+P.buffered.end(I);return k}catch{}}(r||(_=v,r=T,!c._flv&&t.isFlv(_,r)&&t.isSupportFlv()))&&(c._Type=f,c._superType=y,c._superPt=y.prototype,c._disposed=!1,f.prototype._checkFlvReady=function(){return this._flv!=null||(console.warn("please invoke this method after ready event"),!1)},c._isFlv=!0,c._flv=null,c._isLoadedFlv=!1,c._dumpBuffer=null,f.prototype.play=function(P){if(this.traceLog(g,"play::"+P),P&&this.trigger(s.Private.ManualPlay),this._checkFlvReady())return this._isManualPlay=P||!1,this.trigger(s.Private.Cover_Hide),this._options.isLive&&P?this._loadByUrlInner(this._options.source,0,P):this.tag.ended||this._ended?this.replay():(this._seeking==0&&(P=0,this.tag.ended||this._ended||(P=this.getCurrentTime())==0&&(P=-1),P!=-1)&&this.seek(P),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},f.prototype.seek=function(P){if(this._checkFlvReady()){this._seeking=!0;var b=this.getDuration();b<=(P=Math.floor(P))&&(P=b);try{this._flv.currentTime=P}catch(k){console.log(k)}return this}},f.prototype.pause=function(P){if(this._checkFlvReady())return this._isManualPause=P||!1,this._flv.pause(),this},f.prototype.getProgramDateTime=function(){var P;if(this._checkFlvReady())return this._metadata?(P=(P=this._flv.getFirstSample())&&P.pts?P.pts:0,console.log(""+this._metadata.NtpTime),console.log("PTS"+P),this._metadata.NtpTime+P):""},f.prototype.initPlay=function(P){var b,k,I;function C(L,N){if(!L._disposed){var U=!L._flv,Y=(L._destroyFlv(),L._options.isLive);if(Y&&!flvjs.getFeatureList().networkStreamIO)return(q={error_code:l.ErrorCode.FormatNotSupport,error_msg:o.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=q.error_msg,void L.trigger(s.Player.Error,q);var z,K={isLive:Y,enableWorker:L._options.enableWorker,accurateSeek:!0},M=(e.IS_IE11&&(K.enableWorker=!1),{type:"flv",isLive:Y,url:L._options.source});for(z in Y?(K.enableStashBuffer=L._options.enableStashBufferForFlv,K.stashInitialSize=L._options.stashInitialSizeForFlv,K.autoCleanupSourceBuffer=!1):K.lazyLoadMaxDuration=600,K.statisticsInfoReportInterval=1e3,L._options.isLive&&(L._options.flvFrameChasing&&(K.flvFrameChasing=L._options.flvFrameChasing),L._options.chasingFirstParagraph&&(K.chasingFirstParagraph=L._options.chasingFirstParagraph),L._options.chasingSecondParagraph&&(K.chasingSecondParagraph=L._options.chasingSecondParagraph),L._options.chasingFirstSpeed&&(K.chasingFirstSpeed=L._options.chasingFirstSpeed),L._options.chasingSecondSpeed)&&(K.chasingSecondSpeed=L._options.chasingSecondSpeed),L._options.flvOption)z=="cors"||z=="hasAudio"||z=="withCredentials"||z=="hasVideo"||z=="type"?M[z]=L._options.flvOption[z]:K[z]=L._options.flvOption[z];flvjs.LoggingControl.enableAll=L._options.debug,L._flv=flvjs.createPlayer(M,K),h(L,L._flv),L._flv.on(flvjs.Events.DUMP_BUFFER,function(Q){var B,R,H;L._options.disableDumpBuffer||L._liveRetryCount===0&&L._vodRetryCount===0&&L._nudgeCount===0&&typeof L._dumpBuffer!="string"&&(L._flvDumpTimer||(L._flvDumpTimer=setTimeout(function(){L._reportDumpBuffer&&L._reportDumpBuffer()},5e3)),Q=new Uint8Array(Q),L._dumpBuffer?L._dumpBuffer=(B=L._dumpBuffer,R=Q,(H=new Uint8Array(B.length+R.length)).set(B),H.set(R,B.length),H):L._dumpBuffer=Q)});var q,ee=n.throttle(function(Q){L.traceLog(g,"dts_adjustment::"+Q.from+"->"+Q.to)},1e3);L._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(Q){ee(Q)}),L._flv.on(flvjs.Events.MEDIA_INFO,function(Q){L._metadata=Q.metadata}),L._flv.on(flvjs.Events.METADATA_ARRIVED,function(Q){Q&&Q.dataContent&&Q.dataContent.length&&L.trigger(s.Private.SeiFrame,{dataContent:Q.dataContent,pts:Q.pts})}),L._flv.on(flvjs.Events.STATISTICS_INFO,function(Q){L.trigger(s.Private.StatisticsInfo,Q)}),L._flv.attachMediaElement(L.tag),L._initPlayBehavior(N)&&((L._options.preload||L._options.autoplay)&&(L._hasLoaded=!0,L._flv.load()),L._options.autoplay&&!L.tag.paused&&L._flv.play(),u&&u(L._flv),U)&&(L._executeReadyCallback(),L._urls)&&0<L._urls.length&&(L._currentPlayIndex=t.findSelectedStreamLevel(L._urls,L._options.defaultDefinition),q=L._urls[L._currentPlayIndex],L._options.source=q.Url,L.trigger(s.Private.SourceLoaded,q))}}e.browser.safari&&this.trigger(s.Private.Snapshot_Hide),n.contentProtocolMixed(v,"",T)?((b={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=o.get("Request_Block_Text"),this.trigger(s.Player.Error,b)):(k=this)._isLoadedFlv&&typeof Hls<"u"?setTimeout(function(){C(k,P)},1e3):(this.trigger(s.Private.H5_Loading_Show),I=performance.now(),(function(L,N,U){var Y="aliplayer-flv-min.js",z="",z=d.domain?"https://"+d.domain+d.path+d.h5Version+"/flv/"+Y:"/build/flv/"+Y,K=(this._options.assetPrefix&&(z=this._options.assetPrefix+"/flv/"+Y),JSON.parse(w)&&(z="http://localhost:8000/dist/aliplayer-flv.js"),this);p.loadJS(z,function(){L.apply(K)},function(){U&&U()})}).call(k,function(){this.traceLog(g,"got js#"+parseInt(performance.now()-I)),this._isLoadedFlv=!0,C(this,P)},this._options.debug,function(){var L={mediaId:k._options.vid||"",mediaAuth:k._options.mediaAuth||"",error_code:l.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};k.trigger(s.Player.Error,L)}))},f.prototype._reportDumpBuffer=function(){var P,b;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&typeof this._dumpBuffer!="string"&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),P=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),P=n.arrayBufferToB64(P),b=a.guid(),this.traceLog(g,"dump::"+b),this.trigger(s.Private.DumpBuffer,{id:b,data:P}))},f.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(P){console.log(P)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},Object.defineProperty(f.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return E},set:function(){return E}}),f.prototype.canSeekable=function(P){var b;if(this._flv)return b=this._flv.mediaInfo,!(!this._flv._isTimepointBuffered(P)&&b&&!b.hasKeyframesIndex)},f.prototype._getbwEstimator=function(){var P;return 1024*((P=this._flv)==null||(P=P.statisticsInfo)==null?void 0:P.speed)*8},h=function(P,b){var k=!1;b.on(flvjs.Events.ERROR,function(I,C,L){var N,U,Y,z,K="flvjs-error::"+I+"#"+C+"#"+L.code+"#"+L.msg,M=L.msg==="BodyStreamBuffer was aborted"&&b._config.lazyLoad;if(M){K+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var q=b._msectl._sourceBuffers.video,ee=b._msectl._sourceBuffers.audio;K+="#Video buffer:"+S(q)+"#Audio buffer:"+S(ee)}catch{}}P.traceLog(g,K),P._reportDumpBuffer&&P._reportDumpBuffer(),I===flvjs.ErrorTypes.BUFFER_FULL||(P._flv.unload(),M)||P._isError||(N=l.ErrorCode.OtherError,U=o.get("Error_Play_Text"),Y=null,C==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(q=P.getOptions().source)||q.toLowerCase().indexOf("http://")!=0&&q.toLowerCase().indexOf("https://")!=0?(N=l.ErrorCode.InvalidSourceURL,U=o.get("Error_Invalidate_Source_Widthout_Protocal"),k=!0):U=navigator.onLine?(N=l.ErrorCode.RequestDataError,o.get("Maybe_Cors_Error")):(N=l.ErrorCode.NetworkError,o.get("Error_Network_Text")):C==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?L.code=="404"?(N=l.ErrorCode.NotFoundSourceURL,U=o.get("Error_Not_Found"),Y=o.get("Tip_Err_Not_found")):L.code=="403"?(N=l.ErrorCode.AuthKeyExpired,U=o.get("Error_AuthKey_Text"),k=!0):(N=l.ErrorCode.NetworkError,U=o.get("Error_Network_Text")):C==flvjs.ErrorDetails.NETWORK_TIMEOUT?(N=l.ErrorCode.LoadingTimeout,U=o.get("Error_Waiting_Timeout_Text")):C==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||C==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(N=l.ErrorCode.FormatNotSupport,U=o.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",k=!0):C===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(ee=P.tag.error)&&(N=l.VideoErrorCode[ee.code],U=ee.code+" || "+ee.message),K=function(){var Q;setTimeout(function(){P.trigger(s.Private.Play_Btn_Hide)}),P.checkOnline()&&(Q={mediaId:P._options&&P._options.vid?P._options.vid:"",error_code:N,error_msg:U,diagnosis_info:Y},P.logError(Q),Q.display_msg=U,d.cityBrain&&(P.flv=null),P.trigger(s.Player.Error,Q))},P._options&&P._options.isLive&&!k?(z=P._options).liveRetry>P._liveRetryCount?(P._liveRetryCount==0&&P.trigger(s.Player.OnM3u8Retry),I=z.liveRetryInterval+z.liveRetryStep*P._liveRetryCount,P._liveRetryCount++,setTimeout(function(){P._isError||P._liveRetryTimer||P._loadByUrlInner(z.source)},1e3*I)):(P.trigger(s.Player.LiveStreamStop),K()):C===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&L.code===11&&P.getCurrentTime()<P.getDuration()?(P._flv.unload(),P._flv.load(),P._flv.detachMediaElement(),P._flv.attachMediaElement(P.tag)):k?(P._flv.unload(),K()):P._reloadForVod()||K())})})}}).call(this)}).call(this,"false")},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/data":35,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":84}],121:[function(x,m,j){var w=x("../base/player"),p=x("./flvinjector"),d=w.extend({init:function(l,n){p.inject(this,d,w,n,function(t){}),n._native=!1,w.call(this,l,n)}});m.exports=d},{"../base/player":109,"./flvinjector":120}],122:[function(x,m,j){(function(w){(function(){function p(){return(p=Object.assign?Object.assign.bind():function(b){for(var k=1;k<arguments.length;k++){var I,C=arguments[k];for(I in C)!{}.hasOwnProperty.call(C,I)||(b[I]=C[I])}return b}).apply(null,arguments)}var d,l=x("../../lib/object"),n=x("../../lib/io"),t=x("../../config"),e=x("../../lib/constants"),a=x("../../lib/util"),o=x("../../lib/playerutil"),s=x("../../lib/ua"),g=x("../../lang/index"),c=x("../base/event/eventtype"),_=x("../../monitor-new/constants"),f=_.ERROR_ANALYZE_TYPE,y=_.ERROR_ANALYZE_TARGET,_=x("../../monitor-new/util"),u=_.getFragInfoFromHlsError,r=_.getSpeed,h="hlsinjector.js";function v(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function T(b){this.trigger(c.Private.Timeline,{name:b,ts:performance.now()})}function E(b,k){return k<b.maxNumRetry}var S={};function P(b,k){k.frag.level===this.currentLevel&&(this.off(d.Events.FRAG_BUFFERED,P),this.media.currentTime=this.media.currentTime+.01)}m.exports.inject=function(b,k,I,C,L,N){b._hls2=!1;var U,Y,z,K=C.source,M=C.optionFormat;((L||"").length||N||(N=K,U=C.useHlsPluginForSafari,C=C.useHlsPlugOnMobile,Y=M,!b._hls&&o.isHls(N,Y)&&(!o.canPlayHls()||o.isSafariUsedHlsPlugin(U)||C&&o.isUsedHlsPluginOnMobile())))&&(b._Type=k,b._superType=I,b._superPt=I.prototype,b._disposed=!1,b._isHls=!0,b._hls=null,b._isLoadedHls=!1,b._stopLoadAsPaused=!0,b._yekced_saved=L,b._latestHlsError=[],S.seek||(S.seek=I.prototype.seek),S.dispose||(S.dispose=I.prototype.dispose),b.initPlay=(function(q){var ee,Q;function B(R,H){if(!R._disposed){if(R._antiRecord&&(console.log("Manual check before load source"),R._antiRecord.check()))return;var X,se=!R._hls,te=(R._destroyHls(),{xhrSetup:function(J,ae){J.withCredentials=R._options.withCredentials||!1}}),oe=(R._hls2||(oe=R._options.loadingTimeOut||R._options.hlsLoadingTimeOut)&&(te.manifestLoadingTimeOut=oe,te.levelLoadingTimeOut=oe,te.fragLoadingTimeOut=oe),R._hls2&&(R._options.disableVodHalfRetry=!0,R._options.disableLiveHalfRetry=!0,te.manifestLoadPolicy=p({},d.DefaultConfig.manifestLoadPolicy),te.playlistLoadPolicy=p({},d.DefaultConfig.playlistLoadPolicy),te.fragLoadPolicy=p({},d.DefaultConfig.fragLoadPolicy),oe=R._options.isLive?R._options.liveRetry:R._options.vodRetry,te.manifestLoadPolicy.default.errorRetry.maxNumRetry=oe,R._options.isLive&&(te.manifestLoadPolicy.default.errorRetry.shouldRetry=E),te.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=oe,te.playlistLoadPolicy.default.errorRetry.maxNumRetry=oe,R._options.isLive&&(te.playlistLoadPolicy.default.errorRetry.shouldRetry=E),te.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=oe,te.fragLoadPolicy.default.maxLoadTimeMs=2e4,te.fragLoadPolicy.default.errorRetry.shouldRetry=E,(oe=R._options.hlsOption||{}).manifestLoadPolicy&&(te.manifestLoadPolicy=l.deepMerge(te.manifestLoadPolicy,oe.manifestLoadPolicy),delete oe.manifestLoadPolicy),oe.playlistLoadPolicy&&(te.playlistLoadPolicy=l.deepMerge(te.playlistLoadPolicy,oe.playlistLoadPolicy),delete oe.playlistLoadPolicy),oe.fragLoadPolicy&&(te.fragLoadPolicy=l.deepMerge(te.fragLoadPolicy,oe.fragLoadPolicy),delete oe.fragLoadPolicy),R._options.isLive)&&!s.IS_IE11&&(te.backBufferLength=12,te.liveDurationInfinity=!0),R._options.isLive&&(R._options.hlsFrameChasing&&(te.hlsFrameChasing=R._options.hlsFrameChasing),R._options.chasingFirstParagraph&&(te.chasingFirstParagraph=R._options.chasingFirstParagraph),R._options.chasingSecondParagraph&&(te.chasingSecondParagraph=R._options.chasingSecondParagraph),R._options.chasingFirstSpeed&&(te.chasingFirstSpeed=R._options.chasingFirstSpeed),R._options.chasingSecondSpeed)&&(te.chasingSecondSpeed=R._options.chasingSecondSpeed),R._options.defaultBandwidth&&(te.defaultBandwidth=R._options.defaultBandwidth),R._options.hlsBandWidthUpCacheTime&&(te.abrBandWidthUpCacheTime=R._options.hlsBandWidthUpCacheTime),R._options.seamlessHandover&&(te.seamlessHandover=R._options.seamlessHandover),R._options.liveSyncDurationCount&&(te.liveSyncDurationCount=R._options.liveSyncDurationCount),R._options.nudgeMaxRetry&&(te.nudgeMaxRetry=R._options.nudgeMaxRetry),R._options.maxMaxBufferLength&&(te.maxMaxBufferLength=R._options.maxMaxBufferLength),R._options.maxBufferSize&&(te.maxBufferSize=R._options.maxBufferSize),R._options.fragLoadingRetryDelay&&(te.fragLoadingRetryDelay=R._options.fragLoadingRetryDelay),R._options.maxBufferLength&&(te.maxBufferLength=R._options.maxBufferLength),typeof((oe=R._options.startQuality)==null?void 0:oe.index)=="number"&&(te.startLevel=(oe=R._options.startQuality)==null?void 0:oe.index),R._options.accessKeyId&&(te.accessKeyId=R._options.accessKeyId),R._options.accessKeySecret&&(te.accessKeySecret=R._options.accessKeySecret),R._options.securityToken&&(te.securityToken=R._options.securityToken),R._options.app&&(te.app=R._options.app),R._options.stream&&(te.stream=R._options.stream),R._options.domain&&(te.domain=R._options.domain),R._options.regionId&&(te.regionId=R._options.regionId),R._yekced_saved&&(R._hls2?te._vpk=R._yekced_saved:te._yekcedxx=R._yekced_saved),te.enableWorker=R._options.enableWorker,te.debug=R._options.debug,R._stopLoadAsPaused=R._options.hlsOption.stopLoadAsPaused,R._getPlayStartTime()+R._posOffset);for(X in oe&&!R._options.isLive&&(te.startPosition=oe,console.log("hls.js startPosition => ",oe)),R._options.hlsOption)te[X]=R._options.hlsOption[X];s.IS_IE11&&(te.enableWorker=!1),R._hls=new d(te),z(R,R._hls),R._loadSourced=!1,R._hls.attachMedia(R.tag),R._hls.on(d.Events.INIT_PTS_FOUND,function(J,ae){R._initPTS=ae.initPTS}),R._hls.on(d.Events.FRAG_LOADING,function(){T.call(R,"frag_s")}),R._hls.on(d.Events.FRAG_LOADED,function(){T.call(R,"frag_f")}),R._hls.on(d.Events.FRAG_PARSED,function(){T.call(R,"frag_parsed")}),R._hls.on(d.Events.FRAG_PARSED,function(J,ue){var ue=(ue==null?void 0:ue.frag)||{},ge=ue.elementaryStreams||{},_e="Frag(sn"+ue.sn+"): "+((_e=ue.startPTS)==null?void 0:_e.toFixed(3))+" -> "+((_e=ue.endPTS)==null?void 0:_e.toFixed(3))+"(v:"+((_e=ge.video)==null||(_e=_e.startPTS)==null?void 0:_e.toFixed(3))+"/"+((_e=ge.video)==null||(_e=_e.endPTS)==null?void 0:_e.toFixed(3))+";a:"+((_e=ge.audio)==null||(_e=_e.startPTS)==null?void 0:_e.toFixed(3))+"/"+((_e=ge.audio)==null||(_e=_e.endPTS)==null?void 0:_e.toFixed(3))+"); Duration: "+((ge=ue.duration)==null?void 0:ge.toFixed(3));R.trackLogFragBuffer&&(R.trackLogFragBuffer.push(_e),10<R.trackLogFragBuffer.length)&&R.trackLogFragBuffer.shift()}),R._hls.on(d.Events.FRAG_PARSING_USERDATA,function(J,ae){ae&&ae.dataContent&&ae.dataContent.length?R.trigger(c.Private.SeiFrame,{dataContent:ae.dataContent,pts:ae.pts}):ae.samples.forEach(function(ue){R.trigger(c.Private.SeiFrame,{dataContent:ue.userDataBytes,dataContentString:ue.userData,pts:ue.pts,uuid:ue.uuid})})}),R._hls.on(d.Events.MEDIA_ATTACHED,function(){var J;R._hls.on(d.Events.MANIFEST_PARSED,function(){R._initPlayBehavior(H||R._loadSourced)}),R._hls.on(d.Events.AUDIO_TRACKS_UPDATED,function(ae,ue){R.trigger(c.Player.AudioTrackUpdated,ue)}),R._hls.on(d.Events.MANIFEST_LOADED,function(ae,ue){R.trigger(c.Player.LevelsLoaded,ue)}),R._hls.once(d.Events.LEVEL_SWITCHED,function(){R.getOptions().enableABR||(R._hls.nextLevel=R._hls.currentLevel)}),R._hls.on(d.Events.LEVEL_SWITCHED,function(ae,ue){if(R._qualityService){for(var ge=R._hls.levels[ue.level].url,_e=R._qualityService.levels,Se="",xe="",Pe=0;Pe<_e.length;Pe++)if(_e[Pe].Url==ge){xe=_e[Pe].desc,Se=_e[Pe].bitrate;break}(xe||Se)&&(R._hls.autoLevelEnabled&&R._monitor2.abrQualityFinish({url:ge,bitrate:Se,desc:xe}),R.trigger(c.Private.QualityChange,{levelSwitch:!0,autoLevel:R._hls.autoLevelEnabled,url:ge,bitrate:Se,desc:xe}))}}),R._hls.on(d.Events.AUDIO_TRACK_SWITCH,function(ae,ue){R.trigger(c.Player.AudioTrackSwitch,ue),setTimeout(function(){R.trigger(c.Player.AudioTrackSwitched,ue)},1e3)}),(R._options.autoplay||R._options.preload||H)&&(R._loadSourced=!0,R._levels&&1<R._levels.length?(R._hls.trigger(d.Events.MANIFEST_LOADING,{}),R._hls.trigger(d.Events.MANIFEST_LOADED,{levels:R._levels})):R._hls.loadSource(R._options.source||"__INVALID__")),se?(R._executeReadyCallback(),R._urls&&0<R._urls.length&&(R._currentPlayIndex=o.findSelectedStreamLevel(R._urls,R._options.defaultDefinition),J=R._urls[R._currentPlayIndex],R._options.source=J.Url,R.trigger(c.Private.SourceLoaded,J))):R.trigger(c.Private.H5_Loading_Show)})}}this.trigger(c.Private.H5_Loading_Show),a.contentProtocolMixed(K,"",M)?(ee=this.getOptions()||{},(ee={mediaId:ee.vid||"",mediaAuth:ee.mediaAuth||"",error_code:e.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=g.get("Request_Block_Text"),this.trigger(c.Player.Error,ee)):(Q=this)._isLoadedHls&&d!==void 0?B(this,q):(this.trigger(c.Private.H5_Loading_Show),this._getHlsVersion(function(R){var H=performance.now();(function(X,se,te){var oe="aliplayer-hls-min.js",J=((se=se||{}).hls2&&(oe="aliplayer-hls2-min.js"),se.enableHlsH265&&(oe="aliplayer-hls2-hevc-min.js"),""),J=t.domain?"https://"+t.domain+t.path+t.h5Version+"/hls/"+oe:"/build/hls/"+oe,ae=(se.assetPrefix&&(J=se.assetPrefix+"/hls/"+oe),JSON.parse(w)&&(J="http://localhost:8080/dist/aliplayer-hls2.js"),T.call(this,"mod_hls_s"),this);n.loadJS(J,function(){T.call(ae,"mod_hls_f"),d=window.AliHls||window.Hls,X.apply(ae)},function(){te&&te()})}).call(Q,function(){Q.traceLog(h,"got js#"+parseInt(performance.now()-H)),Q._isLoadedHls=!0,B(Q,q)},{debug:Q._options.debug,hls2:Q._hls2,assetPrefix:Q._options.assetPrefix,enableHlsH265:Q._options.enableHlsH265},function(){var X={mediaId:Q._options.vid||"",mediaAuth:Q._options.mediaAuth||"",error_code:e.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};Q.trigger(c.Player.Error,X)})}),this.on("error",v))}).bind(b),b.seek=(function(q){if(this._checkHlsReady()){try{S.seek.call(this,q),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(q)}catch(ee){console.log(ee)}return this}}).bind(b),b.pause=(function(q){if(this.tag){if(!this._checkHlsReady())return;this.tag.pause(),this._stopLoadAsPaused&&this._hls.stopLoad()}return this._isManualPause=q||!1,this}).bind(b),b.play=(function(q){if(this.traceLog(h,"play::"+q),q&&this.trigger(c.Private.ManualPlay),this._checkHlsReady())return this._isManualPlay=q||!1,this.trigger(c.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(q=this.getCurrentTime(),this._hls.startLoad(q)),this}).bind(b),b.stop=(function(){if(this._checkHlsReady())return this.tag.setAttribute("src",null),this._hls.stopLoad(),this}).bind(b),b.dispose=(function(){this._disposed||(this._disposed=!0,S.dispose.call(this),this._destroyHls())}).bind(b),b.getCurrentPDT=(function(){var q,ee,Q;if(this._checkHlsReady())return this._hls.currentLevel==-1?"":this._hls.playingDate?this._hls.playingDate.getTime():(ee=this._hls.streamController.fragPlaying||{},(q=ee.pdt)?(ee=1e3*ee.startPTS,Q=1e3*this.getCurrentTime(),q+(Q-ee)):0)}).bind(b),b.getProgramDateTime=(function(){if(this._checkHlsReady()){if(this._hls.currentLevel==-1)return"";var q=this._hls.currentLevel,q=this._hls.levels[q].details;return q&&(q=q.programDateTime,q)?new Date(q).valueOf():0}}).bind(b),b._checkHlsReady=(function(){return this._hls!=null||(console.warn("please invoke this method after ready event"),!1)}).bind(b),b._getHlsVersion=(function(q){this._options.useHls2===!0?(this._hls2=!0,q()):this._options.useHls2===!1&&q()}).bind(b),b._getbwEstimator=(function(){var q=NaN;{var ee;this._hls&&(ee=this._hls.abrController._bwEstimator,q=ee?ee.getEstimate():this._hls.bandwidthEstimate)}return q}).bind(b),b._destroyHls=(function(){this._hls&&this._hls.destroy(),this._hls=null,this.trackLogFragBuffer=[]}).bind(b),b._switchLevel=(function(q){for(var ee=this,Q=(this.traceLog(h,"switchLevel::"+q),this.trigger(c.Player.LevelSwitch),this._hls.levels),B=!0,R=0;R<Q.length;R++)if(Q[R].url==q||Q[R].url[0]==q){B=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=R,console.log("Seamlessly set nextLevel to",R)):(this._hls.on(d.Events.FRAG_BUFFERED,P),this._hls.currentLevel=R,console.log("Immediately set currentLevel to",R));break}B&&(this._hls.on(d.Events.FRAG_BUFFERED,P),this._hls.currentLevel=-1),this._switchedLevel=!0,setTimeout(function(){ee.trigger(c.Player.LevelSwitched),ee._switchedLevel=!1},1e3)}).bind(b),b._pushLatestHlsError=(function(q){var ee;((ee=this._latestHlsError)==null?void 0:ee.length)===3&&this._latestHlsError.shift(),(ee=this._latestHlsError)!=null&&ee.push(q)}).bind(b),z=function(q,ee){ee.on(d.Events.MANIFEST_LOADING,function(){T.call(q,"mani_s")}),ee.on(d.Events.MANIFEST_LOADED,function(){T.call(q,"mani_f")}),ee.on(d.Events.DEFAULT_BANDWIDTH,function(Q,B){q.trigger(c.Player.DefaultBandWidth,{width:B.width,height:B.height,bitrate:B.bitrate})}),ee.on(d.Events.ERROR,function(Q,B){q._pushLatestHlsError(B);var R="hlsjs-error::"+B.type+"#"+B.details+"#"+((R=B.networkDetails)==null?void 0:R.status)+"#"+B.reason+"#bw:"+(q._getbwEstimator()/8/1024).toFixed(2)+"KB";if(B.details==="manifestParsingError")try{R+="#"+B.networkDetails.getResponseHeader("Content-Type")+"#"+B.networkDetails.getResponseHeader("Content-Length")}catch{}else if(B.details==="fragLoadError"||B.details==="fragLoadTimeOut")R+="#"+B.frag.url+"#retry:"+((ge=B.errorAction)==null?void 0:ge.retryCount),((ge=B.errorAction)==null?void 0:ge.retryCount)===3?R+="#retryCount more than 3 will not log any more.":3<((ge=B.errorAction)==null?void 0:ge.retryCount)&&(R+="__SHOULD_SKIP_LOG__");else if(B.details==="internalException")try{R+="#"+B.event+"#"+((Se=B.error)==null?void 0:Se.message)+"#"+((X=B.error)==null?void 0:X.stack)}catch{}B.details!=="internalException"&&(R+="#"+B.error);try{R+="#"+(q==null||(se=q.trackLogFragBuffer)==null?void 0:se.toString())}catch{}if(R.includes("__SHOULD_SKIP_LOG__")||q.traceLog(h,R,!0),q._options&&B.details!=d.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&q._seeking!=1&&B.fatal!=0){q._clearTimeout();var H,X,se,te=e.ErrorCode.RequestDataError,oe=g.get("Error_Play_Text"),J=!1,ae=null,ue={target:null,type:null},ge=!1,Se=new RegExp("("+y.FRAG+"|"+y.MANIFEST+")","gi"),_e=(ue.target=(X=B.details.match(Se))==null?void 0:X[0],ue.speed=r(q._getbwEstimator()),ue.target===y.MANIFEST?ue.manifestUrl=B.url:ue.target===y.FRAG&&(ue=p({},ue,u(B))),B.details==d.ErrorDetails.MANIFEST_LOAD_ERROR||B.details==d.ErrorDetails.LEVEL_LOAD_ERROR?(J=!0,se=B.networkDetails,H=Number(se.status),q.liveShiftSerivce&&q.liveShiftSerivce.isLiveShiftPlaying()&&H===404?(te=e.ErrorCode.NotFoundSourceURL,oe=g.get("Error_Liveshift_M3U8_Not_Found_Text"),ge=!0):H===404?(te=e.ErrorCode.NotFoundSourceURL,oe=g.get("Error_Not_Found"),ae=g.get("Tip_Err_Not_found")):H===403?(R=o.parseHttpHeaders(se)["x-tengine-error"])&&-1<e.RegionBlockMessages.indexOf(R)?(te=e.ErrorCode.RegionBlock,oe=g.get("Error_Region_Block_Text"),ae=g.get("Tip_Err_Blocked")):(te=e.ErrorCode.UrlForbidden,oe=g.get("Error_AuthKey_Text")):H===0&&navigator.onLine?(te=e.ErrorCode.RequestDataError,oe=oe+""+g.get("Maybe_Cors_Error")):(oe=g.get("Error_Load_M3U8_Failed_Text"),ue.type=f.FAILURE)):B.details==d.ErrorDetails.MANIFEST_LOAD_TIMEOUT||B.details==d.ErrorDetails.LEVEL_LOAD_TIMEOUT?(J=!0,oe=g.get("Error_Load_M3U8_Timeout_Text"),ue.type=f.TIMEOUT):B.details==d.ErrorDetails.MANIFEST_PARSING_ERROR||B.details==d.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(J=!0,oe=g.get("Error_M3U8_Decode_Text")):B.type==d.ErrorTypes.NETWORK_ERROR?Number((Se=B.networkDetails)==null?void 0:Se.status)===403?(te=e.ErrorCode.UrlForbidden,oe=g.get("Error_AuthKey_Text")):(te=e.ErrorCode.RequestDataError,oe=g.get("Error_Network_Text"),ue.type=f.FAILURE):B.type!=d.ErrorTypes.MUX_ERROR&&B.type!=d.ErrorTypes.MEDIA_ERROR||(te=e.ErrorCode.PlayDataDecode,oe=g.get("Error_TX_Decode_Text"),ue.fragList=q.trackLogFragBuffer,(X=B.details).includes("bufferStalledError")?ue.type=f.BUFFER_STALLED:X.includes("bufferAppendError")&&((se=q._latestHlsError)!=null&&se.some(function(Pe){return/Attempting to append to the [^ ]+ SourceBuffer, but it does not exist/i.test((Pe=Pe.error)==null?void 0:Pe.message)})?(ue.type=f.BUFFER_APPEND_NOT_EXIST,B.details+=", unexpected new video/audio track which is not matched with first fragment"):(R=q._latestHlsError)!=null&&R.some(function(Pe){return/bufferAddCodecErrormediaError|DECODER_ERROR_NOT_SUPPORTED/i.test((Pe=Pe.error)==null?void 0:Pe.message)})?ue.type=f.BUFFER_APPEND_NOT_SUPPORT_CODEC:ue.type=f.BUFFER_APPEND_OTHER)),oe=oe+"("+B.details+")",function(){var Pe;setTimeout(function(){q.trigger(c.Private.Play_Btn_Hide)}),q.checkOnline()&&(Pe={mediaId:(Pe=q.getOptions()||{}).vid||"",mediaAuth:Pe.mediaAuth||"",error_code:te,error_msg:B.details,diagnosis_info:ae,analyze:ue},q.logError(Pe),Pe.display_msg=oe,q.trigger(c.Player.Error,Pe))}),Se=function(){q._liveErrorHandle&&clearTimeout(q._liveErrorHandle),ee.stopLoad(),q.trigger(c.Player.LiveStreamStop),q._liveErrorHandle=setTimeout(_e,500)},xe=q._options;if(xe.isLive&&ge)Se();else if(q._hls2){if(J&&xe.isLive)if(xe.hlsOption.progressive){if(xe.liveRetry>q._liveRetryCount)return q._liveRetryCount==0&&q.trigger(c.Player.OnM3u8Retry),q.trigger(c.Private.H5_Loading_Show),q._hls.stopLoad(),q._liveRetryCount++,void setTimeout(function(){q.traceLog(h,"retry when live error in progressive mode#"+q._liveRetryCount),q._hls.loadSource(xe.source)},1e3*q._liveRetryCount)}else((X=B.errorAction)==null?void 0:X.retryCount)===0&&q.trigger(c.Player.OnM3u8Retry);B.fatal&&Se()}else xe.isLive?xe.liveRetry>q._liveRetryCount?(q._liveRetryCount==0&&q.trigger(c.Player.OnM3u8Retry),se=xe.liveRetryInterval+xe.liveRetryStep*q._liveRetryCount,q._liveRetryCount++,q.trigger(c.Private.H5_Loading_Show),setTimeout(function(){J&&q._loadByUrlInner(q._options.source,0,!0)},1e3*se)):Se():(J&&-1<[403,404].indexOf(H)||!q._reloadForVod())&&_e()}})})}}).call(this)}).call(this,"false")},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/object":47,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../monitor-new/constants":67,"../../monitor-new/util":77,"../base/event/eventtype":84}],123:[function(x,m,j){var w=x("../base/player"),p=x("./hlsinjector"),d=w.extend({init:function(l,n){n._native=!1,p.inject(this,d,w,n),w.call(this,l,n)}});m.exports=d},{"../base/player":109,"./hlsinjector":122}],124:[function(x,m,j){var w=["extraInfo"];function p(){return(p=Object.assign?Object.assign.bind():function(u){for(var r=1;r<arguments.length;r++){var h,v=arguments[r];for(h in v)!{}.hasOwnProperty.call(v,h)||(u[h]=v[h])}return u}).apply(null,arguments)}var d=typeof Promise>"u"?x("es6-promise").Promise:Promise,l=x("../../lib/io"),n=x("../../config"),t=x("../../lib/constants"),e=x("../../lang/index"),a=x("../base/event/eventtype"),o=x("../../lib/ua"),s=x("../base/event/eventtype"),g=x("../../lib/playerutil"),c="rtsinjector.js";function f(u){var r,h,v,T,E=this._options;E.rtsFallback&&window.Aliplayer?((r=E.rtsFallbackSource)||((h=String(E.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(h)&&(console.warn("invalid rtsFallbackType:",E.rtsFallbackType,", will use flv -> hls as fallback"),h=""),h=h||(g.isSupportFlv()?"FLV":"HLS"),T=E.source,v=!T.includes("@subvideo=no"),T=!T.includes("@subaudio=no"),T=(v={enableVideo:v,enableAudio:T}).enableVideo,v=v.enableAudio,h==="FLV"?(E.flvOption=E.flvOption||{},v||(E.flvOption.hasAudio=!1),T||(E.flvOption.hasVideo=!1)):h!=="HLS"||v||(E.mute=!0),r=((S,b)=>{var b=b==="FLV"?"flv":"m3u8",k=window.location.protocol,k=(-1<["http:","https:"].indexOf(k)?k:"https:")+"//";return(S=S.replace("artc://",k).replace("?","."+b+"?").replace("@subvideo=no","").replace("@subaudio=no","")).includes("?")||(S+="."+b),S.includes("auth_key")&&(S+="&rts_degrade=on"),S})(E.source,h)),T={reason:u,fallbackUrl:r},this.trigger(a.Player.RtsFallback,T),this._monitor2.rtsFallback(T),this.loadByUrl(r)):(this.trigger(a.Player.Error,u),this.logError(u))}function y(u){var r=this,h=(this.trigger(a.Private.H5_Loading_Show),this.trigger(a.Private.Play_Btn_Hide),this._options),v=new _(r,u);return r._rts.subscribe(h.source,p({retryTimes:h.rtsFallback?1:void 0,mediaTimeout:h.rtsLoadDataTimeout},h.rtsOption||{})).then(function(T){return v.preProcess(),r.tag.srcObject=null,T.play(r.tag),o.IS_IOS&&Number(o.IOS_VERSION)<=14&&r.one(s.Player.TimeUpdate,function(){setTimeout(function(){r.tag.pause(),r.tag.play()},200)}),!0}).catch(function(T){return r.traceLog(c,"subError::"+JSON.stringify(T)),!1})}m.exports.inject=function(u,r,h,v,T,E){function S(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts())}u._Type=r,u._superType=h,u._superPt=h.prototype,u._disposed=!1,r.prototype._checkRtsReady=function(){return this._rts!=null||(console.warn("please invoke this method after ready event"),!1)},u._isRts=!0,u._rts=null,u._isLoadedRts=!1,u.bind_rtsErrorEventHandler=null,u.bind_rtsReconnectEventHandler=null,r.prototype.play=function(P){if(this.traceLog(c,"play::"+P),P&&this.trigger(a.Private.ManualPlay),this._checkRtsReady()&&(this._isManualPlay=P||!1,this.paused()))return this.trigger(a.Private.Cover_Hide),this.trigger(a.Private.Play_Btn_Hide),this.tag.play(),y.call(this),this},r.prototype.seek=function(P){},r.prototype.setSpeed=function(P){},r.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},Object.defineProperty(r.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return S},set:function(){return S}}),r.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},r.prototype.initPlay=function(P){var b,k=this;function I(C,L){var N;C._disposed||(N=!C._rts,C._destroyRts(),C._rts=new AliRTS.createClient({customReporter:function(U){if(Number(U.msgid)===126){var Y={};try{Y=JSON.parse(U.args)}catch{Y={}}Y.tcid&&C._rts&&(C._rts.traceid=Y.tcid,C.traceLog(c,"tcid::"+Y.tcid,!0),C.trigger(a.Player.RtsTraceId,{traceId:Y.tcid,source:C._options.source}))}}}),C._checkRtsSupport(function(U){(function(Y){var z=this._rtsErrorEventHandler.bind(this),z=(this.bind_rtsErrorEventHandler=z,Y.on("onError",z),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=z,Y.on("reconnect",z)}).call(C,C._rts),C._options.autoplay?y.call(C).then(function(Y){Y&&C._initPlayBehavior(L)}):C._initPlayBehavior(L),N&&C._executeReadyCallback()},function(U){console.log("[RTS isSupport error]",U);var Y=null,z=null;switch(Number(U.errorCode)){case 10110:Y=t.ErrorCode.RtsNotSupportWebRtc,z=e.get("Rts_Err_Not_Support_Webrtc");break;case 10111:Y=t.ErrorCode.RtsBrowserNotSupport,z=e.get("Rts_Err_Browser_Not_Support");break;case 10112:Y=t.ErrorCode.RtsBrowserVersionTooLow,z=e.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:Y=t.ErrorCode.RtsNotSupportH264,z=e.get("Rts_Err_Not_Support_H264");break;case 10114:Y=t.ErrorCode.RtsCreateOfferError,z=e.get("Rts_Err_Create_Offer_Error")}return f.call(C,{error_code:Y,error_msg:z}),!1}))}this._isLoadedRts?I(this,P):(this.trigger(a.Private.H5_Loading_Show),b=performance.now(),(function(C,L,N){var Y="",U=this._options,Y="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(U.rtsVersion||n.rtsVersion)+"/aliyun-rts-sdk.js",z=(U.assetPrefix&&(Y=U.assetPrefix+"/rts/aliyun-rts-sdk.js"),U.rtsSdkUrl&&(Y=U.rtsSdkUrl),this);l.loadJS(Y,function(){C.apply(z)},function(){N&&N()})}).call(k,function(){this.traceLog(c,"got js#"+parseInt(performance.now()-b)),this._isLoadedRts=!0,I(this,P)},this._options.debug,function(){var C={error_code:t.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};k.trigger(a.Player.Error,C)}))},r.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?d.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(I){var b=I[0],k=I[1],I=I[2];return{rtt:b.rtt,bytesReceived:b.bytesReceived,framesDecoded:k.framesDecoded,packetsLost:(k.packetsLost||0)+(I.packetsLost||0),packetsReceived:(k.packetsReceived||0)+(I.packetsReceived||0),timestamp:b.timestamp||Date.now()}}).catch(function(P){return console.log("ERR in RTS getstats: ",P),{}}):d.resolve()},r.prototype._checkRtsSupport=function(P,b){this._options.skipRtsSupportCheck?P():this._rts.isSupport({isReceiveVideo:!0}).then(P).catch(b)},r.prototype._rtsErrorEventHandler=function(P){console.log("RTS Error:",P),P.extraInfo;var b=((z,K)=>{if(z==null)return{};var M,q={};for(M in z)if({}.hasOwnProperty.call(z,M)){if(K.indexOf(M)!==-1)continue;q[M]=z[M]}return q})(P,w),k=(this.traceLog(c,"rtsError::"+JSON.stringify(b)),null),I=null,C=null;switch(Number(P.errorCode)){case 10201:return;case 10101:k=t.ErrorCode.RtsSignalError,I=e.get("Rts_Err_Http_Signal_Error");break;case 10114:k=t.ErrorCode.RtsCreateOfferError,I=e.get("Rts_Err_Create_Offer_Error");break;case 10202:k=t.ErrorCode.RtsPlayUrlError,I=e.get("Rts_Err_Play_Url_Error");break;case 10203:k=t.ErrorCode.RtsSubscribeNonthing,I=e.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var L=(L=P.extraInfo)==null?void 0:L.response;if((L==null?void 0:L.status)===403){var N=L.headers["x-tengine-error"];if(N&&-1<t.RegionBlockMessages.indexOf(N)){k=t.ErrorCode.RegionBlock,I=e.get("Error_Region_Block_Text"),C=e.get("Tip_Err_Blocked");break}k=t.ErrorCode.UrlForbidden,I=e.get("Error_AuthKey_Text")}else C=(L==null?void 0:L.status)===404?(k=t.ErrorCode.NotFoundSourceURL,I=e.get("Error_Not_Found"),e.get("Tip_Err_Not_found")):(k=t.ErrorCode.RtsHttpRequestFaild,I=e.get("Rts_Err_Http_Request_Failed"),e.get("Tip_Err_Rts_Http_Failed"));break;case 10206:k=t.ErrorCode.RtsHttpAnswerFaild,I=e.get("Rts_Err_Http_Answer_Failed");break;case 10207:k=t.ErrorCode.RtsPlayFailedError;try{var U,Y=(U=P.message.match(/after (\d+) ms/))==null?void 0:U[1]}catch{}I=e.get("Rts_Err_Play_Failed")+", "+(Y?Y*P.extraInfo.retryTimes/1e3+e.get("Rts_Err_No_Data_For"):P.message);break;case 12e3:k=t.ErrorCode.RtsPeerConnectionUnknown,I=e.get("Rts_Err_PeerConnection_Unknown")}b={error_code:k,error_msg:I,diagnosis_info:C,tcid:this._rts.traceid},(function(z){this.pause(),this.trigger(a.Private.Play_Btn_Hide),this.checkOnline()&&f.call(this,z)}).call(this,b)},r.prototype._rtsReconnectEventHandler=function(P){var b=this;this.traceLog(c,"rts auto reconnect::"+P.retryTimes+"#"+JSON.stringify(P.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(a.Private.H5_Loading_Show),this.trigger(a.Private.Play_Btn_Hide),this._options.autoplay&&this.one(s.Player.AutoPlayPrevented,function(){b.trigger(a.Private.Play_Btn_Hide),b.trigger(a.Private.H5_Loading_Show)}),P.retryTimes===1&&this.trigger(a.Player.OnM3u8Retry),this.trigger(a.Private.Retry,{type:"rts",source:this._options.source})}};var _=(()=>{function u(r,h){(this.isRetry=h)&&(this.isApple=o.IS_IOS||o.IS_SAFARI,this.player=r)}return u.prototype.preProcess=function(){var r,h,v;this.isRetry&&this.isApple&&(r=this.player.getVolume(),h=this.player.muted(),r)&&!h&&((v=this.player.tag).volume=0,this.player.one("canplay",function(){v.volume=r}))},u})()},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../base/event/eventtype":84,"es6-promise":13}],125:[function(x,m,j){var w=x("../base/player"),p=x("./rtsinjector"),d=w.extend({init:function(l,n){n.isLive&&(n._native=!1,p.inject(this,d,w,n),w.call(this,l,n))}});m.exports=d},{"../base/player":109,"./rtsinjector":124}],126:[function(p,m,j){var w=p("../../lib/constants"),p=p("../../lib/oo").extend({init:function(d){this.player=d,this.tickhandle=null}});p.prototype.tick=function(d,l){var n=this;this.tickhandle=setTimeout(function(){n.player&&n.player.trigger(w.AuthKeyExpiredEvent),l&&l()},1e3*d)},p.prototype.clearTick=function(d){this.tickhandle&&clearTimeout(this.tickhandle)},m.exports=p},{"../../lib/constants":33,"../../lib/oo":48}],127:[function(x,m,j){function w(_,u,r){var v=n.randomUUID(),h="https://mts."+_.domainRegion+".aliyuncs.com/?",v={AccessKeyId:_.accessId,Action:"GetLicense",MediaId:_.vid,LicenseUrl:h,data:_.data,SecurityToken:_.stsToken,Format:"JSON",Type:_.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:v};_.header&&(v.Header=_.header),h+="Signature="+n.AliyunEncodeURI(n.makeChangeSiga(v,_.accessSecret,"POST")),_=n.makeUTF8sort(v,"=","&"),p.post(h,_,function(T){T?(T=JSON.parse(T),u&&(T=T.License,u(T))):r&&r(t.createError("MPSLicense"))},function(T){if(r){var E={Code:"",Message:o.get("Error_MTS_Fetch_Urls_Text")};try{E=JSON.parse(T)}catch{}r({Code:l.ErrorCode.ServerAPIError,Message:E.Code+"|"+E.Message,sri:E.RequestId||""})}})}var p=x("../../lib/io"),d=(x("../../lib/ua"),x("../../lib/bufferbase64")),l=x("../../lib/constants"),n=x("./signature"),t=x("./util"),e=x("../../lib/url"),a=x("../../lib/playerutil"),o=x("../../lang/index"),s=x("../base/event/eventtype");function g(_){window.console.error("The license request failed.")}function c(_){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",_)}function f(_){window.console.log("Decryption key was added to session.")}function y(_,u,r){r.addEventListener(_,function(){u(arguments[0])},!1)}m.exports.requestLicenseKey=function(_){var u=_;return u._options.vid&&(u.__vid=u._options.vid),function(r,h){var v,T,E=u._options,S=u._getDRMEncryptItem();S&&(v={vid:u.__vid,accessId:E.accId,accessSecret:E.accSecret,stsToken:E.stsToken,domainRegion:E.domainRegion,authInfo:E.authInfo,encryptionType:S.encryptionType},S.encryptionType==l.EncryptionType.Widevine?v.data=d.encode(r.message):S.encryptionType==l.EncryptionType.PlayReady&&(E=d.unpackPlayReady(r.message),v.data=E.changange,E.header)&&(v.header=JSON.stringify(E.header)),console.log(v.data),r=u.__licenseKeys,T=u.__vid+S.Url,r&&r[T],w(v,function(P){u.__licenseKeys||(u.__licenseKeys={}),10<v.data.length&&(u.__licenseKeys[T]=P),P=d.decode(P),h(P)},function(P){P={mediaId:u.__vid,error_code:P.Code,error_msg:P.Message},u.logError(P),u.trigger("error",P)}))}},m.exports.loadCertificate=function(P,S){var r,h,v,T=new XMLHttpRequest,E=(T.addEventListener("load",(function(b,C){var I,C=C.target;if(C.status!==200){var N=l.ErrorCode.DrmLicenseRequestFailed,L=o.get("Error_Drm_License_Request_Failed"),N={mediaId:this._options.vid||"",error_code:N,error_msg:C.response};player.logError(N),N.display_msg=L,player.trigger(s.Player.Error,N)}else{try{I=this._options.isLive?JSON.parse(C.response).Response.B64ServCert:JSON.parse(JSON.parse(C.response).DRMCertInfo).b64ServCert}catch(U){console.log(U)}L=n.base64DecodeUint8Array(I),N=(function(U,K){var z=K.target,K=K.initData,M=n.arrayToString(K).split("skd://")[1].split("?")[0],q=n.stringToArray(M);if(K=((ee,Q,B)=>{typeof Q=="string"&&(Q=stringToArray(Q));var R=0,H=new ArrayBuffer(ee.byteLength+4+Q.byteLength+4+B.byteLength),X=new DataView(H);return new Uint8Array(H,0,ee.byteLength).set(ee),R+=ee.byteLength,X.setUint32(R,Q.byteLength,!0),R+=4,(ee=new Uint16Array(H,R,Q.length)).set(Q),R+=ee.byteLength,X.setUint32(R,B.byteLength,!0),R+=4,new Uint8Array(H,R,B.byteLength).set(B),new Uint8Array(H,0,H.byteLength)})(K,q,U),z.webkitKeys||((()=>{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"})(),z.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!z.webkitKeys)throw"Could not create MediaKeys";if(q=z.webkitKeys.createSession("video/mp4",K),!q)throw"Could not create key session";q.contentId=M,y("webkitkeymessage",(function(H){var Q=this,B=H.target,oe=H.message,R=new XMLHttpRequest,H=(H.sessionId,R.responseType="text",R.session=B,R.addEventListener("load",(function(ae){ae=ae.target,ue=this._options.isLive?JSON.parse(ae.response).Response.B64License:JSON.parse(JSON.parse(ae.response).License).b64License;var ue=n.base64DecodeUint8Array(ue),ue=n.Uint8ArrayToString(ue);ue.substr(0,5)==="<ckc>"&&ue.substr(-6)==="</ckc>"&&(ue=ue.slice(5,-6)),ue=n.base64DecodeUint8Array(ue),ae.session.update(ue)}).bind(this),!1),R.addEventListener("error",g,!1),btoa("spc="+n.base64EncodeUint8Array(oe)+"&assetId="+encodeURIComponent(B.contentId))),X={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:n.ISODateString(new Date),SignatureNonce:n.randomUUID(),AccessKeyId:Q._options.accessKeyId,SecurityToken:Q._options.securityToken,CertId:Q._options.certId};Q._options.isLive?(X.RegionId=Q._options.region,X.Action="DescribeDRMLicense",X.Version="2016-11-01",X.CdmData=H,X.Type="fairplay",X.Domain=e.parseUrl(Q._options.source).hostname):(X.region=Q._options.region,X.Action="GetDRMLicense",X.Version="2017-03-21",X.VideoId=Q._options.vid,X.CDMData=H,X.DRMType="FairPlay");var se,te,oe="Signature="+n.AliyunEncodeURI(n.makeChangeSiga(X,Q._options.accessKeySecret,"POST"));B=Q._options.isLive?"https://"+a.getLiveHostByRegion(Q._options.region)+"/?"+oe:"https://vod."+Q._options.region+".aliyuncs.com/?"+oe;for(te in R.open("POST",B,!0),R.setRequestHeader("Content-type","application/x-www-form-urlencoded"),X){var J;X.hasOwnProperty(te)&&(J=X[te],se=se?se+"&"+n.AliyunEncodeURI(te)+"="+n.AliyunEncodeURI(J):n.AliyunEncodeURI(te)+"="+n.AliyunEncodeURI(J))}R.send(se)}).bind(this),q),y("webkitkeyadded",f,q),y("webkitkeyerror",c,q)}).bind(this,L),C=(this._fairPlayHandlers.onNeedKey=N,(function(U){window.console.error("A video playback error occurred")}).bind(this)),this._fairPlayHandlers.onError=C,this.tag.addEventListener("webkitneedkey",N,!1),this.tag.addEventListener("error",C,!1),this.tag.src=this._options.source}b&&b()}).bind(P,S),!1),T.addEventListener("error",(function(b){window.console.error("Failed to retrieve the server certificate.")}).bind(P),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:n.ISODateString(new Date),SignatureNonce:n.randomUUID(),AccessKeyId:P._options.accessKeyId,SecurityToken:P._options.securityToken,CertId:P._options.certId}),S=(P._options.isLive?(E.RegionId=P._options.region,E.Action="DescribeDRMCertificate",E.Version="2016-11-01"):(E.region=P._options.region,E.Action="GetDRMCertInfo",E.Version="2017-03-21",E.VideoId=P._options.vid),"Signature="+n.AliyunEncodeURI(n.makeChangeSiga(E,P._options.accessKeySecret,"POST"))),P=P._options.isLive?"https://"+a.getLiveHostByRegion(P._options.region)+"/?"+S:"https://vod."+P._options.region+".aliyuncs.com/?"+S;for(r in T.open("POST",P,!0),T.setRequestHeader("Content-type","application/x-www-form-urlencoded"),E)E.hasOwnProperty(r)&&(h=E[r],v=v?v+"&"+n.AliyunEncodeURI(r)+"="+n.AliyunEncodeURI(h):n.AliyunEncodeURI(r)+"="+n.AliyunEncodeURI(h),console.log(h));T.send(v)},m.exports.getRequestUrl=function(r,u){var r={AccessKeyId:u._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:n.ISODateString(new Date),SignatureNonce:n.randomUUID(),SecurityToken:u._options.securityToken,RegionId:u._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:r,Domain:e.parseUrl(u._options.source).hostname},h=(u._options.widevineCertId&&(r.CertId=u._options.widevineCertId),"Signature="+n.AliyunEncodeURI(n.makeChangeSiga(r,u._options.accessKeySecret,"POST")));return{url:"https://"+a.getLiveHostByRegion(u._options.region)+"/?"+h,data:n.makeUTF8sort(r,"=","&"),jsonData:n.makeUTF8sort(r,"=","&","json")}},m.exports.postData=function(h,u){var r=n.randomUUID(),r={AccessKeyId:u._options.accessKeyId,VideoId:u._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:r,SecurityToken:u._options.securityToken,region:u._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:h},h=(u._options.widevineCertId&&(r.CertId=u._options.widevineCertId),"Signature="+n.AliyunEncodeURI(n.makeChangeSiga(r,u._options.accessKeySecret,"POST")));return{url:"https://vod."+u._options.region+".aliyuncs.com/?"+h,data:n.makeUTF8sort(r,"=","&"),jsonData:n.makeUTF8sort(r,"=","&","json")}},m.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":28,"../../lib/bufferbase64":30,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/url":54,"../base/event/eventtype":84,"./signature":133,"./util":134}],128:[function(x,m,j){var w=x("../../lib/io"),p=x("../../lib/constants"),d=x("../../lib/data"),l=x("./util");m.exports.getDataByAuthInfo=function(n,t,e,a){n={playAuth:n.playAuth,requestId:n.requestId},w.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+(o=>(o.requestId=d.guid(),Object.keys(o).reduce(function(s,g){return s+(s?"&":"?")+g+"="+encodeURIComponent(o[g])},"")))(n),function(o){if(o)if(o=JSON.parse(o),o.httpStatusCode!==200)a&&a({Code:p.ErrorCode.ServerAPIError,Message:o.httpStatusCode+"|"+o.code,sri:o.requestId});else{for(var s=o.data.PlayInfoList,g=[],c=s.length-1;0<=c;--c)s[c].Definition==="AUTO"&&(g=[s.splice(c,1)[0]]);var f,y=null;(y=(y=g.length===0?l.objectPlayerMessageSort(s,t):l.objectPlayerMessageSort(g)).map(function(_){return _.format==="m3u8"&&(_.Url=_.Url+"&_ext=.m3u8"),_}))&&e&&(f=o.data.VideoBase||{},e({videoId:f.VideoId,userId:f.UserId,requestId:o.requestId,urls:y,encryptUrlArr:[],thumbnailUrl:"",coverUrl:f.CoverURL,playInfoAry:s,textTracks:o.data.SubtitlesList}))}else a&&a(l.createError("SaaS"))},function(o){o&&typeof o=="string"&&-1<o.indexOf("Invalid CORS request")?a&&a({Code:p.ErrorCode.ServerAPIError,Message:o}):a&&a(l.createError("SaaS"))})}},{"../../lib/constants":33,"../../lib/data":35,"../../lib/io":45,"./util":134}],129:[function(l,m,j){var w=l("./saasplayer"),p=l("./light"),d=l("../base/event/eventtype"),l=w.extend({init:function(n,t){w.call(this,n,t),this.service=p,this.loadByLightSaas()}});l.prototype.loadByLightSaas=function(n){var t=this._options,e={playAuth:t.mediaAuth,defaultDefinition:t.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:t.mediaAuth}}),this.loadData(e,n)},l.prototype.replayByMediaAuth=function(n){this.trigger(d.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(d.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=n,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},m.exports=l},{"../base/event/eventtype":84,"./light":128,"./saasplayer":132}],130:[function(x,m,j){var w=x("../../lib/io"),p=x("../../lib/constants"),d=x("./signature"),l=x("./util"),n=x("../../lang/index"),t=x("../../lib/ua"),e=function(o,s){for(var g="",c=(o.sort(function(r,h){return r=parseInt(r.bitrate),h=parseInt(h.bitrate),s=="desc"?h<r?-1:r<h?1:void 0:r<h?-1:h<r?1:void 0}),o.length),f=0;f<c;f++){var y=o[f],_=p.QualityLevels[y.definition],u="",u=_===void 0?y.bitrate:g==_?_+y.bitrate:_;y.desc=u,g=_}},a=function(o,s){for(var g="",c=(o.sort(function(r,h){return r=parseInt(r.width),h=parseInt(h.width),s=="desc"?h<r?-1:r<h?1:void 0:r<h?-1:h<r?1:void 0}),o.length),f=0;f<c;f++){var y=o[f],_=p.QualityLevels[y.definition],u="",u=_===void 0?"":g==_?_+y.height:_;y.desc=u,g=_}};m.exports.getDataByAuthInfo=function(y,s,g,c){d.returnUTCDate(),d.randomUUID();var f=d.randomUUID(),f={AccessKeyId:y.accessId,Action:"PlayInfo",MediaId:y.vid,Formats:y.format,AuthInfo:y.authInfo,AuthTimeout:y.authTimeout||p.AuthKeyExpired,IncludeSnapshotList:y.includeSnapshotList,Rand:y.rand,SecurityToken:y.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:t.IS_CHROME?"Chrome":t.IS_EDGE?"Edge":t.IS_IE11?"IE":t.IS_SAFARI?"Safari":t.IS_FIREFOX?"Firefox":"",SignatureNonce:f},f=(y.hlsUriToken&&(y.MtsHlsUriToken=y.hlsUriToken),y.playConfig&&(f.PlayConfig=JSON.stringify(y.playConfig)),d.makeUTF8sort(f,"=","&")+"&Signature="+d.AliyunEncodeURI(d.makeChangeSiga(f,y.accessSecret))),y="https://mts."+y.domainRegion+".aliyuncs.com/?"+f;w.get(y,function(_){var u,r,h;_?(u=(_=JSON.parse(_)).PlayInfoList.PlayInfo,r="",(h=_.SnapshotList?_.SnapshotList.Snapshot:[])&&0<h.length&&(r=h[0].Url),h=((v,T)=>{for(var E=[],S=[],P=[],b=[],k=v.length-1;0<=k;k--){var I=v[k];(I.format=="mp4"?S:I.format=="mp3"?P:I.format=="m3u8"?E:b).push(I)}return 0<P.length?(e(P,T),P):0<S.length?(a(S,T),S):0<E.length?(a(E,T),E):(a(b,T),b)})(u,s),g&&g({requestId:_.RequestId,urls:h,thumbnailUrl:r})):c&&c(l.createError("MPS"))},function(_){if(c){var u={Code:"",Message:n.get("Error_MTS_Fetch_Urls_Text")};try{u=JSON.parse(_)}catch{}c({Code:p.ErrorCode.ServerAPIError,Message:u.Code+"|"+u.Message,sri:u.RequestId||""})}})}},{"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/ua":53,"./signature":133,"./util":134}],131:[function(d,m,j){var w=d("./saasplayer"),p=(d("../../lib/constants"),d("./mts")),d=w.extend({init:function(l,n){w.call(this,l,n),this.service=p,this.loadByMts()}});d.prototype.loadByMts=function(l){var n={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(n,l)},d.prototype.replayByVidAndAuthInfo=function(l,n,t,e,a,o){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(l,n,t,e,a,o)},d.prototype.reloadNewVideoInfo=function(l,n,t,e,a,o){if(this.trigger("error_hide"),this._options.source="",l&&(this._options.vid=l,this._options.accId=n,this._options.accessSecret=t,this._options.stsToken=e,this._options.domainRegion=o,this._options.authInfo=a),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("vidaccIdaccessSecretstsTokendomainRegionauthInfo");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:l}}),this.loadByMts(!0)},m.exports=d},{"../../lib/constants":33,"./mts":130,"./saasplayer":132}],132:[function(x,m,j){var w=x("../base/player"),p=x("../audio/audioplayer"),d=x("../../lib/io"),l=x("../../lib/constants"),n=x("./signature"),t=x("./authkeyexpiredhandle"),e=x("../hls/hlsinjector"),a=x("../flv/flvinjector"),o=x("../drm/drminjector"),s=x("../sw/swinjector"),g=x("../../lang/index"),c=x("../../lib/ua"),f=x("../../config"),y=x("../../lib/playerutil"),_=x("../base/event/eventtype"),u=x("../../protected/anti-injector-protected"),r=w.extend({init:function(T,E){c.IS_PC&&u(E,this),this._authKeyExpiredHandle=new t(this),w.prototype._videoCreateEl||(w.prototype._videoCreateEl=w.prototype.createEl),E.format=="mp3"?(E.height="auto",E.mediaType="audio",w.prototype.createEl=p.prototype.createEl,p.call(this,T,E),r.prototype.play=w.prototype.play,r.prototype.pause=w.prototype.pause,r.prototype.initPlay=w.prototype.initPlay,r.prototype.replay=w.prototype.replay,r.prototype.stop=w.prototype.stop,r.prototype.seek=w.prototype.seek):(w.prototype.createEl=w.prototype._videoCreateEl,E._native=!1,w.call(this,T,E))}});function h(){var T,E=!1;return Number(this._options.encryptType)!==1?(T={error_code:l.ErrorCode.InvalidParameter,error_msg:g.get("Error_Not_Support_encrypt_Text")},this.logError(T),this.trigger("error",T),!0):E}function v(){var T=y.checkSecuritSupport();if(T)return this._mtsError_message(this,{Code:l.ErrorCode.EncrptyVideoNotSupport,Message:T,display_msg:T},""),!0}r.prototype.loadData=function(T,E){var S,P,b,k;this._options.encryptType!=1?this._loadData(T,E):(S="aliplayer-vod-min.js",P="",P=f.domain?"https://"+f.domain+f.path+f.h5Version+"/hls/"+S:"/build/hls/"+S,(b=this.getOptions()).assetPrefix&&(P=b.assetPrefix+"/hls/"+S),this.trigger(_.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),k=this,d.loadJS(P,function(){k.trigger(_.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),k._loadData(T,E)}))},r.prototype._loadData=function(T,E){var S,P=new Date().getTime(),b=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),T.format!=""&&T.format!="m3u8"||this._options.encryptType!=1?T.rand=n.randomUUID():(S=_rtsneg(b._vdnct6f===3?T.vid:void 0),T.rand=_dnaRekam(S,b._vdnct6f)),this._options.thumbnailUrl&&(T.thumbnailUrl=this._options.thumbnailUrl),this.trigger(_.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,T,this._options.qualitySort,function(k){if(b.trigger(_.Private.PlayInfoLoaded,k),k.userId&&(b._options.from=k.userId),k.videoId&&b._monitor&&b._monitor.updateLightSaasVideoId(k.videoId),k.textTracks&&k.textTracks.length&&(I=y.unqiueTextTracks(k.textTracks),b.trigger(_.Private.TextTrackFounded,{from:"saas",textTracks:I})),k.urls&&k.urls.length==0)b._mtsError_message(b,{Code:l.ErrorCode.URLsIsEmpty,Message:g.get("Error_Vod_URL_Is_Empty_Text")+(T.format?"(format:"+T.format+")":"")},"");else{b.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-P,mi:JSON.stringify((K=>{for(var M=[],q=0;q<K.length;q++)M.push({width:K[q].width,height:K[q].height,definition:K[q].definition,format:K[q].format,encryptionType:K[q].encryptionType,duration:K[q].duration});return M})(k.urls))}),b._urls=k.urls,b._currentPlayIndex=y.findSelectedStreamLevel(b._urls,T.defaultDefinition);var I=(C=k.urls[b._currentPlayIndex]).Url;if(b._vodDuration=C.duration||0,b._options.source=I,b.encType="",b.trigger(_.Private.PREPARE,C.definition),b.UI.cover&&k.coverUrl&&!b._options.cover&&b.setCover(k.coverUrl),y.isHls(I))if(k&&k.playInfoAry&&0<k.playInfoAry.length&&k.playInfoAry[0].EncryptType=="Widevine-FairPlay")o.inject(b,r,w.prototype,b._options);else{if(k.encryptUrlArr&&0<k.encryptUrlArr.length){for(var C,L=[],N=!1,U=0;U<k.encryptUrlArr.length;++U)if((C=k.encryptUrlArr[U]).encryptionType===l.EncryptionType.Private){if(h.call(b))return;if(N||v.call(b))return void(N=!0);var Y=_yekced(S,C.rand,C.plaintext);L.push({url:C.Url,secData:Y})}}else if(L="",C.encryptionType==l.EncryptionType.Private){if(h.call(b)||v.call(b))return;b.encType=C.encryptionType,L=_yekced(S,C.rand,C.plaintext)}var z=c.IS_IOS&&parseFloat(c.IOS_FULL_VERSION)<17.1;(L&&(b._options.useSW||z)?s:(b._hls&&(b._hls.destroy(),b._hls=null),e)).inject(b,r,w,b._options,L)}else y.isFlv(I)?a.inject(b,r,w,b._options):y.isDash(I)?(console.log("isDash"),o.inject(b,r,w,b._options)):b._player._executeReadyCallback();b._authKeyExpiredHandle.tick(l.AuthKeyRefreshExpired),b.trigger(_.Private.SourceLoaded,C),b._monitor2.vodSelectUrl(C),b.initPlay(E),b.trigger(_.Private.ChangeURL,{from:"saas"}),k.thumbnailUrl&&b._thumbnailService.get(k.thumbnailUrl),z=b._player._isFlv,I=-1<b._player.getOptions().source.indexOf("mp4"),b._player.encType==1||z||I||(c.IS_IOS||c.IS_MAC_SAFARI||c.IS_X5||c.IS_EDGE)&&(b._player._executeReadyCallback(),b._urls.length)&&b.trigger(_.Private.SourceLoaded,C)}},function(k){var I;-1<((I=k.Message)==null?void 0:I.indexOf('The specified parameter "Rand" is not valid'))&&h.call(b)||b._mtsError_message(b,k,"")})},r.prototype._changeStream=function(T,E){this._urls.length>T&&(this._loadByUrlInner(this._urls[T].Url,this.getCurrentTime(),!0),this._currentPlayIndex=T,this.trigger(_.Private.QualityChange,E||g.get("Quality_Change_Fail_Switch_Text")))},r.prototype._getLowerQualityLevel=function(){if(this._urls.length!=0&&this._currentPlayIndex!=-1){if(this.options().qualitySort=="asc"){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1}}return""},r.prototype._mtsError_message=function(T,E,S){T._serverRequestId=E.sri,T.trigger(_.Private.H5_Loading_Hide),E.Code=E.Code||E.code,E.Message=E.Message||E.message;var P=E.Message||"OTHER_ERR_MSG",b=E.Code||l.ErrorCode.ServerAPIError,k=E.display_msg||"",I=(-1<P.indexOf("InvalidParameter.Rand")||-1<P.indexOf('"Rand" is not valid.')?(b=l.ErrorCode.EncrptyVideoNotSupport,k=g.get("Error_Encrypt_Fetch_Failed_Text")):-1<P.indexOf(".Expired")||-1<P.indexOf(".ExpireTime")?(b=l.ErrorCode.AuthKeyExpired,k=g.get("Error_Playauth_Expired_Text")):-1<P.indexOf("InvalidVideo.NoneStream")?(b=l.ErrorCode.URLsIsEmpty,k=g.get("Error_Fetch_NotStream")+"("+T._options.format+"|"+T._options.definition+")"):-1<P.indexOf("SignatureNonceUsed")?b=l.ErrorCode.VodNonceUsed:-1<P.indexOf("DataNotFound")&&(b=l.ErrorCode.MediaNotFound,k=g.get("Error_Fetch_Media_Not_Found")),T._options.vid||""),I=(T._options.from,{mediaId:I,mediaAuth:T._options.mediaAuth||"",error_code:b,error_msg:P});E.sri&&(I.sri=E.sri),T.logError(I),I.display_msg=k&&k===P?k:(k||g.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+P,T.trigger("error",I),console.log("PrismPlayer Error: "+S+"! error_msg :"+P+";")},m.exports=r},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../protected/anti-injector-protected":149,"../audio/audioplayer":82,"../base/event/eventtype":84,"../base/player":109,"../drm/drminjector":117,"../flv/flvinjector":120,"../hls/hlsinjector":122,"../sw/swinjector":147,"./authkeyexpiredhandle":126,"./signature":133}],133:[function(x,m,j){var w=x("crypto-js/hmac-sha1"),p=x("crypto-js/enc-base64"),d=x("crypto-js/enc-utf8");m.exports.randomUUID=function(){for(var l=[],n="0123456789abcdef",t=0;t<36;t++)l[t]=n.substr(Math.floor(16*Math.random()),1);return l[14]="4",l[19]=n.substr(3&l[19]|8,1),l[8]=l[13]=l[18]=l[23]="-",l.join("")},m.exports.returnUTCDate=function(){var s=new Date,l=s.getUTCFullYear(),n=s.getUTCMonth(),t=s.getUTCDate(),e=s.getUTCHours(),a=s.getUTCMinutes(),o=s.getUTCSeconds(),s=s.getUTCMilliseconds();return Date.UTC(l,n,t,e,a,o,s)},m.exports.AliyunEncodeURI=function(l){return l=encodeURIComponent(l),l=(l=(l=l.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},m.exports.makesort=function(l,n,t){if(!l)throw new Error("PrismPlayer Error: vid should not be null!");var e=[];for(g in l)e.push(g);for(var a=e.sort(),o="",s=a.length,g=0;g<s;g++)o==""?o=a[g]+n+l[a[g]]:o+=t+a[g]+n+l[a[g]];return o},m.exports.makeUTF8sort=function(l,n,t){if(!l)throw new Error("PrismPlayer Error: vid should not be null!");var e=[];for(g in l)e.push(g);for(var a=e.sort(),o="",s=a.length,g=0;g<s;g++){var c=m.exports.AliyunEncodeURI(a[g]),f=m.exports.AliyunEncodeURI(l[a[g]]);o==""?o=c+n+f:o+=t+c+n+f}return o},m.exports.makeChangeSiga=function(l,n,t){if(l)return p.stringify(w((t=t||"GET")+"&"+m.exports.AliyunEncodeURI("/")+"&"+m.exports.AliyunEncodeURI(m.exports.makeUTF8sort(l,"=","&")),n+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},m.exports.ISODateString=function(l){function n(t){return t<10?"0"+t:t}return l.getUTCFullYear()+"-"+n(l.getUTCMonth()+1)+"-"+n(l.getUTCDate())+"T"+n(l.getUTCHours())+":"+n(l.getUTCMinutes())+":"+n(l.getUTCSeconds())+"Z"},m.exports.encPlayAuth=function(l){if(l=d.stringify(p.parse(l)))return JSON.parse(l);throw new Error("playuth")},m.exports.encRsa=function(){},m.exports.stringToArray=function(l){for(var n=new ArrayBuffer(2*l.length),t=new Uint16Array(n),e=0,a=l.length;e<a;e++)t[e]=l.charCodeAt(e);return t},m.exports.Uint8ArrayToString=function(l){for(var n="",t=0;t<l.length;t++)n+=String.fromCharCode(l[t]);return n},m.exports.arrayToString=function(l){return l=new Uint16Array(l.buffer),String.fromCharCode.apply(null,l)},m.exports.base64DecodeUint8Array=function(l){var n=window.atob(l),t=n.length,e=new Uint8Array(new ArrayBuffer(t));for(i=0;i<t;i++)e[i]=n.charCodeAt(i);return e},m.exports.base64EncodeUint8Array=function(l){for(var n,t,e,a,o,s,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",f=0;f<l.length;)e=(n=l[f++])>>2,a=(3&n)<<4|(n=f<l.length?l[f++]:Number.NaN)>>4,o=(15&n)<<2|(t=f<l.length?l[f++]:Number.NaN)>>6,s=63&t,isNaN(n)?o=s=64:isNaN(t)&&(s=64),c+=g.charAt(e)+g.charAt(a)+g.charAt(o)+g.charAt(s);return c}},{"crypto-js/enc-base64":8,"crypto-js/enc-utf8":9,"crypto-js/hmac-sha1":10}],134:[function(x,m,j){var w=x("../../lib/constants");m.exports.createError=function(p,d){return{requestId:"",code:d||"",message:p}},m.exports.getItem=function(p){var d={};return d.width=p.Width,d.height=p.Height,d.definition=p.Definition,d.Url=p.PlayURL,d.format=p.Format,d.desc=w.QualityLevels[d.definition],d.encryptionType=w.VodEncryptionType[p.EncryptType],d.plaintext=p.Plaintext,d.rand=p.Rand,d.encrypt=p.Encrypt,d.duration=p.Duration,d.bitrate=p.Bitrate,d},m.exports.objectPlayerMessageSort=function(p,d){for(var l=[],n=[],t=[],e=[],a=p.length-1;0<=a;a--){var o=p[a],o=m.exports.getItem(o);(o.format=="mp4"?n:o.format=="mp3"?t:o.format=="m3u8"?l:e).push(o)}var s=[],s=0<t.length?t:0<n.length?n:0<l.length?l:e;return d=="asc"&&s.reverse(),s}},{"../../lib/constants":33}],135:[function(x,m,j){var w,p,d=x("../../lib/io"),l=x("../../lib/constants"),n=x("./signature"),t=x("./util"),e=x("../../config"),a=x("../../lang/index"),o=x("../base/event/eventtype"),s="saas/vod.js",g=1,c=2,f={MAIN:"main",BACKUP:"backup",CUSTOM:"custom"},y=function(h){return(h||"").split("?")[0]},_={type:f.MAIN,time:0};function u(h,v,T,E){var S=this,P=(this&&(w=this.getOptions().customVodServerFirst,p=this.getOptions().customVodServer),this&&!this._hasRetrySuccess&&_.time===0&&p!=null&&w===!0&&(g=2,c=1,this._useCustomVodServer=!0,_.type=f.CUSTOM),(function(k){var I=n.randomUUID(),I={AccessKeyId:k.accessId,Action:"GetPlayInfo",VideoId:k.vid,Formats:k.format,AuthTimeout:k.authTimeout||l.AuthKeyExpired,Rand:k.rand,SecurityToken:k.stsToken,StreamType:k.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:I,PlayerVersion:e.h5Version,Channel:"HTML5"};return k.definition==="AUTO"?I.ResultType="Multiple":k.definition&&(I.Definition=k.definition),k.authInfo&&(I.AuthInfo=k.authInfo),k.outputType&&(I.OutputType=k.outputType),k.playConfig&&(I.PlayConfig=JSON.stringify(k.playConfig)),k.reAuthInfo&&(I.ReAuthInfo=JSON.stringify(k.reAuthInfo)),I=n.makeUTF8sort(I,"=","&")+"&Signature="+n.AliyunEncodeURI(n.makeChangeSiga(I,k.accessSecret)),k=this._useCustomVodServer?(/^https?:\/\//i.test(p)||console.warn("Warning: customVodServer URL is missing protocol (http/https)."),window.location.protocol!=="https:"||/^https:\/\//i.test(p)||console.warn("Error: customVodServer URL must use HTTPS when the page is served over HTTPS."),""+p+(p.includes("?")?"&":"?")+I+"&RegionId="+k.domainRegion):"https://vod"+(this._useBackupVodDomain?"-product":"")+"."+k.domainRegion+".aliyuncs.com/?"+I,k}).call(this,h)),b=performance.now();_.time===0&&this.trigger(o.Private.Timeline,{name:"vod_s",ts:b}),d.get.call(this,P,function(k){r.call(S,P,{status:200}),(function(I,C,L,N,U){var Y,z=_.type;if(this.trigger(o.Private.Timeline,{name:"vod_f",ts:performance.now()}),this.traceLog(s,"Vod request ok."+I),_={type:f.MAIN,time:0},I){try{if(Y=JSON.parse(I),!(z!==f.CUSTOM||Y.VideoBase&&Y.PlayInfoList))throw new Error("Invalid VOD response.")}catch{if(this.traceLog(s,"Invalid VOD response."+I,!0),U)return void U(t.createError("",l.ErrorCode.ServerAPIError))}this._monitor2.vodMediaInfo(Y);for(var K,z="",I=Y.VideoBase.ThumbnailList,M=(I&&I.Thumbnail&&0<I.Thumbnail.length?z=I.Thumbnail[0].URL:C.thumbnailUrl&&(z=String(C.thumbnailUrl)),Y.PlayInfoList.PlayInfo),q=[],ee=[],Q=M.length-1;0<=Q;--Q)M[Q].Definition==="AUTO"?(this.getOptions().isVBR=!0,K=M.splice(Q,1)[0],q=[K]):M[Q].Encrypt===1&&ee.push(M[Q]);I=null,ee=q.length===0?(I=t.objectPlayerMessageSort(M,L),[]):(I=t.objectPlayerMessageSort(q),t.objectPlayerMessageSort(ee)),I&&N&&N({requestId:Y.RequestId,urls:I,encryptUrlArr:ee,thumbnailUrl:z,coverUrl:Y.VideoBase.CoverURL,playInfoAry:M})}else U&&U(t.createError(""))}).call(S,k,h,v,T,E)},function(k,I,C){if((N=(L=C).status)===0||500<=N&&N<=599&&(L.responseText||"").indexOf("RequestId")===-1){if(N=_.type===f.BACKUP&&2<=_.time&&(p==null||w==1)||_.type===f.CUSTOM&&_.time>=c&&!w,L={url:y(P),status:C.status,response:C.responseText,retryType:_.type,retryTime:_.time,isRetryExhausted:N},S.trigger(o.Private.VodRequestException,L),S._monitor2.vodRequestFatalError(L),5e3<performance.now()-b&&(_.type===f.MAIN?_.time=g:_.type===f.BACKUP&&(_.time=2)),_.type===f.MAIN)return _.time<g?(_.time++,void setTimeout(function(){u.call(S,h,v,T,E)},200)):(_.type=f.BACKUP,_.time=1,void setTimeout(function(){S._useBackupVodDomain=!0,u.call(S,h,v,T,E)},200));if(_.type===f.BACKUP){if(_.time<2)return _.time++,void setTimeout(function(){u.call(S,h,v,T,E)},200);if(S&&(S._useBackupVodDomain=!1),p!=null&&w!=1)return _.type=f.CUSTOM,_.time=1,void setTimeout(function(){S._useCustomVodServer=!0,u.call(S,h,v,T,E)},200)}else if(_.type===f.CUSTOM){if(_.time<c)return _.time++,void setTimeout(function(){u.call(S,h,v,T,E)},200);if(S&&(S._useCustomVodServer=!1),w==1)return _.type=f.MAIN,_.time=1,void setTimeout(function(){u.call(S,h,v,T,E)},200)}}else r.call(S,P,C);var L,N;(function(U,Y){if(this.traceLog(s,"Vod request error::"+U),_={type:f.MAIN,time:0},Y){var z={Code:"",Message:a.get("Error_Vod_Fetch_Urls_Text")};try{z=JSON.parse(U)}catch{}Y({Code:l.ErrorCode.ServerAPIError,Message:z.Code+"|"+z.Message,sri:z.RequestId||""})}}).call(S,k,E)},void 0,void 0,5e3)}function r(h,v){_.time!==0&&(this._hasRetrySuccess=!0,h={url:y(h),status:v==null?void 0:v.status,response:(v==null?void 0:v.status)!==200?v==null?void 0:v.responseText:"",retryType:_.type,retryTime:_.time},this.trigger(o.Private.VodRequestExceptionResume,h),this._monitor2.vodRequestFatalErrorResume(h))}m.exports.getDataByAuthInfo=u},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":84,"./signature":133,"./util":134}],136:[function(o,m,j){var w=o("./saasplayer"),p=o("../../lib/constants"),d=o("./vod"),l=o("./signature"),n=o("../../lib/io"),t=o("../../config"),e=o("../base/event/eventtype"),a=o("../../lang/index"),o=w.extend({init:function(s,g){w.call(this,s,g),this.service=d,this.loadByVod()}});o.prototype.loadByVod=function(s){var g,c,f,y;typeof _apesrap<"u"?this._loadByVod(s):(typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),g="aliplayer-vod-p-min.js",c="",c=t.domain?"https://"+t.domain+t.path+t.h5Version+"/hls/"+g:"/build/hls/"+g,(f=this.getOptions()).assetPrefix&&(c=f.assetPrefix+"/hls/"+g),this.trigger(e.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),y=this,n.loadJS(c,function(){y.trigger(e.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),y._loadByVod(s)}))},o.prototype._loadByVod=function(s){var g="",c="",f="",y="",_="";if(this._options.accessKeyId&&this._options.accessKeySecret)g=this._options.accessKeyId,c=this._options.accessKeySecret,f=this._options.securityToken,y=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var u=_apesrap(this._options.playauth,this._options.vid),r=(this._vdnct6f=u.v,u.value),h=l.encPlayAuth(r),g=h.AccessKeyId,c=h.AccessKeySecret,f=h.SecurityToken,y=h.Region,_=h.AuthInfo}catch(v){return console.log("e",v),u={Code:p.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",display_msg:a.get("Error_Playauth_Decode_Text")},this.traceLog("saas/vodplayer.js","invalid playauth: "+this._options.playauth,!0),void this._mtsError_message(this,u,r)}this._options.from=h.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(g,c,f,y,_,s)},o.prototype.replayByVidAndPlayAuth=function(s,g){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(e.Private.UserTrackReset),this._options.source="",this._options.vid=s,this._options.playauth=g,this._options._userOptions.vid=s,this._options._userOptions.playauth=g,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._posOffset=this._getSubVideoConfig().start||0,this._monitor2.playAbort("replayByVidAndPlayAuth",s),this._monitor&&(this._monitor.reportPlayAbort("replayByVidAndPlayAuth"),this._monitor.reset(),this._monitor.startHeartBeat()),this._clearTimeout(),this.loadByVod(!0)},o.prototype.updateSourcesByVidAndPlayAuth=function(s,g){var c,f,y,_;typeof _apesrap<"u"?this._updateSourcesByVidAndPlayAuth(s,g):(c="aliplayer-vod-p-min.js",f="",f=t.domain?"https://"+t.domain+t.path+t.h5Version+"/hls/"+c:"/build/hls/"+c,(y=this.getOptions()).assetPrefix&&(f=y.assetPrefix+"/hls/"+c),_=this,n.loadJS(f,function(){_._updateSourcesByVidAndPlayAuth(s,g)}))},o.prototype._updateSourcesByVidAndPlayAuth=function(s,g){if(s!=this._options.vid)console.log("vid");else{this._options.vid=s,this._options.playauth=g;try{var c=_apesrap(this._options.playauth,this._options.vid),f=(this._vdnct6f=c.v,c.value),y=l.encPlayAuth(f)}catch{return void console.log("playauth")}var g={vid:s,accessId:y.AccessKeyId,accessSecret:y.AccessKeySecret,stsToken:y.SecurityToken,domainRegion:y.Region,authInfo:y.AuthInfo,playDomain:y.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},_=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(g,this._options.qualitySort,function(r){_._serverRequestId=r.requestId,r.urls.length!=0&&(_._urls=r.urls),_._authKeyExpiredHandle.tick(p.AuthKeyRefreshExpired)},function(r){console.log(r)})}},o.prototype.reloaduserPlayInfoAndVidRequestMts=function(s,g){this.replayByVidAndPlayAuth(s,g,accessSecret)},o.prototype._loadByVodBySTS=function(s,g,c,f,y,_){s={vid:this._options.vid,accessId:s,accessSecret:g,stsToken:c,authInfo:y,domainRegion:f,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(s,_)},m.exports=o},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":84,"./saasplayer":132,"./signature":133,"./vod":135}],137:[function(x,m,j){function w(d){this._player=d,this._video=d.tag;var l=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",this._currentTrack="",this._tracks=[],d.on(p.Private.ChangeURL,function(){l._isCreated=!1,l._canPlayTriggered=!1,l._defaultTrack=""}),d.on(p.Player.CanPlay,function(){var n;l._player._drm||l._canPlayTriggered||((n=l._getTracks())&&(l._isCreated=!0,l._player._options.isVBR||l._hls||(d.trigger(p.Player.AudioTrackReady,n),l._notifyDefaultValue(n))),l._canPlayTriggered=!0)}),d.on(p.Player.AudioTrackUpdated,function(n){l._isCreated||(n=l._getTracks(n.paramData.audioTracks))&&(l._isCreated=!0,d.trigger(p.Player.AudioTrackReady,n),l._notifyDefaultValue(n))})}var p=x("../base/event/eventtype");x("../../lib/constants"),w.prototype._notifyDefaultValue=function(d){!this._defaultTrack&&0<d.length&&(this._defaultTrack=d[0]),this._defaultTrack&&this._player.trigger(p.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text}),this._currentTrack=this._defaultTrack},w.prototype.tracks=function(){return this._tracks||[]},w.prototype.currentTrack=function(){return this._currentTrack||{}},w.prototype.support=function(){return!!this._video.audioTracks},w.prototype._getTracks=function(d){if(!this.support()&&!d)return null;for(var l=[],n=(d=!this._video||!this._video.audioTracks||d&&d.length!=0?d:this._video.audioTracks)?d.length:0,t=0;t<n;t++){var e=d[t],a={value:e.id,text:e.label||e.name||e.language};(e.default||e.enabled)&&(this._defaultTrack=a),l.push(a)}return this._tracks=l},w.prototype.switch=function(d){if(this._player._hls)this._player._hls.audioTrack=+d;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(d);else for(var l=this._video.audioTracks?this._video.audioTracks.length:0,n=0;n<l;n++){var t=this._video.audioTracks[n];t.id==d?t.enabled=!0:t.enabled=!1}},w.prototype.dispose=function(){this._player=null},m.exports=w},{"../../lib/constants":33,"../base/event/eventtype":84}],138:[function(x,m,j){function w(o){this._video=o.tag,this._player=o,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var s=this,g=(a.detectInnerTextTrack(o,o.getOptions().source,function(c,f){c||f&&0<f.length&&o.trigger(p.Private.TextTrackFounded,{from:"detector",textTracks:f})}),o.on(p.Player.LevelsLoaded,function(c){o.getOptions().useDrm2||(l.IS_MAC_SAFARI||l.IS_IOS)&&(c&&c.paramData&&c.paramData.subtitles&&c.paramData.subtitles.length?s._storedTracks=c.paramData.subtitles||[]:s._resotreTracks())}),o.on(p.Private.SafariDrmLevelSwitch,function(){s._resotreTracks()}),o.on(p.Private.ChangeURL,function(c){c&&c.paramData&&c.paramData.from==="saas"||(s._disabledTracks(),s._isCreated=!1,s._defaultTrack="",s._backupCC="")}),o.on(p.Private.VttClearTracks,function(){s.switch("off"),s._disabledTracks(),s._isCreated=!1,s._defaultTrack={value:"off",text:"Off"},s.tracks=[s._defaultTrack],o.trigger(p.Private.SelectorGenerateList,{type:"cc"}),o.trigger(p.Private.CCStateChanged,{value:"off",lang:""})}),o.on(p.Player.CanPlay,function(){s._isCreated||(s.tracks=s._getTracks(),o.trigger(p.Player.TextTrackReady,s.tracks),o.trigger(p.Private.CCReset)),s._isCreated&&!s._player._setDefaultCC||!s._defaultTrack||(o.trigger(p.Private.SelectorUpdateList,{type:"cc",text:s._defaultTrack.text}),s.switch(s._defaultTrack.value),s._player._setDefaultCC=!1,s._isCreated=!0)}),l.os.ios&&parseFloat(l.os.version)<=15.1&&d.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),o.getOptions().controlBarVisibility==="always"&&d.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),e.throttle(function(){o._vttBroker&&o._vttBroker.enabled||d.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),g=(o.on(p.Private.ShowBar,g),e.throttle(function(){o._vttBroker&&o._vttBroker.enabled||d.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));o.on(p.Private.HideBar,g),o.on(p.Private.CCReset,function(){s._updateSelectorList()})}var p=x("../base/event/eventtype"),d=(x("../../lib/event"),x("../../lib/dom")),l=x("../../lib/ua"),n=x("../../lib/cookie"),t=x("../../lib/constants"),e=x("../../ui/component/util"),a=x("../../lib/playerutil");w.prototype._adaptiveCueStype=function(){var o,s=-10;l.IS_SAFARI?(s=-65,(o=this._player.fullscreenService)&&o.getIsFullScreen()&&(s=-95)):l.IS_MOBILE&&(s=-30),d.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+s+"px) !important;}")},w.prototype.close=function(){for(var o=this.getTextTracks(),s=o.length,g=0;g<s;g++){var c=o[g];c.mode!="expired"&&(c.mode=="showing"&&(this._backupCC=c),c.mode="disabled",this._player._switchDrmTextTrack)&&this._player._switchDrmTextTrack()}this._player.trigger(p.Private.VttHide)},w.prototype.CookieOff=function(){n.set(t.SelectedCC,"off",365)},w.prototype.open=function(){var o,s,g;return!this.tracks||this.tracks.length<2||(s=this._backupCC?this._backupCC.language:"",g=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(c){s===c.value&&(o=!0)}),(s=o?s:g="")||(s=this.tracks[1].value,g=this.tracks[1].text),this.switch(s)),{label:g,language:s}},w.prototype.getCurrentSubtitle=function(){return this._currentValue},w.prototype._getTracks=function(){for(var o=this.getTextTracks(),s=o.length,g=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),c=n.get(t.SelectedCC),f="",y=!1,_=0;_<s;_++){var u,r=o[_];r.mode=="expired"||r.kind!="subtitles"&&r.kind!="captions"||(u={value:r.language,text:r.label},r.default&&(this._defaultTrack=u,y=!0),u.value==c&&(f=u),g.push(u))}if(!y&&f&&(this._defaultTrack=f),this._player&&this._player._options&&this._player._options.defaultSubtitleLang)for(var h=this._player._options.defaultSubtitleLang,v="prism_cc_"+h,T=0;T<g.length;T++){var E=g[T].value;if(E===h||E===v){this._defaultTrack=g[T];break}}return g},w.prototype._disabledTracks=function(){for(var o=this.getTextTracks(),s=o.length,g=0;g<s;g++)o[g].mode="expired"},w.prototype.switch=function(o){var s=this._player;if(n.set(t.SelectedCC,o,365),this.close(),o!="off")for(var g=this.getTextTracks(),c=g.length,f=0;f<c;f++){var y,_=g[f];_.language===o&&_.mode!="expired"&&(s._switchDrmTextTrack&&s._switchDrmTextTrack(o),g[f].mode=((y=s._options)==null?void 0:y.subtitleRenderMode)===2?"disabled":"showing",s.trigger(p.Private.VttSwitchTrack,_.language))}else this.close();this._currentValue=o,s.trigger(p.Private.CCChanged,o)},w.prototype.updateUI=function(o){var s=this._player,g="on",c="";c=o?(this.tracks.find(function(f){return f.value===o})||{}).text||"":(g="off","Off"),s.trigger(p.Private.CCChanged,g),s.trigger(p.Private.CCStateChanged,{value:g,lang:c})},w.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},w.prototype._patchSafariTracks=function(){var o=this;if(l.IS_MAC_SAFARI||l.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var s=!1;if(s=this._video.textTracks&&this._video.textTracks.length?!0:s)return;for(var g=0;g<this._storedTracks.length;g++){var c=this._storedTracks[g],f=c.vttUrl,y=document.createElement("track");y.src=f,y.kind="subtitles",y.label=c.name,y.srclang=c.lang,this._video.appendChild(y)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var _=o.getCurrentSubtitle();_&&_!=="off"&&o.switch(_)},1e3)}},w.prototype.getTextTracks=function(){var o=this._player,s=o.tag;return o._vttBroker&&o._vttBroker.enabled&&o.getTextTracks?o.getTextTracks()||[]:o._getDrmTextTracks?o._getDrmTextTracks()||[]:s&&s.textTracks||[]},w.prototype._updateSelectorList=function(){var o=this._player;this.tracks=this._getTracks(),o.trigger(p.Private.SelectorGenerateList,{type:"cc",value:"Off"})},w.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(p.Player.TextTrackReady,this.tracks)},m.exports=w},{"../../lib/constants":33,"../../lib/cookie":34,"../../lib/dom":37,"../../lib/event":38,"../../lib/playerutil":50,"../../lib/ua":53,"../../ui/component/util":180,"../base/event/eventtype":84}],139:[function(x,m,j){var w=x("../../lib/playerutil");m.exports=[{service:x("./ccservice"),name:"_ccService",condition:!0},{service:x("./audiotrackservice"),name:"_audioTrackService"},{service:x("./qualityservice"),name:"_qualityService"},{service:x("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:x("./liveshiftservice"),name:"_liveshiftService",condition:function(){var p=this.options();return w.isLiveShift(p)}},{service:x("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:x("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":50,"./audiotrackservice":137,"./ccservice":138,"./fullscreenservice":140,"./liveshiftservice":141,"./progressmarkerservice":142,"./qualityservice":143,"./thumbnailservice":144}],140:[function(x,m,j){function w(o){var s=this,g=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=o,this),c=t;this._fullscreenChanged=function(f){var y;g._player!=null&&(f.target||f.srcElement)===(f=g._player.el())&&(y=document[c.fullscreenElement],g.isFullScreen=y===f,(g.isFullScreenChanged=!0)===g.isFullScreen?g._player.trigger(n.Player.RequestFullScreen):g._player.trigger(n.Player.CancelFullScreen))},c&&l.on(document,c.eventName,this._fullscreenChanged),l.on(o.tag,"webkitendfullscreen",function(f){f=f.target||f.srcElement,o&&o.tag===f&&(s.isFullScreenChanged=!0,s.isFullScreen=!1,s._player.trigger(n.Player.CancelFullScreen),s._player.trigger(n.Private.Play_Btn_Show))})}var p=x("../../lib/ua"),d=x("../../lib/dom"),l=x("../../lib/event"),n=x("../base/event/eventtype"),t=(x("../base/x5play"),x("../../lang/index"),(()=>{d.createEl("div");var o={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],g=!1;if(!(g=p.IS_IOS&&(o.requestFn="webkitEnterFullscreen",o.cancelFn="webkitExitFullscreen",o.fullscreenElement="webkitFullscreenElement",o.eventName="webkitfullscreenchange",o.isFullScreen="webkitDisplayingFullscreen",document[o.requestFn])?!0:g)){for(var c=0;c<5;c++)if(s[c][1]in document){o.requestFn=s[c][0],o.cancelFn=s[c][1],o.fullscreenElement=s[c][2],o.eventName=s[c][4],o.isFullScreen=s[c][6];break}"requestFullscreen"in document?o.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?o.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?o.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?o.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?o.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(o.requestFn="msRequestFullscreen"),"fullscreenchange"in document?o.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?o.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?o.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(o.eventName="MSFullscreenChange"),"fullScreen"in document?o.isFullScreen="fullScreen":"webkitfullScreen"in document?o.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?o.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?o.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?o.isFullScreen="mozFullScreen":"mozfullScreen"in document?o.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(o.isFullScreen="MSFullScreen"),"fullscreenElement"in document?o.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?o.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?o.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?o.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?o.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(o.fullscreenElement="MSFullscreenElement")}return o.requestFn?o:null})()),e=(w.prototype.requestFullScreen=function(){var o,s=t,g=this._player.el(),c=(p.IS_IOS&&((o=this._player._splayer)&&o.renderType===2?this._player._options.enableMockFullscreen=!0:(g=this._player.tag,o&&o.renderType!==2&&(g=this._player.el().querySelector("video")))),this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),this);if(s&&!this._player._options.enableMockFullscreen)try{var f=g[s.requestFn]();f&&typeof f.catch=="function"&&f.catch(function(y){console.log(y)}),this._requestFullScreenTimer=setTimeout(function(){c.isFullScreenChanged||(e.apply(c),c._player.trigger(n.Player.RequestFullScreen)),c._requestFullScreenTimer=null},1e3)}catch(y){console.log(y)}else e.apply(c),this._player.trigger(n.Player.RequestFullScreen);return this._player},w.prototype.cancelFullScreen=function(){var o=t,s=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(o&&!this._player._options.enableMockFullscreen){try{var g=document[o.cancelFn]();g&&typeof g.catch=="function"&&g.catch(function(c){console.log(c)})}catch(c){console.log(c)}s._cancelFullScreenTimer=setTimeout(function(){s.isFullScreenChanged||(a.apply(s),s._player.trigger(n.Player.CancelFullScreen)),s._cancelFullScreenTimer=null},500)}else a.apply(s),this._player.trigger(n.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(n.Player.Play),this._player},w.prototype.getIsFullScreen=function(){return this.isFullScreen},w.prototype.dispose=function(){this._player=null,t&&l.off(document,t.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",d.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),a=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,d.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};m.exports=w},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../base/event/eventtype":84,"../base/x5play":114}],141:[function(x,m,j){function w(c,f){var y;if(c)return c=new Date(c),y=(f=new Date(f)).valueOf()/1e3-c.valueOf()/1e3,{start:c,end:f,endDisplay:n.extractTime(f),totalTime:y}}function p(c,f){f&&(c.currentTimestamp=f,c.currentTime=n.convertToDate(f),c.currentTimeDisplay=n.extractTime(c.currentTime),c.liveShiftStart=c.liveTimeRange.start,c.liveShiftEnd=c.liveTimeRange.end,c.liveShiftStartDisplay=n.extractTime(c.liveShiftStart),c.liveShiftEndDisplay=n.extractTime(c.liveShiftEnd),c.availableLiveShiftTime=f-c.liveShiftStart.valueOf()/1e3,c.timestampStart=n.convertToTimestamp(c.liveShiftStart),c.timestampEnd,n.convertToTimestamp(c.liveShiftEnd))}function d(c){function f(){var _=c._options.source;this._originalPlayUrl=_,this._liveShiftUrl=c._options.liveTimeShiftUrl,this.liveTimeRange=w(c._options.liveStartTime,c._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1,this.offset=0}this._player=c,this._isLiveShiftPlaying=!1;var y=this;f.call(this),c.liveShiftSerivce={setLiveTimeRange:function(_,u){y.setLiveTimeRange(_,u)},queryLiveShift:function(_,u,r){y.queryLiveShift(_,u,r)},isLiveShiftPlaying:function(){return y._isLiveShiftPlaying},getLiveShiftOffset:function(){return y.getLiveShiftOffset()},seek:function(_){return y.seek(_)}},c.liveShiftService=c.liveShiftSerivce,c.on(g.Private.ChangeURL,function(){f.call(y)})}var l=x("../../lib/io"),n=x("../../lib/util"),t=x("../../lib/playerutil"),e=x("../../lang/index"),a=x("../flv/flvinjector"),o=x("../hls/hlsinjector"),s=x("../../lib/constants"),g=x("../base/event/eventtype");x("../../lib/url"),d.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},d.prototype.switchToLive=function(){this.seekTime=-1,this.offset=0;var c=this._originalPlayUrl,f=this._player._options.liveShiftSource,y=this._player._options.source;t.isHls(y)&&t.isFlv(c)&&f&&t.isHls(f)&&(this._player._hls&&this._player._destroyHls(),y=this._player._superType,f=this._player._Type,this._player._options._autoplay=!0,a.inject(this._player,f,y,this._player._options,"",!0)),this._player._loadByUrlInner(c,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(g.Private.LiveShiftSwitchToLive)},d.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,this.seekTime==-1?n.parseTime(this.currentTimeDisplay):n.parseTime(this.liveShiftStartDisplay)+this.seekTime},d.prototype.getSourceUrl=function(c,f){var y=this._originalPlayUrl;return this.availableLiveShiftTime<c||(this._isLiveShiftPlaying=!0,c=parseInt(c),y=(y=this._switchLiveShiftPlayer(f))&&this._cleanUrl(y),f=parseInt(this.currentTimestamp)-c,(y=y.indexOf("?")==-1?y+"?lhs_start_unix_s_0="+f:y+"&lhs_start_unix_s_0="+f).indexOf("aliyunols=on")===-1&&(y+="&aliyunols=on"),y.indexOf("continue=on")===-1&&(y+="&continue=on")),y},d.prototype._cleanUrl=function(c){var f;return c.indexOf("?")===-1?c:(c=(c=(f=c.split("?"))[1])&&((c=c.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")===0?c.replace("&",""):c))?f[0]+"?"+c:f[0]},d.prototype._switchLiveShiftPlayer=function(c){var f,y=this._originalPlayUrl,_=this._player._options.liveShiftSource,u=this._player._options.source;if(t.isHls(u))y=u;else if(t.isFlv(y)&&_&&t.isHls(_))return this._player._flv&&this._player._destroyFlv(),u=this._player._superType,f=this._player._Type,this._player._options._autoplay=!0,o.inject(this._player,f,u,this._player._options,"",!0),_;return y},d.prototype.getTimeline=function(c,f){var y;this._player.trigger(g.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(y=this).queryLiveShift(this._liveShiftUrl,function(_){_?(_=_).retCode==0?(p(y,_.content.current),c&&c()):f({Code:s.ErrorCode.ServerAPIError,Message:_.retCode+"|"+_.description+"|"+_.content}):console.log("")},function(_){if(f&&_){var u={};if(_){if(typeof _=="string"&&-1<_.indexOf("403 Forbidden"))u.Code=s.ErrorCode.UrlForbidden,u.Message="Query liveshift failed:"+e.get("Error_AuthKey_Text");else{var r,u=_;try{r=JSON.parse(_)}catch{}r&&(u.Code=s.ErrorCode.ServerAPIError,u.Message=r.retCode+"|"+r.description+"|"+r.content)}f(u)}}}):(p(this,new Date().valueOf()/1e3),c&&c())},d.prototype.start=function(c,f){var y=this,_=function(){y._loopHandler&&clearTimeout(y._loopHandler),y._loopHandler=setTimeout(function(){y.getTimeline(function(){},f),_()},c)};y.getTimeline(function(u){y._localLiveTimeHandler||y.tickLocalLiveTime()},f),_()},d.prototype.tickLocalLiveTime=function(){function c(){f._localLiveTimeHandler=setTimeout(function(){f.currentTimestamp++,p(f,f.currentTimestamp),f._player.trigger(g.Private.LiveShiftQueryCompleted),c()},1e3)}var f=this;c()},d.prototype.setLiveTimeRange=function(c,f){c=c||this._player._options.liveStartTime,f=f||this._player._options.liveOverTime,this.liveTimeRange=w(c,f),p(this,this.currentTimestamp),this._player.trigger(g.Private.LiveShiftQueryCompleted)},d.prototype.queryLiveShift=function(c,f,y){l.get(c,function(_){var u;_?(u=JSON.parse(_)).retCode==0?f&&f(u):y&&y(u):y&&y(_)},function(_){y&&y(_)})},d.prototype.getLiveShiftOffset=function(){return this.offset},d.prototype._performSeek=function(c,f,r){var _,u=this._player._options,r=(f<=u.liveShiftMinOffset&&(f=u.liveShiftMinOffset,c=this.availableLiveShiftTime-f),this._player.trigger(g.Private.SeekStart,{fromTime:r||0}),this.getSourceUrl(f));return this._player._loadByUrlInner(r,c,!0),this._player.trigger(g.Private.Play_Btn_Hide),this.seekTime=c,this.offset=f,this._player.trigger(g.Private.EndStart,{toTime:c}),t.isHls(u.source)&&(_=this,setTimeout(function(){_._player.play()})),{url:r,sec:c,offset:f}},d.prototype.seek=function(c){var f,y;return typeof c!="number"||c<0?(console.error("Invalid offset parameter:",c),{success:!1,error:"Invalid offset parameter"}):!(f=this.availableLiveShiftTime)||f<=0?(console.error("Invalid availableLiveShiftTime:",f),{success:!1,error:"Invalid availableLiveShiftTime"}):((y=f-c)<0&&(y=0,c=f),f<y&&(y=f,c=0),f=0,this._player&&typeof this._player.getCurrentTime=="function"&&(f=this._player.getCurrentTime(),this.seekTime!==-1)&&(f+=this.seekTime),{success:(y=this._performSeek(y,c,f)).success,sec:y.sec,offset:y.offset})},d.prototype.stop=function(c){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},d.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},m.exports=d},{"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/url":54,"../../lib/util":55,"../base/event/eventtype":84,"../flv/flvinjector":120,"../hls/hlsinjector":122}],142:[function(x,m,j){function w(n){function t(){var a=document.querySelector("#"+n.id()+" .prism-progress-marker");if(a){a.innerHTML="";var o=e._player.getDuration();if(0<o){for(var s=0;s<e.progressMarkers.length;s++){var g,c=e.progressMarkers[s];c.offset!==void 0&&c.offset!==""&&(c=document.createElement("div"),d.addClass(c,"prism-marker-dot"),g=e.progressMarkers[s].offset/o,c.style.left=100*g+"%",a.appendChild(c),g=((y,_)=>function(){e._player.trigger(p.Private.MarkerTextShow,{left:y,progressMarker:_})})(g,e.progressMarkers[s]),l.on(c,"mouseover",g),l.on(c,"mouseout",function(y){e._player.trigger(p.Private.MarkerTextHide)}),l.on(c,"touchstart",g),l.on(c,"mousemove",function(y){y.preventDefault()}),l.on(c,"touchmove",function(y){y.preventDefault()}))}var f=document.querySelector("#"+e._player.id()+" .prism-progress-cursor");e._player.on(f,"click",function(y){for(var _=e._player.getCurrentTime(),u=0;u<e.progressMarkers.length;u++){var r,h=e.progressMarkers[u];h&&_-1<h.offset&&h.offset<_+1&&(r=h.offset/o*100+"%",e._player.trigger(p.Private.MarkerTextShow,{left:r,progressMarker:h}))}})}}}this.progressMarkers=[],this._player=n;var e=this;n.on(p.Private.ProgressMarkerLoaded,function(a){a=a.paramData,a&&0<a.length&&(e.progressMarkers=a)}),n.on(p.Private.ProgressMarkerChanged,function(a){a=a.paramData,a&&0<a.length&&(e.progressMarkers=a,t())}),n.on(p.Video.LoadedMetadata,t)}var p=x("../base/event/eventtype"),d=(x("../../lang/index"),x("../../lib/hls/hlsparse"),x("../../lib/object"),x("../../lib/dom")),l=x("../../lib/event");x("../../lib/playerutil"),w.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},m.exports=w},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/hls/hlsparse":43,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":84}],143:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(c){for(var f=1;f<arguments.length;f++){var y,_=arguments[f];for(y in _)!{}.hasOwnProperty.call(_,y)||(c[y]=_[y])}return c}).apply(null,arguments)}function p(c){this.levels=[],this.backupLevels=[],this.drmUrl={},this._player=c,this._isSwitchingVideo=!1,this._currentLevel={Url:c._options.source,desc:l.get("Auto"),auto:!0},this._targetLevel=null;var f=this;c.on(d.Private.PlayInfoLoaded,function(y){for(var _=y.paramData.encryptUrlArr||[],u=[],r=0;r<_.length;r++){var h=_[r];h.encryptionType===a.VodEncryptionType["Widevine-FairPlay"]&&u.push(h)}f.drmUrl=u}),c.on(d.Player.LevelsLoaded,function(y){if(0<f.levels.length&&(f.levels=[]),(y=y.paramData)&&y.levels){for(var _,u,r,h=y.levels.length-1;-1<h;h--){var v,T=y.levels[h];T.url&&0<T.url.length&&T.attrs&&T.attrs.BANDWIDTH&&(v=T.url,t.isArray(v)&&(v=v[0]),v={Url:v=!c._hls&&c._options.isVBR&&c._options.isDrm&&c._options.vid?o.call(f,T):v,desc:Math.min(T.width,T.height),bitrate:T.bitrate,resolution:T.attrs.RESOLUTION,bandwidth:T.attrs.BANDWIDTH},f.levels.push(v))}c._options.definition==="AUTO"&&(c._urls=[],Object.assign(c._urls,this.levels)),f.levels.sort(function(E,S){return(E.bitrate||E.desc)-(S.bitrate||S.desc)}),f.levels=((E,S)=>typeof S=="function"?E.map(function(P){return w({},P,{desc:S({bandwidth:Number(P.bandwidth),bitrate:Number(P.bitrate),width:Number(P.resolution.split("x")[0]),height:Number(P.resolution.split("x")[1])})})}):E.map(function(P){return w({},P,{desc:P.desc+"p@"+parseInt(P.bitrate/1e3)+"k"})}))(f.levels,c._options.bitrateDisplayHandler),(f.levels&&0<f.levels.length||c._drm&&c._options.useDrm2)&&this._player._options.isVBR&&(_=l.get("Auto"),f.levels.push({Url:y.url,desc:_,auto:!0}),((u=f._currentLevel)==null?void 0:u.desc)===_&&(f._currentLevel.Url=y.url),c.trigger(d.Private.SelectorUpdateList,{type:"quality",text:_})),f.backupLevels.length===0&&0<f.levels.length&&(f.backupLevels=[].concat(f.levels)),!c._options.enableABR&&y.levels.length&&(r=(r=(_=y.levels[((u=c._options.startQuality)==null?void 0:u.index)||0])==null?void 0:_.url)||y.levels[0].url,c._hls||c._loadByUrlInner(r),f._currentLevel=f.levels.find(function(E){return E.Url===r}))}}),c.on(d.Private.QualityChange,function(y){var _,u,r;y.paramData.levelSwitch&&((r=(_=y.paramData.url)==null?void 0:_[0])&&(u=f.levels.find(function(h){return h.Url===r})),y.paramData.autoLevel&&c.trigger(d.Player.AbrQualitySwitch,w({},s(u))),f._isSwitchingVideo)&&f._handleVideoSwitchComplete(!0,null,u)}),c.on(d.Player.Error,function(y){f._isSwitchingVideo&&f._handleVideoSwitchComplete(!1,y.paramData||y,null)}),c.on(d.Video.LoadStart,function(){var y,_,u;c._options&&(y=c._options.source,_=c._options.isVBR,u=c._options.useDrm2,!c._hls)&&y&&e.isHls(y)&&(c._manuallySwitchDrmLevel?(c._manuallySwitchDrmLevel=!1,c.trigger(d.Private.SafariDrmLevelSwitch)):(_||c._drm&&!u)&&f.loadLevels(y))})}var d=x("../base/event/eventtype"),l=x("../../lang/index"),n=x("../../lib/hls/hlsparse"),t=x("../../lib/object"),e=x("../../lib/playerutil"),a=x("../../lib/constants");function o(c){for(var f,y=this.drmUrl,_=0;_<this.drmUrl.length;_++)if(Number(c.height)===Number(y[_].height)){f=y[_].Url;break}return f}function s(c){return c=w({},c=c===void 0?{}:c),c.url=c.Url,delete c.Url,c}function g(c){return(c==null?void 0:c.desc)===l.get("Auto")||c!=null&&c.auto}(p.prototype={loadLevels:function(c){var f=new n,y=this;f.load(c,function(_){var u;(u=_.subtitles)!=null&&u.forEach(function(r){f.loadMediaPlaylist({url:r.url},function(h){h=h.fragments[0],h&&(r.vttUrl=f.resolve(h.relurl,h.baseurl))},function(h){console.log("parse vtt url error: ",h)})}),y._player._created?y._player.trigger(d.Player.LevelsLoaded,_):y._player.one(d.Private.Created,function(){y._player.trigger(d.Player.LevelsLoaded,_)})})}}).getQualityList=function(){return((this.levels.length?this.levels:this.backupLevels)||[]).map(s)},p.prototype.getCurrentQuality=function(){return s(this._currentLevel)},p.prototype.changeQuality=function(c){var f,y,_,u=this._player;return c.id||c.url&&(f=c.url,y=this.levels.find(function(r){return r.Url===f})||this.backupLevels.find(function(r){return r.Url===f})),u._monitor2.changeQualityStart({quality:c,targetLevel:y}),g(y)&&u._monitor2.changeQualityAuto(),y?(this._targetLevel=y,this._isSwitchingVideo=!0,u._switchLevel?u._switchLevel(y.Url,y):(_=u.autoplay||u._status!="pause",u._loadByUrlInner(y.Url,u.getCurrentTime(),_)),s(y)):(u={success:!1,from:this._currentLevel||null,to:c,error:"Target level not found"},this._player.trigger(d.Player.QualitySwitchResult,u),this._player._monitor2.changeQualityFinish(u),null)},p.prototype._urlSwitchCompleteHandler=function(){this._isSwitchingVideo&&this._handleVideoSwitchComplete(!0,null)},p.prototype._handleVideoSwitchComplete=function(c,f,y){!g(this._targetLevel)&&y&&(this._targetLevel=y),y={success:c,from:this._currentLevel||null,to:this._targetLevel||null},f&&(y.error=f),this._isSwitchingVideo=!1,this._currentLevel=this._targetLevel,this._targetLevel=null,this._player.trigger(d.Player.QualitySwitchResult,y),this._player._monitor2.changeQualityFinish(y)},p.prototype._handleAbrQualityChange=function(c){var f;c===void 0&&(c={}),this._player._hls||c.width&&c.height&&g(this._targetLevel||this._currentLevel)&&(f=c.width+"x"+c.height,c=(c=this.levels.find(function(y){return y.resolution===f}))||{resolution:f},this._player.trigger(d.Player.AbrQualitySwitch,w({},s(c))))},p.prototype.dispose=function(){this._player=null,this._isSwitchingVideo=!1,this._currentLevel=null,this._targetLevel=null},m.exports=p},{"../../lang/index":28,"../../lib/constants":33,"../../lib/hls/hlsparse":43,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":84}],144:[function(x,m,j){function w(t){this._player=t,this.cues=[],this.baseUrl="";var e=this;t.on(n.Private.ChangeURL,function(){e.cues=[],e.baseUrl=""})}var p=x("../../lib/io"),d=x("../../lib/url"),l=x("../../lib/vtt/thumbnailvtt"),n=x("../base/event/eventtype");(w.prototype={get:function(t){var e,a,o,s=this;this.baseUrl=(e=t,a="",(o=d.parseUrl(e))&&(o=o.segments)&&0<o.length&&(o=o[o.length-1],a=e.split("?")[0].replace(o,"")),a),p.get(t,function(g){g&&l.parse(g,function(c){s.cues=c,s._player.trigger(n.Private.ThumbnailLoaded,c)})},function(g){console.log(g)})},findAvailableCue:function(t){for(var e=this.cues.length,a=0;a<e;a++){var o=this.cues[a];if(o.startTime<=t&&t<o.endTime)return o}return null},makeUrl:function(t){return t=t.indexOf("://")==-1?this.baseUrl+t:t}}).dispose=function(){this._player=null},m.exports=w},{"../../lib/io":45,"../../lib/url":54,"../../lib/vtt/thumbnailvtt":56,"../base/event/eventtype":84}],145:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(h){for(var v=1;v<arguments.length;v++){var T,E=arguments[v];for(T in E)!{}.hasOwnProperty.call(E,T)||(h[T]=E[T])}return h}).apply(null,arguments)}var p=x("../base/player"),d=x("./splayerinjector"),l=x("../flv/flvinjector"),n=x("../hls/hlsinjector"),t=x("../../lib/playerutil"),e=x("../base/event/eventtype"),a=x("../../lib/constants"),o=x("../../lib/codec-probe"),s=x("../../lib/ua"),g=a.USER_EVENT_NAME,c=t.isH265Codec,f=t.isH266Codec,y=t.getVideoTrack,_={},u={codecCost:0,decoderCost:0},r=p.extend({init:function(h,v){var T,E=this,S=(this._options=v,t.isFlv(v.source,v.format)),P=t.isHls(v.source,v.format),b=this._extraMultiSources(),k={};function I(){S?(l.inject(this,r,p,v),v._native=!1):P&&!t.canPlayHls()&&(n.inject(this,r,p,v),v._native=!1),p.call(this,h,v),this._monitor&&this._monitor.updateH265ProbeInfo(w({},u,_)),L.call(this),_.codecTag&&d.reportH265PlayInfo.call(this,{renderType:"native",codecTag:_.codecTag})}function C(){v._native=!1,d.inject(this,r,p,v,_),p.call(this,h,v),this._monitor&&this._monitor.updateH265ProbeInfo(w({},u,_,{waitRenderType:!0})),L.call(this)}function L(){var N,U,Y=this,z=k,K=this[g];K&&(z=Object.assign({},k,K),N=Object.keys(k),U=Object.keys(K),N.forEach(function(M){-1<U.indexOf(M)&&(z[M]=k[M].concat(K[M]))})),Object.keys(z).forEach(function(M){z[M].forEach(function(q){q.binded||p.prototype.on.call(Y,M,q)})})}k[e.Player.Ready]=[function(){E._setupSourceList(b),E.trigger(e.Private.SelectorGenerateList,{type:"quality"})}],v.from==="zhihu"||v.forceH265||v.forceH266?C.call(this):s.IS_ANDROID&&s.dingTalk()&&!S?I.call(this):(T=performance.now(),o(v.source,v,function(Y){u.codecCost+=performance.now()-T;var U,Y=y(Y.tracks),z=(Y||{}).codecTag||((z=(Y||{}).codec)==null?void 0:z.split(".")[0]);_.codecTag=z,Y&&c(z)?(U=performance.now(),S||P&&!t.canPlayHls()?(u.decoderCost+=performance.now()-U,C.call(E)):t.shouldUseBasePlayer({codecTag:z,url:v.source},function(K){u.decoderCost+=performance.now()-U,(K?I:C).call(E)})):(Y&&f(z)?C:I).call(E)},function(N){console.log("error in demuxer, fallback to basePlayer",N),u.codecCost+=performance.now()-T,I.call(E),d.checkProtocol.call(E,v.source)}))}});m.exports=r},{"../../lib/codec-probe":31,"../../lib/constants":33,"../../lib/playerutil":50,"../../lib/ua":53,"../base/event/eventtype":84,"../base/player":109,"../flv/flvinjector":120,"../hls/hlsinjector":122,"./splayerinjector":146}],146:[function(x,m,j){function w(){return(w=Object.assign?Object.assign.bind():function(u){for(var r=1;r<arguments.length;r++){var h,v=arguments[r];for(h in v)!{}.hasOwnProperty.call(v,h)||(u[h]=v[h])}return u}).apply(null,arguments)}var p=x("../../lib/io"),d=x("../base/event/eventtype"),l=x("../base/event/eventmanager"),n=(x("../../lib/event"),x("../../lib/util")),t=x("../../lib/dom"),e=x("../../lib/playerutil"),a=x("../../lib/constants"),o=x("../../lang/index"),s="splayerinjector.js";function g(u){var r=this._options,h=(y.call(this),(function(){e.isVideoTag(this.tag)&&(l.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}).call(this),Videox.Videox),v=r.splayerWasmDomain,v=(!v&&r.assetPrefix&&(v=r.assetPrefix+"/splayer"),new h(w({container:this._el,wasmDomain:v,progressive:!0,skipFrame:h.DiscardType.NONE,loop:r.rePlay,controls:!1,muted:!1,threads:r.h265Threads,simd:r.h265Simd,autoplay:r.autoplay||r._autoplay,live:r.isLive,poster:r.cover||void 0,src:r.source,trackOptions:{disable:!0},preload:r.preload?"auto":"none",timeout:1e3*r.waitingTimeout},r.splayerOptions||{}))),T=(r.debug&&(v.setLogLevel(h.LogLevel.LOG),v.setLogPrintLevel(h.LogLevel.LOG)),this._splayer=v,(this.tag=v).play),E=this;this.tag.play=function(){E._monitor&&E._monitor.reportStartPlay(),T.call(this)},(function(){var S,P=this,b=document.createElement("video");for(S in b)(k=>{P.tag[k]||k.indexOf("on")===0||typeof b[k]!="function"||(P.tag[k]=function(){console.warn("Function ["+k+"] is called on splayer, which should be a mistake."),b[k].apply(b,arguments)})})(S)}).call(this),(function(S){var P=this,b=(l.onAll(this),this._splayer);b.addEventListener("error",(function(k){var I,C,L,Y=Videox.Videox,N=(k||{}).detail,U=Number((N||{}).code),Y=Y.ErrorCode;switch(this.traceLog(s,"splayer-error::"+U,!0),U){case Y.WASM_NOT_SUPPORTED:case Y.CANVAS_NOT_SUPPORTED:case Y.AUDIOCONTEXT_NOT_SUPPORTED:case Y.WORKER_NOT_SUPPORTED:case Y.WEBGL_NOT_SUPPORTED:I=a.ErrorCode.SplayerEnvCheckError,C=o.get("Splayer_Err_Env_Check")+" | "+c(N);break;case Y.DECODE:I=a.ErrorCode.SplayerDecodeError,C=o.get("Splayer_Err_Decode")+" | "+c(N);break;case Y.NETWORK:I=a.ErrorCode.NetworkError,C=o.get("Error_Network_Text")+" | "+c(N);var z=(N.origin||{}).response;z?(z=z.status)===404?(I=a.ErrorCode.NotFoundSourceURL,C=o.get("Error_Not_Found")+" | "+c(N),L=o.get("Tip_Err_Not_found")):z===403&&(I=a.ErrorCode.UrlForbidden,C=o.get("Error_AuthKey_Text")+" | "+c(N)):navigator.onLine&&(I=a.ErrorCode.RequestDataError,C=C+""+o.get("Maybe_Cors_Error"));break;case Y.PARSER:I=a.ErrorCode.SplayerParserNotFound,C=o.get("Splayer_Err_Parser_Not_Found")+" | "+c(N);break;default:I=a.ErrorCode.OtherError,C="(SP)"+o.get("Error_Play_Text")+" | "+c(N)}if(L=L||o.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+o.get("Tip_Err_Splayer_Doc")+"</a>",!(I===a.ErrorCode.NetworkError&&this._reloadForVod())){try{this.pause()}catch{}U={error_code:I,error_msg:C,diagnosis_info:L},U.error_code!==null&&U.error_msg!==null&&(this.logError(U),this.trigger(d.Player.Error,U)),_.call(this,{splayer:!0})}}).bind(this)),b.addEventListener("decoderoverload",function(k){k=k.detail,delete k.shouldWarn,P.trigger(d.Player.H265DecoderOverload,k)}),b.addEventListener("loadedsupportinfo",function(I){var I=I.detail||{},C=I.detail||{},L=b.controller.options||{};b.renderType=I.renderer,_.call(P,{renderer:I.renderer,wasmThreads:C.wasmThreads&&L.threads,wasmThreadsOption:L.threads,simd:C.simd&&L.simd,simdOption:L.simd,codecTag:b.controller.videoTrack&&b.controller.videoTrack.codecTag||b.controller.videoTrack&&((I=b.controller.videoTrack.codec)==null?void 0:I.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(b.once("canplay",function(){b.paused&&P._autoplayFailedHandler()}),b.once("timeupdate",function(){P.trigger(d.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay(),b.on("playing",function(){P._monitor&&P._monitor.reportPlaying()}),b.on("timeupdate",function(){P._monitor&&P._monitor.reportPlaying()})}).call(this,u)}function c(r){var r=r=r===void 0?{}:r,h=r.code,v=Videox.Videox.ErrorCode,T="";return T=h?T+h+(": "+(r.message||v[h])):T}function f(u){return!n.contentProtocolMixed(u,"alwaysCheck")||((u={mediaId:this._options.vid||"",error_code:a.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=o.get("Request_Block_Text"),this.logError(u),this.trigger(d.Player.Error,u),!1)}function y(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function _(u){var r;u===void 0&&(u={}),!this._h265InfoReported&&(this._h265InfoReported=!0,r={0:"native",1:"mse",2:"wasm"},delete(u=w({codecTag:(this._probeInfo||{}).codecTag||u.codecTag,renderType:u.renderType||r[u.renderer]},u)).renderer,u.renderType!==r[2]&&(delete u.simd,delete u.simdOption,delete u.wasmThreads,delete u.wasmThreadsOption),this._splayerRenderType=u.renderType,r=u.codecTag)&&(e.isH265Codec(r)?this.trigger(d.Player.H265PlayInfo,u):e.isH266Codec(r)&&this.trigger(d.Player.H266PlayInfo,u))}m.exports.checkProtocol=f,m.exports.reportH265PlayInfo=_,m.exports.inject=function(u,r,h,v,T){function E(P,b){this._superPt.setPlayerSize.call(this,P,b),P=this._el.querySelector("canvas"),P&&(b=this._el.offsetWidth/this._el.offsetHeight,P.offsetWidth/P.offsetHeight<b?(P.style.height="100%",P.style.width="initial"):(P.style.width="100%",P.style.height="initial"))}function S(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),r.prototype.replay=this._superPt.replay,r.prototype.setPlayerSize=this._superPt.setPlayerSize,r.prototype._setTransform=this._superPt._setTransform,r.prototype.initPlay=this._superPt.initPlay),y.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}u._Type=r,u._superType=h,u._superPt=h.prototype,u._disposed=!1,u._splayer=null,u._splayerLoaded=!1,u._probeInfo=T,u._splayerRenderType=null,r.prototype.initPlay=function(P){var b=this;this.trigger(d.Private.H5_Loading_Show),f.call(this,this._options.source)&&(this._splayerLoaded?g.call(this,P):(function(k,I){var C=this._options,L=C.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.8/dist/index.js";!C.splayerUrl&&C.assetPrefix&&(L=C.assetPrefix+"/splayer/index.js"),p.loadJS(L,k.bind(this),function(){I&&I()})}).call(this,function(){this._splayerLoaded=!0,g.call(this,P),b._executeReadyCallback()},function(){var k={mediaId:b._options.vid||"",mediaAuth:b._options.mediaAuth||"",error_code:a.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};b.trigger(d.Player.Error,k)}))},r.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},Object.defineProperty(r.prototype,"setPlayerSize",{enumerable:!0,configurable:!0,get:function(){return E},set:function(){return E}}),r.prototype._setTransform=function(){var P=this._player.el(),b=this._splayerRenderType==="wasm",P=b?P.querySelector("canvas"):P.querySelector("video"),b=(this._transformProp||(this._transformProp=t.getTransformName(P)),b?"":" translate(-50%, -50%)");this._rotate&&(b+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?b+=" scaleY(-1)":this._image=="horizon"&&(b+=" scaleX(-1)")),P.style[this._transformProp]=b},Object.defineProperty(r.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return S},set:function(){return S}})}},{"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/util":55,"../base/event/eventmanager":83,"../base/event/eventtype":84}],147:[function(x,m,j){function w(v,T){var E,S=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(S)return(S=S.call(v)).next.bind(S);if(Array.isArray(v)||(S=((P,b)=>{var k;if(P)return typeof P=="string"?p(P,b):(k=(k={}.toString.call(P).slice(8,-1))==="Object"&&P.constructor?P.constructor.name:k)==="Map"||k==="Set"?Array.from(P):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?p(P,b):void 0})(v))||T)return S&&(v=S),E=0,function(){return E>=v.length?{done:!0}:{done:!1,value:v[E++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(v,T){(T==null||T>v.length)&&(T=v.length);for(var E=0,S=Array(T);E<T;E++)S[E]=v[E];return S}var d=typeof Promise>"u"?x("es6-promise").Promise:Promise,l=x("../../lib/io"),n=x("../../config"),t=x("../../lang/index"),e=x("../../lib/ua"),a=x("../base/event/eventtype"),o=x("../../lib/constants"),s=o.PLAYER_SCOPE,g=o.SW_MSG_EVT,c=o.DM_MSG_EVT,f=o.ErrorCode,y=x("../../monitor-new/constants").ERROR_ANALYZE_TYPE,_=x("./tsremuxer").TSRemuxer,u="swinjector.js";function r(v){v={mediaId:this._options.vid||"",error_code:v.code,error_msg:v.msg,diagnosis_info:v.info,analyze:v.analyze},this.trigger(a.Player.Error,v)}function h(v){return v.split("?")[0].split("#")[0]}m.exports.inject=function(v,T,E,S,P){v.swPlayer=!0,v.firstBuild=!0,v.sw=null,v.tsDemuxerWorker=null,v.tsRemuxer=null,v.preloadError=!1,v.fetchHasResult=!1,v._initServiceWorker=new d(function(N){setTimeout(N,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(U){if(!U.length)return console.log("No serviceWorker registrations found."),N();for(var Y,z=[],K=w(U);!(Y=K()).done;)(()=>{var M=Y.value,q=M.unregister().then(function(ee){console.log(ee?"Successfully unregistered":"Failed to unregister",`ServiceWorkerRegistration
`+(M.installing?"  .installing.scriptURL = "+M.installing.scriptURL+`
`:"")+(M.waiting?"  .waiting.scriptURL = "+M.waiting.scriptURL+`
`:"")+(M.active?"  .active.scriptURL = "+M.active.scriptURL+`
`:"")+"  .scope: "+M.scope+`
`)});z.push(q)})();d.all(z).then(N).catch(N)}).catch(function(U){console.log("clear sw error",U),N()}):N()}).then((function(N){var U=this;return new d(function(Y){var z,K=(q=>{if(!q)return t.get("Error_SW_ScriptURL_Empty");if((q=String(q)).indexOf("https")!==0&&q.indexOf("localhost")===-1&&q.indexOf("127.0.0.1")===-1)return t.get("Error_SW_ScriptURL_Https");try{ee=new URL(q)}catch(Q){return t.get("Error_SW_ScriptURL_ILlegal","",{detail:Q})}(q=h(location.href).split("/")).pop();var q=q.join("/"),ee=((ee=h(ee.href).split("/")).pop(),ee.join("/"));return q!==ee?t.get("Error_SW_ScriptURL_Scope","",{scope1:ee,scope2:q}):void 0})(N.swScriptURL);if(K)return U.preloadError=!0,r.call(U,{code:f.ModuleLoadError,msg:K});"serviceWorker"in navigator?(navigator.serviceWorker.register(N.swScriptURL,{scope:"./"}).then(function(M){U.traceLog(u,"sw registered"),M=M.active||M.waiting||M.installing,M.postMessage({scope:s,name:g.SETUP}),U.sw=M}).catch(function(M){U.preloadError=!0,r.call(U,{code:f.ModuleLoadError,msg:t.get("Error_SW_Register_Failed")+"("+M+")",info:t.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(M){M.target.controller.scriptURL!==N.swScriptURL&&r.call(U,{code:f.ModuleLoadError,msg:t.get("Error_SW_Conflict"),info:"controlled by "+M.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(M){var q;if((ee=M.data)&&ee.scope===s){var ee=M.data.name;switch(console.log("[MESSAGE FROM SW]["+ee+"]",(R=>{var H;try{H=/[0-9]+\.ts/.exec(R)[0]}catch{}return H})((q=M.data.payload)==null?void 0:q.url),M.data.payload),ee){case g.SETUP_ACK:Y(),U.traceLog(u,"sw ack");var Q=(Q=M.data.payload)==null?void 0:Q.version;Q!==n.h5Version&&(U.preloadError=!0,r.call(U,{code:f.ModuleLoadError,msg:t.get("Error_SW_Version_Not_Match","",{swVersion:Q,playerVersion:n.h5Version})}));break;case g.ENC_SEGMENT:var B=M.data.payload;U._getDemuxer.then(function(){U.tsDemuxerWorker&&U.tsDemuxerWorker.postMessage({name:c.DEMUX,payload:{buffer:B.buffer,url:B.url,playlistUrl:B.playlistUrl}})});break;case g.ABORT_SEGMENT:U.tsDemuxerWorker&&U.tsDemuxerWorker.postMessage({name:c.FLUSH}),U.tsRemuxer&&U.tsRemuxer.flush()}}})):(U.preloadError=!0,K="",z={type:null},location.protocol==="http:"?K=t.get("Error_SW_Https_required"):(K=t.get("UseChromeForVodEncription")+"(SW not found)",z.type=y.SW_NOT_FOUND),r.call(U,{code:f.EncrptyVideoNotSupport,msg:K,analyze:z}))})}).call(v,S));var b,k,I=performance.now(),C=(v._getDemuxer=(b=S,new d(function(N,U){var Y="aliplayer-hls2-demuxer-min.js",z="https://"+n.domain+n.path+n.h5Version+"/hls/"+Y;b.assetPrefix&&(z=b.assetPrefix+"/hls/"+Y),l.loadJS(z,N,U)}).then(function(){v.traceLog(u,"got demuxer#"+parseInt(performance.now()-I)),window.AliDemuxerWorker&&(v.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,v.tsDemuxerWorker.postMessage({name:c.SETUP,payload:{key:P,debug:S.debug}}),v.tsDemuxerWorker.addEventListener("message",function(N){var U=N.data;switch(U.name){case c.RESULT:if(v.tsRemuxer)try{v.tsRemuxer.remux(U.payload.demuxResult)}catch(Y){v.traceLog(u,"remux error: "+Y.message+", "+Y.stack+"}")}break;case c.DISPOSED:v.tsDemuxerWorker&&(v.tsDemuxerWorker.terminate(),v.tsDemuxerWorker=null);break;case c.ERROR:v.traceLog(u,"demuxer error:  "+U.payload.reason)}}),v.tsDemuxerWorker.addEventListener("error",function(N){v.traceLog(u,"demuxer uncaught error: "+N.message)}))}).catch(function(N){v.preloadError=!0,r.call(v,{code:f.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());function L(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:c.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var N=E.prototype;N&&(N.dispose.call(this),T.prototype.initPlay=N.initPlay),this.sw&&(this.sw.postMessage({scope:s,name:g.DISPOSE}),this.sw=null)}v._getRemuxer=(k=S,new d(function(N,U){var Y,z="aliplayer-remuxer-min.js",K="https://"+n.domain+n.path+n.h5Version+"/hls/"+z;k.assetPrefix&&(K=k.assetPrefix+"/hls/"+z),e.IS_IOS&&Number(e.IOS_VERSION)<=14?(Y="https://"+n.domain+n.path+n.h5Version+"/hls/aliplayer-remuxer-polyfill.js",k.assetPrefix&&(K=k.assetPrefix+"/hls/"+z),l.loadJS(Y,function(){l.loadJS(K,N,U)},U)):l.loadJS(K,N,U)}).then(function(){v.traceLog(u,"got remuxer#"+parseInt(performance.now()-C)),window.LibMux&&(v.tsRemuxer=new _({onResult:function(N){v.sw.postMessage({scope:s,name:g.DEC_SEGMENT,payload:{buffer:N.data.buffer,url:N.id}},[N.data.buffer])}}))}).catch(function(){v.preloadError=!0,r.call(v,{code:f.ModuleLoadError,msg:"ts-remuxer module load error"})})),T.prototype.initPlay=function(){var N=this;d.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){N.trigger(a.Private.H5_Loading_Show),l.get(S.source,function(U){var Y;v.fetchHasResult=!0,N.preloadError||(U=((z,K)=>{var M,q=-1<K.indexOf("EXT-X-STREAM-INF");if(K=K.replace(/#EXT-X-KEY:.*\n?/g,""),z=z.match(/^(.*)\/[^\/]*$/))return M=z[1],z=q?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,K=K.replace(z,function(ee,Q,B){return""+Q+M+"/"+B+(-1<B.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")})(S.source,U),Y="",Y=e.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(U):(U=new Blob([U],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(U)),N.tag.src=Y,N._initPlayBehavior(),N.firstBuild&&(N.firstBuild=!1,N._executeReadyCallback()))},function(U,Y){if(console.log("fetch m3u8 error",U,Y),N.traceLog(u,"fetch m3u8 error "+Y+"-"+U),!v.fetchHasResult&&(v.fetchHasResult=!0,!N.preloadError)){var z,K;switch(Y){case 403:z=f.UrlForbidden,K=t.get("Error_AuthKey_Text");break;case 404:z=f.NotFoundSourceURL,K=t.get("Error_Not_Found");break;default:z=f.RequestDataError,K=t.get("Error_Load_M3U8_Failed_Text")}r.call(N,{code:z,msg:K})}})})},Object.defineProperty(T.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return L},set:function(){return L}})}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/ua":53,"../../monitor-new/constants":67,"../base/event/eventtype":84,"./tsremuxer":148,"es6-promise":13}],148:[function(x,m,j){m.exports.TSRemuxer=(()=>{function w(d){this.mux=null;var l=window.LibMux;console.log("LibMux ->",l),this.mux=new l({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(n){console.log("remux result -> ",n),d.onResult(n)}})}var p=w.prototype;return p.remux=function(d){this.mux.remuxTS({id:d.id,videoTrack:d.videoTrack,audioTrack:d.audioTrack})},p.flush=function(){this.mux.flush()},p.destroy=function(){this.mux.destroy()},w})()},{}],149:[function(require,module,exports$1){(function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function x(g){var c=window[$jsskein_array_102[10]];return $jsskein_array_103[2],$jsskein_array_104[0],c[g]=function(){}}for(var m=1;m!==void 0;){var j=3&m>>2;switch(3&m){case 0:switch(j){case 0:m=s?5:9;continue;case 1:s++,m=8;continue;case 2:m=s<a[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(j){case 0:$jsskein_array_103[2],m=window?10:6;continue;case 1:var w=a[$jsskein_array_102[7]](s),p=~(~(w&~d)&~(~w&d)),d=w;o+=$jsskein_array_104[10][$jsskein_array_103[9]](p),m=4;continue;case 2:w=$jsskein_array_103[8],d=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+w,m=5;continue}continue;case 2:switch(j){case 0:l[n]($jsskein_array_102[8],$jsskein_array_102[9],t,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],e,o),l[$jsskein_array_102[11]](x),m=6;continue;case 1:m=void 0;continue;case 2:var l=[],n=$jsskein_array_103[3];n+=$jsskein_array_103[4];var t=(t=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),e=$jsskein_array_102[4],a=(e=(e+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),o=$jsskein_array_103[6],d=$jsskein_array_103[2],s=$jsskein_array_104[0];m=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;NEXTBB24!==void 0;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;NEXTBB34!==void 0;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;NEXTBB32!==void 0;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;NEXTBB29!==void 0;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(x,m){for(var j=27;j!==void 0;){var w=7&j>>3;switch(7&j){case 0:switch(w){case 0:n5fg6f(m),j=28;continue;case 1:c++,j=2;continue;case 2:var p=$jsskein_array_104[38],d=$jsskein_array_102[26],l=$jsskein_array_103[2],n=$jsskein_array_102[12],j=18;continue;case 3:var t=$jsskein_array_103[28],e=$jsskein_array_104[1],a=$jsskein_array_103[2],o=$jsskein_array_103[2];j=33;continue;case 4:console[$jsskein_array_102[36]](d),j=28;continue}continue;case 1:switch(w){case 0:n++,j=18;continue;case 1:var f=$jsskein_array_102[32],s=(f=(f=(f=(f+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34]+$jsskein_array_103[30],r=Aliplayer[f],$jsskein_array_103[31]),g=$jsskein_array_102[26],c=$jsskein_array_103[2];j=2;continue;case 2:var f=t[$jsskein_array_102[7]](o),y=~(~(f&~a)&~(~f&a)),a=f;e+=$jsskein_array_103[29][$jsskein_array_103[9]](y),j=10;continue;case 3:l=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39],j=26;continue;case 4:j=o<t[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(w){case 0:j=c<s[$jsskein_array_104[25]]?36:34;continue;case 1:o++,j=33;continue;case 2:j=n<p[$jsskein_array_104[25]]?12:32;continue;case 3:var _=p[$jsskein_array_103[21]](n),u=~(~(_&~l)&~(~_&l));l=_,d+=$jsskein_array_104[10][$jsskein_array_102[2]](u),j=1;continue;case 4:j=(r=g!==r)?0:16;continue}continue;case 3:switch(w){case 0:var h=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);a=$jsskein_array_104[35]+h,j=17;continue;case 1:j=o?17:3;continue;case 2:return;case 3:var r=x[$jsskein_array_104[31]];j=(r=$jsskein_array_102[29]==r)?35:28;continue;case 4:var h=$jsskein_array_104[32],v=(h=(h=(h=(h+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),r=window[h],$jsskein_array_104[33]),T=r[(v+=$jsskein_array_103[25])+$jsskein_array_103[26]],E=$jsskein_array_103[27]===T;j=E?20:24;continue}continue;case 4:switch(w){case 0:E=e===T,j=20;continue;case 1:j=n?26:25;continue;case 2:j=(r=E)?19:9;continue;case 3:j=void 0;continue;case 4:var S=~(~(s[$jsskein_array_102[7]](c)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(s[$jsskein_array_103[21]](c)&s[$jsskein_array_103[21]](c))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));g+=$jsskein_array_104[10][$jsskein_array_102[2]](S),j=8;continue}continue}}}for(var NEXTBB0=0;NEXTBB0!==void 0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector-2.0.25"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:$jsskein_indexLevel111_1===0&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}).call(this,["",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","",14,"fromCharCode","warn","error","dir",!0,"u","nab","",2,"st","",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","\uD855",65])},{"../lib/devtools-detector-2.0.25":36}],150:[function(a,m,j){var o=a("../lib/oo"),w=a("../lib/data"),p=a("../lib/object"),d=a("../lib/dom"),l=a("../lib/event"),n=a("../lib/function"),t=a("../lib/layout"),e=(a("../lib/constants"),a("../lib/util"),a("../player/base/event/eventtype")),a=a("./component/util"),o=o.extend({init:function(s,g){var c=this,f=(this._player=s,this._eventState="",this._options=p.copy(g),this._el=this.createEl(),s.id);typeof s.id=="function"&&(f=s.id()),this._id=f+"_component_"+w.guid(),this._children=[],this._childIndex={},g.className&&this.addClass(g.className),this._player.on(e.Private.UiH5Ready,function(){c.renderUI(),c.syncUI(),c.bindEvent()})}});o.prototype.renderUI=function(){t.render(this.el(),this.options()),this.el().id=this.id()},o.prototype.syncUI=function(){},o.prototype.bindEvent=function(){},o.prototype.createEl=function(s,g){return d.createEl(s,g)},o.prototype.options=function(s){return s===void 0?this._options:this._options=p.merge(this._options,s)},o.prototype.el=function(){return this._el},o.prototype._contentEl,o.prototype.player=function(){return this._player},o.prototype.contentEl=function(){return this._contentEl||this._el},o.prototype._id,o.prototype.id=function(){return this._id},o.prototype.getId=function(){return this._id},o.prototype.addChild=function(s,g){var c;if(typeof s=="string"){if(!this._player.UI[s])return;c=new this._player.UI[s](this._player,g)}else c=s;return this._children.push(c),typeof c.id=="function"&&(this._childIndex[c.id()]=c),typeof c.el=="function"&&c.el()&&((g=c.el()).id=c.id(),this.contentEl().appendChild(g)),c},o.prototype.removeChild=function(s){if(s&&this._children){for(var g,c=!1,f=this._children.length-1;0<=f;f--)if(this._children[f]===s){c=!0,this._children.splice(f,1);break}c&&(this._childIndex[s.id]=null,g=s.el())&&g.parentNode===this.contentEl()&&this.contentEl().removeChild(s.el())}},o.prototype.getChild=function(s){if(["setting","volume"].includes(s)){var g=this.getChild("controlBar");if(g)return g.getChild(s)}for(var c=0;c<this._children.length;c++){var f=this._children[c];if(f._options&&f._options.name===s||f._children&&0<f._children.length&&(f=this.getChild.call(f,s),f))return f}},o.prototype.initChildren=function(){var s,g,c=this,f=this.options().children;if(f)if(p.isArray(f))for(var y=0;y<f.length;y++)g=typeof(g=f[y])=="string"?(s=g,{}):(s=g.name,g),c.addChild(s,g);else p.each(f,function(_,u){u!==!1&&c.addChild(_,u)})},o.prototype.on=function(s,g){return l.on(this._el,s,n.bind(this,g)),this},o.prototype.off=function(s,g){return l.off(this._el,s,g),this},o.prototype.one=function(s,g){return l.one(this._el,s,n.bind(this,g)),this},o.prototype.trigger=function(s,g){if(this._el)return!g&&g!=0||(this._el.paramData=g),this._eventState=s,l.trigger(this._el,s),this},o.prototype.offAll=function(s){return l.off(this._el,s),this},o.prototype.addClass=function(s){return d.addClass(this._el,s),this},o.prototype.removeClass=function(s){return d.removeClass(this._el,s),this},o.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},o.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},o.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var s=this._children.length-1;0<=s;s--)this._children[s].destroy&&this._children[s].destroy();typeof this.disposeUI=="function"&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),w.removeData(this._el),this._el=null},o.prototype.registerControlBarTooltip=a.registerTooltipEvent,m.exports=o},{"../lib/constants":33,"../lib/data":35,"../lib/dom":37,"../lib/event":38,"../lib/function":40,"../lib/layout":46,"../lib/object":47,"../lib/oo":48,"../lib/util":55,"../player/base/event/eventtype":84,"./component/util":180}],151:[function(t,m,j){var w=t("../component"),p=t("../../lib/dom"),d=t("../../lib/event"),l=t("../../player/base/event/eventtype"),n=t("../../player/base/plugin/status"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass("prism-big-play-btn")},createEl:function(){var e=w.prototype.createEl.call(this,"div");return e.setAttribute("data-testid","playButton"),e.innerHTML='<div class="outter"></div>',e},bindEvent:function(){var e=this,a=(this._player.on(l.Player.Play,function(){e.addClass("playing"),e.removeClass("pause"),e._hide()}),this._player.on(l.Player.Pause,function(){var o,s;e._player._switchSourcing||e._player._isLiveRetrying()||(e.removeClass("playing"),e.addClass("pause"),o=e._player._status,s=e._player._seeking,o==n.ended)||o==n.error||o==n.playing||s||e._show()}),document.querySelector("#"+e.id()+" .outter"));d.on(this.el(),"mouseover",function(){p.addClass(a,"big-playbtn-hover-animation")}),d.on(this.el(),"mouseout",function(){p.removeClass(a,"big-playbtn-hover-animation")}),this.on(l.Private.PlayClick,function(){e._player.paused()?e._player.play(!0):e._player.pause(!0)}),this._player.on(l.Private.Play_Btn_Show,function(){e._show()}),this._player.on(l.Private.Play_Btn_Hide,function(){e._hide()})},_show:function(){p.css(this.el(),"display","block")},_hide:function(){p.css(this.el(),"display","none")}});m.exports=t},{"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":84,"../../player/base/plugin/status":113,"../component":150}],152:[function(t,m,j){var w=t("../component"),p=t("../../lib/dom"),d=t("./util"),l=t("../../lang/index"),n=t("../../player/base/event/eventtype"),t=w.extend({init:function(e,a){this.isOpened=!1,w.call(this,e,a),this.addClass("prism-cc-btn")},createEl:function(){return w.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){p.addClass(e._el,"disabled");var a="on",o="";e.isOpened?(e._player._ccService.CookieOff(),e._player._ccService.close(),a="off"):o=e._player._ccService.open().label,e._player.trigger(n.Private.CCChanged,a),e._player.trigger(n.Private.CCStateChanged,{value:a,lang:o}),e.disabledHandler&&clearTimeout(e.disabledHandler),e.disabledHandler=setTimeout(function(){p.removeClass(e._el,"disabled")},1e3),e._player.trigger(n.Private.MarkerTextHide)}),this._player.on(n.Private.CCChanged,function(a){a=a.paramData,e.isOpened=a!="off"}),d.registerTooltipEvent.call(this,this.el(),function(){return e.isOpened?l.get("CloseSubtitle"):l.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],153:[function(t,m,j){var w=t("../component"),p=t("../../player/base/event/eventtype"),d=t("../../lib/event"),l=t("../../lib/dom"),n=t("../../lib/ua"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=w.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var e,a,o=this.player(),s=o.options(),g=this,c=(d.on(this._el,"mouseover",function(){var f=document.querySelector("#"+g.id()+" .prism-progress-cursor");l.css(f,"display","block")}),d.on(this._el,"mouseout",function(f){var y=document.querySelector("#"+g.id()+" .prism-progress-cursor");l.css(y,"display","none"),o.trigger(p.Private.ThumbnailHide)}),d.on(this._el,"click",function(f){o.trigger(p.Private.ControlBarClick,f)}),n.IS_IOS&&(d.on(this._el,"touchstart",function(){var f=document.querySelector("#"+g.id()+" .prism-progress-cursor");l.css(f,"display","block")}),d.on(this._player.tag,"touchstart",function(){var f=document.querySelector("#"+g.id()+" .prism-progress-cursor");l.css(f,"display","none"),o.trigger(p.Private.ThumbnailHide)})),this.timer=null,s.controlBarVisibility);(c=s.controlBarForOver==1?"hover":c)=="hover"?(g.hide(),e=function(){g._hideHandler&&clearTimeout(g._hideHandler),g._show(),o.fullscreenService.getIsFullScreen()&&g._hide()},a=function(){g.hide(),o.trigger(p.Private.HideBar),o.trigger(p.Private.ThumbnailHide),o.trigger(p.Private.VolumeVisibilityChange,""),o.trigger(p.Private.SettingListHide)},o.on(p.Private.MouseOver,function(){e()}),o.on(p.Private.MouseOut,function(){clearTimeout(g._hideHandler),g._hideHandler=setTimeout(function(){a()})}),o.on(p.Private.Click,function(f){e()}),o.on(p.Private.TouchStart,function(f){e()}),g._documentClickHandler=s=function(_){var y=o._el,_=_.target;y&&!y.contains(_)&&(clearTimeout(g._hideHandler),g._hideHandler=setTimeout(function(){a()}))},n.IS_MOBILE&&(document.body.addEventListener("click",s,{capture:!0}),document.body.addEventListener("touchstart",s,{capture:!0}))):c=="click"?(n.IS_PC&&o.on(p.Private.Click,function(f){o._isError||(f.preventDefault(),f.stopPropagation(),g._show(),g._hide())}),o.on(p.Player.Ready,function(){g._hide()}),o.on(p.Private.TouchStart,function(){g._show()}),o.on(p.Private.TouchMove,function(){g._show()}),o.on(p.Private.TouchEnd,function(){g._hide()})):c=="never"?g._hide():g._show(),o.on(p.Private.ShowControlBarByAPI,function(){g.timer&&(clearTimeout(g.timer),g.timer=null),g._hideHandler&&(clearTimeout(g._hideHandler),g._hideHandler=null),g.show(),o.trigger(p.Private.ShowBar)}),o.on(p.Private.HideControlBarByAPI,function(){g.timer&&(clearTimeout(g.timer),g.timer=null),g._hideHandler&&(clearTimeout(g._hideHandler),g._hideHandler=null),g.hide(),o.trigger(p.Private.HideBar),o.trigger(p.Private.ThumbnailHide),o.trigger(p.Private.VolumeVisibilityChange,""),o.trigger(p.Private.SettingListHide)})},_show:function(){this.show(),this._player.trigger(p.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,a=this.player().options(),a=a.controlBarVisibility=="never"?0:a.showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(p.Private.HideBar),e._player.trigger(p.Private.ThumbnailHide),e._player.trigger(p.Private.VolumeVisibilityChange,""),e._player.trigger(p.Private.SettingListHide)},a)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null),this._documentClickHandler&&(document.body.removeEventListener("click",this._documentClickHandler),document.body.removeEventListener("touchstart",this._documentClickHandler),this._documentClickHandler=null)}});m.exports=t},{"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":84,"../component":150}],154:[function(l,m,j){var w=l("../component"),p=l("../../lib/dom"),d=l("../../player/base/event/eventtype"),l=w.extend({init:function(n,t){w.call(this,n,t),this.addClass("prism-cover")},createEl:function(){var n=w.prototype.createEl.call(this,"div"),t=this.options().cover;return t?n.style.backgroundImage="url("+t+")":p.css(n,"display","none"),n},_hide:function(n){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&p.css(t,"display","none")},_show:function(n){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&p.css(t,"display","block")},bindEvent:function(){this._player.on(d.Private.Cover_Show,this._show),this._player.on(d.Private.Cover_Hide,this._hide)}});m.exports=l},{"../../lib/dom":37,"../../player/base/event/eventtype":84,"../component":150}],155:[function(l,m,j){var w=l("../component"),p=l("../../lib/dom"),d=l("../../lib/event"),l=w.extend({init:function(t,e){w.call(this,t,e),this.addClass("prism-double-click-skip")},createEl:function(){var t=w.prototype.createEl.call(this,"div");return t.innerHTML=`
        <div class="click-skip-container click-skip-container-left">
          <div class="ff-arrow-container">
              <span class="ff-arrow ff-arrow1"></span>
              <span class="ff-arrow ff-arrow2"></span>
              <span class="ff-arrow ff-arrow3"></span>
              <span class="ff-text">10s</span>
          </div>
        </div>
        <div class="click-skip-container click-skip-container-right">
          <div class="ff-arrow-container">
              <span class="ff-arrow ff-arrow1"></span>
              <span class="ff-arrow ff-arrow2"></span>
              <span class="ff-arrow ff-arrow3"></span>
              <span class="ff-text">10s</span>
          </div>
        </div>
      `,t},bindEvent:function(){var t=this,e="prism-double-click-skip-active",a="click-skip-container-active",o="ff-arrow-container-hide",s="ff-arrow-container-revert",g=(this.nodeLeft=this.el().querySelector(".click-skip-container-left"),this.nodeRight=this.el().querySelector(".click-skip-container-right"),this.arrowLeft=this.nodeLeft.querySelector(".ff-arrow-container"),this.arrowRight=this.nodeRight.querySelector(".ff-arrow-container"),p.addClass(this.arrowLeft,o),p.addClass(this.arrowRight,o),null),c=(d.on(this.nodeLeft,"dblClick",function(){g?(clearTimeout(g),g=null):(t.addClass(e),p.addClass(t.nodeLeft,a),p.removeClass(t.arrowLeft,o),p.addClass(t.arrowLeft,s)),g=setTimeout(function(){g=null,t.removeClass(e),p.removeClass(t.nodeLeft,a),p.removeClass(t.arrowLeft,s),p.addClass(t.arrowLeft,o)},1e3),t._skip("backward")}),null);d.on(this.nodeRight,"dblClick",function(){c?(clearTimeout(c),c=null):(t.addClass(e),p.addClass(t.nodeRight,a),p.removeClass(t.arrowRight,o)),c=setTimeout(function(){c=null,p.removeClass(t.nodeRight,a),t.removeClass(e),p.addClass(t.arrowRight,o)},1e3),t._skip("forward")}),n(this.nodeLeft),n(this.nodeRight),this._player._handleLongPress(this._player.getOptions(),this.el()),this._player._handleClickPause_dbClickFullscreen(this._player.getOptions(),this.el())},_skip:function(t){var e=this._player.getCurrentTime(),a=this._player.getDuration(),o=e,o=t==="forward"?Math.min(e+10,a):Math.max(e-10,0);this._player.seek(o)},disposeUI:function(){}});function n(t){var e=null;d.on(t,"touchstart",function(){e?(clearTimeout(e),e=null,d.trigger(t,"dblClick")):e=setTimeout(function(){e=null},300)})}m.exports=l},{"../../lib/dom":37,"../../lib/event":38,"../component":150}],156:[function(s,m,j){var w=s("../component"),p=s("../../lib/util"),d=s("../../lib/dom"),l=s("../../lib/event"),n=s("../../lib/ua"),t=s("../../lang/index"),e=s("../../player/base/event/eventtype"),a=s("../../config"),o=s("../../lib/constants").ErrorCode,s=w.extend({init:function(g,c){w.call(this,g,c),this.addClass("prism-ErrorMessage")},createEl:function(){var g=w.prototype.createEl.call(this,"div");return g.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+t.get("Refresh_Text")+"</a><a class='prism-button prism-button-open'  target='_blank'>"+t.get("Open_Url")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+t.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='ver'><span class='info-label'>ver:&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+t.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",g},bindEvent:function(){var g=this,f=(g._player.on(e.Private.Error_Show,function(y){var _=null;g._player.getMonitorInfo&&(_=g._player.getMonitorInfo()),g._show(y,_)}),g._player.on(e.Private.Error_Hide,function(){g._hide()}),document.querySelector("#"+g.id()+" .prism-button-refresh")),c=(l.on(f,"click",function(){g._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),n.IS_MOBILE&&(f=document.querySelector("#"+g.id()+" .prism-detect-info"),d.addClass(f,"prism-width90")),document.querySelector("#"+g.id()+" .prism-error-detail")),f=document.querySelector("#"+this.id()+" .prism-button-orange"),f=(d.css(c,"display","none"),l.on(f,"click",function(){d.css(c,"display","block")}),document.querySelector("#"+this.id()+" .prism-button-open"));d.css(f,"display","none"),l.on(f,"click",function(){try{window.open(g._player.getOptions().source)}catch{}})},_show:function(y,c){var y=y.paramData,f=(y.mediaId&&y.mediaId,y.mediaAuth&&y.mediaAuth,y.display_msg||y.error_msg),f=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=f,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=y.error_code,y.diagnosis_info),f=(f?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=f:(f=document.querySelector("#"+this.id()+" .prism-button-orange"),d.css(f,"display","none")),document.querySelector("#"+this.id()+" .prism-button-open")),f=([o.RequestDataError,o.UrlForbidden,o.LoadingTimeout,o.OtherError].includes(y.error_code)&&d.css(f,"display","inline-block"),document.querySelector("#"+this.id()+" .vid")),f=(y.mediaId?(d.css(f,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=y.mediaId):d.css(f,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),y=(y.mediaAuth?(d.css(f,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=y.mediaAuth):d.css(f,"display","none"),y.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=y.uuid:(f=document.querySelector("#"+this.id()+" .uuid"),d.css(f,"display","none")),y.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=y.requestId:(f=document.querySelector("#"+this.id()+" .requestId"),d.css(f,"display","none")),y.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=y.serverRequestId:(f=document.querySelector("#"+this.id()+" .vodRequestId"),d.css(f,"display","none")),document.querySelector("#"+this.id()+" .ver .info-content").innerText=a.h5Version,document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=p.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),_=(d.css(y,"display","block"),this);_.playHideHandler&&clearTimeout(_.playHideHandler),_.playHideHandler=setTimeout(function(){_._player.trigger("play_btn_hide")}),_._player.trigger(e.Private.HideUnmuteButton)},_hide:function(){var g=document.querySelector("#"+this.id());d.css(g,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}});m.exports=s},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":84,"../component":150}],157:[function(t,m,j){var w=t("../component"),p=t("../../player/base/event/eventtype"),d=(t("../../lib/event"),t("../../lib/ua")),l=t("../../lang/index"),n=t("./util"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(p.Player.RequestFullScreen,function(){d.IS_IOS||e.addClass("fullscreen")}),this._player.on(p.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),n.registerTooltipEvent.call(this,this.el(),function(){return e._player.fullscreenService.getIsFullScreen()?l.get("ExistFullScreen"):l.get("Fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen(),e._player.trigger(p.Private.MarkerTextHide)})}});m.exports=t},{"../../lang/index":28,"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],158:[function(n,m,j){var w=n("../component"),p=n("../../lib/dom"),d=n("../../player/base/event/eventtype"),l=n("../../lib/ua.js"),n=w.extend({init:function(t,e){w.call(this,t,e),this.addClass("prism-hide")},createEl:function(){var t=w.prototype.createEl.call(this,"div");return t.innerHTML=l.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',t},_loading_hide:function(t){var e=document.querySelector("#"+this.id()+" .prism-loading");e&&(p.removeClass(e,"prism-loading"),p.addClass(e,"prism-hide"))},_loading_show:function(t){var e=document.querySelector("#"+this.id()+" .prism-hide");e&&(p.removeClass(e,"prism-hide"),p.addClass(e,"prism-loading"))},bindEvent:function(){this._player.on(d.Private.H5_Loading_Show,this._loading_show),this._player.on(d.Private.H5_Loading_Hide,this._loading_hide)}});m.exports=n},{"../../lib/dom":37,"../../lib/ua.js":53,"../../player/base/event/eventtype":84,"../component":150}],159:[function(l,m,j){var w=l("../component"),p=(l("../../lib/util"),l("../../lib/dom")),d=(l("../../lib/event"),l("../../lib/ua"),l("../../lang/index"),l("../../player/base/event/eventtype")),l=w.extend({init:function(n,t){w.call(this,n,t),this.addClass("prism-info-display")},createEl:function(){return w.prototype.createEl.call(this,"p")},bindEvent:function(){var n=this;n._player.on(d.Private.Info_Show,function(a){var e=document.querySelector("#"+n.id()),a=a.paramData;a&&(a.text!==void 0&&a.text?(e.innerHTML=a.text,a.duration!==void 0&&a.duration&&(n.handler&&clearTimeout(n.handler),n.handler=setTimeout(function(){p.css(e,"display","none")},a.duration)),a.align=="lb"?(p.addClass(e,"prism-info-left-bottom"),p.removeClass(e,"prism-info-top-center")):a.align=="tc"?(p.addClass(e,"prism-info-top-center"),p.removeClass(e,"prism-info-left-bottom")):(p.removeClass(e,"prism-info-left-bottom"),p.removeClass(e,"prism-info-top-center")),a.isBlack?p.addClass(e,"prism-info-black"):p.removeClass(e,"prism-info-black")):e.innerHTML=a,p.css(e,"display","block"))}),n._player.on(d.Private.Info_Hide,function(t){var e=document.querySelector("#"+n.id());p.css(e,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});m.exports=l},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":84,"../component":150}],160:[function(e,m,j){var w=e("../component"),p=e("./util"),d=(e("../../lib/util"),e("../../lib/dom")),l=e("../../lib/event"),n=e("../../lib/playerutil"),t=e("../../lang/index"),e=w.extend({init:function(a,o){w.call(this,a,o),this.addClass("prism-live-display")},createEl:function(){var a=w.prototype.createEl.call(this,"p");return a.innerText="LIVE",n.isLiveShift(this._player._options)&&d.addClass(a,"live-shift-display"),a},bindEvent:function(){var a=document.querySelector("#"+this.id()),o=this;n.isLiveShift(this._player._options)&&(l.on(a,"click",function(){o._player._liveshiftService.switchToLive()}),p.registerTooltipEvent.call(this,this.el(),t.get("SwitchToLive")))}});m.exports=e},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/playerutil":50,"../../lib/util":55,"../component":150,"./util":180}],161:[function(n,m,j){var w=n("../component"),p=n("../../player/base/event/eventtype"),d=n("./util"),l=n("../../lang/index"),n=w.extend({init:function(t,e){w.call(this,t,e),this.addClass("prism-play-btn")},bindEvent:function(){var t=this;this._player.on(p.Player.Play,function(){t.addClass("playing")}),this._player.on(p.Player.Pause,function(){t.removeClass("playing")}),this.on(p.Private.PlayClick,function(){var e;t._player.paused()?(e=t._player.getCurrentTime(),(t._player.getDuration()<=e||t._player._ended||t._player.exceedPreviewTime(e))&&!t._player._splayer&&t._player.seek(t._player._getPlayStartTime()),t._player.play(!0),t.addClass("playing")):(t._player.pause(!0),t.removeClass("playing")),t._player.trigger(p.Private.MarkerTextHide)}),d.registerTooltipEvent.call(this,this.el(),function(){return t._player.paused()?l.get("Play"):l.get("Pause")})}});m.exports=n},{"../../lang/index":28,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],162:[function(n,m,j){var w=n("../component"),p=n("../../lib/dom"),d=n("../../lang/index"),l=n("../../player/base/event/eventtype"),n=w.extend({init:function(t,e){w.call(this,t,e),this.addClass("prism-press-fast-forward")},createEl:function(){var t=w.prototype.createEl.call(this,"div");return t.innerHTML=`
    <div class="ff-arrow-container">
        <span class="ff-arrow ff-arrow1"></span>
        <span class="ff-arrow ff-arrow2"></span>
        <span class="ff-arrow ff-arrow3"></span>
        <span class="ff-text">`+d.get("Speed_Long_Press")+`</span>
    </div>
    `,t},bindEvent:function(){var t=this;this._player.on(l.Private.FastForwardShow,function(){t.show()}),this._player.on(l.Private.FastForwardHide,function(){t.hide()})},show:function(){p.css(this.el(),"display","flex")},hide:function(){p.css(this.el(),"display","none")},disposeUI:function(){}});m.exports=n},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":84,"../component":150}],163:[function(g,m,j){var w=g("../component"),p=g("../../lib/dom"),d=(g("../../lib/constants"),g("../../lib/event")),l=g("../../lib/ua"),n=g("../../lib/function"),t=g("../../lang/index"),e=g("../../config"),a=g("../../lib/util"),o=(g("../../lib/playerutil"),g("../../player/base/event/eventtype")),s=g("./util").debounce,g=w.extend({init:function(c,f){w.call(this,c,f),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),c.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var c=w.prototype.createEl.call(this);return c.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-progress-mask-left"></div><div class="prism-progress-mask-right"></div>',c},bindEvent:function(){function c(h){y._progressDown=h}var f=this,y=this,_=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),u=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),r=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),this.maskNodeLeft=document.querySelector("#"+this.id()+" .prism-progress-mask-left"),this.maskNodeRight=document.querySelector("#"+this.id()+" .prism-progress-mask-right"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,r=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":e.domain?"https://"+e.domain+e.path+e.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",u&&(u.src=r),d.on(this.cursorNode,"mousedown",function(h){y._onMouseDown(h)}),d.on(this.cursorNode,"touchstart",function(h){y._onMouseDown(h)}),d.on(_,"mousemove",function(h){y._progressMove(h)}),d.on(_,"touchmove",function(h){y._progressMove(h)}),d.on(_,"mousedown",function(h){c(!0)}),d.on(_,"touchstart",function(h){c(!0)}),d.on(_,"mouseup",function(h){c(!1)}),d.on(_,"touchend",function(h){c(!1),y._moving&&l.IS_MOBILE&&(y._player.trigger(o.Private.EndStart,{toTime:y._lastSeekTime}),y._moving=!1)}),d.on(this._el,"click",function(h){y._onMouseClick(h)}),this._player.on(o.Private.HideProgress,function(h){y._hideProgress(h)}),this._player.on(o.Private.CancelHideProgress,function(h){y._cancelHideProgress(h)}),this._player.on(o.Private.HideBar,function(h){y._player._seeking=!1}),this._player.on(o.Video.LoadedMetadata,function(){f._updateMaskNode()}),this._player.on(o.Private.UpdateWatchTime,function(){f._updateMaskNode()}),d.on(_,o.Private.MouseOver,function(h){y._onMouseOver(h)}),d.on(_,o.Private.MouseOut,function(h){y._onMouseOut(h)}),d.on(this.controlNode,o.Private.MouseLeave,function(h){y._offMouseUp()}),d.on(this.maskNodeLeft,"mouseenter",function(){y._offMouseUp()}),d.on(this.maskNodeRight,"mouseenter",function(){y._offMouseUp()}),l.IS_PC?(u=s(function(){p.addClass(_,"prism-progress-hover"),p.addClass(y.cursorNode,"cursor-hover")},100),d.on(_,"mouseover",u),r=s(function(){p.removeClass(_,"prism-progress-hover"),p.removeClass(y.cursorNode,"cursor-hover"),y._progressDown=!1},100),d.on(_,"mouseout",r)):(p.addClass(_,"prism-progress-hover"),p.addClass(_,"prism-progress-mobile"),p.addClass(y.cursorNode,"cursor-hover")),this.bindTimeupdate=n.bind(this,this._onTimeupdate),this._player.on(o.Player.TimeUpdate,this.bindTimeupdate),l.IS_IPAD?this.interval=setInterval(function(){y._onProgress()},500):this._player.on(o.Video.Progress,function(){y._onProgress()}),this._player.on(o.Private.UpdateProgress,function(h){y._updateProgressBar(y.playedNode,h.paramData.targetTime)}),this._player.on(o.Private.UpdateCursorPosition,function(h){y._updateCursorPosition(h.paramData.targetTime)})},_progressMove:function(c){c.preventDefault();var f,y,_=this._getSeconds(c);_!=1/0&&(f=a.formatTime(_),y=this._getDistance(c),this.cursorNode)&&(this._player.trigger(o.Private.ThumbnailShow,{time:_,formatTime:f,left:y,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(c)},_hideProgress:function(c){d.off(this.cursorNode,"mousedown"),d.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(c){var f=this;d.on(this.cursorNode,"mousedown",function(y){f._onMouseDown(y)}),d.on(this.cursorNode,"touchstart",function(y){f._onMouseDown(y)})},_canSeekable:function(c){var f=!0;return f=typeof this._player.canSeekable=="function"?this._player.canSeekable(c):f},_onMouseOver:function(c){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(c){var f=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){f._player.trigger(o.Private.ThumbnailHide),f._mouseInProgress=!1})},_getSeconds:function(y){var y=this._getDistance(y),f=this.el().offsetWidth,y=this._player.getDuration()?y/f*this._player.getDuration():0;return y=(y=y<0?0:y)>this._player.getDuration()?this._player.getDuration():y},_getDistance:function(c){var f,y,_,u;return c.touches&&c.touches[0]?(y=this.el().getBoundingClientRect(),_=(u=c.touches[0]).clientX-y.left,((f=this._player._options.progressTransform)!=null&&f.landscape?u.clientY-y.top:_)/(((f=this._player._options.progressTransform)==null?void 0:f.scale)||1)):(u=c.offsetX,c.target===this.cursorNode||c.target.offsetParent===this.cursorNode?u+=this.cursorNode.offsetLeft:c.target!==this._el&&c.target.offsetParent!==this._el&&c.target.offsetParent===this.markerNode&&(u+=c.target.offsetLeft),u)},_onMouseClick:function(c){var f=this,y=f._getSeconds(c);f._canSeekable(y)?f._player._canSeek(y+f._posOffset)&&(f._player.exceedPreviewTime(y)&&(y=f._player.getPreviewTime()),this._seekTime=y,f._updateProgressBar(this.playedNode,y),f._updateCursorPosition(y),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){f._player._seeking=!0,f._mouseDown&&!l.IS_MOBILE||(f._player.trigger(o.Private.SeekStart,{fromTime:f._player.getCurrentTime()}),f._player.trigger(o.Private.EndStart,{toTime:y})),f._player.seek(y),f._mouseDown=!1,f._mouseClickTimeHandle=null,f._inWaitingSeek=!1},0),this._inWaitingSeek=!0):f._player.trigger(o.Private.Info_Show,{text:t.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(y){var f=this,y=(y.preventDefault(),this._mouseDown=!0,l.IS_PC&&this._player.trigger(o.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),d.on(this.controlNode,"mousemove",function(_){f._onMouseMove(_)}),d.on(this.controlNode,"touchmove",function(_){f._onMouseMove(_)}),d.on(this.controlNode,"mouseup",function(_){f._onControlBarMouseUp(_)}),d.on(this.controlNode,"touchend",function(_){f._onControlBarMouseUp(_)}),f._getSeconds(y));f._canSeekable(y)?f._player.exceedPreviewTime(y)&&f._player.getPreviewTime():f._player.trigger(o.Private.Info_Show,{text:t.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(c){this._onMouseUpIntern(c)},_onControlBarMouseUp:function(c){this._onMouseUpIntern(c)},_onPlayerMouseUp:function(c){this._onMouseUpIntern(c)},_offMouseUp:function(){d.off(this.controlNode,"mousemove"),d.off(this.controlNode,"touchmove"),d.off(this.controlNode,"mouseup"),d.off(this.controlNode,"touchend")},_onMouseUpIntern:function(c){c.preventDefault(),this._offMouseUp(),c=this._getDistance(c)/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(c)||this._player.seek(c),l.IS_PC&&this._player.trigger(o.Private.EndStart,{toTime:c}),this._autoHideThumbnail()},_onMouseMove:function(c){c.preventDefault(),!this._moving&&l.IS_MOBILE&&(this._player.trigger(o.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),c=this._getSeconds(c),this._player.exceedPreviewTime(c)&&(c=this._player.getPreviewTime()),this._player.seek(c),this._updateProgressBar(this.playedNode,c),this._updateCursorPosition(c),this._lastSeekTime=c},_onTimeupdate:function(c){var f=this._player._options.source,f=this._getUrlSuffix(f),y=!1;f==="mp4"&&(l.IS_MAC_SAFARI&&(y=!0),l.IS_IOS&&(y=!0),l.IS_IE11)&&(y=!0),f==="m3u8"&&l.IS_IE11&&(y=!0),this._player._options.mediaType=="audio"&&l.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._progressDown)&&!y||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(o.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(c){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(c,f){var y=this._player.getDuration();this._player._switchSourcing!=1&&y&&(this._seekTime!=-1&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:f=this._seekTime),1<(f=f/y)&&(f=1),c)&&p.css(c,"width",100*f+"%")},_updateCursorPosition:function(c){var f,y,_,u=this._player.getDuration();this._player._switchSourcing!=1&&u&&(f=1,y=(this.cursorNode.offsetWidth||16)/2/(_=this._player.el().clientWidth),_!=0&&(f=1-y),_=(_=c/u-y)<0?0:_,this.cursorNode)&&(f<_?(p.css(this.cursorNode,"right","0px"),p.css(this.cursorNode,"left","auto")):(p.css(this.cursorNode,"right","auto"),p.css(this.cursorNode,"left",100*_+"%")))},_getUrlSuffix:function(c){return!c||typeof c!="string"?"":((c=(c.split("?")[0]||"").split("."))[c.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var c=this;l.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){c._moving||c._player.trigger(o.Private.ThumbnailHide)},2e3))},_makeUninteractible:function(c){["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(f){d.on(c,f,function(y){y.stopPropagation()})})},_updateMaskNode:function(){var c,f=this._player._getSubVideoConfig();f.start||f.end?(p.css(this.maskNodeLeft,"width","0px"),p.css(this.maskNodeRight,"width","0px")):((f=this._player._getWatchTimeConfig()).watchStartTime&&f.watchEndTime?(c=100*Math.min(f.watchStartTime/this._player.getDuration(),1)+"%",p.css(this.maskNodeLeft,"width",c)):p.css(this.maskNodeLeft,"width","0px"),f.watchEndTime?(c=100*(1-Math.min(f.watchEndTime/this._player.getDuration(),1))+"%",p.css(this.maskNodeRight,"width",c)):p.css(this.maskNodeRight,"width","0px"),this._makeUninteractible(this.maskNodeLeft),this._makeUninteractible(this.maskNodeRight))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null),this.interval&&(clearInterval(this.interval),this.interval=null)}});m.exports=g},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/function":40,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],164:[function(n,m,j){var w=n("../component"),p=(n("../../lib/util"),n("../../lib/dom")),d=n("../../lib/event"),l=n("../../player/base/event/eventtype"),n=w.extend({init:function(t,e){w.call(this,t,e),this.addClass("prism-marker-text")},createEl:function(){var t=w.prototype.createEl.call(this,"div");return t.innerHTML="<p></p>",t},bindEvent:function(){var t=this;t._player.on(l.Private.MarkerTextShow,function(e){var a=e.paramData,o=l.Player.MarkerDotOver;t._player.trigger(o,e.paramData),a.progressMarker.isCustomized?t._player.trigger(l.Private.LifeCycleChanged,{type:o,data:e.paramData}):(t._thumbnailShowHanlde&&(p.css(t.el(),"display","none"),clearTimeout(t._thumbnailShowHanlde)),t._thumbnailShowHanlde=setTimeout(function(){var s;document.querySelector("#"+t.id()+" p").innerText=a.progressMarker.text||"",a&&(p.css(t.el(),"display","block"),s=t._player.el().offsetWidth,left=s*a.left,width=t.el().offsetWidth,left+width>s?(p.css(t.el(),"right","0px"),p.css(t.el(),"left","auto")):(left=(left-=width/2)<0?0:left,p.css(t.el(),"right","auto"),p.css(t.el(),"left",left+"px")))},30))}),t._player.on(l.Private.MarkerTextHide,function(e){t._player.trigger(l.Player.MarkerDotOut),t._player.trigger(l.Private.LifeCycleChanged,{type:l.Player.MarkerDotOut,data:""}),t._thumbnailShowHanlde&&clearTimeout(t._thumbnailShowHanlde),p.css(t.el(),"display","none")}),d.on(t._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t._player.trigger(l.Private.MarkerTextHide)}),d.on(t._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t._player.trigger(l.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});m.exports=n},{"../../lib/dom":37,"../../lib/event":38,"../../lib/util":55,"../../player/base/event/eventtype":84,"../component":150}],165:[function(t,m,j){var w=t("./selector"),p=t("../../../lib/object"),d=(t("../../../lib/util"),t("../../../lib/cookie"),t("../../../lib/dom")),l=(t("../../../lib/event"),t("./util"),t("../../../lang/index")),n=t("../../../player/base/event/eventtype"),t=w.extend({init:function(e,a){this.Name=l.get("AudioTrack"),this.Type="audio",this.Tooltip=l.get("AudioTrack_Switch_To"),this.service=e._audioTrackService,w.call(this,e,a)},bindEvent:function(){var e=this,a=(this.bindCommonEvent(),this),o=document.querySelector("#"+a.id()+" .selector-list");document.querySelector("#"+a.id()+" .header"),a._player.on(n.Private.ChangeURL,function(){a._hasGeneratedList=!1}),this._player.on(n.Player.AudioTrackSwitch,function(){d.addClass(o,"disabled")}),this._player.on(n.Player.AudioTrackSwitched,function(){d.removeClass(o,"disabled")}),this._player.on(n.Player.AudioTrackUpdated,function(s){e.generateList()}),this._player.on(n.Player.AudioTrackReady,function(s){e.generateList()})},generateList:function(){var e=this,a=document.querySelector("#"+this.id()+" .selector-list"),o=this.service.tracks();p.each(o,function(s){var g=d.createEl.call(e,"li",{key:s.value,text:s.text}),c=d.createEl.call(e,"span",{key:s.value,text:s.text});s.text===e.service.currentTrack().text&&(d.addClass(g,"current"),e._previousSelection=g),c.innerText=s.text,g.appendChild(c),a.appendChild(g)})},execute:function(e){this.service.switch(e)}});m.exports=t},{"../../../lang/index":28,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":84,"./selector":171,"./util":173}],166:[function(t,m,j){var w=t("../../component"),p=(t("../../../lib/dom"),t("../../../player/base/event/eventtype")),d=t("./list"),l=t("../../../lang/index"),n=t("../util"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass(a.className||"prism-setting-btn"),this._settingList=new d(e,a),e.addChild(this._settingList,a)},createEl:function(){return w.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){e._settingList.isOpened?e._player.trigger(p.Private.SettingListHide):e._player.trigger(p.Private.SettingListShow),e._player.trigger(p.Private.SelectorHide),e._player.trigger(p.Private.MarkerTextHide),e._player.trigger(p.Private.VolumeVisibilityChange,"")}),n.registerTooltipEvent.call(this,this.el(),l.get("Setting"))}});m.exports=t},{"../../../lang/index":28,"../../../lib/dom":37,"../../../player/base/event/eventtype":84,"../../component":150,"../util":180,"./list":169}],167:[function(t,m,j){var w=t("./selector"),p=t("../../../lib/object"),d=t("../../../lib/dom"),l=(t("../../../lib/event"),t("./util"),t("../../../lib/cookie"),t("../../../lib/constants"),t("../../../lang/index")),n=t("../../../player/base/event/eventtype"),t=w.extend({init:function(e,a){this.Name=l.get("Subtitle"),this.Type="cc",this.Tooltip=l.get("CC_Switch_To"),w.call(this,e,a)},bindEvent:function(){this.bindCommonEvent();var e=this;this._player.on(n.Private.CCStateChanged,function(s){var o=s.paramData.value,s=s.paramData.lang,s=(o=="on"&&s?e._backCCText=s:o=="off"&&e._backCCText==""&&(e._backCCText=e._previousSelection.text),"Off");o=="on"&&(s=e._backCCText),e._player.trigger(n.Private.SelectorUpdateList,{type:"cc",text:s})})},generateList:function(e){var a=document.querySelector("#"+this.id()+" .selector-list"),o=this._player._ccService.tracks,s=this;p.each(o,function(g,c){var f=d.createEl.call(this,"li",{key:g.value,text:g.text}),y=d.createEl.call(this,"span",{key:g.value,text:g.text});g.text==e&&(d.addClass(f,"current"),s._previousSelection=f),y.innerText=g.text,f.appendChild(y),a.appendChild(f)})},execute:function(e){this._backCCText="",this._player._ccService.switch(e)}});m.exports=t},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../player/base/event/eventtype":84,"./selector":171,"./util":173}],168:[function(x,m,j){m.exports={CC:x("./cc"),Speed:x("./speed"),Quality:x("./quality"),Audio:x("./audio")}},{"./audio":165,"./cc":167,"./quality":170,"./speed":172}],169:[function(o,m,j){var w=o("../../component"),p=o("../../../lib/dom"),d=o("../../../lib/ua"),l=o("../../../lib/event"),n=o("../../../player/base/event/eventtype"),t=o("./export"),e=o("./util"),a=o("../../../lang/index"),o=w.extend({init:function(s,g){for(var c in this.isOpened=!1,w.call(this,s,g),this.addClass(g.className||"prism-setting-list"),t)c=new t[c](s,g),s.addChild(c,g)},createEl:function(){var s=w.prototype.createEl.call(this,"div"),y="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",g=y.replace(/{type}/g,"speed").replace("{value}",a.get("Speed")),c=y.replace(/{type}/g,"cc").replace("{value}",a.get("Subtitle")),f=y.replace(/{type}/g,"audio").replace("{value}",a.get("AudioTrack")),y=y.replace(/{type}/g,"quality").replace("{value}",a.get("Quality"));return s.innerHTML=g+c+f+y,s},bindEvent:function(){function s(){c._player.trigger(n.Private.SettingListHide),c.isOpened=!1}function g(y){y&&y.type&&(document.querySelector("#"+c.id()+" .prism-setting-"+y.type+" .current-setting").innerText=y.text||"")}var c=this,f=(this._player.on(n.Private.SettingListShow,function(y){c.isOpened=!0,y=y.paramData,g(y),p.css(c.el(),"display","block")}),this._player.on(n.Private.UpdateToSettingList,function(y){y=y.paramData,g(y)}),this._player.on(n.Private.SelectorUpdateList,function(y){y=y.paramData,g(y),c._player.trigger(n.Private.SelectorValueChange,y)}),this._player.on(n.Private.SettingListHide,function(){c.isOpened=!1,p.css(c.el(),"display","none")}),l.on(this.el(),"click",function(_){c._player.trigger(n.Private.SettingListHide);var _=_.srcElement||_.target;(_=e.findItemElementForList(_))&&(_=_.getAttribute("type"),c._player.trigger(n.Private.SelectorShow,{type:_}))}),d.IS_MOBILE?"touchleave":"mouseleave");l.on(this.el(),f,function(){s()}),l.on(this._player.tag,"click",function(y){y&&y.target==y.currentTarget&&s()}),l.on(this._player.tag,"touchstart",function(y){y&&y.target==y.currentTarget&&s()}),this._player.on(n.Private.QualityChange,function(r){var _,u,r=r.paramData;r.levelSwitch&&(_=document.querySelector("#"+c.id()+" .prism-setting-quality .current-setting"),u=a.get("Auto"),r=r.desc,-1<_.innerText.indexOf(u))&&(r&&-1<String(r).indexOf("(")?u=u+"-"+r:u+=r?"("+r+")":"",_.innerText=u)})}});m.exports=o},{"../../../lang/index":28,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/ua":53,"../../../player/base/event/eventtype":84,"../../component":150,"./export":168,"./util":173}],170:[function(a,m,j){var w=a("./selector"),p=a("../../../lib/object"),d=(a("../../../lib/util"),a("../../../lib/cookie")),l=a("../../../lib/dom"),n=(a("../../../lib/event"),a("../../../lib/constants")),t=a("../../../lang/index"),e=a("../../../player/base/event/eventtype"),a=w.extend({init:function(o,s){this.Name=t.get("Quality"),this.Type="quality",this.Tooltip=t.get("Quality_Switch_To"),w.call(this,o,s),this._isMasterLevel=!1},showTip:function(o,s){this._player.trigger(e.Private.Info_Show,{text:o,duration:s,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var o=this,s=(this._player.on(e.Private.QualityChange,function(g){var c,f,y=0<o._player._urls.length?o._player._urls:o._player._qualityService.levels;(data=g.paramData).levelSwitch?(c=data.desc||data.bitrate,o._autoSWitchDesc=c,o._updateText(c)):0<o._player._currentPlayIndex&&(o._autoSWitchDesc="",f=y[(c=o._player._currentPlayIndex)-1].desc,y=y[c].desc,o.showTip(f+g.paramData+y,1e3),o._player.trigger(e.Private.SelectorValueChange,{type:o.Type,text:y}))}),document.querySelector("#"+o.id()+" .selector-list"));this._player.on(e.Player.LevelSwitch,function(){l.addClass(s,"disabled")}),this._player.on(e.Player.LevelSwitched,function(){l.removeClass(s,"disabled")})},generateList:function(o){var s,g=this._player._urls,c=this._player._currentPlayIndex,f=this._player._qualityService.levels,y=(0<f.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(c=(g=f).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<g.length&&(s=this,p.each(g,function(_,u){var r,h;(_.desc||_.bitrate)&&(r=l.createEl.call(this,"li",{key:_.Url,index:u,text:_.desc||_.bitrate}),h=l.createEl.call(this,"span",{key:_.Url,index:u,text:_.desc||_.bitrate}),u==c&&(l.addClass(r,"current"),s._previousSelection=r),h.innerText=_.desc||_.bitrate,r.appendChild(h),y.appendChild(r))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(o){if(this._player._switchSourcing=!0,this._isMasterLevel){var s=this._player._qualityService.changeQuality({url:o});s&&s.desc!==t.get("Auto")&&this._resetAutoText()}else{for(var g,c=this._player._urls.length,s=this._player._currentPlayIndex,f=-1,y=0;y<c;y++)if(this._player._urls[y].Url==o){f=this._player._currentPlayIndex=y,d.set(n.SelectedStreamLevel,this._player._urls[y].definition,365);break}s!=f&&-1<f&&(s=this._player.getCurrentTime(),g=this._player.autoplay||this._player._status!="pause",this._player.autoplay||s!=0||(g=!1),this._player._switchLevel&&!this._player._options.isLive&&this._player._options.isVBR?this._player._switchLevel(o):this._player._loadByUrlInner(o,s,g))}var _=this;setTimeout(function(){_._player._switchSourcing=!1})},_updateText:function(o){var s=document.querySelector("#"+this.id()+" .selector-list .current"),g=document.querySelector("#"+this.id()+" .selector-list .current span"),c=t.get("Auto");g&&g.innerText&&-1<g.innerText.indexOf(c)&&(o&&-1<String(o).indexOf("(")?c=c+"-"+o:c+=o?"("+o+")":"",g.innerText=c,s)&&(s.text=c)},_resetAutoText:function(){for(var o=t.get("Auto"),s=document.querySelectorAll("#"+this.id()+" .selector-list li"),g=0;g<s.length;g++){var c=s[g],f=c.querySelector("span");if(-1<f.innerText.indexOf(o)){f.innerText=o,c.text=o;break}}}});m.exports=a},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":84,"./selector":171}],171:[function(e,m,j){var w=e("../../component"),p=(e("../../../lib/object"),e("../../../lib/util"),e("../../../lib/ua")),d=(e("../../../lib/cookie"),e("../../../lib/dom")),l=e("../../../lib/event"),n=e("./util"),t=(e("../../../lang/index"),e("../../../player/base/event/eventtype")),e=w.extend({init:function(a,o){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",w.call(this,a,o),this.className=o.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var a=w.prototype.createEl.call(this,"div");return a.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',a},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var a=this,o=document.querySelector("#"+a.id()+" .selector-list"),c=document.querySelector("#"+a.id()+" .header");function s(){a._hasGeneratedList||(a._clear(),a.generateList(a._backupSelector),a._backupSelector="",a._hasGeneratedList=!0)}this._player.on(t.Private.ChangeURL,function(){a._hasGeneratedList=!1}),l.on(c,"click",function(){a._player.trigger(t.Private.SelectorHide),a._player.trigger(t.Private.SettingListShow,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})}),l.on(o,"click",function(y){var y=y.srcElement||y.target,_=y.key,u=y.text;a._player.traceLog("selector.js","selector::click#"+a.Name+"#"+a.Type+"#"+u+"#"+_),a._player.trigger(t.Player.SettingSelected,{name:a.Name,type:a.Type,text:u,key:_}),u!==void 0&&(a._previousSelection&&d.removeClass(a._previousSelection,"current"),a._previousSelection=n.findliElementForSelector(y),d.addClass(a._previousSelection,"current"),a.execute&&a.execute(_),y=a.Tooltip+"<span>"+u+"</span>",a._player.trigger(t.Private.Info_Show,{text:y,duration:3e3,align:"lb"}))}),a._player.on(t.Private.SelectorHide,function(){g()}),a._player.on(t.Private.SelectorValueChange,function(f){var y=f.paramData;if(y&&y.type==a.Type){var _=document.querySelectorAll("#"+a.id()+" .selector-list li");if(_){for(var u=_.length,r=(u==0&&(a._backupSelector=y.text),-1),h=0;h<u;h++)if(_[h].text==y.text){r=h;break}a._previousSelection&&(d.removeClass(a._previousSelection,"current"),a._previousSelection=null),r!==-1?(d.addClass(_[r],"current"),a._previousSelection=_[r]):a._previousSelection||console.warn("UI Not Sync: No Such Option '"+y.text+"' in '"+y.type+"'")}}}),a._player.on(t.Private.SettingListShow,function(){s()}),a._player.on(t.Private.SelectorGenerateList,function(_){var y=_.paramData&&_.paramData.type,_=_.paramData&&_.paramData.value;y===a.Type&&(a._hasGeneratedList=!1,_&&(a._backupSelector=_),s())}),a._player.on(t.Private.SelectorShow,function(f){(f=f.paramData).type==a.Type&&(f=document.querySelector("#"+a._player.id()+" .prism-"+f.type+"-selector"),a._hasGeneratedList||s(),d.css(f,"display","block"))});var g=function(){d.css(a.el(),"display","none"),a._player.trigger(t.Private.UpdateToSettingList,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})},c=p.IS_MOBILE?"touchleave":"mouseleave";l.on(this.el(),c,function(){g()}),l.on(this._player.tag,"click",function(f){f&&f.target==f.currentTarget&&g()}),l.on(this._player.tag,"touchstart",function(f){f&&f.target==f.currentTarget&&g()})},setSelected:function(a){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});m.exports=e},{"../../../lang/index":28,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/ua":53,"../../../lib/util":55,"../../../player/base/event/eventtype":84,"../../component":150,"./util":173}],172:[function(e,m,j){var w=e("./selector"),p=e("../../../lib/object"),d=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),l=(e("../../../lib/event"),e("./util"),e("../../../lib/constants")),n=e("../../../lang/index"),t=e("../../../player/base/event/eventtype"),e=w.extend({init:function(a,o){var s=this;this.Name=n.get("Speed"),this.Type="speed",this.Tooltip=n.get("Speed_Switch_To"),this.speedPreStore=1,this.listGenerated=!1,w.call(this,a,o),this._player.on(t.Private.PlaybackRateChanged,function(g){s.speedPreStore=g.paramData,s.listGenerated&&s._player.trigger(t.Private.SelectorUpdateList,{type:"speed",text:g.paramData})})},generateList:function(){var a=document.querySelector("#"+this.id()+" .selector-list"),o=this._player._options.speedLevels,o=this.verifySpeedLevels(o)?o:l.SpeedLevels,s=this;p.each(o,function(g,c){var f=d.createEl.call(this,"li",{key:g.key,text:g.text}),y=d.createEl.call(this,"span",{key:g.key,text:g.text});y.innerText=g.text,g.key==s.speedPreStore&&(d.addClass(f,"current"),s._previousSelection=f),f.appendChild(y),a.appendChild(f)}),this.listGenerated=!0},execute:function(a){this._player.setSpeed(a,!1)},verifySpeedLevels:function(a){var o=0;if(a&&a.length)try{a.forEach(function(s){typeof s.key=="number"&&s.key==s.key&&0<=s.key&&o++})}catch{return!1}return a&&o===a.length}});m.exports=e},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":84,"./selector":171,"./util":173}],173:[function(x,m,j){m.exports.findliElementForSelector=function(w){var p;return w&&w.tagName.toLowerCase()!="li"?(p=w.parentElement)&&p.tagName.toLowerCase()=="li"?p:null:w},m.exports.findliElementByKey=function(w,p){return document.querySelectors(w),null},m.exports.findItemElementForList=function(w){var p;return!w||-1<w.className.indexOf("prism-setting-item")||(p=w.parentElement)&&(w=m.exports.findItemElementForList(p)),w}},{}],174:[function(t,m,j){var w=t("../component"),p=t("../../lib/dom"),d=t("../../lang/index"),l=t("../../player/base/event/eventtype"),n=t("./util"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass("prism-snapshot-btn")},createEl:function(){return w.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this,a=this._player;a.on(l.Private.Snapshot_Hide,function(){p.css(e._el,"display","none")}),n.registerTooltipEvent.call(this,this.el(),d.get("Snapshot")),this.on("click",function(){e.trigger(l.Player.Snapshoting),e.trigger(l.Player.Snapshoted,a.takeSnapshot())})}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],175:[function(p,m,j){var w=p("../component"),p=(p("../../lib/dom"),p("../../player/base/event/eventtype"),w.extend({init:function(d,l){w.call(this,d,l),this.addClass("prism-text-overlay")},createEl:function(){return w.prototype.createEl.call(this,"div")},_hide:function(d){},_show:function(d){},bindEvent:function(){}}));m.exports=p},{"../../lib/dom":37,"../../player/base/event/eventtype":84,"../component":150}],176:[function(t,m,j){var w=t("../component"),p=(t("../../lib/util"),t("../../lib/dom")),d=t("../../lib/event"),l=(t("../../lib/ua"),t("../../lang/index"),t("../../player/base/event/eventtype")),n=t("./util"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass("prism-thumbnail")},createEl:function(){var e=w.prototype.createEl.call(this,"div");return e.innerHTML="<img></img><span></span>",e},bindEvent:function(){var e=this,a=(d.on(this._el,"mousemove",function(o){o.preventDefault()}),d.on(this._el,"touchmove",function(o){o.preventDefault()}),e._player.on(l.Private.ThumbnailLoaded,function(f){var s,g,c,f=f.paramData;f&&0<f.length&&(s=e._player._thumbnailService.makeUrl(f[0].text),e._player.log("THUMBNAILSTART",{tu:encodeURIComponent(s)}),g=new Date().getTime(),f[0].isBig?(p.css(e.el(),"background","url("+s+")"),p.css(e.el(),"width",f[0].w+"px"),p.css(e.el(),"height",f[0].h+"px"),e._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-g})):((c=document.querySelector("#"+e.id()+" img")).onload=function(){var y=c.width,_=c.height;p.css(e.el(),"width",y+"px"),p.css(e.el(),"height",_+"px"),e._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-g})},c.src=s))}),n.throttle(function(y){var s,g,c,y=y[0],f=document.querySelector("#"+e.id()+" span"),y=y.paramData;f.innerText=y.formatTime,y&&((s=e._player._thumbnailService.findAvailableCue(y.time))?s.isBig?(g=e._player._thumbnailService.makeUrl(s.text),p.css(e.el(),"background","url("+g+")"),s.w,s.h,c=-1*s.x+"px "+-1*s.y+"px",p.css(e.el(),"background-position",c)):(c=document.querySelector("#"+e.id()+" img"),g=e._player._thumbnailService.makeUrl(s.text),c.src!=g&&(c.src=g)):(p.css(e.el(),"border","none"),p.css(f,"left","0px")),p.css(e.el(),"display","block"),c=0,g=(s?e.el():f).offsetWidth,c=y.left+g>y.progressWidth?y.left-g:(c=y.left-g/2)<0?0:c,p.css(e.el(),"left",c+"px"))},30));e._player.on(l.Private.ThumbnailShow,a),e._player.on(l.Private.ThumbnailHide,function(o){p.css(e.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],177:[function(l,m,j){var w=l("../component"),p=l("../../lib/util"),d=l("../../player/base/event/eventtype"),l=w.extend({init:function(n,t){w.call(this,n,t),this.addClass("prism-time-display")},createEl:function(){var n=w.prototype.createEl.call(this,"div");return n.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',n},bindEvent:function(){var n=this;this._player.on(d.Video.DurationChange,function(){var t=p.formatTime(n._player.getDisplayDuration());t?(document.querySelector("#"+n.id()+" .time-bound").style.display="inline",document.querySelector("#"+n.id()+" .duration").style.display="inline",document.querySelector("#"+n.id()+" .duration").innerText=t):(document.querySelector("#"+n.id()+" .duration").style.display="none",document.querySelector("#"+n.id()+" .time-bound").style.display="none")}),this._player.on(d.Video.TimeUpdate,function(){var t=n._player.getCurrentTime(),t=p.formatTime(t);document.querySelector("#"+n.id()+" .current-time")&&(t?(document.querySelector("#"+n.id()+" .current-time").style.display="inline",document.querySelector("#"+n.id()+" .current-time").innerText=t):document.querySelector("#"+n.id()+" .current-time").style.display="none")})}});m.exports=l},{"../../lib/util":55,"../../player/base/event/eventtype":84,"../component":150}],178:[function(l,m,j){var w=l("../component"),p=l("../../lib/dom"),d=l("../../player/base/event/eventtype"),l=w.extend({init:function(n,t){w.call(this,n,t),this.addClass("prism-tooltip")},createEl:function(){var n=w.prototype.createEl.call(this,"p");return n.innerText="",n},bindEvent:function(){var n=this;n._player.on(d.Private.TooltipShow,function(a){var e=document.querySelector("#"+n.id()),a=a.paramData,o=(e.innerText=a.text,p.css(e,"display","block"),e.offsetWidth),s=document.querySelector("#"+n._player.id()+" .prism-controlbar");s&&(s=s.offsetWidth,a.left+o>s?p.css(e,"left",s-o+"px"):p.css(e,"left",a.left-(o-a.width)/2+"px"))}),n._player.on(d.Private.TooltipHide,function(t){var e=document.querySelector("#"+n.id());p.css(e,"display","none")})}});m.exports=l},{"../../lib/dom":37,"../../player/base/event/eventtype":84,"../component":150}],179:[function(t,m,j){var w=t("../component"),p=t("../../lib/dom"),d=t("../../lib/event"),l=t("../../lang/index"),n=t("../../player/base/event/eventtype"),t=w.extend({init:function(e,a){w.call(this,e,a),this.addClass("prism-unmute-btn")},createEl:function(){var e=w.prototype.createEl.call(this,"div");return e.innerText=l.get("Click_To_Unmute"),e},bindEvent:function(){var e=this;this._player.on(n.Private.MutedAutoplay,function(){var a;(a=e._player.getOptions().autoplayPolicy)!=null&&a.showUnmuteBtn&&e._show()}),this._player.on(n.Private.HideUnmuteButton,function(){e._hide()}),d.on(this.el(),"click",function(){e._player.unMute(!0),e._hide()})},_show:function(){p.css(this.el(),"display","block")},_hide:function(){p.css(this.el(),"display","none")}});m.exports=t},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":84,"../component":150}],180:[function(x,m,j){var w=x("../../lib/event"),p=x("../../player/base/event/eventtype");m.exports.registerTooltipEvent=function(d,l){function n(){t._controlbarTooltipHandler&&(clearTimeout(t._controlbarTooltipHandler),t._controlbarTooltipHandler=null)}var t=this;w.on(this.el(),"mouseover",function(e){n(),t._controlbarTooltipHandler=setTimeout(function(){t._player.trigger(p.Private.TooltipHide)},4e3);var a=t.el().offsetLeft,o=t.el().offsetWidth,s=l;typeof l=="function"&&(s=l.call(this)),t._player.trigger(p.Private.TooltipShow,{left:a,width:o,text:s})}),w.on(this.el(),"mouseout",function(){n(),t._player.trigger(p.Private.TooltipHide)})},m.exports.throttle=function(d,l){var n=Date.now();return function(){var t=arguments,e=Date.now();l<=e-n&&(d(t),n=e)}},m.exports.debounce=function(d,l){var n;return function(){var t=this,e=arguments;clearTimeout(n),n=setTimeout(function(){d.apply(t,e)},l)}}},{"../../lib/event":38,"../../player/base/event/eventtype":84}],181:[function(a,m,j){var w=a("../component"),p=a("../../lib/dom"),d=a("../../lib/event"),l=a("../../player/base/event/eventtype"),n=a("./util"),t=a("../../lang/index"),e=a("./volumecontrol"),a=w.extend({init:function(o,s){w.call(this,o,s),this.addClass("prism-volume");var g=new e(o,s);o.addChild(g,s),this.volumeControl=g},createEl:function(){var o=w.prototype.createEl.call(this,"div");return o.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',o},bindEvent:function(){var o=this,s=o._player,g=(this.icon=document.querySelector("#"+o.id()+"  .volume-icon"),n.registerTooltipEvent.call(this,this.el(),function(){return o._player.muted()||o._player.getVolume()==0?t.get("Muted"):t.get("Volume")}),d.on(this.icon,"click",function(f){var y;o.volumeControl._shown?s.muted()?s.unMute():s.mute():(y=o.el().offsetLeft,o._player.trigger(l.Private.SettingListHide),o._player.trigger(l.Private.SelectorHide),o._player.trigger(l.Private.VolumeVisibilityChange,y),o._player.trigger(l.Private.MarkerTextHide))}),document.querySelector("#"+o.id()+"  .long-horizontal")),c=document.querySelector("#"+o.id()+"  .short-horizontal");d.on(this.el(),"mouseover",function(){p.removeClass(g,"volume-hover-animation"),setTimeout(function(){p.addClass(g,"volume-hover-animation")}),setTimeout(function(){p.removeClass(g,"volume-hover-animation"),p.addClass(c,"volume-hover-animation"),setTimeout(function(){p.removeClass(c,"volume-hover-animation"),p.addClass(g,"volume-hover-animation")},300)},300)}),d.on(window,"resize",function(){var f;o.volumeControl._shown&&(f=o.el().offsetLeft,o._player.trigger(l.Private.VolumeUpdatePosition,f))})}});m.exports=a},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":84,"../component":150,"./util":180,"./volumecontrol":182}],182:[function(n,m,j){var w=n("../component"),p=n("../../lib/dom"),d=n("../../lib/event"),l=n("../../player/base/event/eventtype"),n=(n("./util"),n("../../lang/index"),w.extend({init:function(t,e){w.call(this,t,e),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var t=w.prototype.createEl.call(this,"div");return t.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',t},bindEvent:function(){var t=this;this.icon=document.querySelector("#"+t._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+t.id()),this.volumnValue=document.querySelector("#"+t.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+t.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+t.id()+"  .volume-cursor"),this._player.on(l.Private.VolumeVisibilityChange,function(o){var a,o=o.paramData;!t._shown&&o?(a=t._player.getVolume(),t._setVolumnUI(a),p.css(t.control,"display","block"),o&&t._updatePosition(o),t._shown=!0):t._hide()}),this._player.on(l.Private.VolumeUpdatePosition,function(e){e=e.paramData,t._shown&&t._updatePosition(e)}),this._player.on(l.Private.ControlBarClick,function(e){p.hasClass(e.paramData.target,"prism-controlbar-bg")&&t._hide()}),d.on(this.volumnRange,"click",function(e){e=p.getPointerPosition(t.volumnRange,e).y,e<0||1<e||(t._setVolumnUI(e=1<(e=e<0?0:e)?1:e),t._setMuteUI(e),t._player.setVolume(e))}),d.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t._hide()}),d.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t._hide()}),d.on(this.volumnCursor,"mousedown",function(e){t._onMouseDown(e)}),d.on(this.volumnCursor,"touchstart",function(e){t._onMouseDown(e)}),this._player.on(l.Private.VolumnChanged,function(e){e=e.paramData,-1<e&&t._setVolumnUI(e),t._setMuteUI(e)}),d.on(this.control,"mouseleave",function(){t._offEvent(),t._hide()}),d.on(this.control,"mouseover",function(){p.addClass(t.control,"hover")}),t._rangeBottom=t._getBottom()},_getBottom:function(){var t;return window.getComputedStyle?(t=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(t)):26},_onMouseDown:function(t){var e=this;t.preventDefault(),d.on(this.control,"mousemove",function(a){e._onMouseMove(a)}),d.on(this.control,"touchmove",function(a){e._onMouseMove(a)}),d.on(this._player.tag,"mouseup",function(a){e._onMouseUp(a)}),d.on(this._player.tag,"touchend",function(a){e._onMouseUp(a)}),d.on(this.control,"mouseup",function(a){e._onMouseUp(a)}),d.on(this.control,"touchend",function(a){e._onMouseUp(a)})},_onMouseUp:function(t){t.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(t=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(t),this._setMuteUI(t))},_onMouseMove:function(t){t.preventDefault(),t=p.getPointerPosition(this.volumnRange,t).y,t<0||1<t||this._setVolumnUI(t=1<(t=t<0?0:t)?1:t)},_getPosition:function(t){for(var e=this.volumnRange,a=0;e=e.offsetParent;)a+=e.offsetTop;var o=this.volumnRange.offsetHeight,s=this.volumnCursor.offsetHeight,g=(t.touches?t.touches[0]:t).pageY;return(o-((g=o<g-a?t.clientY:g)-a)+s)/this.volumnRange.offsetHeight},_offEvent:function(){d.off(this._player.tag,"mouseup"),d.off(this._player.tag,"touchend"),d.off(this.control,"mousemove"),d.off(this.control,"touchmove"),d.off(this.control,"mouseup"),d.off(this.control,"touchend")},_setMuteUI:function(t){isNaN(t)||(t==0||t==-1?p.addClass(this.icon,"mute"):p.removeClass(this.icon,"mute"))},_setVolumnUI:function(t){isNaN(t)||(p.css(this.volumnValue,"height",100*t+"%"),p.css(this.volumnCursor,"bottom",100*(t=t==1?.99:t)+"%"))},_hide:function(){p.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(t){p.css(this.control,"left",t-5+"px")}}));m.exports=n},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":84,"../component":150,"./util":180}],183:[function(x,m,j){m.exports={H5Loading:x("./component/h5-loading"),bigPlayButton:x("./component/big-play-button"),unmuteButton:x("./component/unmute-button"),controlBar:x("./component/controlbar"),progress:x("./component/progress"),playButton:x("./component/play-button"),liveDisplay:x("./component/live-display"),timeDisplay:x("./component/time-display"),fullScreenButton:x("./component/fullscreen-button"),volume:x("./component/volume"),snapshot:x("./component/snapshot"),errorDisplay:x("./component/error-display"),infoDisplay:x("./component/info-display"),liveShiftProgress:x("../commonui/liveshiftprogress"),liveShiftTimeDisplay:x("../commonui/livetimedisplay"),setting:x("./component/setting/button"),subtitle:x("./component/cc-button"),thumbnail:x("./component/thumbnail"),tooltip:x("./component/tooltip")}},{"../commonui/liveshiftprogress":17,"../commonui/livetimedisplay":18,"./component/big-play-button":151,"./component/cc-button":152,"./component/controlbar":153,"./component/error-display":156,"./component/fullscreen-button":157,"./component/h5-loading":158,"./component/info-display":159,"./component/live-display":160,"./component/play-button":161,"./component/progress":163,"./component/setting/button":166,"./component/snapshot":174,"./component/thumbnail":176,"./component/time-display":177,"./component/tooltip":178,"./component/unmute-button":179,"./component/volume":181}]},{},[20])(20)})})(aliplayerMin);var aliplayerMinExports=aliplayerMin.exports;const Aliplayer$1=getDefaultExportFromCjs(aliplayerMinExports),_sfc_main=defineComponent({name:"VideoPlayer",components:{QuestionList,NoteList,ReviewList},setup(){const x=useRoute(),m=useRouter(),j=ref(0),w=ref(null),p=ref(null),d=ref([]),l=ref(null),n=ref(null);ref(!1),ref(!1);const t=ref(!1),e=ref(!1),a=ref(""),o=ref(!1);let s=ref(0),g=ref(0);const c=async E=>{const S=await getLessonDetail(x.params.courseId);S.hasStudy=!0,S.classId=E,w.value=S;const P=await getLessonChapter({courseId:x.params.courseId});if(d.value=[...P.map(b=>b.chapterList).flat()],l.value=d.value.find(b=>b.videoId===x.params.videoId),!l.value){showFailToast("");return}u()},f=()=>{p.value=new Aliplayer$1({license:{domain:"bjsyrc.cn",key:"EPSmMyEFEooJZm10S5cf853f03b2b4bd098e11931a4aeeb83"},id:"player-con",vid:l.value.videoId,playauth:l.value.playauth,authTimeout:3600*10,width:"100%",height:"260px",autoplay:!1,isLive:!1,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0},E=>{E.on("ended",()=>{console.log("ended"),r();const S=d.value.findIndex(b=>b.videoId===x.params.videoId&&l.value.id===b.id),P=d.value[S+1];P&&!o.value?showConfirmDialog({title:"",message:"?"}).then(()=>{_(P),o.value=!0}).catch(()=>{}):showToast("")}),E.on("canplay",function(){}),E.on("ready",()=>{}),E.on("play",()=>{t.value?t.value=!0:(E.seek(l.value.progress),setTimeout(()=>{t.value=!0},100)),console.log("play"),r()}),E.on("timeupdate",()=>{console.log("timeupdate");const S=Math.floor(E.getCurrentTime()),P=Date.now();S!==g.value&&P-s.value>5e3&&(g.value=S,s.value=P,r())}),E.on("pause",()=>{r(),console.log("pause")}),E.on("startSeek",()=>{r(),console.log("startSeek")}),E.on("completeSeek",()=>{r(),console.log("completeSeek")}),E.on("error",()=>{console.log("error")})})},y=async()=>{await updateEvaluation({courseId:x.params.courseId,content:a.value}),e.value=!1,showToast("")},_=E=>{l.value=E,console.log("update",E.videoId),p.value.dispose(),nextTick(()=>{m.push({path:`/video/${x.params.courseId}/${E.videoId}`}).then(()=>{window.location.reload()})})},u=async()=>{const E=await getVideoAuth({courseId:x.params.courseId,videoId:x.params.videoId});if(!E)return showFailToast("");l.value.playauth=E,f()},r=()=>{createStudyHistory({courseId:Number(x.params.courseId),chapterId:l.value.id,fileId:l.value.fileId,progress:p.value.getCurrentTime(),classId:w.value.classId||null})},h=()=>{joinClass({courseId:x.params.courseId}).then(E=>{c(E)})};onMounted(async()=>{if((()=>{const S=navigator.userAgent.toLowerCase();return console.log("ua",S),S.includes("ucbrowser")||S.includes("ucweb")||S.includes("uc")||S.includes("mqqbrowser")||S.includes("qqbrowser")||S.includes("qq")})()){showDialog({title:"",message:""}).then(()=>{}),v.value=!0;return}if(!x.params.videoId)return showFailToast("");h()}),onUnmounted(()=>{n.value&&clearTimeout(n.value),p.value&&p.value.dispose()});const v=ref(!1);return{activeTab:j,course:w,lessonChapter:l,showPopup:e,rating:a,fSeek:t,onConfirm:y,isBrowserUnsupported:v,openInDefaultBrowser:()=>{const E=window.location.href;window.location.href=`mttbrowser://url=${encodeURIComponent(E)}`}}}}),_hoisted_1={class:"video-player"},_hoisted_2={class:"course-title"},_hoisted_3={key:0,class:"teacher-info flex text-left mt-2"},_hoisted_4={class:"teacher-details"},_hoisted_5={class:"text-xl p-4 font-semibold"},_hoisted_6={class:"review-popup"},_hoisted_7={class:"content-section mb-2 flex"},_hoisted_8={class:"flex"},_hoisted_9={key:2,class:"browser-warning"};function _sfc_render(x,m,j,w,p,d){var r;const l=Tag,n=Image$1,t=Card,e=resolveComponent("question-list"),a=Tab,o=resolveComponent("note-list"),s=resolveComponent("review-list"),g=Tabs,c=Radio,f=RadioGroup,y=Divider,_=Button,u=Popup;return openBlock(),createElementBlock("div",_hoisted_1,[x.course?(openBlock(),createBlock(t,{key:0,thumb:x.course.imgUrl,title:x.course.title,desc:x.course.courseDesc,class:"course-info mb-4"},{title:withCtx(()=>[createBaseVNode("div",_hoisted_2,toDisplayString(x.course.title),1)]),tags:withCtx(()=>[createVNode(l,{plain:"",class:"mr-2"},{default:withCtx(()=>[createTextVNode(": "+toDisplayString(x.course.durationStr),1)]),_:1}),createVNode(l,{plain:"",class:"mr-2"},{default:withCtx(()=>[createTextVNode(": "+toDisplayString(x.course.studyCount)+" ",1)]),_:1}),createVNode(l,{plain:""},{default:withCtx(()=>[createTextVNode(": "+toDisplayString(x.course.score),1)]),_:1}),x.course.teacherInfo?(openBlock(),createElementBlock("div",_hoisted_3,[createVNode(n,{round:"",width:"40px",height:"40px",src:x.course.teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),createBaseVNode("div",_hoisted_4,[createBaseVNode("p",null,toDisplayString(x.course.teacherInfo.userName),1),createBaseVNode("p",null,toDisplayString(x.course.teacherInfo.education),1)])])):createCommentVNode("",!0)]),_:1},8,["thumb","title","desc"])):createCommentVNode("",!0),m[9]||(m[9]=createBaseVNode("div",{id:"player-con"},null,-1)),createBaseVNode("h3",_hoisted_5,toDisplayString(((r=x.lessonChapter)==null?void 0:r.title)||""),1),x.course?(openBlock(),createBlock(g,{key:1,modelValue:x.activeTab,"onUpdate:modelValue":m[0]||(m[0]=h=>x.activeTab=h),class:"pb-12",sticky:""},{default:withCtx(()=>[createVNode(a,{title:""},{default:withCtx(()=>[createVNode(e,{course:x.course},null,8,["course"])]),_:1}),createVNode(a,{title:""},{default:withCtx(()=>[createVNode(o,{course:x.course},null,8,["course"])]),_:1}),createVNode(a,{title:""},{default:withCtx(()=>[createVNode(s,{course:x.course},null,8,["course"])]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0),createVNode(u,{show:x.showPopup,"onUpdate:show":m[2]||(m[2]=h=>x.showPopup=h),position:"bottom",style:{"background-color":"var(--van-gray-1)"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,[m[6]||(m[6]=createBaseVNode("span",{class:"mr-4"},"",-1)),createVNode(f,{modelValue:x.rating,"onUpdate:modelValue":m[1]||(m[1]=h=>x.rating=h)},{default:withCtx(()=>[createVNode(c,{class:"mb-2",name:""},{default:withCtx(()=>[...m[3]||(m[3]=[createTextVNode("",-1)])]),_:1}),createVNode(c,{class:"mb-2",name:""},{default:withCtx(()=>[...m[4]||(m[4]=[createTextVNode("",-1)])]),_:1}),createVNode(c,{class:"mb-2",name:""},{default:withCtx(()=>[...m[5]||(m[5]=[createTextVNode("",-1)])]),_:1})]),_:1},8,["modelValue"])]),createVNode(y),createBaseVNode("div",_hoisted_8,[createVNode(_,{type:"primary",onClick:x.onConfirm},{default:withCtx(()=>[...m[7]||(m[7]=[createTextVNode("",-1)])]),_:1},8,["onClick"])])])]),_:1},8,["show"]),x.isBrowserUnsupported?(openBlock(),createElementBlock("div",_hoisted_9,[...m[8]||(m[8]=[createBaseVNode("p",{class:"p-4"},"",-1)])])):createCommentVNode("",!0)])}const index=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-df1b7ad2"]]);export{index as default};

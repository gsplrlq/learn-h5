import{_ as O,z as C,A as T,D as h,c as r,o as n,b as d,w as c,F as m,q as v,e as V,f as x,B,g as f,t as L,E as w,r as y,G as z,h as N}from"./index-2WoK3mnG.js";import{g as S,c as D}from"./order-TNH96eAa.js";const E={components:{"van-tab":h,"van-tabs":T,"van-card":C},setup(){const p=w(),s=y(0),i=[{id:1,title:"全部",status:""},{id:2,title:"未支付",status:1},{id:3,title:"已完成",status:2},{id:4,title:"已关闭",status:3}],t=y([]),_=a=>{s.value=a.name,l(a.name)},l=a=>{S({page:{current:1,size:999},status:a}).then(o=>{t.value=o.records})};return z(()=>{l(i[0].status)}),{activeTab:s,tabList:i,orders:t,onTabClick:_,payOrder:a=>{p.push({name:"OrderPay",params:{orderSn:a}})},cancelOrderClick:a=>{D({orderSn:a}).then(()=>{N("取消成功"),l(i[0].status)})}}}},F={key:1},I={key:0,class:"no-orders"};function U(p,s,i,t,_,l){const u=B,k=C,a=h,b=T;return n(),r("div",null,[d(b,{modelValue:t.activeTab,"onUpdate:modelValue":s[0]||(s[0]=o=>t.activeTab=o),sticky:"","offset-top":"50",onClickTab:t.onTabClick},{default:c(()=>[(n(!0),r(m,null,v(t.tabList,o=>(n(),V(a,{key:o.id,title:o.title,name:o.status},{default:c(()=>[(n(!0),r(m,null,v(t.orders,e=>(n(),r("div",{key:e.id,class:"order-card"},[d(k,{thumb:e.productImageUrl,"thumb-width":"160","thumb-height":"90",title:`订单编号： ${e.orderSn}`,desc:`${e.productName} | 日期: ${e.createTime}`,price:e.amount,status:e.status},{footer:c(()=>[e.status==1?(n(),r(m,{key:0},[d(u,{type:"primary",size:"small",onClick:g=>t.payOrder(e.orderSn)},{default:c(()=>[...s[1]||(s[1]=[f(" 立即支付 ",-1)])]),_:1},8,["onClick"]),d(u,{type:"info",size:"small",onClick:g=>t.cancelOrderClick(e.orderSn)},{default:c(()=>[...s[2]||(s[2]=[f(" 取消订单 ",-1)])]),_:1},8,["onClick"])],64)):(n(),r("span",F,L(e.status==2?"已完成":"已关闭"),1))]),_:2},1032,["thumb","title","desc","price","status"])]))),128)),t.orders.length===0?(n(),r("div",I,"暂无订单")):x("",!0)]),_:1},8,["title","name"]))),128))]),_:1},8,["modelValue","onClickTab"])])}const G=O(E,[["render",U],["__scopeId","data-v-d7b87387"]]);export{G as default};

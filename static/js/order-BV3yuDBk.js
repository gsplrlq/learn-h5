import{_ as O,I as C,J as T,K as h,r as v,L as x,e as r,b as d,g as c,M as L,m as V,o as n,x as m,D as f,h as B,j as y,k as N,l as S,B as w}from"./index-ADPyas5r.js";import{g as z,c as D}from"./order-Ch7KRtZA.js";const I={components:{"van-tab":C,"van-tabs":T,"van-card":h},setup(){const p=L(),s=v(0),i=[{id:1,title:"全部",status:""},{id:2,title:"未支付",status:1},{id:3,title:"已完成",status:2},{id:4,title:"已关闭",status:3}],t=v([]),_=a=>{s.value=a.name,l(a.name)},l=a=>{z({page:{current:1,size:999},status:a}).then(o=>{t.value=o.records})};return x(()=>{l(i[0].status)}),{activeTab:s,tabList:i,orders:t,onTabClick:_,payOrder:a=>{p.push({name:"OrderPay",params:{orderSn:a}})},cancelOrderClick:a=>{D({orderSn:a}).then(()=>{V("取消成功"),l(i[0].status)})}}}},M={key:1},U={key:0,class:"no-orders"};function j(p,s,i,t,_,l){const u=w,k=h,a=C,b=T;return n(),r("div",null,[d(b,{modelValue:t.activeTab,"onUpdate:modelValue":s[0]||(s[0]=o=>t.activeTab=o),sticky:"","offset-top":"50",onClickTab:t.onTabClick},{default:c(()=>[(n(!0),r(m,null,f(t.tabList,o=>(n(),B(a,{key:o.id,title:o.title,name:o.status},{default:c(()=>[(n(!0),r(m,null,f(t.orders,e=>(n(),r("div",{key:e.id,class:"order-card"},[d(k,{thumb:e.productImageUrl,"thumb-width":"160","thumb-height":"90",title:`订单编号： ${e.orderSn}`,desc:`${e.productName} | 日期: ${e.createTime}`,price:e.amount,status:e.status},{footer:c(()=>[e.status==1?(n(),r(m,{key:0},[d(u,{type:"primary",size:"small",onClick:g=>t.payOrder(e.orderSn)},{default:c(()=>s[1]||(s[1]=[y(" 立即支付 ")])),_:2},1032,["onClick"]),d(u,{type:"info",size:"small",onClick:g=>t.cancelOrderClick(e.orderSn)},{default:c(()=>s[2]||(s[2]=[y(" 取消订单 ")])),_:2},1032,["onClick"])],64)):(n(),r("span",M,N(e.status==2?"已完成":"已关闭"),1))]),_:2},1032,["thumb","title","desc","price","status"])]))),128)),t.orders.length===0?(n(),r("div",U,"暂无订单")):S("",!0)]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue","onClickTab"])])}const J=O(I,[["render",j],["__scopeId","data-v-d7b87387"]]);export{J as default};

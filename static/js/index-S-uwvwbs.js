import{j as createNamespace,d as defineComponent,b as createVNode,K as truthProp,a5 as makeStringProp,l as withInstall,a6 as commonjsGlobal,a7 as commonjsRequire,a8 as getDefaultExportFromCjs,Z as useRoute,G as useRouter,r as ref,E as onMounted,x as showFailToast,a9 as onUnmounted,aa as updateEvaluation,h as showToast,ab as joinClass,$ as getLessonDetail,a0 as getLessonChapter,ac as getVideoAuth,X as nextTick,ad as createStudyHistory,_ as _export_sfc,c as createElementBlock,e as createBlock,w as withCtx,f as createCommentVNode,a as createBaseVNode,t as toDisplayString,D as Card,ae as resolveComponent,A as Tabs,af as Popup,o as openBlock,g as createTextVNode,a2 as Tag,a3 as Image$1,z as Tab,B as Button}from"./index-BkkJluPK.js";import{R as Radio,a as RadioGroup}from"./index-DNuuSAjT.js";import{Q as QuestionList,N as NoteList,R as ReviewList}from"./review-BgZKtoH2.js";import"./index-Dm7r5RTd.js";import"./index-BcqcR906.js";import"./index-C03Z518e.js";const[name,bem]=createNamespace("divider"),dividerProps={dashed:Boolean,hairline:truthProp,vertical:Boolean,contentPosition:makeStringProp("center")};var stdin_default=defineComponent({name,props:dividerProps,setup(k,{slots:E}){return()=>{var ne;return createVNode("div",{role:"separator",class:bem({dashed:k.dashed,hairline:k.hairline,vertical:k.vertical,[`content-${k.contentPosition}`]:!!E.default&&!k.vertical})},[!k.vertical&&((ne=E.default)==null?void 0:ne.call(E))])}}});const Divider=withInstall(stdin_default);var aliplayerMin={exports:{}};/*! aliyun-aliplayer - v2.28.5 - 2024-12-31 14.47.23 */(function(module,exports){(function(k){module.exports=k()})(function(){return function k(E,ne,x){function b(f,s){if(!ne[f]){if(!E[f]){var o=typeof commonjsRequire=="function"&&commonjsRequire;if(!s&&o)return o(f,!0);if(g)return g(f,!0);throw(s=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",s}o=ne[f]={exports:{}},E[f][0].call(o.exports,function(a){return b(E[f][1][a]||a)},o,o.exports,k,E,ne,x)}return ne[f].exports}for(var g=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<x.length;d++)b(x[d]);return b}({1:[function(k,E,ne){var x,b,g=Object.defineProperty,d=(ve,Ee,De)=>{return V=De,(Ee=typeof Ee!="symbol"?Ee+"":Ee)in(ve=ve)?g(ve,Ee,{enumerable:!0,configurable:!0,writable:!0,value:V}):ve[Ee]=V,De;var V},f=(Object.defineProperties(ne,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),{exports:{}}),s={exports:{}};function o(){var ve,Ee,De;return b||(b=1,Date.now=Date.now||function(){return new Date().getTime()},ve=Date.now(),De={noop:Ee=function(){},warn:function(){var V=typeof console=="object"?console.warn:Ee;try{var ae={warn:V};ae.warn.call(ae)}catch{return Ee}return V}(),key:"__bl",selfErrKey:"ARMS_SDK_ERROR",selfErrPage:"ARMSSDK",win:typeof window=="object"&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",daily_3:"http://arms-retcode-daily.aliyun.test/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?",tw:"https://arms-retcode.orientalgame.com.tw/r.png?",tw_sg:"https://arms-retcode-sg.orientalgame.com.tw/r.png?",hz_finance:"https://arms-retcode-hz-finance.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(V){var ae;return Object.create?Object.create(V):((ae=function(){}).prototype=V,new ae)},each:function(V,ae){var de=0,Y=V.length;if(this.T(V,"Array"))for(;de<Y&&ae.call(V[de],V[de],de)!==!1;de++);else for(de in V)if(ae.call(V[de],V[de],de)===!1)break;return V},safetyCall:function(V,ae,de){if(typeof V!="function")return de;try{return V.apply(this,ae)}catch{return de}},T:function(V,ae){return V=Object.prototype.toString.call(V).substring(8).replace("]",""),ae?V===ae:V},duration:function(){var V=Date;try{performance&&this.T(performance.now,"Function")&&(V=performance)}catch{V=Date}var ae=V.now();return function(){return Math.round(V.now()-ae)}},filterByRule:function(){var V,ae,de,Y,ie,_e=[].slice.call(arguments),fe=_e.length;return fe<2?_e[0]:(V=_e[fe-1],(ae=_e[0])?V?(Y=(de=this).T(V),ie=_e.slice(0,fe-1),Y==="Function"?de.safetyCall(V,ie,ae):Y==="Array"?(this.each(V,function(Se){ie[0]=ae=de.filterByRule.apply(de,[].concat(ie,Se))}),ae):Y==="Object"?ae.replace(V.rule,V.target||""):ae.replace(V,"")):ae:"")},ignoreByRule:function(V,ae){if(!V||!ae)return!1;if((this.isString(ae)||ae.source||this.T(ae)==="Function")&&(ae=[ae]),!this.isArray(ae))return this.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var de,Y=[],ie=0,_e=ae.length;ie<_e;ie++)if(de=ae[ie],this.isString(de))Y.push(de.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(de&&de.source)Y.push(de.source);else if(de&&this.T(de)==="Function"&&this.safetyCall(de,[V],!1)===!0)return!0;var fe=new RegExp(Y.join("|"),"i");return!!(Y.length&&fe.test&&fe.test(V))},J:function(V){if(!V||typeof V!="string")return V;var ae=null;try{ae=JSON.parse(V)}catch{}return ae},pick:function(V){return V===1||Math.ceil(Math.random()*V)===1},verifyConfig:function(V){var ae,de;return"sample"in V&&(1<=(de=0<(de=(de=ae=V.sample)&&/^\d+(\.\d+)?%$/.test(ae)?parseInt(100/parseFloat(ae)):de)&&de<1?parseInt(1/de):de)&&de<=100?V.sample=de:delete V.sample),V},on:function(V,ae,de,Y,ie){return V.addEventListener?(ie=ie||!1,V.addEventListener(ae,function _e(fe){Y&&V.removeEventListener(ae,_e,ie),de.call(this,fe)},ie)):V.attachEvent&&V.attachEvent("on"+ae,function _e(fe){Y&&V.detachEvent("on"+ae,_e),de.call(this,fe)}),this},off:function(V,ae,de){return de&&(V.removeEventListener?V.removeEventListener(ae,de):V.detachEvent&&V.detachEvent(ae,de)),this},delay:function(V,ae){return ae===-1?(V(),null):setTimeout(V,ae||0)},ext:function(V){for(var ae=1,de=arguments.length;ae<de;ae++){var Y,ie=arguments[ae];for(Y in ie)Object.prototype.hasOwnProperty.call(ie,Y)&&(V[Y]=ie[Y])}return V},sub:function(V,ae){var de={};return this.each(V,function(Y,ie){ae.indexOf(ie)!==-1&&(de[ie]=Y)}),de},uu:function(){for(var V,ae,de=20,Y=new Array(de),ie=Date.now().toString(36).split("");0<de--;)ae=(V=36*Math.random()|0).toString(36),Y[de]=V%3?ae:ae.toUpperCase();for(var _e=0;_e<8;_e++)Y.splice(3*_e+2,0,ie[_e]);return Y.join("")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){var ae=16*Math.random()|0;return(V==="x"?ae:3&ae|8).toString(16)})},seq:function(){return(ve++).toString(36)},decode:function(V){try{V=decodeURIComponent(V)}catch{}return V},encode:function(V,ae){try{V=ae?encodeURIComponent(V).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(V)}catch{}return V},serialize:function(V){var ae,de=[];for(ae in V=V||{})Object.prototype.hasOwnProperty.call(V,ae)&&V[ae]!==void 0&&de.push(ae+"="+this.encode(V[ae],ae==="msg"));return de.join("&")},checkAPI:function(V,ae){var de;return!(!V||typeof V!="string"||(!(de=/arms-retcode[\w-]*\.aliyuncs/.test(V))&&ae?/(alicdn\.com)|(mmstat\.com)/.test(V):de))},checkAutoError:function(V){return!(!V||!V.message||/failed[\w\s]+fetch/i.test(V.message))},cutUrlSearch:function(V){return V&&typeof V=="string"?V.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},removeUrlSearch:function(V){return V&&typeof V=="string"?V.replace(/\?.*$/,""):""},createFakeToString:function(V){return function(){return V+"() { [native code] }"}},checkSameOrigin:function(V,ae){var de;return!(!ae||!V||(de="//"+ae.split("/")[2],V!==ae&&V.slice(0,ae.length+1)!==ae+"/"&&V!==de&&V.slice(0,de.length+1)!==de+"/"&&/^(\/\/|http:|https:).*/.test(V)))},getRandIP:function(){for(var V=[],ae=0;ae<4;ae++){var de=Math.floor(256*Math.random());V[ae]=(15<de?"":"0")+de.toString(16)}return V.join("").replace(/^0/,"1")},getSortNum:function(V){return V?1e3<=(V+=1)&&V<=9999?V:V<1e3?V+1e3:V%1e4+1e3:1e3},getRandNum:function(V){return!V||typeof V!="string"||V.length<5?this.getNum(5):V.substring(V.length-5)},getNum:function(V){for(var ae=[],de=0;de<V;de++){var Y=Math.floor(16*Math.random());ae[de]=Y.toString(16)}return ae.join("")},getCurDomain:function(){return location&&location.hostname||""},getSrcType:function(V,ae){var de=location&&location.host||"";if(!de)return"";var Y=new URL(V).host;if(Y===de)return"self";for(var ie=0;ie<ae.length;ie+=1)if(Y.includes(ae[ie]))return"cdn";return"others"},parseFetchHeaders:function(V){if(!V)return{};var ae={};try{if(typeof V.keys=="function")for(var de=V.keys(),Y=de.next();!Y.done;){var ie=Y.value;ae[ie]=V.get(ie),Y=de.next()}else ae=V}catch{ae={}}return ae},parseXhrHeaders:function(V){if(!V&&typeof V!="string")return{};var ae={};try{ae=V.split(`\r
`).reduce(function(de,Y){return Y=Y.split(": "),de[Y[0]]=Y[1],de},{})}catch{ae={}}return ae},getQuerys:function(V){if(!V)return"";var ae,de,Y,ie={};try{var _e=[];if(0<(_e=0<=V.indexOf("?")?V.substring(V.indexOf("?")+1,V.length).split("&"):_e).length)for(var fe in _e)de=(ae=_e[fe].split("="))[0],Y=ae[1],ie[de]=Y}catch{ie={}}return ie},getURL:function(V){if(!V)return null;var ae={},ie=V.length,de=V.indexOf("://");if(de<0)return null;ae.protocol=V.substring(0,de+1);var _e=V.indexOf("#"),Y=V.indexOf("?"),ie=(_e<0&&(_e=ie),Y<0&&(Y=_e),ae.search=V.substring(Y,_e).substring(0,1e3),V.substring(de+3,Y)),_e=ie.indexOf("/");return _e<0&&(_e=ie.length),ae.domain=ie.substring(0,_e).split(":")[0],ae.path=ie.substring(_e,ie.length).substring(0,1e3),ae},getResType:function(V,Y){if(-1<["script","img","other"].indexOf(V))return V;if(-1<["video"].indexOf(V))return"media";if(-1<["document","iframe"].indexOf(V))return"doc";var Y=Y?this.getURL(Y):null,de=Y&&Y.path?Y.path.lastIndexOf("."):-1,Y=(0<de?Y.path.substr(de+1):"").toLowerCase();if(Y){if(-1<["eot","woff","woff2","ttf"].indexOf(Y))return"font";if(Y==="css")return"css";if(Y==="js")return"script"}return-1<["fetch","xmlhttprequest","beacon"].indexOf(V)?"api":"others"},areInOrder:function(){for(var V=1;V<arguments.length;V+=1)if(arguments[V]<arguments[V-1])return!1;return!0},getFetchSnapshot:function(V,ae,de){try{var Y=(V&&typeof V[0]!="string"?V[0].url:V[0])||"",ie=(V&&typeof V[0]!="string"?V[0]:V[1])||{},_e=ie.method.toUpperCase()==="POST"?ie.body:this.getQuerys(Y),fe={originApi:Y,method:ie.method||"unknown",params:_e,response:ae||"",reqHeaders:this.parseFetchHeaders(ie.headers||null),resHeaders:this.parseFetchHeaders(de)},Se=JSON&&JSON.stringify(fe)||"{}"}catch{Se="{}"}return Se},getXhrSnapshot:function(V,ae,de){if(!V||!ae||!de)return{};var Y,ie;try{var _e="";de.responseType===""||de.responseType==="text"?_e=de.responseText:de.responseType==="document"&&(_e=de.responseXML),Y={originApi:V,method:ae,params:this.getQuerys(V),response:_e,reqHeaders:{},resHeaders:this.parseXhrHeaders(typeof de.getAllResponseHeaders=="function"&&de.getAllResponseHeaders()||"")},ie=JSON&&JSON.stringify(Y)||"{}"}catch{ie="{}"}return ie},isRobot:function(){var V=["nuhk","googlebot/","googlebot-image","yammybot","openbot","slurp","msnbot","ask jeeves/teoma","ia_archiver","baiduspider","bingbot/","adsbot"];if(navigator&&typeof navigator.userAgent=="string")try{for(var ae=navigator.userAgent.toLowerCase(),de=0;de<V.length;de++){var Y=V[de];if(0<=ae.lastIndexOf(Y))return!0}}catch{this.warn("[arms] useragent parse error")}return!1},isFunction:function(V){return typeof V=="function"},isPlainObject:function(V){return Object.prototype.toString.call(V)==="[object Object]"},isString:function(V){return Object.prototype.toString.call(V)==="[object String]"},isArray:function(V){return Object.prototype.toString.call(V)==="[object Array]"},joinRegExp:function(V){for(var ae,de=[],Y=0,ie=V.length;Y<ie;Y++)ae=V[Y],this.isString(ae)?de.push(ae.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):ae&&ae.source&&de.push(ae.source);return new RegExp(de.join("|"),"i")},reWriteMethod:function(V,ae,de){var Y;V!==null&&(Y=V[ae],V[ae]=de(Y))},checkSDKError:function(V,ae){return!(!V&&!ae||!new RegExp(this.selfErrKey,"i").test(V)&&!this.ignoreByRule(ae,[/retcode.alicdn.com\/retcode\/bl.js/,/g.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/laz-g-cdn.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/local.taobao.com:8880\/build\/bl/]))},sdkError:function(V){return{msg:V,message:this.selfErrKey}},dealParam:function(V,ae,de){var Y={};try{Y=this.isPlainObject(V)?this.ext({key:V.key||"default",val:V.val||V.value||de},V,{begin:Date.now()}):{key:V||"default",val:ae||de,begin:Date.now()}}catch(ie){this.warn("[retcode] baseLog error: "+ie)}return Y}},x=De),x}var a,n,u,v,h={exports:{}},c={exports:{}};function _(){var ve,Ee,De,V,ae,de;return u||(u=1,ve=o(),n||(n=1,de=o(),a=function(Y,ie,_e){typeof Y=="object"&&(Y=de.serialize(Y)),window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?window.navigator.sendBeacon(ie+Y+(_e?"&post_res=":""),_e||"&post_res="):de.warn("[arms] navigator.sendBeacon not surported")}),Ee=a,De="aokcdqn3ly@e629dabd48a9933",V=function(Y,ie){var _e,fe,Se;if(ie.t!=="error"||!(_e=Y.requestQueue[0])||_e.t!=="error"||ie.msg!==_e.msg)return ie.t==="behavior"?0<(fe=Y.requestQueue&&Y.requestQueue.length)&&Y.requestQueue[fe-1].t==="behavior"?(Se=ie.behavior||[],Y.requestQueue[fe-1].behavior.concat(Se)):Y.requestQueue.push(ie):Y.requestQueue.unshift(ie),Y.onReady(function(){Y.requestTimmer=ve.delay(function(){Y.clear()},Y.requestQueue[0]&&Y.requestQueue[0].t==="error"?3e3:-1)}),!0;ie.times=_e.times+1,Y.requestQueue[0]=ie},(ae=function(Y){return this.ver="1.8.36-beta.12",this._conf=ve.ext({},ae.dftCon),this.sampleCache={},this.requestQueue=[],this.selfQueue=[],this.sdkFlag=!0,this.hash=ve.seq(),this.resetPageview(),this.setConfig(Y),this.rip=ve.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this}).dftCon={sample:1,pvSample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[/^Script error\.?$/],ignoreResErrors:[],ignoreResources:[/\/(bl|wl)(.debug)?.js$/]},release:void 0,environment:"prod",beforeReport:null,parseTraceId:null},ae.prototype={constructor:ae,onReady:function(Y){return Y()},getPage:function(){var Y=this._conf.page;return ve.safetyCall(Y,[],Y+"")},setPage:function(){},setConfig:function(Y){Y&&typeof Y=="object"&&(ve.verifyConfig(Y),Y=this.setImgUrl(Y),this._conf=ve.ext({},this._conf,Y))},setImgUrl:function(Y){var ie=Y.region,_e=Y.imgUrl;return ie?(ie=ve.regionMap[ie],Y.imgUrl=ie||ve.defaultImgUrl):_e&&(Y.imgUrl=_e),Y},checkImgUrl:function(){return!0},sendRequest:function(){},sendBeacon:function(Y,ie,_e){Ee(Y,ie||this.getConfig("imgUrl"),_e)},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(Y){Y&&typeof Y=="object"&&(this._common=ve.ext({},this._common,Y))},resetPageview:function(){this.pageview=ve.uu(),this.sBegin=Date.now()},getUsername:function(){if(!this.username){var Y=this._conf,Y=Y&&Y.setUsername;if(typeof Y=="function")try{var ie=Y();typeof ie=="string"&&(ie=ie.substr(0,40),this.username=ie)}catch(_e){ve.warn("[arms] setUsername fail",_e)}}return this.username},getTraceId:function(){var _e=this.rip,Y=Date.now(),ie=ve.getSortNum(this.record),_e=_e+Y+ie+ve.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=_e,this.record=ie,{"EagleEye-TraceID":_e}},getUberTraceId:function(Y){var fe=this.rip,Se=Date.now(),ie=ve.getSortNum(this.record),_e=ve.getRandNum(this._conf.pid),fe=fe+Se+ie+ve.getNum(2)+_e,Se=fe.substring(0,16);return Y=Y?"1":"0",fe[0]==="0"&&(fe[0]="1"),fe[16]==="0"&&(fe[16]="1"),{"uber-trace-id":fe+":"+Se+":0:"+Y,traceId:fe}},getB3TraceId:function(Y){var fe=this.rip,Se=Date.now(),ie=ve.getSortNum(this.record),_e=ve.getRandNum(this._conf.pid),fe=fe+Se+ie+ve.getNum(2)+_e,Se=fe.substring(0,16);return Y=Y?"1":"0",fe[0]==="0"&&(fe[0]="1"),fe[16]==="0"&&(fe[16]="1"),{b3:fe+"-"+Se+"-"+Y+"-0","X-B3-TraceId":fe,"X-B3-ParentSpanId":"0","X-B3-SpanId":Se,"X-B3-Sampled":Y}},getPageviewId:function(){return{"EagleEye-SessionID":this.pageview}},getConfig:function(Y){return Y?this._conf[Y]:ve.ext({},this._conf)},sampling:function(Y){return Y===1||(typeof this.sampleCache[Y]=="boolean"||(this.sampleCache[Y]=ve.pick(Y)),this.sampleCache[Y])},clear:function(Y){var ie;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var _e,fe=this._conf&&typeof this._conf.sendRequest=="function";ie=this.requestQueue.pop();)ie.t==="res"?this.postData(ie,"res"):ie.t==="error"?this.postData(ie,"err"):ie.t==="api"?this.postData(ie,"apiSnapshot"):ie.t==="behavior"?this.postData(ie,"behavior"):ie.t==="health"&&!fe&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?this.sendBeacon(ie):ie.t==="resource"&&!fe&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?(_e=JSON.stringify({resource:ie.resource}),delete ie.resource,this.sendBeacon(ie,null,_e)):ie.t==="resource"?this.postData(ie,"resource"):this.sendRequest(ie);return Y&&this.clearSelf(),this},clearSelf:function(){var Y;for(clearTimeout(this.Timmer),this.Timmer=null;Y=this.selfQueue.pop();)this.postData(Y,"err");return this},_lg:function(Y,ie,_e,fe){var Se=this,Le=Se._conf,Ue=Se.getPage(),Be=Le.ignore||{},Ae=Be.ignoreErrors,Ie=Be.ignoreResErrors,$e=Be.ignoreUrls,Be=Be.ignoreApis;if(Se._isRobot||ve.ignoreByRule(Ue,$e)||ve.ignoreByRule(ve.decode(Ue),$e)||Y==="error"&&(ve.ignoreByRule(ie.msg,Ae)||ve.ignoreByRule(ve.decode(ie.msg),Ae))||Y==="resourceError"&&(ve.ignoreByRule(ie.src,Ie)||ve.ignoreByRule(ve.decode(ie.src),Ie))||Y==="api"&&(ve.ignoreByRule(ie.api,Be)||ve.ignoreByRule(ve.decode(ie.api),Be))||!Se.checkImgUrl(Le.imgUrl)||!ie||Le.disabled||!Le.pid||fe===0)return Se;if($e=ie.dl,delete ie.dl,ie=ve.ext({t:Y,times:1,page:Ue,tag:Le.tag||"",release:Le.release||"",environment:Le.environment,begin:Date.now(),c1:Le.c1,c2:Le.c2,c3:Le.c3},ie,Se.commonInfo(),Se._common,{pid:Le.pid,_v:Se.ver,pv_id:Se.pageview,username:Se.getUsername(),sampling:_e||1,dl:$e,z:ve.seq()}),ve.T(Le.beforeReport)==="Function")try{if(!(ie=Le.beforeReport(ie)))return Se}catch{return Se}return fe!==1&&_e&&!Se.sampling(_e)?Se:V(Se,ie)},_self:function(Y,ie,_e){var fe=this,Se=fe._conf;if(Y!=="error"||!fe.checkImgUrl(Se.imgUrl)||!ie||Se.disabled||!Se.pid||_e&&!fe.sampling(_e))return fe;if(ie=ve.ext({t:Y,times:1,page:ve.selfErrPage,tag:Se.pid,begin:Date.now()},ie,{pid:De,_v:fe.ver,sampling:_e||1,z:ve.seq()}),Y=fe.selfQueue[0],Y){Y.times++;try{Y.err&&ie.err&&Y.err.msg_raw&&ie.err.msg_raw&&Y.err.msg_raw.split("&").indexOf(ie.err.msg_raw)<0&&Y.err.msg_raw.length<1e3&&(Y.err.msg_raw+="&"+ie.err.msg_raw)}catch{}}else fe.selfQueue.unshift(ie),fe.onReady(function(){fe.sdkFlag&&(fe.sdkFlag=!1,fe.Timmer=ve.delay(function(){fe.clearSelf()},1e4))})},custom:function(Y,ie){var _e,fe;return Y&&typeof Y=="object"&&(_e=!1,fe={begin:Date.now()},ve.each(Y,function(Se,Le){return(_e=Le&&Le.length<=20)||ve.warn("[retcode] invalid key: "+Le),fe["x-"+Le]=Se,_e}),_e)?this._lg("custom",fe,ie||1):this}},c.exports=ae),c.exports}var m,T={exports:{}},l,y,w,P={exports:{}};function C(){var ve;return w||(w=1,ve=o(),y=function(Ee,De){function V(Se,Le,Ue){var Ae;Se!==null&&(Ae=Se[Le],Se[Le]=Ue(Ae))}function ae(Se,Le){return function(Ue){if(Ue&&Ue!==fe){var Ae;fe=Ue;try{Ae=Ue.target}catch{Ae="<unknown>"}Ae.length!==0&&(Ue={type:"ui.".concat(Se),data:{message:function(Ie){if(!Ie||Ie.nodeType!==1)return"";for(var $e=Ie||null,Be=[],He=0,G=0,Q="";$e&&He++<5&&!((Q=function(ue){var ge,Re,je,Ze,Z=[];if(!ue||typeof ue.tagName!="string")return"";if(Z.push(ue.tagName.toLowerCase()),typeof ue.id=="string"&&Z.push("#".concat(ue.id)),typeof(ge=ue.className)=="string")for(Re=ge.split(/\s+/),he=0;he<Re.length;he++)Z.push(".".concat(Re[he]));for(var ce=["type","name","title","alt","data-arms-attr"],he=0;he<ce.length;he++)typeof(Ze=ue.getAttribute(je=ce[he]))=="string"&&Z.push("[".concat(je,'="').concat(Ze,'"]'));return Z.join("")}($e))==="html"||1<He&&80<=G+3*Be.length+Q.length);)Be.push(Q),G+=Q.length,$e=$e.parentNode;return Be.reverse().join(" > ")}(Ae)},timestamp:Date.now()},Se==="click"?Y&&Y.addBehavior(Ue):Se==="keypress"&&(_e||Y&&Y.addBehavior(Ue),clearTimeout(_e),_e=setTimeout(function(){_e=void 0},100)))}}}var de=[],Y=null,ie=De&&De.location&&De.location.href,_e=void 0,fe=null;ve.ext(Ee.prototype,{addBehavior:function(Se){if(this.getConfig("behavior")&&Se&&typeof Se=="object"){var Le={},Ue=Se.data||{};if(Se.type)Le=Ue;else{if(typeof Ue.name!="string"||typeof Ue.message!="string")return;Le.name=Ue.name.substr(0,20),Le.message=Ue.message.substr(0,200)}return Le.message&&(Le.message=ve.encode(Le.message)),Ue={type:Se.type||"custom",data:Le||{},timestamp:Se.timestamp||Date.now(),page:Se.page||De&&De.location&&De.location.pathname},de.push(Ue),de=de.slice(-100)}},getBehavior:function(){return de||[]},setBehavior:function(Se){return de=Se||de},reportBehavior:function(Se){var Le=this;Le.getConfig("behavior")&&(Le.sendBhTimer&&(clearTimeout(Le.sendBhTimer),Le.sendBhTimer=void 0),Le.sendBhTimer=setTimeout(function(){de&&0<de.length&&(Le.behavior(de),de=[],Le.sendBhTimer=void 0,Se)&&typeof Se=="function"&&Se()},0))},initBehavior:function(){if(!this.hasInitBehavior&&!Y){try{document&&document.referrer&&document.location&&(Q=document.referrer,ue=document.location.href,Q!=="")&&(ie=ue,Y)&&Y.addBehavior({type:"navigation",data:{from:Q,to:ue}}),De&&De.document&&De.document.addEventListener&&(De.document.addEventListener("click",ae("click"),!1),De.document.addEventListener("keypress",ae("keypress"),!1)),He=(He=De&&De.chrome)&&He.app&&He.app.runtime,G="history"in De&&!!De.history.pushState&&!!De.history.replaceState,!He&&G&&($e=function(ge,Re){Y&&Y.addBehavior({type:"navigation",data:{from:ge,to:Re}}),ie=Re},Be=De.onpopstate,De.onpopstate=function(){for(var ge=arguments.length,Re=new Array(ge),je=0;je<ge;je++)Re[je]=arguments[je];var Ze=De.location.href;if($e(ie,Ze),Be)return Be.apply(this,Re)},V(De.history,"pushState",He=function(ge){return function(){for(var Re=arguments.length,je=new Array(Re),Ze=0;Ze<Re;Ze++)je[Ze]=arguments[Ze];var Z=2<je.length?je[2]:void 0;return Z&&$e(ie,String(Z)),ge.apply(this,je)}}),V(De.history,"replaceState",He));var Se=this.getConfig("enableConsole");if(Se){var Le=Se;if(De&&De.console){var Ue=["debug","info","warn","log","error","assert"];ve.isArray(Le)&&(Ue=Le);for(var Ae=0;Ae<Ue.length;Ae++){var Ie=Ue[Ae];Ie&&ve.isString(Ie)&&De.console[Ie]&&typeof De.console[Ie]=="function"&&V(De.console,Ie,function(ge){var Re=Ie;return function(){for(var je=arguments.length,Ze=new Array(je),Z=0;Z<je;Z++)Ze[Z]=arguments[Z];if(Y&&Y.addBehavior({type:"console",data:{level:Re,message:Ze}}),Re==="error")for(var ce=0;ce<Ze.length;ce++){var he=Ze[ce];he&&he.message&&he.stack&&Y&&Y.errorHandler(new ErrorEvent("error",{error:he,message:he.message}))}ge&&Function.prototype.apply.call(ge,De.console,Ze)}})}}}}catch(ge){ve.warn("[arms] error in initBehavior",ge)}(Y=this).hasInitBehavior=!0}var $e,Be,He,G,Q,ue;return this}})}),y}var R,A,I,D,B,N,U,J,q,j,F,z,K,L,O,H,te,le={};function me(){return R||(R=1,le.TIMING_KEYS=["startTime","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart","redirectStart","redirectEnd"]),le}function Pe(){return U||(U=1,N=function(ve,Ee,De){function V(Q,ue,ge,Re,je){if(ue===void 0){var Ze;if(!G[Q]){Z=new RegExp(Q+"=([^;]+)");try{Ze=Z.exec(De.cookie)}catch(ce){return fe.warn("[retcode] can not get cookie:",ce),null}Ze&&(G[Q]=Ze[1])}return G[Q]}var Z=Q+"="+ue;Z+="; path=/",ge&&(Z+="; max-age="+ge);try{return De.cookie=Z,!!De.cookie}catch(ce){return fe.warn("[retcode] can not set cookie: ",ce),!1}}function ae(Q){return(Q=Q._conf.uid||V("_nk_")||V("_bl_uid"))||(Q=fe.uu(),V("_bl_uid",Q,15552e3))?Q:null}var de,Y,ie,_e,fe=o(),Se=(I||(I=1,ie=o(),_e=me().TIMING_KEYS,A=function(){var Q,ue,ge,Re=ie.win||{},je=Re.performance;return je&&typeof je=="object"&&typeof je.getEntriesByType=="function"?(Q={},ue=je.timing||{},ge=je.getEntriesByType("resource")||[],Q.begin=ue[_e[1]]||Date.now(),typeof Re.PerformanceNavigationTiming=="function"&&(Re=je.getEntriesByType("navigation")[0])&&(ue=Re),ie.each({dom:[10,8],load:[14,1]},function(he,Z){var ce=ue[_e[he[1]]],he=ue[_e[he[0]]];0<ce&&0<he&&0<=(he=Math.round(he-ce))&&he<6e5&&(Q[Z]=he)}),Q.res=JSON.stringify(ge),Q):null}),A),Le=(B||(B=1,de=o(),Y=me().TIMING_KEYS,D=function(){var Q,ue,ge,Re,je,Ze=de.win||{},Z=Ze.performance;return Z&&typeof Z=="object"?(Q={},ue=Z.timing||{},ge=Date.now(),Re=1,typeof Ze.PerformanceNavigationTiming=="function"&&(je=Z.getEntriesByType("navigation")[0])&&(ue=je,Re=2),de.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(et,he){var Fe=ue[Y[et[1]]],et=ue[Y[et[0]]];(Re===2||0<Fe&&0<et)&&0<=(et=Math.round(et-Fe))&&et<6e5&&(Q[he]=et)}),je=Ze.navigator.connection,Ze=Z.navigation||{},Q.ct=je?je.effectiveType||je.type:"",(Z=999<(Z=je&&(je.downlink||je.downlinkMax||je.bandwidth)||null)?999:Z)&&(Q.bandwidth=Z),Q.navtype=Ze.type===1?"Reload":"Other",Re===1&&0<ue[Y[16]]&&0<ue[Y[1]]&&0<=(je=ue[Y[16]]-ue[Y[1]])&&je<36e5&&(Q.fpt=je),Re===1&&0<ue[Y[1]]?Q.begin=ue[Y[1]]:Q.begin=Re===2&&0<Q.load?ge-Q.load:ge,Q):null}),D),Ue=null,Ae=De.documentElement,Ie=Ee.innerWidth||Ae.clientWidth||De.body.clientWidth,$e=Ee.innerHeight||Ae.clientHeight||De.body.clientHeight,Be=Ee.navigator.connection,He={sr:screen.width+"x"+screen.height,vp:Ie+"x"+$e,ct:Be?Be.effectiveType||Be.type:""},G={};return fe.ext(ve.prototype,{activeErrHandler:function(Q){return Ue&&!Q||(Ue=this),this},errorHandler:function(Q){if(Q){var ue,ge=Q.type;ge==="error"?!(ue=Q.target||Q.srcElement)||!ue.tagName||Q.message||Q.filename||Q.lineno||Q.colno?this.error(Q.error||{message:Q.message},Q):this.resourceErrorHandler(Q):ge==="unhandledrejection"&&fe.T(Q.reason,"Error")&&fe.checkAutoError(Q.reason)&&this.error(Q.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch{}}return this},resourceErrorHandler:function(Q){var ue=this,ge=Q.target||Q.srcElement;try{var Re=ue.getSrc(ge),je=typeof ge.tagName=="string"?ge.tagName.toLowerCase():"",Ze=ue.getXPath(ge,5),Z=fe.getURL(Re),ce={src:Re&&Re.substring(0,1e3),node_name:je,xpath:Ze,res_type:fe.getResType(je,Re),res_name:Z.path,domain:Z.domain};return ue._conf.enableResource&&ue.fixResourceStatus&&Q.timeStamp&&ue.fixResourceStatus({src:Re,node_name:je,res_type:fe.getResType(je,Re),timeStamp:Q.timeStamp,domain:Z.domain}),ue._lg("resourceError",ce),ue}catch(he){return fe.warn("[ARMS] resourceErrorHandler error :",he),ue}},getSrc:function(Q){var ue,ge,Re=Q.src||Q.href;try{Re||(ue=(typeof Q.tagName=="string"?Q.tagName.toLowerCase():"")==="object",ge=Q.getAttribute("classid")&&Q.getAttribute("classid").toLowerCase()==="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"||Q.getAttribute("type")==="application/x-shockwave-flash",Re=(Re=ue&&ge?Q.getAttribute("data")||Q.getAttribute("codebase"):Re)||Q.outerHTML||Q.innerHTML)}catch{Re=""}return Re},getXPath:function(Q,ue){var Re=Q.id?"#"+Q.id:"",ge=typeof Q.className=="string"?"."+Q.className.split(" ").join("."):"",Re=(typeof Q.tagName=="string"?Q.tagName.toLowerCase():"")+Re+ge;return Q.parentNode&&Q.parentNode.tagName&&ue-1!=0?this.getXPath(Q.parentNode,ue-1)+" > "+Re:Re},sendPerformance:function(Q){var ue=this;ue.onReady(function(){var ge=Le();ge&&ge.load&&0<ge.load&&(ge.page=ue.getPage(!0),(ge=Q?fe.ext(ge,Q):ge).autoSend=!0,ue.performance(ge))})},sendResources:function(Q){var ue=this;ue.onReady(function(){var ge=Se();ge&&ge.load&&0<ge.load&&(ge.load&&ge.load<=2e3||ge.load&&ge.load<=8e3&&.05<Math.random()||(ge.page=ue.getPage(!0),ge.dl=location.href,Q&&(ge=fe.ext(ge,Q)),ue._lg("res",ge,ue.getConfig("sample"))))})},sendPV:function(){var Q=this;Q.onReady(function(){ge=ae(Q),ue=Ee.devicePixelRatio||1;var ue,ge={uid:ge,dt:De.title,dl:location.href,dr:De.referrer,dpr:ue.toFixed(2),de:(De.characterSet||De.defaultCharset||"").toLowerCase(),ul:Ae.lang,begin:Date.now()};ge.uid&&Q._lg("pv",ge,Q.getConfig("pvSample"))})},commonInfo:function(){return He.uid=ae(this),He.sid=function(Q){if(Q.session)return Q.session;var ue;try{if(typeof window=="object"&&typeof sessionStorage=="object"&&typeof sessionStorage.getItem=="function")return typeof(ue=sessionStorage.getItem("_bl_sid"))=="string"?Q.session=ue:(ue=fe.uu(),Q.session=ue,typeof sessionStorage.setItem=="function"&&sessionStorage.setItem("_bl_sid",ue)),ue}catch(ge){fe.warn("[ARMS] getSid error :",ge)}return Q.session=ue=fe.uu(),ue}(this),He},handleUnload:function(Q){var ue=Date.now();if(ue-this._lastUnload<200)return this;this._lastUnload=ue,this.sendHealth(Q),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this._conf&&this._conf.enableResource&&this.resourceComboReport(),this.clear(!0)},bindHashChange:function(Q){var ue=this;if(!Q^ue.hashChangeHandler)return ue;Q?(ue.hackHistoryState(),ue.hashChangeHandler=function(ge){var Re=ue._conf.parseHash(location.hash);Re&&ue.setPage(Re,ge!==!1)},ue.stateChangeHandler=function(ge){ge=ue._conf.parseHash(ge.detail),ge&&ue.setPage(ge)},fe.on(Ee,"hashchange",ue.hashChangeHandler),fe.on(Ee,"historystatechange",ue.stateChangeHandler),ue.hashChangeHandler(!1)):(fe.off(Ee,"hashchange",ue.hashChangeHandler),fe.off(Ee,"historystatechange",ue.stateChangeHandler),ue.hashChangeHandler=null,ue.stateChangeHandler=null)},initHandler:function(){var Q,ue=this;return ue.hasInitHandler||(Q=ue._conf,fe.on(Ee,"beforeunload",function(){ue.handleUnload(0)}),ue.bindHashChange(Q.enableSPA),ue.activeErrHandler(!1),ue.hasInitHandler=!0),ue}}),fe.on(Ee,"error",function(Q){Ue&&Ue.errorHandler(Q)},!1,!0).on(Ee,"unhandledrejection",function(Q){Ue&&Ue.errorHandler(Q)}),ve}),N}function xe(){var ve,Ee;return q||(q=1,ve=o(),Ee=500,J=function(De,V,ae){var de=V.innerHeight||0,Y=[],ie=null,_e=0;ve.ext(De.prototype,{initFmpObserver:function(fe){var Se=this;if(!Se._conf||!Se._conf.useFmp)return null;if(!V.MutationObserver)return ve.warn("[retcode] first meaningful paint can not be retrieved"),Se.sendPerformance(),null;ve.on(V,"beforeunload",function(){Se.endObserving(0,!0)});var Le=V.MutationObserver;return(ie=new Le(function(){var Ue,Ae,Ie;Ue=Se._startTime,Ue=Date.now()-Ue,(Ie=ae.querySelector("body"))?(Ae=0,Ae+=function $e(Be,He,G){var Q=0,ue=Be.tagName;if(ue!=="SCRIPT"&&ue!=="STYLE"&&ue!=="META"&&ue!=="HEAD"){if(0<(ue=Be.children?Be.children.length:0))for(var ge=Be.children,Re=ue-1;0<=Re;Re--)Q+=$e(ge[Re],He+1,0<Q);if(Q<=0&&!G&&!(Be.getBoundingClientRect&&Be.getBoundingClientRect().top<de))return 0;Q+=1+.5*He}return Q}(Ie,1,!1),Y.push({score:Ae,t:Ue})):Y.push({score:0,t:Ue})})).observe(document,{childList:!0,subtree:!0}),_e=1,Se.onReady(function(){Se.endObserving(fe)}),ie},endObserving:function(fe,Se){var Le=this;if(ie&&_e)if(Le.fmpTimmer&&(clearTimeout(Le.fmpTimmer),Le.fmpTimmer=null),Se||!function($e,Be){return $e=Date.now()-$e,!(Be<$e||$e-(Y&&Y.length&&Y[Y.length-1].t||0)>2*Ee)}(Le._startTime,fe)){ie.disconnect(),_e=0,Y=function $e(Be){for(var He=1;He<Be.length;He++)if(Be[He].score<Be[He-1].score)return Be.splice(He,1),$e(Be);return Be}(Y);for(var Ue,Ae=null,Ie=1;Ie<Y.length;Ie++)Y[Ie].t>=Y[Ie-1].t&&(Ue=Y[Ie].score-Y[Ie-1].score,!Ae||Ae.rate<=Ue)&&(Ae={t:Y[Ie].t,rate:Ue});Ae&&0<Ae.t&&Ae.t<36e5?Le.sendPerformance({fmp:Ae.t}):Le.sendPerformance()}else Le.fmpTimmer=ve.delay(function(){Le.endObserving(fe)},Ee)}})}),J}function be(){return F||(F=1,j=function(ve,Ee){function De(Se,Le,Ue,Ae,Ie,$e,Be,He,G,Q,ue,ge,Re){Ie=V.J(Ie)||null,(Le=V.safetyCall(Le,[Ie,Ae],null))&&(Ie=Le.code||$e,Ae=!("success"in Le)||Le.success,Se.api(Ue,Ae,Be,Ie,Le.msg,He,G,Q,Ae?{}:ue,de,ge,Re))}var V=o(),ae=null,de=V.getCurDomain(),Y="fetch",ie="__oFetch_",_e="__oXMLHttpRequest_",fe="XMLHttpRequest";return V.ext(ve.prototype,{removeHook:function(Se,Le){return ae&&(Le||this===ae)&&(Ee[ie]&&(Ee[Y]=Ee[ie],delete Ee[ie]),Ee[_e]&&(Ee[fe]=Ee[_e],delete Ee[_e]),ae=null),this},addHook:function(Se){return!Se&&ae||(ae||(typeof Ee[Y]=="function"&&(Ie=Ee[Y],Ee[ie]=Ie,Ee[Y]=function($e,Be){var He=arguments.length===1?[$e]:Array.apply(null,arguments),G=ae;if(!G||!G.api||Be&&(Be.method==="HEAD"||Be.mode==="no-cors"))return Ie.apply(Ee,He);Be=Be||{};var Q=Date.now(),ue=G._conf,ge=V.duration(),Re=je=($e&&typeof $e!="string"?$e.url:$e)||"",je=V.cutUrlSearch(je),Z=(ue.ignore||{}).ignoreApis,Ze=ue.parseTraceId;if(!V.checkAPI(je,!0)||V.ignoreByRule(je,Z))return Ie.apply(Ee,He);je=V.filterByRule(je,Re,ue.ignoreApiPath||ue.apiHelper);var Z=ue.enableLinkTrace,ce="",he="",Fe=G.getConfig("pid"),et=null,nt=G.getConfig("sample"),Et=G.getConfig("linkType"),se=1;if(nt&&!G.sampling(nt)&&(se=0),Z){nt="";try{nt=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch{nt=""}var pe,Z=V.checkSameOrigin(Re,nt);if(G.getConfig("enableApiCors")||Z)if($e&&typeof $e!="string")try{if(He[0].headers&&typeof He[0].headers.get=="function"&&typeof He[0].headers.append=="function")switch(Et){case"arms":var Te=He[0].headers.get("EagleEye-TraceID"),Ve=He[0].headers.get("EagleEye-SessionID"),st=He[0].headers.get("EagleEye-pAppName");Te?ce=Te:(ce=G.getTraceId()["EagleEye-TraceID"],He[0].headers.append("EagleEye-TraceID",ce)),Ve?he=Ve:(he=G.getPageviewId()["EagleEye-SessionID"],He[0].headers.append("EagleEye-SessionID",he)),st||He[0].headers.append("EagleEye-pAppName",Fe);break;case"b3":var Xe,yt=He[0].headers.get("X-B3-TraceId"),ce=yt||(Xe=G.getB3TraceId(se),He[0].headers.append("X-B3-TraceId",Xe["X-B3-TraceId"]),He[0].headers.append("X-B3-ParentSpanId",Xe["X-B3-ParentSpanId"]),He[0].headers.append("X-B3-SpanId",Xe["X-B3-SpanId"]),He[0].headers.append("X-B3-Sampled",Xe["X-B3-Sampled"]),He[0].headers.append("X-Request-ID",V.guid()),Xe["X-B3-TraceId"]),he=G.pageview;break;default:var vt=He[0].headers.get("uber-trace-id");ce=vt?vt.split(":")[0]:(vt=G.getUberTraceId(se),He[0].headers.append("uber-trace-id",vt["uber-trace-id"]),vt.traceId),he=G.pageview}}catch(dt){V.warn(`[retcode] fetch failed to set header, exception is :
`+dt)}else switch(Be.headers=Be.headers||{},Et){case"arms":Be.headers["EagleEye-TraceID"]?ce=Be.headers["EagleEye-TraceID"]:(ce=G.getTraceId()["EagleEye-TraceID"],Be.headers["EagleEye-TraceID"]=ce),Be.headers["EagleEye-SessionID"]?he=Be.headers["EagleEye-SessionID"]:(he=G.getPageviewId()["EagleEye-SessionID"],Be.headers["EagleEye-SessionID"]=he),Be.headers["EagleEye-pAppName"]||(Be.headers["EagleEye-pAppName"]=Fe);break;case"b3":ce=Be.headers["X-B3-TraceId"]||(pe=G.getB3TraceId(se),Be.headers["X-B3-TraceId"]=pe["X-B3-TraceId"],Be.headers["X-B3-ParentSpanId"]=pe["X-B3-ParentSpanId"],Be.headers["X-B3-SpanId"]=pe["X-B3-SpanId"],Be.headers["X-B3-Sampled"]=pe["X-B3-Sampled"],Be.headers["X-Request-ID"]=V.guid(),pe["X-B3-TraceId"]),he=G.getPageviewId()["EagleEye-SessionID"];break;default:ce=Be.headers["uber-trace-id"]?Be.headers["uber-trace-id"].split(":")[0]:(pe=G.getUberTraceId(se),Be.headers["uber-trace-id"]=pe["uber-trace-id"],pe.traceId),he=G.getPageviewId()["EagleEye-SessionID"]}}return Ie.apply(Ee,He).then(function(bt){if(!G||!G.api)return bt;try{if(bt&&typeof bt.clone=="function"){var dt=bt.clone(),pt=dt.headers;if(pt&&typeof pt.get=="function"){var ye,Tt=pt.get("content-type");if(Tt&&!/(text)|(json)/.test(Tt))return bt;ce||typeof(ye=V.parseFetchHeaders(pt))=="object"&&ye["eagleeye-traceid"]&&(ce=ye["eagleeye-traceid"],et="response")}var ct=ge();dt.text().then(function(at){!ce&&V.isFunction(Ze)&&(St=Ze(dt,at))&&V.isString(St)&&(ce=St);var St=V.getFetchSnapshot(He,at,pt);dt.ok?De(G,ue.parseResponse,je,Re,at,dt.status||200,ct,Q,ce,he,St,et,se):(G.api(je,!1,ct,dt.status||404,dt.statusText,Q,ce,he,St,de,et,se),ue.enableResource&&ae.fixResourceStatus&&ae.fixResourceStatus({src:dt.url,res_type:"api"}))})}return bt}catch(at){return V.warn("[ARMS] fetch response error :",at),bt}}).catch(function(bt){var dt;throw G&&G.api&&(dt=ge(),G.api(je,!1,dt,bt.name||"Error",bt.message,Q,ce,he,{},de),ue.enableResource)&&ae.fixResourceStatus&&ae.fixResourceStatus({src:Re,res_type:"api"}),bt})},Ee[Y].toString=V.createFakeToString(Y)),typeof Ee[fe]=="function"&&(Ue=Ee[fe],Ee[_e]=Ue,(Ae=function($e){var Be,He,G,Q,ue,ge,Re,je,Ze,Z,ce,he,Fe,et,nt,Et,se,pe=new Ue($e),Te=ae;return Te&&Te.api&&pe.addEventListener&&(ue=pe.send,ge=pe.open,Re=pe.setRequestHeader,je=Te._conf,Ze=(je.ignore||{}).ignoreApis,Z=je.parseTraceId,ce=Te.getConfig("enableLinkTrace"),et=Fe=he="",nt=null,$e=Te.getConfig("sample"),Et=Te.getConfig("linkType"),se=1,$e&&!Te.sampling($e)&&(se=0),pe.open=function(Ve,st){if(Le=Ve,Ve=arguments.length===1?[Ve]:Array.apply(null,arguments),ge.apply(pe,Ve),Q=st||"",G=V.cutUrlSearch(Q),Ve=!V.checkAPI(G,!0)||V.ignoreByRule(G,Ze),G=G?V.filterByRule(G,Q,je.ignoreApiPath||je.apiHelper):"",!Ve&&ce){st="";try{st=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch{st=""}if(Ve=V.checkSameOrigin(Q,st),(Te.getConfig("enableApiCors")||Ve)&&Re&&typeof Re=="function")switch(Et){case"arms":he=Te.getTraceId()["EagleEye-TraceID"],Re.apply(pe,["EagleEye-TraceID",he]),Fe=Te.getPageviewId()["EagleEye-SessionID"],Re.apply(pe,["EagleEye-SessionID",Fe]),et=Te.getConfig("pid"),Re.apply(pe,["EagleEye-pAppName",et]);break;case"b3":var Xe=Te.getB3TraceId(se);Re.apply(pe,["X-B3-TraceId",Xe["X-B3-TraceId"]]),Re.apply(pe,["X-B3-ParentSpanId",Xe["X-B3-ParentSpanId"]]),Re.apply(pe,["X-B3-SpanId",Xe["X-B3-SpanId"]]),Re.apply(pe,["X-B3-Sampled",Xe["X-B3-Sampled"]]),Re.apply(pe,["X-Request-ID",V.guid()]),he=Xe["X-B3-TraceId"],Fe=Te.getPageviewId()["EagleEye-SessionID"];break;default:Xe=Te.getUberTraceId(se),Re.apply(pe,["uber-trace-id",Xe["uber-trace-id"]]),he=Xe.traceId,Fe=Te.getPageviewId()["EagleEye-SessionID"]}}},pe.send=function(){Be=Date.now(),He=V.duration();var Ve=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ue.apply(pe,Ve)},V.on(pe,"readystatechange",function(){if(G&&pe.readyState===4){var Ve=He(),st=V.getXhrSnapshot(Q,Le,pe);if(he||typeof(Xe=V.parseXhrHeaders(typeof pe.getAllResponseHeaders=="function"&&pe.getAllResponseHeaders()||""))=="object"&&Xe["eagleeye-traceid"]&&(he=Xe["eagleeye-traceid"],nt="response"),!he&&V.isFunction(Z)&&(Xe=Z(pe))&&V.isString(Xe)&&(he=Xe),200<=pe.status&&pe.status<=299){var Xe=pe.status||200;if(typeof pe.getResponseHeader=="function"){var yt=pe.getResponseHeader("Content-Type");if(yt&&!/(text)|(json)/.test(yt))return}pe.responseType&&pe.responseType!=="text"?Te.api(G,!0,Ve,Xe,"",Be,he,Fe,{},de,nt,se):De(Te,je.parseResponse,G,Q,pe.responseText,Xe,Ve,Be,he,Fe,st,nt,se)}else Te.api(G,!1,Ve,pe.status||"FAILED",pe.statusText,Be,he,Fe,st,de,nt,se),je.enableResource&&ae.fixResourceStatus&&ae.fixResourceStatus({src:pe.responseURL||Q,res_type:"api"})}})),pe}).prototype=Ue.prototype,V.each(Object.keys(Ue),function($e){Ae[$e]=Ue[$e]}),Ee[fe]=Ae,Ee[fe].toString=V.createFakeToString(fe))),ae=this),this;var Le,Ue,Ae,Ie},initHook:function(){return this.hasInitHook||(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0),this}}),ve}),j}function Oe(){return K||(K=1,z=function(ve,Ee){function De(ie,_e){var fe;Ee.CustomEvent?fe=new CustomEvent(ie,{detail:_e}):((fe=Y.createEvent("HTMLEvents")).initEvent(ie,!1,!0),fe.detail=_e),Ee.dispatchEvent(fe)}function V(ie){var _e=de[ie];typeof _e=="function"&&(de[ie]=function(Ae,Se,Le){var Ae=arguments.length===1?[Ae]:Array.apply(null,arguments),Ue=location.href,Ae=_e.apply(de,Ae);if(Le&&typeof Le=="string"&&Le!==Ue)try{var Ie=Ue.split("#"),$e=Le.split("#"),Be=ae.cutUrlSearch(Ie[0]),He=ae.cutUrlSearch($e[0]),G=Ie[1]&&Ie[1].replace(/^\/?(.*)/,"$1"),Q=$e[1]&&$e[1].replace(/^\/?(.*)/,"$1");G!==Q?De("historystatechange",Q):Be!==He&&De("historystatechange",He)}catch(ue){ae.warn("[retcode] error in "+ie+": "+ue)}return Ae},de[ie].toString=ae.createFakeToString(ie))}var ae=o(),de=Ee.history||{},Y=Ee.document;ae.ext(ve.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState||(V("pushState"),V("replaceState"),this.hasHackedHistoryState=!0),this}})}),z}function re(){var ve,Ee;return O||(O=1,ve=o(),Ee=me().TIMING_KEYS,L=function(De,V){var ae="_resource-"+Date.now(),de="_resource_error-"+Date.now();ve.ext(De.prototype,{initResource:function(){var Y,ie=this,_e=V.performance,fe=V.PerformanceObserver;return ie[de]||(ie[de]=new WeakMap),_e&&fe&&typeof _e=="object"&&typeof _e.getEntriesByType=="function"?(Y=_e.getEntriesByType("resource")||[],setTimeout(function(){ie.setResource(Y)},10),new fe(function(Se){setTimeout(function(){ie.setResource(Se.getEntries())},10)}).observe({entryTypes:["resource"]}),this.onReady(function(){setTimeout(ie.resourceComboReport.bind(ie),5e3)}),ie):null},setResource:function(Y){var ie=this._conf,_e=this[de];if(ve.isArray(Y)&&Y.length){this[ae]||(this[ae]={});for(var fe=this[ae],Se=0,Le=Y.length;Se<Le;Se+=1){var Ue,Ae=Y[Se];ve.checkAPI(Ae.name,!1)&&(Ae=function(Ie,$e,Be){if(Ie instanceof V.PerformanceResourceTiming&&Ie.initiatorType){var He,G,Q,ue,ge,Re,je,Ze,Z,ce=ve.getResType(Ie.initiatorType,Ie.name),he=$e.resourceTypes||[],Fe=($e.ignore||{}).ignoreResources;if(ce&&he.includes(ce)&&!ve.ignoreByRule(Ie.name,Fe)&&!ve.ignoreByRule(ve.decode(Ie.name),Fe))return he=Ie[Ee[0]],Fe=Ie[Ee[1]],He=Ie[Ee[2]],G=Ie[Ee[3]],Q=Ie[Ee[4]],ue=Ie[Ee[5]],ge=Ie[Ee[6]],Re=Ie[Ee[7]],je=Ie[Ee[8]],Ze=Ie[Ee[18]],Z=Ie[Ee[19]],(Be.has(Ie)||ve.areInOrder(he,Fe,He,G,Q,ue,ge,Re,je)&&!(Re<he))&&ve.areInOrder(he,Ze=Ze<he?he:Ze,Z=Z<he?Fe:Z,Fe)?{domain:ve.getURL(Ie.name).domain,res_type:ce,src_type:ve.getSrcType(Ie.name,$e.cdnHostList),success:1,size:Math.round(Ie.decodedBodySize),duration:Math.round(Ie.duration),timeStamp:Ie.responseEnd,timing:Ie}:void 0}}(Ae,ie,_e))&&((Ue=Ae.res_type+"-"+Ae.domain)in fe||(fe[Ue]=[]),fe[Ue].push(Ae))}return this}},fixResourceStatus:function(Y){var ie,_e,fe=V.performance;return fe&&typeof fe.getEntriesByName=="function"?(ie=this[de],Y.src&&ve.checkAPI(Y.src,!1)&&(_e=Y.timeStamp||fe.now(),fe=fe.getEntriesByName(Y.src,"resource"),ve.each(fe,function(Se){ie.has(Se)||_e-Se.responseEnd<100&&ie.set(Se,{success:0})})),this):null},resourceComboReport:function(){var Y,ie,_e=this[ae]||{},fe=this._conf.resourceSlow||2e3,Se=this[de],Le=(this[ae]={},Object.keys(_e));Le.length!==0&&(Y=[],ve.each(Le,function(Ae){var Ae=_e[Ae],Ie={domain:"",res_type:"",src_type:"",size:0,duration:0,count:0,err_count:0,err_duration:0,slow_count:0,slow_duration:0,timings:[]};ve.each(Ae,function($e){var Be=$e.timing||{},He=Se.get($e.timing),He=He?He.success:1,G=$e.duration>fe?1:0;Ie.domain=$e.domain,Ie.res_type=$e.res_type,Ie.src_type=$e.src_type,Ie.count+=1,Ie.duration+=$e.duration,Ie.size+=$e.size,He||(Ie.err_count+=1,Ie.err_duration+=$e.duration),G&&(Ie.slow_count+=1,Ie.slow_duration+=$e.duration);try{var Q=JSON.parse(JSON.stringify(Be));Q.success=He,Q.resourceSlow=fe,Q.isSlow=G,Ie.timings.push(Q)}catch{}}),Ie.count&&(Ie.size=Math.round(Ie.size/Ie.count),Ie.duration=Math.round(Ie.duration/Ie.count)),Ie.slow_count&&(Ie.slow_duration=Math.round(Ie.slow_duration/Ie.slow_count)),Ie.err_count&&(Ie.err_duration=Math.round(Ie.err_duration/Ie.err_count)),20<Ie.timings.length&&(Ie.timings.sort(function($e,Be){return Be.duration-$e.duration}),Ie.timings.length=20),Ie.timings=encodeURIComponent(JSON.stringify(Ie.timings)),Y.push(Ie)}),Le={_combo:1,resource:JSON.stringify(Y)},ie=V.navigator.connection,Le.ct=ie?ie.effectiveType||ie.type:"",(ie=999<(ie=ie&&(ie.downlink||ie.downlinkMax||ie.bandwidth)||null)?999:ie)&&(Le.bandwidth=ie),this._lg("resource",Le,this.getConfig("sample")))}})}),L}function ee(){var ve,Ee,De,V,ae,de,Y,ie,_e,fe,Se,Le,Ue,Ae,Ie,$e,Be,He;return H||(H=1,ve=o(),v||(v=1,Ae=o(),Ie=_(),$e=["api","success","time","code","msg","trace","traceId","begin","pv_id","sid","seq","domain","flag","apiSnapshot","tag","c1","c2","c3"],Be=function(G){var Q=(G.key||"default").split("::");return 1<Q.length?Ae.ext(G,{group:Q[0],key:Q[1]}):Ae.ext(G,{group:"default_group",key:Q[0]})},(He=function(G){var Q;Ie.call(this,G);try{Q=typeof performance=="object"?performance.timing.fetchStart:Date.now()}catch{Q=Date.now()}return this._startTime=Q,this}).prototype=Ae.createObject(Ie.prototype),Ae.ext(Ie.dftCon,{startTime:null}),Ae.ext(He.prototype,{constructor:He,_super:Ie,sum:function(G,Q,ue){try{var ge=Ae.dealParam(G,Q,1);return this._lg("sum",Be(ge),ue)}catch(Re){Ae.warn("[retcode] can not get parseStatData: "+Re)}},avg:function(G,Q,ue){try{var ge=Ae.dealParam(G,Q,0);return this._lg("avg",Be(ge),ue)}catch(Re){Ae.warn("[retcode] can not get parseStatData: "+Re)}},percent:function(G,Q,ue,ge){try{return this._lg("percent",Be({key:G,subkey:Q,val:ue||0,begin:Date.now()}),ge)}catch(Re){Ae.warn("[retcode] can not get parseStatData: "+Re)}},msg:function(G,Q){if(G&&!(180<G.length))return this.custom({msg:G},Q)},error:function(G,Q){if(!G)return Ae.warn("[retcode] invalid param e: "+G),this;arguments.length===1?(typeof G=="string"&&(G={message:G},Q={}),typeof G=="object"&&(Q=G=G.error||G)):(typeof G=="string"&&(G={message:G}),typeof Q!="object"&&(Q={}));var ue,ge=G.name||"CustomError",Re=G.message||"",je=G.stack||"",Ze=(Q=Q||{},typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"");if(Ae.checkSDKError(Re,Q.filename))return ue=G.msg||G.message,Ae.ignoreByRule(ue,et=/^Script error\.?$/)||Ae.ignoreByRule(Ae.decode(ue),et)?this:(ue={msg:Ae.selfErrKey,err:{msg_raw:Ae.encode(G.msg||G.message)}},this._self("error",ue,1));for(var Z={begin:Date.now(),cate:ge,msg:Re&&Re.substring(0,1e3),stack:je&&je.substring(0,1e3),file:Ae.removeUrlSearch(Q.filename||""),line:Q.lineno||"",col:Q.colno||"",err:{msg_raw:Ae.encode(Re),stack_raw:Ae.encode(je)},dl:Ze},ce=["tag","c1","c2","c3"],he=0;he<ce.length;he++){var Fe=ce[he];Q[Fe]&&(Z[Fe]=Q[Fe])}var et=(this.getConfig("ignore")||{}).ignoreErrors;return Ae.ignoreByRule(Z.msg,et)||Ae.ignoreByRule(Ae.decode(Z.msg),et)?this:(this.beforeSend&&this.beforeSend("error",Z),this._lg("error",Z,1))},behavior:function(G){if(G)return G=typeof G=="object"&&G.behavior?G:{behavior:G},this.beforeSend&&this.beforeSend("behavior",G),this._lg("behavior",G,1)},api:function(G,Q,ue,ge,Re,je,Ze,Z,ce,he,Fe,et,nt,Et,se,pe){return G?(G=typeof G=="string"?{api:G,success:Q,time:ue,code:ge,msg:Re,begin:je,traceId:Ze,pv_id:Z,apiSnapshot:ce,domain:he,flag:et,tag:nt,c1:Et,c2:se,c3:pe}:Ae.sub(G,$e),Ae.checkAPI(G.api,!0)?(G.code=G.code||"",Q=G.msg||"",Q=typeof Q=="string"?Q.substring(0,1e3):Q,G.msg=Q,G.success=G.success?1:0,G.time=+G.time,G.begin=G.begin,G.traceId=G.traceId||"",G.pv_id=G.pv_id||"",G.domain=G.domain||"",G.flag=G.flag,G.dl=typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"",G.apiSnapshot&&(typeof G.apiSnapshot=="object"&&(G.apiSnapshot=JSON.stringify(G.apiSnapshot)),typeof G.apiSnapshot!="string"&&delete G.apiSnapshot,2e3<G.apiSnapshot.length)&&(G.apiSnapshot=G.apiSnapshot.substring(0,2e3)),Fe&&(G.traceOrigin=Fe),!G.api||isNaN(G.time)?(Ae.warn("[retcode] invalid time or api"),this):(ue=(this.getConfig("ignore")||{}).ignoreApis,Ae.ignoreByRule(G.api,ue)||Ae.ignoreByRule(Ae.decode(G.api),ue)||G.time<0?this:(this.beforeSend&&this.beforeSend("api",G),this._lg("api",G,G.success&&this.getConfig("sample"),G.flag)))):this):(Ae.warn("[retcode] api is null"),this)},speed:function(G,Q,ue){var ge=this,Re=this.getConfig("startTime")||this._startTime;return/^s(\d|1[0])$/.test(G)?(Q=typeof Q!="number"?Date.now()-Re:Re<=Q?Q-Re:Q,ge.speedCache=ge.speedCache||{},ge.speedCache[G]=Q,ge.speedCache.begin=Re,clearTimeout(ge.speedTimmer),ge.speedTimmer=setTimeout(function(){ue||(ge.speedCache.page=ge.getPage(!0)),ge._lg("speed",ge.speedCache),ge.speedCache=null},5e3)):Ae.warn("[retcode] invalid point: "+G),ge},performance:function(G){if(G&&typeof G=="object"&&!this.hasSendPerf){var Q,ue={},ge={},Re=this.getConfig("autoSendPerf");if(G.autoSend&&Re)return ge=Ae.ext(this.perfData||{},G),this.hasSendPerf=!0,this._lg("perf",ge,this.getConfig("sample"));if(G.autoSend&&!Re)return delete G.autoSend,this.perfData?(ge=Ae.ext(this.perfData||{},G),this.hasSendPerf=!0,this._lg("perf",ge,this.getConfig("sample"))):void(this.perfData=G);for(Q in G)!/^t([1-9]|1[0])$/.test(Q)&&Q!=="ctti"&&Q!=="cfpt"||(ue[Q]=G[Q]);if(G.autoSend===!0||!Re&&this.perfData)return G.autoSend!==!0&&Re===!1&&this.perfData?(ue=Ae.ext(this.perfData||{},ue),this.hasSendPerf=!0,this._lg("perf",ue,this.getConfig("sample"))):void 0;this.perfData=Ae.ext(this.perfData||{},ue)}},resource:function(G,Q){if(!G||!Ae.isPlainObject(G))return Ae.warn("[arms] invalid param data: "+G),this;var ue,ge=Object.keys(G),Re=["begin","dom","load","res","dl"],je=!1;for(ue in Re)if(ge.indexOf(Re[ue])<0){je=!0;break}return je?(Ae.warn("[arms] lack param data: "+G),this):(G={begin:G.begin||Date.now(),dom:G.dom||"",load:G.load||"",res:Ae.isArray(G.res)?JSON.stringify(G.res):JSON.stringify([]),dl:G.dl||""},this._lg("res",G,Q))},event:function(G,Q){if(typeof G=="object"&&G&&G.key){var ue,ge={},Re=["key","success","time","c1","c2","c3"];for(ue in G)-1<Re.indexOf(ue)&&(ge[ue]=G[ue]);ge.success=G.success===!1?0:1,this._lg("event",ge,Q)}}}),He._super=Ie,(He._root=Ie).Reporter=He,h.exports=He),Ee=h.exports,m||(m=1,Se=o(),Le=typeof window=="object"?window:{},Ue=typeof(Ue=Le.__oFetch_||Le.fetch)=="function"?Ue:void 0,T.exports=function(G,Re){var ue,ge=-1,Re=(typeof G=="object"&&(ge=G.z,G=Se.serialize(G)),Re+G);if(Ue)return Ue(Re,{method:"HEAD",mode:"no-cors"}).catch(Se.noop);Le.document&&Le.document.createElement&&((G=Le[ue="__request_hold_"+ge]=new Image).onload=G.onerror=function(){Le[ue]=void 0},G.src=Re)}),De=T.exports,l||(l=1,_e=o(),He=typeof window=="object"?window:{},fe=typeof(fe=He.__oXMLHttpRequest_||He.XMLHttpRequest)=="function"?fe:void 0,P.exports=function(G,Q){try{var ue=new fe;ue.open("POST",Q,!0),ue.setRequestHeader("Content-Type","text/plain"),ue.send(JSON.stringify(G))}catch(ge){_e.warn(`[retcode] Failed to log, exception is :
`+ge)}}),V=P.exports,ae=ve.win,de=ae.document,Y=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,(ie=function(G){var Q=this;return Ee.call(Q,G),Q._initialPage=G.page&&ve.safetyCall(G.page,[],G.page+"")||null,Q._isRobot=ve.isRobot(),Q._health={errcount:0,apisucc:0,apifail:0},!(Q.beforeSend=function(ue,ge){ue==="error"?Q._health.errcount++:ue==="api"&&Q._health[ge.success?"apisucc":"apifail"]++})!==G.enableInstanceAutoSend&&(Q.initHandler(),Q.initHook(),Q.initFmpObserver(1e4),Q._conf&&Q._conf.behavior&&typeof Q.initBehavior=="function"&&Q.initBehavior(),Q._conf)&&Q._conf.enableResource&&typeof Q.initResource=="function"&&Q.initResource(),Object.defineProperty&&ae.addEventListener&&Object.defineProperty(Q,"pipe",{set:Q.sendPipe}),Q}).prototype=ve.createObject(Ee.prototype),ve.ext(Ee._root.dftCon,{uid:null,setUsername:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],resourceHelper:[],apiHelper:{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",cdnHostList:[],resourceTypes:["css","script","img","font"],resourceSlow:2e3,disableHook:!1,autoSendPv:!0,autoSendPerf:!0,enableSPA:!1,enableLinkTrace:!1,linkType:"arms",enableApiCors:!1,sendResource:!0,behavior:!0,enableConsole:!1,parseHash:function(G){return(G?ve.cutUrlSearch(G.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(G){var Q;return G&&typeof G=="object"?(Q=G.code,typeof(G=G.msg||G.message||G.subMsg||G.errorMsg||G.ret||G.errorResponse||"")=="object"&&(Q=Q||G.code,G=G.msg||G.message||G.info||G.ret||JSON.stringify(G)),{msg:G,code:Q,success:!0}):{}}}),ve.ext(ie.prototype,{constructor:ie,_super:Ee,onReady:function(G){var Q=this;if(Q.hasReady)return G();de.readyState==="complete"?(Q.hasReady=!0,G()):ve.on(ae,"load",function(){Q.hasReady=!0,G()},!0)},getPage:function(G){var Q=this._conf,ue=Q.page,ge=location,Re=ge.host+ge.pathname;return ue&&!G?ve.safetyCall(ue,[],ue+""):this._initialPage||ve.filterByRule(Q.ignoreUrlCase?Re.toLowerCase():Re,ge.href,Q.ignoreUrlPath||Q.urlHelper)},setPage:function(G,Q){var ue=this,ge=ue.prevPage;if(Q!==!1){if(!G||G===ge)return ue;ue.prevPage=G,clearTimeout(ue.sendPVTimmer),ue.handleUnload(1),ue.resetPageview(),ue.sendPVTimmer=setTimeout(function(){ue.sendPV()},10)}else ue.prevPage=G;return ue._conf.page=G,ue},setConfig:function(G,Q){var ue;G&&typeof G=="object"&&(ve.verifyConfig(G),G=this.setImgUrl(G),ue=this._conf,this._conf=ve.ext({},ue,G),Q||((Q="disableHook")in G&&ue[Q]!==G[Q]&&(G[Q]?this.removeHook():this.addHook()),(Q="enableSPA")in G&&ue[Q]!==G[Q]&&this.bindHashChange(G[Q])))},sendRequest:function(G){De(G,this.getConfig("imgUrl"))},postData:function(G,ge){var ue={},ge=(ue[ge]=G[ge],delete G[ge],"");typeof G=="object"&&(ge=ve.serialize(G)),V(ue,this.getConfig("imgUrl")+ge+"&post_res=")},sendPipe:function(G){var Q,ue=this;if(!G||!G.length)return ue;try{return ve.T(G[0])==="Array"?ve.each(G,function(ge){return ue.sendPipe(ge)}):ve.T(G)==="Array"&&(Q=G.shift(),Y.test(Q))?void ue[Q].apply(ue,G):ue}catch(ge){return ve.warn("[retcode] error in sendPipe",ge),ue}},sendHealth:function(){var G=ve.ext({},this._health),Q=(G.healthy=0<G.errcount?0:1,G.begin=Date.now(),G.begin-this.sBegin);G.stay=Q,this._lg("health",G,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(G){G=ve.ext({pid:this._conf.pid},G);var Q=this.__proto__.constructor(G);return G.page&&Q.sendPV(),Q}}),C()(ie,ae),Pe()(ie,ae,de),xe()(ie,ae,de),be()(ie,ae),Oe()(ie,ae),re()(ie,ae),ie._super=Ee,ie._root=Ee._root,Ee.Browser=ie,s.exports=ie),s.exports}var Me={getArmsLogger:function(){return te||(te=1,Ee=window,De=Ee.BrowserLogger=ee(),V=o().key,ae="__hasInitBlSdk",De.singleton=function(ie,_e){return Ee[ae]?Ee[V]:ve(ie,_e)},De.createExtraInstance=function(_e){_e&&typeof _e=="object"&&_e.enableInstanceAutoSend!==!0&&(_e.enableInstanceAutoSend=!1);var _e=new De(_e),fe=_e._conf;return fe.enableInstanceAutoSend&&(fe.autoSendPv!==!1&&_e.sendPV(),fe&&fe.useFmp||_e.sendPerformance(),fe)&&fe.sendResource&&_e.sendResources(),_e},typeof window=="object"&&window.navigator&&Ee[V]&&(De.bl=Ee[ae]?Ee[V]:(de={},Y=[],V in Ee&&(de=Ee[V].config||{},Y=Ee[V].pipe||[]),ve(de,Y))),f.exports=De),f.exports;function ve(ie,_e){return ie=Ee[V]=new De(ie),ie.sendPipe(_e),_e=ie._conf,_e.autoSendPv!==!1&&ie.sendPV(),_e&&_e.useFmp||ie.sendPerformance(),_e&&_e.sendResource&&ie.sendResources(),Ee[ae]=!0,ie}var Ee,De,V,ae,de,Y}};const qe="https://arms-retcode.aliyuncs.com/r.png?",rt="https://arms-retcode-sg.aliyuncs.com/r.png?",ot="https://retcode-us-west-1.arms.aliyuncs.com/r.png?",lt="e1iftji1w7@7ec1cef2cc88733",Lt="e1iftji1w7@10a06d1ec260adc",Pt="e1iftji1w7@10a06d1ec260adc",it={cn:{reportUrl:qe,pid:lt},"cn-hangzhou":{reportUrl:qe,pid:lt},sg:{reportUrl:rt,pid:Lt},"ap-southeast-1":{reportUrl:rt,pid:Lt},usw:{reportUrl:ot,pid:Pt},"us-west-1":{reportUrl:ot,pid:Pt}},Ht=ve=>ve!==null&&typeof ve=="object",Ut=ve=>Object.prototype.toString.call(ve).slice(8,-1),zt=ve=>!!Object.isExtensible(ve)&&Ut(ve)==="Object";function At(ve,Ee){if(typeof ve=="string"&&(Ee=ve.indexOf(Ee),!(Ee<0)))return(ve=ve.indexOf(`
`))<0||Ee<ve}function Ot(ve,Ee,De){{if(typeof ve=="function")return Y=Ee+1,ie=De,_e={MediaboxWrapperFunctionApply(fe,Se,Le){let Ue;try{Ue=Reflect.apply(fe,Se,Le),Ht(Ue)&&zt(Ue)&&(Ue.__v_skip=!0)}catch(Ae){throw ie(Ae),Ae}return Ot(Ue,Y,ie)},MediaboxWrapperFunctionGet(fe,Se){var Le=Object.getOwnPropertyDescriptor(fe,Se);return!Le||Le.writable||Le.configurable?Ot(fe[Se],Y,ie):fe[Se]},MediaboxWrapperClassConstructor(fe,Se){let Le;try{(Le=new fe(...Se)).__v_skip=!0}catch(Ue){throw ie(Ue),Ue}return Ot(Le,Y,ie)}},new Proxy(ve,{apply:_e.MediaboxWrapperFunctionApply,get:_e.MediaboxWrapperFunctionGet,construct:_e.MediaboxWrapperClassConstructor});if(ve instanceof Promise)return ve.then(fe=>Ot(fe,Ee+1,De)).catch(fe=>(De(fe),Promise.reject(fe)));if(Array.isArray(ve))return ve.map(fe=>Ot(fe,Ee+1,De));if(Ht(ve)&&zt(ve)){_e=ve;var V=Ee+1,ae=De;const fe=[],Se=typeof Object.getOwnPropertyDescriptors=="function"?Object.getOwnPropertyDescriptors(Object.getPrototypeOf(_e)??{}):{};for(const Le of Object.keys(Se))Se[Le].get&&fe.push(Le);var de={MediaboxWrapperObjectGetter(Le,Ue){if(typeof Ue=="string"&&-1<fe.indexOf(Ue)){let Ae;try{Ae=Le[Ue]}catch(Ie){throw ae(Ie),Ie}return Ot(Ae,V,ae)}return 10<V?Le[Ue]:Ot(Le[Ue],V,ae)},MediaboxWrapperObjectSetter(Le,Ue,Ae){return Le[Ue]=Ot(Ae,V,ae),!0}};return new Proxy(_e,{get:de.MediaboxWrapperObjectGetter,set:de.MediaboxWrapperObjectSetter})}return ve}var Y,ie,_e}function ar(ve){return typeof ve=="string"&&(-1<ve.indexOf("g.alicdn.com/apsara-media-")||-1<ve.indexOf("g.alicdn.com/thor-server")||-1<ve.indexOf("MediaboxWrapper"))}class sr extends Error{constructor(Ee){super(Ee),this.name="MQTError"}}let ir=1;class jt{constructor(Ee){d(this,"armsLogger"),d(this,"isReady",!1),d(this,"isDestroyed",!1),d(this,"options"),d(this,"queue",[]),d(this,"marker"),d(this,"helper",{MediaboxWrapperQueue(De){return new sr(De)},MediaboxWrapperInitiative(De){return new sr(De)}}),this.options={...Ee,region:Ee.deferRegionSet?void 0:Ee.region??"cn",env:Ee.env??"prod"},this.marker=`-${ir++}-`,this.initArmsLogger()}static get version(){return"0.20.0"}initArmsLogger(Ee){var{region:De,env:V,disabled:ae}=this.options;if(!ae&&!this.armsLogger){if(Ee&&!De)throw new Error("region is required");if(De){if(!it[De])throw new Error(`region ${De} is not supported`);ae=Me.getArmsLogger(),this.armsLogger=ae.createExtraInstance({enableInstanceAutoSend:!0,pid:it[De].pid,tag:this.options.businessName,release:this.options.businessName+"_"+this.options.version,imgUrl:it[De].reportUrl,behavior:!0,sample:1,disableHook:!0,environment:V,beforeReport:de=>{if(this.isDestroyed||At(de.stack,this.marker)||de.t!=="pv"&&de.t!=="error")return!1;if(de.c1=this.options.cid??window.location.host,de.c2=jt.version,this.options.customData&&(de.c3=new URLSearchParams(this.options.customData).toString()),de.t==="error"){if(typeof(Y=de.file)=="string"&&(-1<Y.indexOf("g.alicdn.com/apsara-media-")||-1<Y.indexOf("g.alicdn.com/thor-server"))||ar(de.stack)){let ie=de;return this.options.beforeSend&&(ie=this.options.beforeSend(de)),this.isReady?ie:(ie&&this.queue.push(ie),!1)}return!1}var Y;return de}})}}}wrap(Ee){return this.options.disabled||"u"<typeof Proxy?Ee:Ot(Ee,0,De=>{var V,ae;De instanceof Error&&typeof De.stack=="string"&&ar(De.stack)&&((V=this.armsLogger)!=null&&V.error(De),De.stack=(V=De.stack,De=this.marker,typeof V!="string"?De:At(V,De)?V:(ae=V.indexOf(`
`))<0?""+V+De:""+V.slice(0,ae)+De+V.slice(ae)))})}updateOptions(Ee){this.options={...this.options,...Ee}}setReady(){this.initArmsLogger(!0),this.isReady=!0,this.queue.length&&this.queue.forEach(Ee=>{var De;(De=this.armsLogger)!=null&&De.error(this.helper.MediaboxWrapperQueue(Ee.msg),{filename:Ee.file,lineno:Ee.line,colno:Ee.col})})}report(Ee,De){var V;(V=this.armsLogger)!=null&&V.error(this.helper.MediaboxWrapperInitiative(Ee),De)}destroy(){this.isDestroyed=!0}}ne.MediaboxQualityTracer=jt,ne.default=jt},{}],2:[function(k,E,ne){},{}],3:[function(k,E,ne){(function(x){(function(){var b,g;b=this,g=function(){var d,f=Math;if(typeof window<"u"&&window.crypto&&(d=window.crypto),typeof self<"u"&&self.crypto&&(d=self.crypto),!(d=!(d=!(d=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:d)&&typeof window<"u"&&window.msCrypto?window.msCrypto:d)&&x!==void 0&&x.crypto?x.crypto:d)&&typeof k=="function")try{d=k("crypto")}catch{}var s=Object.create||function(y){return o.prototype=y,y=new o,o.prototype=null,y};function o(){}var a={},n=a.lib={},u=n.Base={extend:function(y){var w=s(this);return y&&w.mixIn(y),w.hasOwnProperty("init")&&this.init!==w.init||(w.init=function(){w.$super.init.apply(this,arguments)}),(w.init.prototype=w).$super=this,w},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var w in y)y.hasOwnProperty(w)&&(this[w]=y[w]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}},v=n.WordArray=u.extend({init:function(y,w){y=this.words=y||[],this.sigBytes=w??4*y.length},toString:function(y){return(y||c).stringify(this)},concat:function(y){var w=this.words,P=y.words,C=this.sigBytes,R=y.sigBytes;if(this.clamp(),C%4)for(var A=0;A<R;A++){var I=P[A>>>2]>>>24-A%4*8&255;w[C+A>>>2]|=I<<24-(C+A)%4*8}else for(var D=0;D<R;D+=4)w[C+D>>>2]=P[D>>>2];return this.sigBytes+=R,this},clamp:function(){var y=this.words,w=this.sigBytes;y[w>>>2]&=4294967295<<32-w%4*8,y.length=f.ceil(w/4)},clone:function(){var y=u.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var w=[],P=0;P<y;P+=4)w.push(function(){if(d){if(typeof d.getRandomValues=="function")try{return d.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof d.randomBytes=="function")try{return d.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new v.init(w,y)}}),h=a.enc={},c=h.Hex={stringify:function(y){for(var w=y.words,P=y.sigBytes,C=[],R=0;R<P;R++){var A=w[R>>>2]>>>24-R%4*8&255;C.push((A>>>4).toString(16)),C.push((15&A).toString(16))}return C.join("")},parse:function(y){for(var w=y.length,P=[],C=0;C<w;C+=2)P[C>>>3]|=parseInt(y.substr(C,2),16)<<24-C%8*4;return new v.init(P,w/2)}},_=h.Latin1={stringify:function(y){for(var w=y.words,P=y.sigBytes,C=[],R=0;R<P;R++){var A=w[R>>>2]>>>24-R%4*8&255;C.push(String.fromCharCode(A))}return C.join("")},parse:function(y){for(var w=y.length,P=[],C=0;C<w;C++)P[C>>>2]|=(255&y.charCodeAt(C))<<24-C%4*8;return new v.init(P,w)}},m=h.Utf8={stringify:function(y){try{return decodeURIComponent(escape(_.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return _.parse(unescape(encodeURIComponent(y)))}},T=n.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=m.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(B){var w,P=this._data,C=P.words,R=P.sigBytes,A=this.blockSize,I=R/(4*A),D=(I=B?f.ceil(I):f.max((0|I)-this._minBufferSize,0))*A,B=f.min(4*D,R);if(D){for(var N=0;N<D;N+=A)this._doProcessBlock(C,N);w=C.splice(0,D),P.sigBytes-=B}return new v.init(w,B)},clone:function(){var y=u.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),l=(n.Hasher=T.extend({cfg:u.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){return y&&this._append(y),this._doFinalize()},blockSize:16,_createHelper:function(y){return function(w,P){return new y.init(P).finalize(w)}},_createHmacHelper:function(y){return function(w,P){return new l.HMAC.init(y,P).finalize(w)}}}),a.algo={});return a},typeof ne=="object"?E.exports=ne=g():b.CryptoJS=g()}).call(this)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{crypto:2}],4:[function(k,E,ne){var x,b;x=this,b=function(g){var d;return d=g.lib.WordArray,g.enc.Base64={stringify:function(f){for(var s=f.words,o=f.sigBytes,a=this._map,n=(f.clamp(),[]),u=0;u<o;u+=3)for(var v=(s[u>>>2]>>>24-u%4*8&255)<<16|(s[u+1>>>2]>>>24-(u+1)%4*8&255)<<8|s[u+2>>>2]>>>24-(u+2)%4*8&255,h=0;h<4&&u+.75*h<o;h++)n.push(a.charAt(v>>>6*(3-h)&63));var c=a.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(f){var s=f.length,o=this._map;if(!(a=this._reverseMap))for(var a=this._reverseMap=[],n=0;n<o.length;n++)a[o.charCodeAt(n)]=n;for(var u,v,h=o.charAt(64),c=(h&&(h=f.indexOf(h))!==-1&&(s=h),f),_=s,m=a,T=[],l=0,y=0;y<_;y++)y%4&&(u=m[c.charCodeAt(y-1)]<<y%4*2,v=m[c.charCodeAt(y)]>>>6-y%4*2,T[l>>>2]|=(u|v)<<24-l%4*8,l++);return d.create(T,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},g.enc.Base64},typeof ne=="object"?E.exports=ne=b(k("crypto-js/core")):b(x.CryptoJS)},{"crypto-js/core":3}],5:[function(k,E,ne){var x,b;x=this,b=function(g){return g.enc.Utf8},typeof ne=="object"?E.exports=ne=b(k("crypto-js/core")):b(x.CryptoJS)},{"crypto-js/core":3}],6:[function(k,E,ne){var x,b;x=this,b=function(g){return g.HmacSHA1},typeof ne=="object"?E.exports=ne=b(k("crypto-js/core"),k("crypto-js/sha1"),k("crypto-js/hmac")):b(x.CryptoJS)},{"crypto-js/core":3,"crypto-js/hmac":7,"crypto-js/sha1":8}],7:[function(k,E,ne){var x,b;x=this,b=function(g){var d,f;d=g.lib.Base,f=g.enc.Utf8,g.algo.HMAC=d.extend({init:function(s,o){s=this._hasher=new s.init,typeof o=="string"&&(o=f.parse(o));for(var a=s.blockSize,n=4*a,s=((o=o.sigBytes>n?s.finalize(o):o).clamp(),this._oKey=o.clone()),o=this._iKey=o.clone(),u=s.words,v=o.words,h=0;h<a;h++)u[h]^=1549556828,v[h]^=909522486;s.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var s=this._hasher;s.reset(),s.update(this._iKey)},update:function(s){return this._hasher.update(s),this},finalize:function(a){var o=this._hasher,a=o.finalize(a);return o.reset(),o.finalize(this._oKey.clone().concat(a))}})},typeof ne=="object"?E.exports=ne=b(k("crypto-js/core")):b(x.CryptoJS)},{"crypto-js/core":3}],8:[function(k,E,ne){var x,b;x=this,b=function(g){var d,f,s,o,a;return f=(d=g).lib,s=f.WordArray,o=f.Hasher,f=d.algo,a=[],f=f.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(n,u){for(var v=this._hash.words,h=v[0],c=v[1],_=v[2],m=v[3],T=v[4],l=0;l<80;l++){a[l]=l<16?0|n[u+l]:(y=a[l-3]^a[l-8]^a[l-14]^a[l-16])<<1|y>>>31;var y=(h<<5|h>>>27)+T+a[l];y+=l<20?1518500249+(c&_|~c&m):l<40?1859775393+(c^_^m):l<60?(c&_|c&m|_&m)-1894007588:(c^_^m)-899497514,T=m,m=_,_=c<<30|c>>>2,c=h,h=y}v[0]=v[0]+h|0,v[1]=v[1]+c|0,v[2]=v[2]+_|0,v[3]=v[3]+m|0,v[4]=v[4]+T|0},_doFinalize:function(){var n=this._data,u=n.words,v=8*this._nDataBytes,h=8*n.sigBytes;return u[h>>>5]|=128<<24-h%32,u[14+(64+h>>>9<<4)]=Math.floor(v/4294967296),u[15+(64+h>>>9<<4)]=v,n.sigBytes=4*u.length,this._process(),this._hash},clone:function(){var n=o.clone.call(this);return n._hash=this._hash.clone(),n}}),d.SHA1=o._createHelper(f),d.HmacSHA1=o._createHmacHelper(f),g.SHA1},typeof ne=="object"?E.exports=ne=b(k("crypto-js/core")):b(x.CryptoJS)},{"crypto-js/core":3}],9:[function(k,E,ne){(function(x,b){(function(){var g,d;g=this,d=function(){function f(re){return typeof re=="function"}var s=Array.isArray||function(re){return Object.prototype.toString.call(re)==="[object Array]"},o=0,a=void 0,n=void 0,u=function(re,ee){T[o]=re,T[o+1]=ee,(o+=2)===2&&(n?n(l):I())},v=typeof window<"u"?window:void 0,h=v||{},h=h.MutationObserver||h.WebKitMutationObserver,c=typeof self>"u"&&x!==void 0&&{}.toString.call(x)==="[object process]",_=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function m(){var re=setTimeout;return function(){return re(l,1)}}var T=new Array(1e3);function l(){for(var re=0;re<o;re+=2)(0,T[re])(T[re+1]),T[re]=void 0,T[re+1]=void 0;o=0}function y(){try{var re=Function("return this")().require("vertx");return(a=re.runOnLoop||re.runOnContext)!==void 0?function(){a(l)}:m()}catch{return m()}}var w,P,C,I=void 0;function R(re,ee){var Me,qe=this,rt=new this.constructor(B),ot=(rt[D]===void 0&&me(rt),qe._state);return ot?(Me=arguments[ot-1],u(function(){return te(ot,rt,Me,qe._result)})):O(qe,rt,re,ee),rt}function A(re){var ee;return re&&typeof re=="object"&&re.constructor===this?re:(F(ee=new this(B),re),ee)}var I=c?function(){return x.nextTick(l)}:h?(P=0,c=new h(l),C=document.createTextNode(""),c.observe(C,{characterData:!0}),function(){C.data=P=++P%2}):_?((w=new MessageChannel).port1.onmessage=l,function(){return w.port2.postMessage(0)}):(v===void 0&&typeof k=="function"?y:m)(),D=Math.random().toString(36).substring(2);function B(){}var N=void 0,U=1,J=2;function q(re,ee,Me){u(function(qe){var rt=!1,ot=function(lt,Lt,Pt,it){try{lt.call(Lt,Pt,it)}catch(Ht){return Ht}}(Me,ee,function(lt){rt||(rt=!0,(ee!==lt?F:K)(qe,lt))},function(lt){rt||(rt=!0,L(qe,lt))},qe._label);!rt&&ot&&(rt=!0,L(qe,ot))},re)}function j(re,ee,Me){var qe,rt;ee.constructor===re.constructor&&Me===R&&ee.constructor.resolve===A?(qe=re,(rt=ee)._state===U?K(qe,rt._result):rt._state===J?L(qe,rt._result):O(rt,void 0,function(ot){return F(qe,ot)},function(ot){return L(qe,ot)})):Me!==void 0&&f(Me)?q(re,ee,Me):K(re,ee)}function F(re,ee){if(re===ee)L(re,new TypeError("You cannot resolve a promise with itself"));else if(Me=typeof ee,ee===null||Me!="object"&&Me!="function")K(re,ee);else{Me=void 0;try{Me=ee.then}catch(qe){return void L(re,qe)}j(re,ee,Me)}var Me}function z(re){re._onerror&&re._onerror(re._result),H(re)}function K(re,ee){re._state===N&&(re._result=ee,re._state=U,re._subscribers.length!==0)&&u(H,re)}function L(re,ee){re._state===N&&(re._state=J,re._result=ee,u(z,re))}function O(re,ee,Me,qe){var rt=re._subscribers,ot=rt.length;re._onerror=null,rt[ot]=ee,rt[ot+U]=Me,rt[ot+J]=qe,ot===0&&re._state&&u(H,re)}function H(re){var ee=re._subscribers,Me=re._state;if(ee.length!==0){for(var qe,rt=void 0,ot=re._result,lt=0;lt<ee.length;lt+=3)qe=ee[lt],rt=ee[lt+Me],qe?te(Me,qe,rt,ot):rt(ot);re._subscribers.length=0}}function te(re,ee,Me,qe){var rt=f(Me),ot=void 0,lt=void 0,Lt=!0;if(rt){try{ot=Me(qe)}catch(Pt){Lt=!1,lt=Pt}if(ee===ot)return void L(ee,new TypeError("A promises callback cannot return that same promise."))}else ot=qe;ee._state===N&&(rt&&Lt?F(ee,ot):Lt===!1?L(ee,lt):re===U?K(ee,ot):re===J&&L(ee,ot))}var le=0;function me(re){re[D]=le++,re._state=void 0,re._result=void 0,re._subscribers=[]}xe.prototype._enumerate=function(re){for(var ee=0;this._state===N&&ee<re.length;ee++)this._eachEntry(re[ee],ee)},xe.prototype._eachEntry=function(re,ee){var Me=this._instanceConstructor,qe=Me.resolve;if(qe===A){var rt,ot=void 0,lt=void 0,Lt=!1;try{ot=re.then}catch(Pt){Lt=!0,lt=Pt}ot===R&&re._state!==N?this._settledAt(re._state,ee,re._result):typeof ot!="function"?(this._remaining--,this._result[ee]=re):Me===be?(rt=new Me(B),Lt?L(rt,lt):j(rt,re,ot),this._willSettleAt(rt,ee)):this._willSettleAt(new Me(function(Pt){return Pt(re)}),ee)}else this._willSettleAt(qe(re),ee)},xe.prototype._settledAt=function(re,ee,Me){var qe=this.promise;qe._state===N&&(this._remaining--,re===J?L(qe,Me):this._result[ee]=Me),this._remaining===0&&K(qe,this._result)},xe.prototype._willSettleAt=function(re,ee){var Me=this;O(re,void 0,function(qe){return Me._settledAt(U,ee,qe)},function(qe){return Me._settledAt(J,ee,qe)})};var Pe=xe;function xe(re,ee){this._instanceConstructor=re,this.promise=new re(B),this.promise[D]||me(this.promise),s(ee)?(this.length=ee.length,this._remaining=ee.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ee),this._remaining!==0)||K(this.promise,this._result)):L(this.promise,new Error("Array Methods must be provided an Array"))}Oe.prototype.catch=function(re){return this.then(null,re)},Oe.prototype.finally=function(re){var ee=this.constructor;return f(re)?this.then(function(Me){return ee.resolve(re()).then(function(){return Me})},function(Me){return ee.resolve(re()).then(function(){throw Me})}):this.then(re,re)};var be=Oe;function Oe(re){if(this[D]=le++,this._result=this._state=void 0,this._subscribers=[],B!==re){if(typeof re!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Oe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ee=this;try{re(function(Me){F(ee,Me)},function(Me){L(ee,Me)})}catch(Me){L(ee,Me)}}}return be.prototype.then=R,be.all=function(re){return new Pe(this,re).promise},be.race=function(re){var ee=this;return s(re)?new ee(function(Me,qe){for(var rt=re.length,ot=0;ot<rt;ot++)ee.resolve(re[ot]).then(Me,qe)}):new ee(function(Me,qe){return qe(new TypeError("You must pass an array to race."))})},be.resolve=A,be.reject=function(re){var ee=new this(B);return L(ee,re),ee},be._setScheduler=function(re){n=re},be._setAsap=function(re){u=re},be._asap=u,be.polyfill=function(){var re=void 0;if(b!==void 0)re=b;else if(typeof self<"u")re=self;else try{re=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ee=re.Promise;if(ee){var Me=null;try{Me=Object.prototype.toString.call(ee.resolve())}catch{}if(Me==="[object Promise]"&&!ee.cast)return}re.Promise=be},be.Promise=be},typeof ne=="object"&&E!==void 0?E.exports=d():g.ES6Promise=d()}).call(this)}).call(this,k("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:10}],10:[function(k,g,ne){var x,b,g=g.exports={};function d(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{x=typeof setTimeout=="function"?setTimeout:d}catch{x=d}try{b=typeof clearTimeout=="function"?clearTimeout:f}catch{b=f}function s(m){if(x===setTimeout)return setTimeout(m,0);if((x===d||!x)&&setTimeout)return(x=setTimeout)(m,0);try{return x(m,0)}catch{try{return x.call(null,m,0)}catch{return x.call(this,m,0)}}}var o,a=[],n=!1,u=-1;function v(){n&&o&&(n=!1,o.length?a=o.concat(a):u=-1,a.length)&&h()}function h(){if(!n){for(var m=s(v),T=(n=!0,a.length);T;){for(o=a,a=[];++u<T;)o&&o[u].run();u=-1,T=a.length}o=null,n=!1,function(l){if(b===clearTimeout)return clearTimeout(l);if((b===f||!b)&&clearTimeout)return(b=clearTimeout)(l);try{b(l)}catch{try{return b.call(null,l)}catch{return b.call(this,l)}}}(m)}}function c(m,T){this.fun=m,this.array=T}function _(){}g.nextTick=function(m){var T=new Array(arguments.length-1);if(1<arguments.length)for(var l=1;l<arguments.length;l++)T[l-1]=arguments[l];a.push(new c(m,T)),a.length!==1||n||s(h)},c.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=_,g.addListener=_,g.once=_,g.off=_,g.removeListener=_,g.removeAllListeners=_,g.emit=_,g.prependListener=_,g.prependOnceListener=_,g.listeners=function(m){return[]},g.binding=function(m){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(m){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},{}],11:[function(k,E,ne){E.exports={name:"aliyun-aliplayer",version:"2.28.5",description:" Web ",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live","start:hls":"npx grunt live --hls=true","start:flv":"npx grunt live --flv=true",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build"},devDependencies:{"@ali/mediabox-quality-tracer":"^0.20.0","@babel/core":"^7.15.0","@babel/preset-env":"^7.15.0","babel-plugin-es6-promise":"^1.1.1",babelify:"^10.0.0","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0","node-args":"^2.1.8"},dependencies:{"crypto-js":"^4.1.1"}}},{}],12:[function(s,E,ne){var x=s("../ui/component"),b=(s("../lib/util"),s("../lib/dom")),g=s("../lib/event"),d=(s("../lib/ua"),s("../lang/index")),f=s("../player/base/event/eventtype"),s=x.extend({init:function(o,a){x.call(this,o,a),this.className=a.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var o=x.prototype.createEl.call(this,"div");return o.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+d.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+d.get("Cancel_Text")+"</a></div>",o},bindEvent:function(){var o=this,a=(o._player.on(f.Private.AutoStreamShow,function(n){var u,v=document.querySelector("#"+o.getId()+" .tip-text");o._player._getLowerQualityLevel&&(u=o._player._getLowerQualityLevel())&&(o._switchUrl=u,v.innerText=d.get("Auto_Stream_Tip_Text").replace("$$",u.item.desc),b.css(o.el(),"display","block"))}),o._player.on(f.Private.AutoStreamHide,function(n){document.querySelector("#"+o.getId()+" .tip-text"),b.css(o.el(),"display","none")}),document.querySelector("#"+o.getId()+" .prism-button-ok")),a=(g.on(a,"click",function(){o._player._changeStream&&o._switchUrl&&(o._player._changeStream(o._switchUrl.index,d.get("Quality_Change_Text")),o._player.trigger(f.Private.SettingListHide)),b.css(o.el(),"display","none")}),document.querySelector("#"+o.getId()+" .prism-button-cancel"));g.on(a,"click",function(){b.css(o.el(),"display","none"),o._player.trigger(f.Private.SettingListHide)})}});E.exports=s},{"../lang/index":26,"../lib/dom":35,"../lib/event":36,"../lib/ua":51,"../lib/util":53,"../player/base/event/eventtype":71,"../ui/component":136}],13:[function(u,E,ne){var x=u("../ui/component"),b=u("../lib/dom"),g=u("../lib/event"),d=u("../lib/ua"),f=u("../lib/function"),s=(u("../lang/index"),u("../lib/util")),o=u("../config"),a=u("../lib/playerutil"),n=u("../player/base/event/eventtype"),u=x.extend({init:function(v,h){x.call(this,v,h),this.className=h.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=v._liveshiftService},createEl:function(){var v=x.prototype.createEl.call(this);return v.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',v},bindEvent:function(){function v(m){h._progressDown=m}var h=this,c=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),_="//"+o.domain+o.path+o.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?_=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":o.domain?-1<o.domain.indexOf("localhost")&&(_="//"+o.domain+"/build/skins/default/img/dragcursor.png"):_=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+o.path+o.h5Version+"/skins/default/img/dragcursor.png":(o.path||"").substring(1)+o.h5Version+"/skins/default/img/dragcursor.png",c.src=_,g.on(this.cursorNode,"mousedown",function(m){h._onMouseDown(m)}),g.on(this.cursorNode,"touchstart",function(m){h._onMouseDown(m)}),g.on(this.progressNode,"mousemove",function(m){h._progressMove(m)}),g.on(this.progressNode,"touchmove",function(m){h._progressMove(m)}),g.on(this.progressNode,"mousedown",function(m){v(!0)}),g.on(this.progressNode,"touchstart",function(m){v(!0)}),g.on(this.progressNode,"mouseup",function(m){v(!1)}),g.on(this.progressNode,"touchend",function(m){v(!1)}),g.on(this._el,"click",function(m){h._onMouseClick(m)}),this._player.on(n.Private.HideProgress,function(m){h._hideProgress(m)}),this._player.on(n.Private.CancelHideProgress,function(m){h._cancelHideProgress(m)}),this._player.on(n.Private.ShowBar,function(){h._updateLayout()}),g.on(this.progressNode,n.Private.MouseOver,function(m){h._onMouseOver(m)}),g.on(this.progressNode,n.Private.MouseOut,function(m){h._onMouseOut(m)}),this.bindTimeupdate=f.bind(this,this._onTimeupdate),this._player.on(n.Player.TimeUpdate,this.bindTimeupdate),a.isLiveShift(this._player._options)&&h._liveshiftService.start(6e4,function(m){m={mediaId:h._player._options.vid||"",error_code:m.Code,error_msg:m.Message},h._player.logError(m),h._player.trigger(n.Player.Error,m)}),this._player.on(n.Private.LiveShiftQueryCompleted,function(){h._updateSeperator(),h._updateLayout()}),this._player.on(n.Private.LiveShiftSwitchToLive,function(){h._updateCursorPosition()}),this._player.on(n.Player.Pause,function(){h._liveshiftService.stop()}),d.IS_IPAD?this.interval=setInterval(function(){h._onProgress()},500):this._player.on(n.Video.Progress,function(){h._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var v=this.seperatorNode.offsetWidth,h=this.el().offsetWidth,c=h-v;v!=0&&c!=0&&(b.css(this.progressNode,"width",100*(c-10)/h+"%"),b.css(this.seperatorNode,"right",-1*(v+10)+"px"))},_progressMove:function(v){var h=this._getSeconds(v),c=this._liveshiftService.availableLiveShiftTime,h=(this.timeNode.innerText="-"+s.formatTime(c-h),c?h/c:0),c=1-this.timeNode.clientWidth/this.el().clientWidth,_=(c<h&&(h=c),this.timeNode&&(b.css(this.timeNode,"display","block"),b.css(this.timeNode,"left",100*h+"%")),this);!d.IS_PC&&_._progressDown&&(_.progressSeekTimer&&clearTimeout(_.progressSeekTimer),_.progressSeekTimer=setTimeout(function(){_._progressDown||_._onMouseClick(v)},200))},_hideProgress:function(v){g.off(this.cursorNode,"mousedown"),g.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(v){var h=this;g.on(this.cursorNode,"mousedown",function(c){h._onMouseDown(c)}),g.on(this.cursorNode,"touchstart",function(c){h._onMouseDown(c)})},_canSeekable:function(v){var h=!0;return h=typeof this._player.canSeekable=="function"?this._player.canSeekable(v):h},_onMouseOver:function(v){this._updateCursorPosition(this._getCurrentTime()),b.css(this.timeNode,"display","block")},_onMouseOut:function(v){b.css(this.timeNode,"display","none")},_getSeconds:function(T){if(T.touches&&T.touches[0]){for(var h,c=this.el().offsetLeft,_=this.el();_.offsetParent;){var _=_.offsetParent,m=b.getTranslateX(_);c+=_.offsetLeft+m}_.tagName&&_.tagName.toLowerCase()==="body"&&(c+=document.getElementsByTagName("html")[0].offsetLeft),(h=(T.touches?T.touches[0]:T).pageX-c)<0&&(h=0)}else h=T.offsetX,T.target!==this.cursorNode&&T.target.offsetParent!==this.cursorNode||(h+=this.cursorNode.offsetLeft),T.target!==this._el&&(T.target.offsetParent,this._el);var T=this.progressNode.offsetWidth,l=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=l?h/T*l:0)<0?0:sec)>l?l:sec},_onMouseClick:function(c){var h=this,c=this._getSeconds(c),m=this._liveshiftService.availableLiveShiftTime,_=m-c,T=this._player._options,m=(_<=T.liveShiftMinOffset&&(c=m-(_=T.liveShiftMinOffset)),this._player.trigger(n.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(_)),T=a.isHls(h._player._options.source);h._player._loadByUrlInner(m,c,!0),h._player.trigger(n.Private.Play_Btn_Hide),h._liveshiftService.seekTime=c,h._player.trigger(n.Private.EndStart,{toTime:c}),h._updateProgressBar(this.playedNode,c),h._updateCursorPosition(c),setTimeout(function(){h._progressDown||h._onMouseOut()},500),T&&setTimeout(function(){h._player.play()})},_onMouseDown:function(v){var h=this;v.preventDefault(),this._player.trigger(n.Private.SeekStart,{fromTime:this._getCurrentTime()}),g.on(this.controlNode,"mousemove",function(c){h._onMouseMove(c)}),g.on(this.controlNode,"touchmove",function(c){h._onMouseMove(c)}),g.on(this.controlNode,"mouseup",function(c){h._onMouseUp(c)}),g.on(this.controlNode,"touchend",function(c){h._onMouseUp(c)})},_onMouseUp:function(v){v.preventDefault(),g.off(this.controlNode,"mousemove"),g.off(this.controlNode,"touchmove"),g.off(this._player.tag,"mouseup"),g.off(this._player.tag,"touchend"),g.off(this.controlNode,"mouseup"),g.off(this.controlNode,"touchend"),this._onMouseClick(v)},_onMouseMove:function(v){v.preventDefault()},_onTimeupdate:function(v){this._player._seeking||(d.IS_ANDROID&&d.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(n.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var v=this._liveshiftService.seekTime,v=(v==-1&&(v=0),this._player.getCurrentTime()+v);return d.IS_ANDROID&&d.IS_UC&&(v-=this._basePtsUC||0),v},_onProgress:function(v){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(v,h){var c,_;this._player._switchSourcing!=1&&(_=0,this._liveshiftService.seekTime==-1?_=1:1<(_=(c=this._liveshiftService.availableLiveShiftTime)?h/c:0)&&(this._liveshiftService.seekTime=-(_=1)),this.liveShiftStartDisplay,v)&&b.css(v,"width",100*_+"%")},_updateCursorPosition:function(v){var h,c,_,m;this._player.el()&&this._player._switchSourcing!=1&&(_=0,m=1,h=this._player.el().clientWidth,this._liveshiftService.seekTime==-1?_=1:1<(_=(c=this._liveshiftService.availableLiveShiftTime)?v/c:0)&&(this._liveshiftService.seekTime=-1),h!=0&&(m=1-(v=10/h),_-=v),_=_<0?0:_,this.cursorNode)&&(m<_?(b.css(this.cursorNode,"right","0px"),b.css(this.cursorNode,"left","auto")):(b.css(this.cursorNode,"right","auto"),b.css(this.cursorNode,"left",100*_+"%")))}});E.exports=u},{"../config":15,"../lang/index":26,"../lib/dom":35,"../lib/event":36,"../lib/function":38,"../lib/playerutil":48,"../lib/ua":51,"../lib/util":53,"../player/base/event/eventtype":71,"../ui/component":136}],14:[function(d,E,ne){var x=d("../ui/component"),b=d("../lib/util"),g=d("../player/base/event/eventtype"),d=x.extend({init:function(f,s){x.call(this,f,s),this.className=s.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=f._liveshiftService},createEl:function(){var f=x.prototype.createEl.call(this,"div");return f.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',f},bindEvent:function(){var f=this;this._player.on(g.Video.TimeUpdate,function(){var s,o=f._liveshiftService,a=document.querySelector("#"+f.id()+" .current-time");o.liveShiftStartDisplay&&o.availableLiveShiftTime>o.seekTime&&o.seekTime!=-1?(s=f._liveshiftService.getBaseTime(),s=b.formatTime(s+f._player.getCurrentTime()),a.innerText=s):o.currentTimeDisplay&&(a.innerText=o.currentTimeDisplay)}),this._player.on(g.Private.LiveShiftQueryCompleted,function(){f.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});E.exports=d},{"../lib/util":53,"../player/base/event/eventtype":71,"../ui/component":136}],15:[function(k,E,ne){k=k("../package.json"),E.exports={domain:"g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:k.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":11}],16:[function(k,E,ne){(function(x){(function(){var b,g,d,f,s,a=k("../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs").MediaboxQualityTracer,o=(k("./lib/patch-ssr").isSSR||(k("./lang/index").load(),g=k("./player/adaptiveplayer"),d=k("./lib/reloadInstanceUtil"),o=k("./lib/componentutil"),f=k("./config"),(s=function(n,u){b&&(b.updateOptions({cid:n.license&&n.license.key,region:n.env==="SEA"?"ap-southeast-1":"cn-hangzhou"}),b.setReady());var v=g.create(n,u);return b&&b.updateOptions({beforeSend:function(h){return h.c3="likely_ri="+(v._monitor&&v._monitor.sessionId),h}}),d.storeUserEvents(v),v}).getVersion=function(){return f.h5Version},o.register(s),s.players={},s.reloadInstance=d.reloadInstance,typeof Uint8Array>"u")||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),(b=new a({businessName:"imp-web-player",version:f.h5Version||"unknown",deferRegionSet:!0,env:x!=="dev"?"prod":"local",disabled:window.AliplayerDisableTracer===!0})).wrap(s)),a=window.Aliplayer=o;a.tracer=b,E.exports=a}).call(this)}).call(this,"prod")},{"../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs":1,"./config":15,"./lang/index":26,"./lib/componentutil":30,"./lib/patch-ssr":47,"./lib/reloadInstanceUtil":49,"./player/adaptiveplayer":68}],17:[function(k,E,ne){var x=k("../player/base/event/eventtype"),b=k("../lib/constants"),g=k("../lang/index");E.exports=function(){function d(s){var o=this;s===void 0&&(s={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=s.player,this.player.on(x.Player.Init,function(){o.playerInitDone=!0})}var f=d.prototype;return f.start=function(){var s=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){s.playerInitDone&&s.check()},this.interval))},f.stop=function(){this.clearTimer()},f.check=function(){var s=!1,o=this.detectPrototype()||this.detectNativeFn();return(o||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",o),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),s=!0),s},f.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},f.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},f.displayError=function(){var s=this.player,o={mediaId:s._options&&s._options.vid?s._options.vid:"",error_code:b.ErrorCode.RecordNotAllowed,error_msg:g.get("Record_Not_Allowed")};s.logError(o),s.trigger(x.Player.Error,o)},f.setupErrorStyle=function(){this.hideRetry();var s=document.querySelector(".prism-ErrorMessage");s&&(s.style.opacity="1",s.style.visibility="visible")},f.hideRetry=function(){var s=document.querySelector("#"+this.player.id()+" .prism-button-retry");s&&(s.style.display="none")},f.destroyVideo=function(){this.player._drm&&this.player.destroy();var s=this.player.tag;s&&s.parentNode&&s.parentNode.removeChild(s)},f.detectPrototype=function(){var s=window,o=s.MediaSource;return o&&s.EventTarget&&o.__proto__.__proto__===s.EventTarget},f.detectNativeFn=function(){var s=window.MediaSource;return s&&!this.isNativeFn(s.prototype.addSourceBuffer)},f.isNativeFn=function(s){var o=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),a=typeof s;return s!==null&&(a=="object"||a=="function")&&o.test(s)},f.detectDeperateVideo=function(){var s=this.player.tag;if(s)return(s.getAttribute("id")||"").indexOf("360")!==-1},d}()},{"../lang/index":26,"../lib/constants":31,"../player/base/event/eventtype":71}],18:[function(g,E,ne){var x=g("../lib/oo"),b=g("../lang/index"),g=x.extend({init:function(f,s){this._player=f,this._options=f.options()}}),d=(g.prototype.handle=function(f){var s,o;this._options.autoPlayDelay&&(s=(s=this._options.autoPlayDelayDisplayText)||b.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",s),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(o=this)._timeHandler=setTimeout(function(){o._player.trigger("info_hide"),o._options.autoPlayDelay=0,f&&f()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){d(o)}),this._player.on("pause",function(){d(o)}))},g.prototype.dispose=function(){d(this),this._player=null},function(f){f._timeHandler&&(clearTimeout(f._timeHandler),f._timeHandler=null)});E.exports=g},{"../lang/index":26,"../lib/oo":46}],19:[function(f,E,ne){var x=f("../lib/event"),b=f("../lib/data"),g=f("../player/base/event/eventtype"),d=b.guid(),f={};function s(n){var u,v,h=this._options.keyFastForwardStep,c=this._options.isLive;switch(n&&n.keyCode){case 39:c||(n.preventDefault(),u=this.getDuration(),v=this.getCurrentTime()+h,this.seek(v=u<v?u:v),o.call(this,v),a.call(this,v));break;case 37:c||(n.preventDefault(),v=this.getCurrentTime()-h,this.seek(v=v<0?0:v),o.call(this,v),a.call(this,v));break;case 38:n.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:n.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(c)return;n.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function o(n){this.trigger(g.Private.UpdateProgress,{targetTime:n})}function a(n){this.trigger(g.Private.UpdateCursorPosition,{targetTime:n})}f.init=function(){var n;this._options.keyShortCuts&&((n=s.bind(this)).guid=d,x.on(window.document,"keydown",n))},f.dispose=function(){var n;this._options.keyShortCuts&&((n=s.bind(this)).guid=d,x.off(window.document,"keydown",n))},E.exports=f},{"../lib/data":33,"../lib/event":36,"../player/base/event/eventtype":71}],20:[function(f,E,ne){var x=typeof Promise>"u"?f("es6-promise").Promise:Promise,b=f("../lib/constants").LicenseResultCode,g=f("../lib/io"),d=((f={})[b.ResourceIncorrect]="license resource init error",f[b.LicenseKeyInvalid]="invalid license key",f[b.DomainInvalid]="invalid domain",f[b.CertInvalid]="invalid cert content",f[b.NotFound]="license not found",f[b.Expired]="license expired",f),f=function(){function s(){}return s.getLicense=function(o,a,n){var u=this;return this.isWasmSupported()?a?o?this.instance?x.resolve(this.instance):new x(function(v,h){u.resolvers.push(v),u.rejecters.push(h),u.resolvers.length===1&&g.loadJS("https://g.alicdn.com/apsara-media-components/amcom-web-license/0.5.1/index.js",function(){window.loadLicenseSource().then(function(c){var _=new c({business_id:2,domain_identity:o,license_key:a,region:n});return _.update().then(function(){u.instance=_,u.resolvers.forEach(function(m){m(_)})}).catch(function(m){u.rejecters.forEach(function(T){T(b.CertInvalid+"#"+(m||"").trim().split(":")[0])})})}).catch(function(){u.rejecters.forEach(function(c){c(b.ResourceIncorrect)})}).finally(function(){u.resolvers=[],u.rejecters=[]})},function(){u.rejecters.forEach(function(c){c(b.ResourceIncorrect)})})}):x.reject(b.DomainInvalid):x.reject(b.LicenseKeyInvalid):x.reject(b.WasmNotSupported)},s.isWasmSupported=function(){return typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"},s.logError=function(o){d[o]&&console.error(d[o])},s}();f.instance=void 0,f.resolvers=[],f.rejecters=[],E.exports=f},{"../lib/constants":31,"../lib/io":43,"es6-promise":9}],21:[function(v,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(c){for(var _=1;_<arguments.length;_++){var m,T=arguments[_];for(m in T)Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}return c}).apply(this,arguments)}function b(c,_){for(var m=0;m<_.length;m++){var T=_[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,T.key,T)}}var g=v("../lib/event"),d="box",f="content",s="top-left",o="top-right",a="bottom-left",n="bottom-right",u="percentage",v=function(){function c(T){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new h,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(T.logo),this._setElements(T.container,T.video)}var _,m=c.prototype;return m.dispose=function(){this._observer.dispose(),this._observer=void 0,g.off(this._video,"resize",this._handleVideoResize),g.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(T){T.logo&&T.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},m._setElements=function(T,l){this._container=T,this._video=l,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):g.on(l,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),g.on(document,"fullscreenchange",this._handleWindowResize)},m._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(T){return T.logo})||this._logoList.forEach(this._setupLogo.bind(this))},m._handleWindowResize=function(){var T=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){T._resizeDone=!0,T._logoList.forEach(T._placeLogo.bind(T))}))},m._setLogo=function(T){this._logoList=T.map(this._defauleValue)},m._setupLogo=function(T){var l=this,y=this._createLogo(T);(T.logo=y).onload=function(){l._placeLogo(T)}},m._createLogo=function(T){var l=document.createElement("img");return l.setAttribute("class","prism-logo"),l.src=T.src,l},m._placeLogo=function(T){var l=T.logo,y=this._calcSize(T),w=(y.width&&l.setAttribute("width",y.width+"px"),y.height&&l.setAttribute("height",y.height+"px"),this._calcMatrix(T));l.style.position="absolute",Object.keys(w).forEach(function(P){l.style[P]=w[P]+"px"}),this._container.appendChild(T.logo)},m._calcSize=function(T){return this._getPixel(T)},m._calcMatrix=function(T){var l=this._getPosition(T),y=this._getPixel(T,{width:T.offsetX,height:T.offsetY});return Object.keys(l).forEach(function(w){switch(w){case"top":l[w]+=y.height;break;case"bottom":l[w]-=y.height;break;case"left":l[w]+=y.width;break;case"right":l[w]-=y.width}}),l},m._getPosition=function(y){var l=y.origin,y=y.position,w=0,P=0;switch(l===f&&(w=Math.abs(this.videoSize.height-this.contentSize.height)/2,P=Math.abs(this.videoSize.width-this.contentSize.width)/2),y){case s:return{top:0+w,left:0+P};case o:return{top:0+w,right:0+P};case a:return{bottom:0+w,left:0+P};case n:return{bottom:0+w,right:0+P};default:return{top:0,left:0}}},m._formalize=function(T,l){var y=1,y=T.width/T.height>l.width/l.height?l.width/T.width:l.height/T.height;return{width:T.width*y,height:T.height*y}},m._getPixel=function(T,w){var w=w===void 0?{}:w,y=w.width,w=w.height,P=T.unit,C=T.origin;return isNaN(y)&&(y=T.width),isNaN(w)&&(w=T.height),P===u?{width:(T=C===d?this.videoSize:this.contentSize).width*y/100,height:T.height*w/100}:{width:y,height:w}},m._defauleValue=function(T){return x({},T,{position:T.position||s,offsetX:T.offsetX||0,offsetY:T.offsetY||0,origin:T.origin||d,unit:T.unit||u})},m=c,(_=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var T;return this._video?(T={width:this._video.videoWidth,height:this._video.videoHeight},{width:(T=this._formalize(T,this.videoSize)).width,height:T.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&b(m.prototype,_),Object.defineProperty(m,"prototype",{writable:!1}),c}(),h=(E.exports=v,function(){function c(){this._frame=void 0}var _=c.prototype;return _.observe=function(m,T){var l=document.createElement("iframe");return l.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",l.onload=function(){l.contentWindow.onresize=function(){T(m)}},m.appendChild(l),this._frame=l},_.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},c}())},{"../lib/event":36}],22:[function(k,E,ne){var x=k("../lib/event"),b=k("../player/base/event/eventtype");E.exports=function(){function g(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var d=g.prototype;return d.autoResize=function(f,s,o){o===void 0&&(o="height"),typeof f!="number"?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=o,this.ratio=f,this.player=s,x.on(window,"resize",this.resize),this.resize())},d._resize=function(){var f,s,o;(f=this.player.fullscreenService)!=null&&f.isFullScreen||(f=(f=this.player)==null?void 0:f.el())&&(this.target==="height"?(o=(s=f.offsetWidth)/this.ratio,f.style.height=o+"px"):(s=(o=f.offsetHeight)*this.ratio,f.style.width=s+"px"),(f=this.player)!=null)&&f.trigger(b.Player.AutoResize,{width:s,height:o})},d.dispose=function(){x.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},g}()},{"../lib/event":36,"../player/base/event/eventtype":71}],23:[function(k,E,ne){E.exports=E.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod serviceplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occoredwhen them3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout,please close or refresh",Error_Invalidate_Source:"Video shoud be mp4mp3m3u8mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Region_Block_Text:"This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and m3u8 and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Tip_License_Required:"Starting 2024-12-01, the new version of the player must be configured with a license to use. The license for the basic functions of the player can be applied for free and is valid for 1 year. Please apply in advance to avoid any disruption in usage ",Tip_License_Params:"After completing the application, please refer to this document to pass the license information into the SDK ",Tip_License_Check:"Please ensure that the provided license key/domain parameters match exactly with what were obtained from the VOD console.",Tip_License_Domain:"The current website domain does not match with your licensed domain",Tip_License_Feature:"The feature is not authorized by your license:",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flvrmtp can't be supported on mobileplease use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_No_Authorization:"Aliplayer without Authorization",License_Click_To_Apply:"Click to apply",License_Empty:"License params are required",License_Not_Found:"Unregistered license",License_Expired:"Expired license",License_License_Key_Invalid:"Invalid license key",License_Domain_Invalid:"Unexpected domain",License_Feature_Unauthorized:"Unauthorized feature",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],24:[function(k,E,ne){E.exports=E.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"TitlesandCredits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error,please try to refresh",Decode_Error:"Data decodingerror",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading,please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted,please try to refresh",Corss_Domain_Error:`Please ensure your domain has obtained IPC license and combined CNAME, \r
 or to setcross-domain accessing available`,Url_Timeout_Error:"The video url is timeout,please try to refresh",Connetction_Error:"Sorrythe video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash playerplease use h5 player",Flash_Not_Ready:"Flash Player plugin hasn't been installed <a href='https://www.flash.cn/' target='_blank'>install plugin</a>, or check if disable Flash plugin"}},{}],25:[function(k,E,ne){E.exports=E.exports={OD:"",FD:"",LD:"",SD:"",HD:"","2K":"2K","4K":"4K",FHD:"",XLD:"",SQ:"",HQ:"",Forbidden_Text:"",Refresh:"",Diagnosis:"",Live_Finished:",",Play:"",Pause:"",Snapshot:"",Replay:"",Live:"",Encrypt:"",Sound:"",Fullscreen:"",Exist_Fullscreen:"",Resolution:"",Next:"",Brightness:"",Default:"",Contrast:"",Titles_Credits:"",Skip_Titles:"",Skip_Credits:"",Not_Support_Out_Site:"TV",Watch_Now:"",Network_Error:"",Video_Error:"",Decode_Error:"",Live_Not_Start:"",Live_Loading:"",Live_End:"",Live_Abrot:"",Corss_Domain_Error:`CNAME\r
`,Url_Timeout_Error:"",Connetction_Error:",,",Fetch_MTS_Error:"",Token_Expired_Error:"Token",Video_Lists_Empty_Error:"",Encrypted_Failed_Error:"",Fetch_Failed_Permission_Error:"",Invalidate_Param_Error:"",AutoPlayDelayDisplayText:"$$",Fetch_MTS_NOT_NotStream_Error:"vid",Cancel_Text:"",OK_Text:"",Auto_Stream_Tip_Text:"$$",Fetch_Playauth_Error:"",Open_Html_By_File:"html",Cant_Use_Flash_On_Mobile:"Flashh5",Flash_Not_Ready:"Flash Player<a href='https://www.flash.cn/' target='_blank'></a>"}},{}],26:[function(k,E,ne){function x(){var u;return window[s]!==void 0&&window[s]||(u=(u=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<u.indexOf("zh")?"zh-cn":"en-us",window[s]=u),window[s]}function b(u,v,h){var c=n(u),m="",_=a(),m=u=="flash"?_=="en-us"?k("./flash/en-us"):_=="zh-cn"?k("./flash/zh-cn"):v[_]:_=="en-us"?k("./en-us"):_=="zh-cn"?k("./zh-cn"):v[_];h&&(m=Object.assign({},m,h[_])),d.set(c,JSON.stringify(m)),o(u,m),h&&k("../lib/constants").updateByLanguage()}var g=k("../config"),d=k("../lib/storage"),f=(k("../lib/io"),"aliplayer_lang_data"),s="aliplayer_lang",o=function(u,v){u=n(u),window[u]=v},a=function(){return x()},n=function(u){var v=a();return f+"_"+(u=u||"h5")+"_"+g.h5Version.replace(/\./g,"_")+"_"+v};E.exports.setCurrentLanguage=function(u,v,h,c){var _=window[s];if(!((u=u!==void 0&&u?u:x())=="en-us"||u=="zh-cn"||h&&h[u]))throw new Error("There is not language resource for "+u+", please specify the language resource by languageTexts property");window[s]=u,b(v,h,c),u!=_&&k("../lib/constants").updateByLanguage()},E.exports.getCurrentLanguage=x,E.exports.getLanguageData=function(u,v){return u=n(u),window[u]},E.exports.load=b,E.exports.get=function(u,v,h){if(v=n(v=v||"h5"),v=window[v],v){var c=v[u];if(h)for(var _ in h)c=c.replace(new RegExp("@"+_+"@","g"),h[_]);return c}}},{"../config":15,"../lib/constants":31,"../lib/io":43,"../lib/storage":50,"./en-us":23,"./flash/en-us":24,"./flash/zh-cn":25,"./zh-cn":27}],27:[function(k,E,ne){E.exports=E.exports={OD:"",FD:"",LD:"",SD:"",HD:"","2K":"2K","4K":"4K",FHD:"",XLD:"",SQ:"",HQ:"",Speed:"",Speed_05X_Text:"0.5X",Speed_1X_Text:"",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"",Quality_Change_Text:" ",Quality_The_Url:"",Refresh_Text:"",Detection_Text:"",Cancel:"",Mute:"",Click_To_Unmute:"",Snapshot:"",Play_DateTime:"",AutoPlayDelayDisplayText:"$$",Error_Load_Abort_Text:"",Error_Network_Text:"",Error_Decode_Text:"",Error_No_Decoder_Text:"",Error_Server_Network_NotSupport_Text:"",Error_Offline_Text:"",Error_Play_Text:"",Error_Retry_Text:"",Error_AuthKey_Text:"",Error_H5_Not_Support_Text:"",Error_Not_Support_M3U8_Text:"m3u8",Error_Not_Support_MP4_Text:"mp4",Error_Not_Support_encrypt_Text:"encryptType1",Error_Encrypt_Fetch_Failed_Text:"",Error_Vod_URL_Is_Empty_Text:"",Error_Vod_Fetch_Urls_Text:"",Fetch_Playauth_Error:"",Error_Playauth_Decode_Text:"playauth",Error_Vid_Not_Same_Text:"vid",Error_Playauth_Expired_Text:"",Error_MTS_Fetch_Urls_Text:"MTS",Error_Load_M3U8_Failed_Text:"m3u8,httpsDNS",Error_Load_M3U8_Timeout_Text:"m3u8",Error_Liveshift_M3U8_Not_Found_Text:"",Error_M3U8_Decode_Text:"m3u8",Error_TX_Decode_Text:"",Error_Manifest_Decode_Text:"Manifest",Error_Waiting_Timeout_Text:"",Error_Invalidate_Source:"mp4mp3m3u8mpdflv",Error_Empty_Source:"",Error_Vid_Empty_Source:"vid",Error_Mediaauth_Empty_Source:"mediaAuth",Error_Fetch_NotStream:"vid",Error_Fetch_Media_Not_Found:"",Error_Not_Found:"",Error_Drm_License_Request_Failed:"DRM License ",Error_Drm_Not_Supported:" DRM ",Error_Drm_Load:"DRM ",Error_Drm_No_Sts:"DRM STS(accessKeyId/accessKeySecret/securityToken)",Error_Region_Block_Text:"",Error_SW_Conflict:"ServiceWorker",Error_SW_Register_Failed:"Service Worker",Error_SW_ScriptURL_Empty:" swScriptURL ",Error_SW_ScriptURL_Https:"swScriptURL https:// ",Error_SW_ScriptURL_Scope:"swScriptURL(:@scope1@)(:@scope2@)",Error_SW_Version_Not_Match:"swScriptURL(@swVersion@)(@playerVersion@)",Error_SW_ScriptURL_ILlegal:"swScriptURL(@detail@)",Error_SW_Https_required:" https ",Tip_Err_Common:":<br />",Tip_Err_Common_Short:":<br />",Tip_Drm_Request_Err:"https<br />",Tip_Drm_Secure_Context:"DRMhttpslocalhost127.0.0.1m3u8https",Tip_Drm_Key_System_Unavailable:"1.WidevineWidevine<br />2.<br />3.",Tip_Drm_File_Not_Allowed:"file://https://",Tip_Drm_Playlist_Hierarchy:"HLS master playlist",Tip_Drm_Unsupported:" Widevine Chrome chrome://components/ Widevine Content Decryption Module DRM ",Tip_Err_Decode:"/<br />1.chrome/edge chrome://flags Hardware-accelerated video decode disabled<br />2.<br />3.firefoxabout:supportAAC",Tip_Err_Rts_Http_Failed:"RTShttphttpsDNSJS<br>1.2.3.<br>SSLhttps<br>NOT RESOLVEDDNS<br><a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'></a>",Tip_Err_Not_found:"//",Tip_Err_Blocked:"",Tip_Err_Splayer:" H.265/H.266 ",Tip_Err_Splayer_Doc:"",Tip_SW_Register:"1.https<br>2.swScriptURLhttps://",Tip_License_Required:"2024121LicenseLicense 1 ",Tip_License_Params:"LicenseSDK",Tip_License_Check:" license key/domain ",Tip_License_Domain:" license ",Tip_License_Feature:"license",Live_End:"",Play_Before_Fullscreen:"",Can_Not_Seekable:"seek",Cancel_Text:"",OK_Text:"",Auto_Stream_Tip_Text:"$$",Request_Block_Text:"httphttps",Open_Html_By_File:"html",Maybe_Cors_Error:"httpsDNS",Speed_Switch_To:" ",Curent_Volume:"",Volume_Mute:"",Volume_UnMute:"",ShiftLiveTime_Error:"",Error_Not_Support_Format_On_Mobile:"flvrmtpm3u8",Error_Not_Support_Mse_Flv:" flv ",Error_Not_Support_Mse_Dash:" dash ",Error_Not_Support_RTMP:" rtmp ",SessionId_Ticket_Invalid:"DRMsessionIdticket",Http_Error:"Http",Http_Timeout:"http",DRM_License_Expired:"DRM license",Not_Support_DRM:"DRM",CC_Switch_To:" ",AudioTrack_Switch_To:" ",Subtitle:"",AudioTrack:"",Quality:"",Auto:"",Quality_Switch_To:" ",Fullscreen:"",Setting:"",Volume:"",Play:"",Pause:"",CloseSubtitle:"",OpenSubtitle:"",ExistFullScreen:"",Muted:"",Retry:"",SwitchToLive:"",iOSNotSupportVodEncription:"iOS17.1",iOSVodEncriptionBlacklist:"Safari/Chrome",UseChromeForVodEncription:"Chrome/Edge",Record_Not_Allowed:"",License_No_Authorization:"SDK",License_Click_To_Apply:"License",License_Empty:"License",License_Not_Found:"License",License_Expired:"License",License_License_Key_Invalid:"LicenseKey",License_Domain_Invalid:"",License_Feature_Unauthorized:"",Rts_Err_Http_Signal_Error:"(RTS)",Rts_Err_Play_Failed:"(RTS)",Rts_Err_No_Data_For:"",Rts_Err_Browser_Not_Support:"(RTS)",Rts_Err_Not_Support_Webrtc:"(RTS)webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)",Rts_Err_Not_Support_H264:"(RTS)H264",Rts_Err_Create_Offer_Error:"(RTS)create offer",Rts_Err_Play_Url_Error:"(RTS)url",Rts_Err_Subscribe_Nonthing:"(RTS)",Rts_Err_Http_Request_Failed:"(RTS)HTTP",Rts_Err_Http_Answer_Failed:"(RTS)answer",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection",Splayer_Err_Env_Check:"(SP)",Splayer_Err_Coroutine:"(SP)Coroutine ",Splayer_Err_Decode:"(SP)",Splayer_Err_Buffering:"(SP)",Splayer_Err_Parser_Not_Found:"(SP)"}},{}],28:[function(k,E,ne){var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var b=new Uint8Array(256),g=0;g<x.length;g++)b[x.charCodeAt(g)]=g;var d=function(f){for(var s="",o=0;o<f.length;o+=16e3){var a=f.subarray(o,o+16e3);s+=String.fromCharCode.apply(null,a)}return s};E.exports={decode:function(f){for(var s,o,a,n,h=.75*f.length,u=f.length,v=0,h=(f[f.length-1]==="="&&(h--,f[f.length-2]==="=")&&h--,new ArrayBuffer(h)),c=new Uint8Array(h),_=0;_<u;_+=4)s=b[f.charCodeAt(_)],o=b[f.charCodeAt(_+1)],a=b[f.charCodeAt(_+2)],n=b[f.charCodeAt(_+3)],c[v++]=s<<2|o>>4,c[v++]=(15&o)<<4|a>>2,c[v++]=(3&a)<<6|63&n;return h},encode:function(f){for(var s=new Uint8Array(f),o=s.length,a="",n=0;n<o;n+=3)a=(a=(a=(a+=x[s[n]>>2])+x[(3&s[n])<<4|s[n+1]>>4])+x[(15&s[n+1])<<2|s[n+2]>>6])+x[63&s[n+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},unpackPlayReady:function(f){if(f=function(v,h,c){if(!v)return"";c||v.byteLength%2==0||console.log("Data has an incorrect length, must be even."),c=v instanceof ArrayBuffer?v:((c=new Uint8Array(v.byteLength)).set(new Uint8Array(v)),c.buffer);for(var _=Math.floor(v.byteLength/2),m=new Uint16Array(_),T=new DataView(c),l=0;l<_;l++)m[l]=T.getUint16(2*l,h);return d(m)}(f,!0,!0),f.indexOf("PlayReadyKeyMessage")!=-1){for(var f=new DOMParser().parseFromString(f,"application/xml"),s=f.getElementsByTagName("HttpHeader"),o={},a=0;a<s.length;++a){var n=s[a].querySelector("name"),u=s[a].querySelector("value");o[n.textContent]=u.textContent}return{header:o,changange:f.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],29:[function(k,E,ne){var x=k("./videox-muxer.min");function b(){}E.exports=function(g,d,f){d===void 0&&(d=b),f===void 0&&(f=b);var s=new x.Demuxer({progressive:!0});s.on("loadedmetadata",function(o){o===void 0&&(o={}),s.suspend(),s.destroy(),s=null,d(o)}),s.on("error",function(o){f(o),s.suspend(),s.destroy(),s=null}),s.load(g)}},{"./videox-muxer.min":54}],30:[function(k,E,ne){var x=k("./oo"),b=k("../player/base/event/eventtype");E.exports.stopPropagation=function(g){window.event?window.event.cancelBubble=!0:g.stopPropagation()},E.exports.register=function(g){g.util={stopPropagation:E.exports.stopPropagation},g.Component=x.extend,g.EventType=b.Player}},{"../player/base/event/eventtype":71,"./oo":46}],31:[function(k,E,ne){function x(){E.exports.VideoErrorCodeText={1:b.get("Error_Load_Abort_Text"),2:b.get("Error_Network_Text"),3:b.get("Error_Decode_Text"),4:b.get("Error_Server_Network_NotSupport_Text")},E.exports.VideoLevels={0:b.get("OD"),640:b.get("FD"),960:b.get("LD"),1280:b.get("SD"),1920:b.get("HD"),2580:b.get("2K"),3840:b.get("4K")},E.exports.QualityLevels={OD:b.get("OD"),LD:b.get("LD"),FD:b.get("FD"),SD:b.get("SD"),HD:b.get("HD"),"2K":b.get("2K"),"4K":b.get("4K"),XLD:b.get("XLD"),FHD:b.get("FHD"),SQ:b.get("SQ"),HQ:b.get("HQ")},E.exports.SpeedLevels=[{key:.5,text:b.get("Speed_05X_Text")},{key:1,text:b.get("Speed_1X_Text")},{key:1.25,text:b.get("Speed_125X_Text")},{key:1.5,text:b.get("Speed_15X_Text")},{key:2,text:b.get("Speed_2X_Text")}]}var b=k("../lang/index");E.exports.LOAD_START="loadstart",E.exports.LOADED_METADATA="loadedmetadata",E.exports.LOADED_DATA="loadeddata",E.exports.PROGRESS="progress",E.exports.CAN_PLAY="canplay",E.exports.CAN_PLYA_THROUGH="canplaythrough",E.exports.PLAY="play",E.exports.PAUSE="pause",E.exports.ENDED="ended",E.exports.PLAYING="playing",E.exports.WAITING="waiting",E.exports.ERROR="error",E.exports.SUSPEND="suspend",E.exports.STALLED="stalled",E.exports.DASH_QUALITY_PROTOCOL="quality_index://",E.exports.AuthKeyExpiredEvent="authkeyexpired",E.exports.USER_EVENT_NAME="__user_events__",E.exports.PLAYER_SCOPE="__aliplayerMessage__",E.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},E.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},E.exports.PLAYER_SDK_CODE=9201,E.exports.FEATURE_ID_H265=30001,E.exports.FEATURE_ID_H266=30002,E.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},E.exports.LicenseErrorKey={Empty:"License_Empty",NotFound:"License_Not_Found",Expired:"License_Expired",CertInvalid:"License_Cert_Invalid",LicenseKeyInvalid:"License_License_Key_Invalid",DomainInvalid:"License_Domain_Invalid",Unauthorized:"License_Feature_Unauthorized"},E.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},E.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},E.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},E.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},E.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,ModuleLoadError:4034,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},E.exports.AuthKeyExpired=7200,E.exports.AuthKeyRefreshExpired=7e3,E.exports.AuthInfoExpired=100,E.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},E.exports.RegionBlockMessages=["black location","denied by region block"],E.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},E.exports.SelectedStreamLevel="selectedStreamLevel",E.exports.SelectedCC="selectedCC",E.exports.HWDetectHvc1="HWDetectHvc1",E.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",E.exports.HWDetectHev1="HWDetectHev1",E.exports.HWDetectHev1Hls="HWDetectHev1Hls",E.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},x(),E.exports.updateByLanguage=x},{"../lang/index":26}],32:[function(k,E,ne){E.exports.get=function(x){for(var b=x+"",g=document.cookie.split(";"),d=0;d<g.length;d++){var f=g[d].trim();if(f.indexOf(b)==0)return unescape(f.substring(b.length+1,f.length))}return""},E.exports.set=function(x,b,f){var d=new Date,f=(d.setTime(d.getTime()+24*f*60*60*1e3),"expires="+d.toGMTString());document.cookie=x+"="+escape(b)+"; "+f}},{}],33:[function(k,E,ne){var x=k("./object");E.exports.cache={},E.exports.guid=function(b,g){var d,f,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(g=g||s.length,b)for(d=0;d<b;d++)o[d]=s[0|Math.random()*g];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",d=0;d<36;d++)o[d]||(f=0|16*Math.random(),o[d]=s[d==19?3&f|8:f]);return o.join("")},E.exports.expando="vdata"+new Date().getTime(),E.exports.getData=function(b){var g=b[E.exports.expando];return g||(g=b[E.exports.expando]=E.exports.guid(),E.exports.cache[g]={}),E.exports.cache[g]},E.exports.hasData=function(b){var g="";return!(!(g=b?b[E.exports.expando]:g)||x.isEmpty(E.exports.cache[g]))},E.exports.removeData=function(b){var g="";if(g=b?b[E.exports.expando]:g){delete E.exports.cache[g];try{delete b[E.exports.expando]}catch{b.removeAttribute?b.removeAttribute(E.exports.expando):b[E.exports.expando]=null}}}},{"./object":45}],34:[function(k,E,ne){var x,b=typeof Promise>"u"?k("es6-promise").Promise:Promise;k=typeof self<"u"?self:this,x=function(){return d=[function(s,o,a){(function(n){o.b=function(h){for(var c=(h=h===void 0?{}:h).includes,h=h.excludes,h=h===void 0?[]:h,_=!1,m=!1,T=0,l=c===void 0?[]:c;T<l.length;T++)if(l[T]===!0){_=!0;break}for(var y=0,w=h;y<w.length;y++)if(w[y]===!0){m=!0;break}return _&&!m},o.c=function(h,c,_){return h=v.a[h],h!==void 0&&Object(u.compare)(h,c,_)},o.a=function(){return typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:this};var u=a(11),v=(a.n(u),a(4))}).call(o,a(10))},function(s,u,v){v.d(u,"c",function(){return h}),v.d(u,"d",function(){return c}),v.d(u,"b",function(){return _}),v.d(u,"f",function(){return m}),v.d(u,"a",function(){return T}),v.d(u,"e",function(){return l});var n,u=v(3),v=v(0),v=Object(v.a)(),h="InstallTrigger"in((v==null?void 0:v.window)||{})||/firefox/i.test(u.b),c=/trident/i.test(u.b)||/msie/i.test(u.b),_=/edge/i.test(u.b),m=/webkit/i.test(u.b)&&!_,T=((n=v==null?void 0:v.window)==null?void 0:n.chrome)!==void 0||/chrome/i.test(u.b),l=(((v=(n=v==null?void 0:v.window)==null?void 0:n.safari)==null?void 0:v.pushNotification)||!1).toString()==="[object SafariRemoteNotification]"||/safari/i.test(u.b)&&!T},function(s,o,a){a.d(o,"b",function(){return v}),a.d(o,"c",function(){return h}),a.d(o,"a",function(){return c});var n=a(1);function u(_){if(console){if(!n.d&&!n.b)return console[_];if(_==="log"||_==="clear")return function(){for(var m=[],T=0;T<arguments.length;T++)m[T]=arguments[T];console[_].apply(console,m)}}return function(){}}var v=u("log"),h=u("table"),c=u("clear")},function(s,n,a){n.a=function(){for(var h,c=[],_=0;_<arguments.length;_++)c[_]=arguments[_];return u!=null&&u.document?(h=u.document).createElement.apply(h,c):{}},a.d(n,"b",function(){return v});var n=a(0),u=Object(n.a)(),v=((a=u==null?void 0:u.navigator)==null?void 0:a.userAgent)||"xxxxx"},function(s,o,a){a.d(o,"a",function(){return n});for(var n={},u=0,v=(a(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];u<v.length;u++){var c=v[u].split("/"),h=c[0],c=c[1];n[h]=c}},function(s,n,a){a.d(n,"b",function(){return u}),a.d(n,"d",function(){return v}),a.d(n,"c",function(){return h}),a.d(n,"a",function(){return c}),a.d(n,"e",function(){return _});var n=a(3),u=/ipad/i.test(n.b),v=/macintosh/i.test(n.b),h=/iphone/i.test(n.b),c=/android/i.test(n.b),_=/windows/i.test(n.b)},function(s,o,a){Object.defineProperty(o,"__esModule",{value:!0}),o.addListener=function(y){l.addListener(y)},o.removeListener=function(y){l.removeListener(y)},o.isLaunch=function(){return l.isLaunch()},o.launch=function(){l.launch()},o.stop=function(){l.stop()},o.setDetectDelay=function(y){l.setDetectDelay(y)};var n=a(7),u=a(8),v=(a.d(o,"DevtoolsDetector",function(){return n.a}),a.d(o,"checkers",function(){return u}),a(0)),h=(a.d(o,"match",function(){return v.b}),a.d(o,"specificVersionMatch",function(){return v.c}),a(1)),c=(a.d(o,"isFirefox",function(){return h.c}),a.d(o,"isIE",function(){return h.d}),a.d(o,"isEdge",function(){return h.b}),a.d(o,"isWebkit",function(){return h.f}),a.d(o,"isChrome",function(){return h.a}),a.d(o,"isSafari",function(){return h.e}),a(2)),_=(a.d(o,"log",function(){return c.b}),a.d(o,"table",function(){return c.c}),a.d(o,"clear",function(){return c.a}),a(17)),m=(a.d(o,"isMobile",function(){return _.a}),a(4)),T=(a.d(o,"versionMap",function(){return m.a}),a(5)),l=(a.d(o,"isIpad",function(){return T.b}),a.d(o,"isMac",function(){return T.d}),a.d(o,"isIphone",function(){return T.c}),a.d(o,"isAndroid",function(){return T.a}),a.d(o,"isWindows",function(){return T.e}),new n.a({checkers:[u.elementIdChecker,u.regToStringChecker,u.functionToStringChecker,u.depRegToStringChecker,u.dateToStringChecker,u.debuggerChecker]}));o.default=l},function(s,o,a){a.d(o,"a",function(){return v});var n=this&&this.__awaiter||function(c,_,m,T){return new(m=m||b)(function(l,y){function w(R){try{C(T.next(R))}catch(A){y(A)}}function P(R){try{C(T.throw(R))}catch(A){y(A)}}function C(R){var A;R.done?l(R.value):((A=R.value)instanceof m?A:new m(function(I){I(A)})).then(w,P)}C((T=T.apply(c,_||[])).next())})},u=this&&this.__generator||function(c,_){var m,T,l,y={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},w={next:P(0),throw:P(1),return:P(2)};return typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function P(C){return function(R){var A=[C,R];if(m)throw new TypeError("Generator is already executing.");for(;y;)try{if(m=1,T&&(l=2&A[0]?T.return:A[0]?T.throw||((l=T.return)&&l.call(T),0):T.next)&&!(l=l.call(T,A[1])).done)return l;switch(T=0,(A=l?[2&A[0],l.value]:A)[0]){case 0:case 1:l=A;break;case 4:return y.label++,{value:A[1],done:!1};case 5:y.label++,T=A[1],A=[0];continue;case 7:A=y.ops.pop(),y.trys.pop();continue;default:if(!(l=0<(l=y.trys).length&&l[l.length-1])&&(A[0]===6||A[0]===2)){y=0;continue}if(A[0]===3&&(!l||A[1]>l[0]&&A[1]<l[3]))y.label=A[1];else if(A[0]===6&&y.label<l[1])y.label=l[1],l=A;else{if(!(l&&y.label<l[2])){l[2]&&y.ops.pop(),y.trys.pop();continue}y.label=l[2],y.ops.push(A)}}A=_.call(c,y)}catch(I){A=[6,I],T=0}finally{m=l=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}},v=(h.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},h.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},h.prototype.isLaunch=function(){return!this._detectLoopStopped},h.prototype.setDetectDelay=function(c){this._detectLoopDelay=c},h.prototype.addListener=function(c){this._listeners.push(c)},h.prototype.removeListener=function(c){this._listeners=this._listeners.filter(function(_){return _!==c})},h.prototype._broadcast=function(c){for(var _=0,m=this._listeners;_<m.length;_++){var T=m[_];try{T(c.isOpen,c)}catch{}}},h.prototype._detectLoop=function(){return n(this,void 0,void 0,function(){var c,_,m,T,l,y=this;return u(this,function(w){switch(w.label){case 0:c=!1,_="",m=0,T=this._checkers,w.label=1;case 1:return m<T.length?[4,(l=T[m]).isEnable()]:[3,6];case 2:return w.sent()?(_=l.name,[4,l.isOpen()]):[3,4];case 3:c=w.sent(),w.label=4;case 4:if(c)return[3,6];w.label=5;case 5:return m++,[3,1];case 6:return c!=this._isOpen&&(this._isOpen=c,this._broadcast({isOpen:c,checkerName:_})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return y._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},h);function h(c){c=c.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=c.slice()}},function(s,o,a){Object.defineProperty(o,"__esModule",{value:!0});var n=a(9),u=(a.d(o,"depRegToStringChecker",function(){return n.a}),a(12)),v=(a.d(o,"elementIdChecker",function(){return u.a}),a(13)),h=(a.d(o,"functionToStringChecker",function(){return v.a}),a(14)),c=(a.d(o,"regToStringChecker",function(){return h.a}),a(15)),_=(a.d(o,"debuggerChecker",function(){return c.a}),a(16));a.d(o,"dateToStringChecker",function(){return _.a})},function(s,o,a){a.d(o,"a",function(){return T});var n=a(1),u=a(2),v=a(0),h=this&&this.__awaiter||function(l,y,w,P){return new(w=w||b)(function(C,R){function A(B){try{D(P.next(B))}catch(N){R(N)}}function I(B){try{D(P.throw(B))}catch(N){R(N)}}function D(B){var N;B.done?C(B.value):((N=B.value)instanceof w?N:new w(function(U){U(N)})).then(A,I)}D((P=P.apply(l,y||[])).next())})},c=this&&this.__generator||function(l,y){var w,P,C,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},A={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function I(D){return function(B){var N=[D,B];if(w)throw new TypeError("Generator is already executing.");for(;R;)try{if(w=1,P&&(C=2&N[0]?P.return:N[0]?P.throw||((C=P.return)&&C.call(P),0):P.next)&&!(C=C.call(P,N[1])).done)return C;switch(P=0,(N=C?[2&N[0],C.value]:N)[0]){case 0:case 1:C=N;break;case 4:return R.label++,{value:N[1],done:!1};case 5:R.label++,P=N[1],N=[0];continue;case 7:N=R.ops.pop(),R.trys.pop();continue;default:if(!(C=0<(C=R.trys).length&&C[C.length-1])&&(N[0]===6||N[0]===2)){R=0;continue}if(N[0]===3&&(!C||N[1]>C[0]&&N[1]<C[3]))R.label=N[1];else if(N[0]===6&&R.label<C[1])R.label=C[1],C=N;else{if(!(C&&R.label<C[2])){C[2]&&R.ops.pop(),R.trys.pop();continue}R.label=C[2],R.ops.push(N)}}N=y.call(l,R)}catch(U){N=[6,U],P=0}finally{w=C=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},_=/ /,m=!1,T=(_.toString=function(){return m=!0,T.name},{name:"dep-reg-to-string",isOpen:function(){return h(this,void 0,void 0,function(){return c(this,function(l){return m=!1,Object(u.c)({dep:_}),Object(u.a)(),[2,m]})})},isEnable:function(){return h(this,void 0,void 0,function(){return c(this,function(l){return[2,Object(v.b)({includes:[!0],excludes:[n.c,n.d]})]})})}})},function(s,o){var a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(a=window)}s.exports=a},function(s,o,a){var n;(o=typeof(n=function(){var u=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function v(l){var y=l.replace(/^v/,"").replace(/\+.*$/,""),w=function(C,R){return C.indexOf(R)===-1?C.length:C.indexOf(R)}(y,"-"),P=y.substring(0,w).split(".");return P.push(y.substring(w+1)),P}function h(l){return isNaN(Number(l))?l:Number(l)}function c(l){if(typeof l!="string")throw new TypeError("Invalid argument expected string");if(!u.test(l))throw new Error("Invalid argument not valid semver ('"+l+"' received)")}function _(l,y){[l,y].forEach(c);for(var w=v(l),P=v(y),C=0;C<Math.max(w.length-1,P.length-1);C++){var R=parseInt(w[C]||0,10),A=parseInt(P[C]||0,10);if(R>A)return 1;if(A>R)return-1}var I=w[w.length-1],D=P[P.length-1];if(I&&D){var B=I.split(".").map(h),N=D.split(".").map(h);for(C=0;C<Math.max(B.length,N.length);C++){if(B[C]===void 0||typeof N[C]=="string"&&typeof B[C]=="number")return-1;if(N[C]===void 0||typeof B[C]=="string"&&typeof N[C]=="number"||B[C]>N[C])return 1;if(N[C]>B[C])return-1}}else if(I||D)return I?-1:1;return 0}var m=[">",">=","=","<","<="],T={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return _.validate=function(l){return typeof l=="string"&&u.test(l)},_.compare=function(l,y,w){(function(C){if(typeof C!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof C);if(m.indexOf(C)===-1)throw new TypeError("Invalid operator, expected one of "+m.join("|"))})(w);var P=_(l,y);return T[w].indexOf(P)>-1},_})=="function"?n.apply(o,[]):n)!==void 0&&(s.exports=o)},function(s,h,a){a.d(h,"a",function(){return l});var n=a(1),u=a(2),v=a(0),h=a(3),c=this&&this.__awaiter||function(y,w,P,C){return new(P=P||b)(function(R,A){function I(N){try{B(C.next(N))}catch(U){A(U)}}function D(N){try{B(C.throw(N))}catch(U){A(U)}}function B(N){var U;N.done?R(N.value):((U=N.value)instanceof P?U:new P(function(J){J(U)})).then(I,D)}B((C=C.apply(y,w||[])).next())})},_=this&&this.__generator||function(y,w){var P,C,R,A={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]},I={next:D(0),throw:D(1),return:D(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function D(B){return function(N){var U=[B,N];if(P)throw new TypeError("Generator is already executing.");for(;A;)try{if(P=1,C&&(R=2&U[0]?C.return:U[0]?C.throw||((R=C.return)&&R.call(C),0):C.next)&&!(R=R.call(C,U[1])).done)return R;switch(C=0,(U=R?[2&U[0],R.value]:U)[0]){case 0:case 1:R=U;break;case 4:return A.label++,{value:U[1],done:!1};case 5:A.label++,C=U[1],U=[0];continue;case 7:U=A.ops.pop(),A.trys.pop();continue;default:if(!(R=0<(R=A.trys).length&&R[R.length-1])&&(U[0]===6||U[0]===2)){A=0;continue}if(U[0]===3&&(!R||U[1]>R[0]&&U[1]<R[3]))A.label=U[1];else if(U[0]===6&&A.label<R[1])A.label=R[1],R=U;else{if(!(R&&A.label<R[2])){R[2]&&A.ops.pop(),A.trys.pop();continue}A.label=R[2],A.ops.push(U)}}U=w.call(y,A)}catch(J){U=[6,J],C=0}finally{P=R=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}}},m=Object(h.a)("div"),T=!1,l=(Object.defineProperty(m,"id",{get:function(){return T=!0,l.name},configurable:!0}),{name:"element-id",isOpen:function(){return c(this,void 0,void 0,function(){return _(this,function(y){return T=!1,Object(u.b)(m),Object(u.a)(),[2,T]})})},isEnable:function(){return c(this,void 0,void 0,function(){return _(this,function(y){return[2,Object(v.b)({includes:[!0],excludes:[n.d,n.b,n.c]})]})})}})},function(s,o,a){a.d(o,"a",function(){return l});var n=a(1),u=a(2),v=a(5),h=a(0),c=this&&this.__awaiter||function(y,w,P,C){return new(P=P||b)(function(R,A){function I(N){try{B(C.next(N))}catch(U){A(U)}}function D(N){try{B(C.throw(N))}catch(U){A(U)}}function B(N){var U;N.done?R(N.value):((U=N.value)instanceof P?U:new P(function(J){J(U)})).then(I,D)}B((C=C.apply(y,w||[])).next())})},_=this&&this.__generator||function(y,w){var P,C,R,A={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]},I={next:D(0),throw:D(1),return:D(2)};return typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function D(B){return function(N){var U=[B,N];if(P)throw new TypeError("Generator is already executing.");for(;A;)try{if(P=1,C&&(R=2&U[0]?C.return:U[0]?C.throw||((R=C.return)&&R.call(C),0):C.next)&&!(R=R.call(C,U[1])).done)return R;switch(C=0,(U=R?[2&U[0],R.value]:U)[0]){case 0:case 1:R=U;break;case 4:return A.label++,{value:U[1],done:!1};case 5:A.label++,C=U[1],U=[0];continue;case 7:U=A.ops.pop(),A.trys.pop();continue;default:if(!(R=0<(R=A.trys).length&&R[R.length-1])&&(U[0]===6||U[0]===2)){A=0;continue}if(U[0]===3&&(!R||U[1]>R[0]&&U[1]<R[3]))A.label=U[1];else if(U[0]===6&&A.label<R[1])A.label=R[1],R=U;else{if(!(R&&A.label<R[2])){R[2]&&A.ops.pop(),A.trys.pop();continue}A.label=R[2],A.ops.push(U)}}U=w.call(y,A)}catch(J){U=[6,J],C=0}finally{P=R=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}}};function m(){}var T=0,l=(m.toString=function(){return T++,""},{name:"function-to-string",isOpen:function(){return c(this,void 0,void 0,function(){return _(this,function(y){return T=0,Object(u.b)(m),Object(u.a)(),[2,T===2]})})},isEnable:function(){return c(this,void 0,void 0,function(){return _(this,function(y){return[2,Object(h.b)({includes:[!0],excludes:[n.c,(v.b||v.c)&&n.a]})]})})}})},function(s,o,a){a.d(o,"a",function(){return T});var n=a(2),u=a(1),v=a(0),h=this&&this.__awaiter||function(l,y,w,P){return new(w=w||b)(function(C,R){function A(B){try{D(P.next(B))}catch(N){R(N)}}function I(B){try{D(P.throw(B))}catch(N){R(N)}}function D(B){var N;B.done?C(B.value):((N=B.value)instanceof w?N:new w(function(U){U(N)})).then(A,I)}D((P=P.apply(l,y||[])).next())})},c=this&&this.__generator||function(l,y){var w,P,C,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},A={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function I(D){return function(B){var N=[D,B];if(w)throw new TypeError("Generator is already executing.");for(;R;)try{if(w=1,P&&(C=2&N[0]?P.return:N[0]?P.throw||((C=P.return)&&C.call(P),0):P.next)&&!(C=C.call(P,N[1])).done)return C;switch(P=0,(N=C?[2&N[0],C.value]:N)[0]){case 0:case 1:C=N;break;case 4:return R.label++,{value:N[1],done:!1};case 5:R.label++,P=N[1],N=[0];continue;case 7:N=R.ops.pop(),R.trys.pop();continue;default:if(!(C=0<(C=R.trys).length&&C[C.length-1])&&(N[0]===6||N[0]===2)){R=0;continue}if(N[0]===3&&(!C||N[1]>C[0]&&N[1]<C[3]))R.label=N[1];else if(N[0]===6&&R.label<C[1])R.label=C[1],C=N;else{if(!(C&&R.label<C[2])){C[2]&&R.ops.pop(),R.trys.pop();continue}R.label=C[2],R.ops.push(N)}}N=y.call(l,R)}catch(U){N=[6,U],P=0}finally{w=C=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},_=/ /,m=!1,T=(_.toString=function(){return m=!0,T.name},{name:"reg-to-string",isOpen:function(){return h(this,void 0,void 0,function(){return c(this,function(l){return m=!1,Object(n.b)(_),Object(n.a)(),[2,m]})})},isEnable:function(){return h(this,void 0,void 0,function(){return c(this,function(l){return[2,Object(v.b)({includes:[!0],excludes:[u.f]})]})})}})},function(s,o,a){a.d(o,"a",function(){return h});var n=this&&this.__awaiter||function(c,_,m,T){return new(m=m||b)(function(l,y){function w(R){try{C(T.next(R))}catch(A){y(A)}}function P(R){try{C(T.throw(R))}catch(A){y(A)}}function C(R){var A;R.done?l(R.value):((A=R.value)instanceof m?A:new m(function(I){I(A)})).then(w,P)}C((T=T.apply(c,_||[])).next())})},u=this&&this.__generator||function(c,_){var m,T,l,y={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},w={next:P(0),throw:P(1),return:P(2)};return typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function P(C){return function(R){var A=[C,R];if(m)throw new TypeError("Generator is already executing.");for(;y;)try{if(m=1,T&&(l=2&A[0]?T.return:A[0]?T.throw||((l=T.return)&&l.call(T),0):T.next)&&!(l=l.call(T,A[1])).done)return l;switch(T=0,(A=l?[2&A[0],l.value]:A)[0]){case 0:case 1:l=A;break;case 4:return y.label++,{value:A[1],done:!1};case 5:y.label++,T=A[1],A=[0];continue;case 7:A=y.ops.pop(),y.trys.pop();continue;default:if(!(l=0<(l=y.trys).length&&l[l.length-1])&&(A[0]===6||A[0]===2)){y=0;continue}if(A[0]===3&&(!l||A[1]>l[0]&&A[1]<l[3]))y.label=A[1];else if(A[0]===6&&y.label<l[1])y.label=l[1],l=A;else{if(!(l&&y.label<l[2])){l[2]&&y.ops.pop(),y.trys.pop();continue}y.label=l[2],y.ops.push(A)}}A=_.call(c,y)}catch(I){A=[6,I],T=0}finally{m=l=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}};function v(){return(performance||Date).now()}var h={name:"debugger-checker",isOpen:function(){return n(this,void 0,void 0,function(){var c;return u(this,function(_){return c=v(),(function(){}).constructor("debugger")(),[2,100<v()-c]})})},isEnable:function(){return n(this,void 0,void 0,function(){return u(this,function(c){return[2,!0]})})}}},function(s,o,a){a.d(o,"a",function(){return T});var n=a(1),u=a(2),v=a(0),h=this&&this.__awaiter||function(l,y,w,P){return new(w=w||b)(function(C,R){function A(B){try{D(P.next(B))}catch(N){R(N)}}function I(B){try{D(P.throw(B))}catch(N){R(N)}}function D(B){var N;B.done?C(B.value):((N=B.value)instanceof w?N:new w(function(U){U(N)})).then(A,I)}D((P=P.apply(l,y||[])).next())})},c=this&&this.__generator||function(l,y){var w,P,C,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]},A={next:I(0),throw:I(1),return:I(2)};return typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function I(D){return function(B){var N=[D,B];if(w)throw new TypeError("Generator is already executing.");for(;R;)try{if(w=1,P&&(C=2&N[0]?P.return:N[0]?P.throw||((C=P.return)&&C.call(P),0):P.next)&&!(C=C.call(P,N[1])).done)return C;switch(P=0,(N=C?[2&N[0],C.value]:N)[0]){case 0:case 1:C=N;break;case 4:return R.label++,{value:N[1],done:!1};case 5:R.label++,P=N[1],N=[0];continue;case 7:N=R.ops.pop(),R.trys.pop();continue;default:if(!(C=0<(C=R.trys).length&&C[C.length-1])&&(N[0]===6||N[0]===2)){R=0;continue}if(N[0]===3&&(!C||N[1]>C[0]&&N[1]<C[3]))R.label=N[1];else if(N[0]===6&&R.label<C[1])R.label=C[1],C=N;else{if(!(C&&R.label<C[2])){C[2]&&R.ops.pop(),R.trys.pop();continue}R.label=C[2],R.ops.push(N)}}N=y.call(l,R)}catch(U){N=[6,U],P=0}finally{w=C=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}},_=new Date,m=0,T=(_.toString=function(){return m++,""},{name:"date-to-string",isOpen:function(){return h(this,void 0,void 0,function(){return c(this,function(l){return m=0,Object(u.b)(_),Object(u.a)(),[2,m===2]})})},isEnable:function(){return h(this,void 0,void 0,function(){return c(this,function(l){return[2,Object(v.b)({includes:[n.a],excludes:[]})]})})}})},function(s,n,a){a.d(n,"a",function(){return u});var n=a(3),u=/mobile/i.test(n.b)}],f={},g.m=d,g.c=f,g.d=function(s,o,a){g.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},g.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return g.d(o,"a",o),o},g.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},g.p="",g(g.s=6);function g(s){var o;return(f[s]||(o=f[s]={i:s,l:!1,exports:{}},d[s].call(o.exports,o,o.exports,g),o.l=!0,o)).exports}var d,f},typeof ne=="object"&&typeof E=="object"?E.exports=x():typeof ne=="object"?ne.devtoolsDetector=x():k.devtoolsDetector=x()},{"es6-promise":9}],35:[function(k,E,ne){var x=k("./object");E.exports.el=function(b){return document.getElementById(b)},E.exports.createEl=function(b,g){var d;return b=b||"div",g=g||{},d=document.createElement(b),x.each(g,function(f,s){f.indexOf("aria-")!==-1||f=="role"?d.setAttribute(f,s):d[f]=s}),d},E.exports.addClass=function(b,g){(" "+b.className+" ").indexOf(" "+g+" ")==-1&&(b.className=b.className===""?g:b.className+" "+g)},E.exports.removeClass=function(b,g){var d,f;if(b.className.indexOf(g)!=-1){for(f=(d=b.className.split(" ")).length-1;0<=f;f--)d[f]===g&&d.splice(f,1);b.className=d.join(" ")}},E.exports.hasClass=function(b,g){return b.className.indexOf(g)!=-1},E.exports.getClasses=function(b){return b.className?b.className.split(" "):[]},E.exports.getElementAttributes=function(b){var g,d,f={};if(b&&b.attributes&&0<b.attributes.length)for(var s,o=(s=b.attributes).length-1;0<=o;o--)g=s[o].name,d=s[o].value,typeof b[g]!="boolean"&&",autoplay,controls,loop,muted,default,".indexOf(","+g+",")===-1||(d=d!==null),f[g]=d;return f},E.exports.insertFirst=function(b,g){g.firstChild?g.insertBefore(b,g.firstChild):g.appendChild(b)},E.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},E.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},E.exports.css=function(b,g,d){return!(!b||!b.style)&&(g&&d?(b.style[g]=d,!0):d||typeof g!="string"?!d&&typeof g=="object"&&(x.each(g,function(f,s){b.style[f]=s}),!0):b.style[g])},E.exports.getTransformName=function(b){for(var g=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],d=g[0],f=0,s=g.length;f<s;f++)if(b.style[g[f]]!==void 0){d=g[f];break}return d},E.exports.getTransformEventName=function(b,g){for(var d=["","Webkit","Moz","ms","O"],f=g.toLowerCase(),s=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],o=0,a=s.length;o<a;o++)if(b.style[s[o]]!==void 0){o!=0&&(f=d[o]+g);break}return f},E.exports.addCssByStyle=function(f){var g=document,d=g.createElement("style"),f=(d.setAttribute("type","text/css"),d.styleSheet?d.styleSheet.cssText=f:(f=g.createTextNode(f),d.appendChild(f)),g.getElementsByTagName("head"));(f.length?f[0]:g.documentElement).appendChild(d)},E.exports.getTranslateX=function(b){var g=0;if(b)try{var d=window.getComputedStyle(b),f=E.exports.getTransformName(b),g=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(d[f]).m41}catch(s){console.log(s)}return g},E.exports.getPointerPosition=function(s,g){var d={},a=E.exports.findPosition(s),f=s.offsetWidth,s=s.offsetHeight,o=a.top,a=a.left,n=g.pageY,u=g.pageX;return g.changedTouches&&(u=g.changedTouches[0].pageX,n=g.changedTouches[0].pageY),d.y=Math.max(0,Math.min(1,(o-n+s)/s)),d.x=Math.max(0,Math.min(1,(u-a)/f)),d},E.exports.findPosition=function(b){var g,d,f,s;return(g=b.getBoundingClientRect&&b.parentNode?b.getBoundingClientRect():g)?(b=document.documentElement,s=document.body,f=b.clientLeft||s.clientLeft||0,d=window.pageXOffset||s.scrollLeft,d=g.left+d-f,f=b.clientTop||s.clientTop||0,b=window.pageYOffset||s.scrollTop,s=g.top+b-f,{left:Math.round(d),top:Math.round(s)}):{left:0,top:0}}},{"./object":45}],36:[function(k,E,ne){var x=k("./object"),b=k("./data"),g=k("./ua"),d=k("./fastclick");function f(s,o,a,n){x.each(a,function(u){s(o,u,n)})}E.exports.on=function(s,o,a){if(s){if(x.isArray(o))return f(E.exports.on,s,o,a);g.IS_MOBILE&&o=="click"&&d.attach(s);var n=b.getData(s);n.handlers||(n.handlers={}),n.handlers[o]||(n.handlers[o]=[]),a.guid||(a.guid=b.guid()),n.handlers[o].push(a),n.dispatcher||(n.disabled=!1,n.dispatcher=function(u){if(!n.disabled){u=E.exports.fixEvent(u);var v=n.handlers[u.type];if(v)for(var h=v.slice(0),c=0,_=h.length;c<_&&!u.isImmediatePropagationStopped();c++)h[c].call(s,u)}}),n.handlers[o].length==1&&(s.addEventListener?s.addEventListener(o,n.dispatcher,!1):s.attachEvent&&s.attachEvent("on"+o,n.dispatcher))}},E.exports.off=function(s,o,a){if(s&&b.hasData(s)){var n=b.getData(s);if(n.handlers){let c=function(_){n.handlers[_]=[],E.exports.cleanUpEvents(s,_)};if(x.isArray(o))return f(E.exports.off,s,o,a);if(o){var u=n.handlers[o];if(u)if(a){if(a.guid)for(var v=0;v<u.length;v++)u[v].guid===a.guid&&u.splice(v--,1);E.exports.cleanUpEvents(s,o)}else c(o)}else for(var h in n.handlers)c(h)}}},E.exports.cleanUpEvents=function(s,o){var a=b.getData(s);a.handlers[o].length===0&&(delete a.handlers[o],s.removeEventListener?s.removeEventListener(o,a.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+o,a.dispatcher)),x.isEmpty(a.handlers)&&(delete a.handlers,delete a.dispatcher,delete a.disabled),x.isEmpty(a)&&b.removeData(s)},E.exports.fixEvent=function(s){function o(){return!0}function a(){return!1}if(!s||!s.isPropagationStopped){var n,u,v,h=s||window.event;for(n in s={},h)n==="layerX"||n==="layerY"||n==="keyboardEvent.keyLocation"||n=="returnValue"&&h.preventDefault||(s[n]=h[n]);s.target||(s.target=s.srcElement||document),s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement,s.preventDefault=function(){h.preventDefault&&h.preventDefault(),s.returnValue=!1,s.isDefaultPrevented=o,s.defaultPrevented=!0},s.isDefaultPrevented=a,s.defaultPrevented=!1,s.stopPropagation=function(){h.stopPropagation&&h.stopPropagation(),s.cancelBubble=!0,s.isPropagationStopped=o},s.isPropagationStopped=a,s.stopImmediatePropagation=function(){h.stopImmediatePropagation&&h.stopImmediatePropagation(),s.isImmediatePropagationStopped=o,s.stopPropagation()},s.isImmediatePropagationStopped=a,s.clientX!=null&&(u=document.documentElement,v=document.body,s.pageX=s.clientX+(u&&u.scrollLeft||v&&v.scrollLeft||0)-(u&&u.clientLeft||v&&v.clientLeft||0),s.pageY=s.clientY+(u&&u.scrollTop||v&&v.scrollTop||0)-(u&&u.clientTop||v&&v.clientTop||0)),s.which=s.charCode||s.keyCode,s.button!=null&&(s.button=1&s.button?0:4&s.button?1:2&s.button?2:0)}return s},E.exports.trigger=function(s,o){var a,n,u;if(s)return a=b.hasData(s)?b.getData(s):{},n=s.parentNode||s.ownerDocument,typeof o=="string"&&(u=null,!s.paramData&&s.paramData!=0||(u=s.paramData,s.paramData=null,s.removeAttribute(u)),o={type:o,target:s,paramData:u}),o=E.exports.fixEvent(o),a.dispatcher&&a.dispatcher.call(s,o),n&&!o.isPropagationStopped()&&o.bubbles!==!1?E.exports.trigger(n,o):n||o.defaultPrevented||(u=b.getData(o.target),o.target[o.type]&&(u.disabled=!0,typeof o.target[o.type]=="function"&&o.target[o.type](),u.disabled=!1)),!o.defaultPrevented},E.exports.one=function(s,o,a){if(s){let n=function(){E.exports.off(s,o,n),a.apply(this,arguments)};if(x.isArray(o))return f(E.exports.one,s,o,a);n.guid=a.guid=a.guid||b.guid(),E.exports.on(s,o,n)}}},{"./data":33,"./fastclick":37,"./object":45,"./ua":51}],37:[function(k,E,ne){function x(a,n){var u;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=a,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!x.notNeeded(a)){for(var v=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=0,c=v.length;h<c;h++)this[v[h]]=function(_,m){return function(){return _.apply(m,arguments)}}(this[v[h]],this);g&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(_,m,T){var l=Node.prototype.removeEventListener;_==="click"?l.call(a,_,m.hijacked||m,T):l.call(a,_,m,T)},a.addEventListener=function(_,m,T){var l=Node.prototype.addEventListener;_==="click"?l.call(a,_,m.hijacked||(m.hijacked=function(y){y.propagationStopped||m(y)}),T):l.call(a,_,m,T)}),typeof a.onclick=="function"&&(u=a.onclick,a.addEventListener("click",function(_){u(_)},!1),a.onclick=null)}}var b=0<=navigator.userAgent.indexOf("Windows Phone"),g=0<navigator.userAgent.indexOf("Android")&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,f=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=d&&/OS [6-7]_\d/.test(navigator.userAgent),o=0<navigator.userAgent.indexOf("BB10");x.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&a.type==="file"||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},x.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!g;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},x.prototype.sendClick=function(a,n){var u;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),n=n.changedTouches[0],(u=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(a),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),u.forwardedTouchEvent=!0,a.dispatchEvent(u)},x.prototype.determineEventType=function(a){return g&&a.tagName.toLowerCase()==="select"?"mousedown":"click"},x.prototype.focus=function(a){var n;d&&a.setSelectionRange&&a.type.indexOf("date")!==0&&a.type!=="time"&&a.type!=="month"&&a.type!=="email"?(n=a.value.length,a.setSelectionRange(n,n)):a.focus()},x.prototype.updateScrollParent=function(a){var n,u=a.fastClickScrollParent;if(!u||!u.contains(a)){n=a;do if(n.scrollHeight>n.offsetHeight){u=n,a.fastClickScrollParent=n;break}while(n=n.parentElement)}u&&(u.fastClickLastScrollTop=u.scrollTop)},x.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},x.prototype.onTouchStart=function(a){var n,u,v;if(!(1<a.targetTouches.length)){if(n=this.getTargetElementFromEventTarget(a.target),u=a.targetTouches[0],d){if((v=window.getSelection()).rangeCount&&!v.isCollapsed)return!0;if(!f){if(u.identifier&&u.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=u.identifier,this.updateScrollParent(n)}}this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=n,this.touchStartX=u.pageX,this.touchStartY=u.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault()}return!0},x.prototype.touchHasMoved=function(n){var n=n.changedTouches[0],u=this.touchBoundary;return Math.abs(n.pageX-this.touchStartX)>u||Math.abs(n.pageY-this.touchStartY)>u},x.prototype.onTouchMove=function(a){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0},x.prototype.findControl=function(a){return a.control!==void 0?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},x.prototype.onTouchEnd=function(a){var n,u,v,h=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(v=a.changedTouches[0],(h=document.elementFromPoint(v.pageX-window.pageXOffset,v.pageY-window.pageYOffset)||h).fastClickScrollParent=this.targetElement.fastClickScrollParent),(v=h.tagName.toLowerCase())==="label"){if(u=this.findControl(h)){if(this.focus(h),g)return!1;h=u}}else if(this.needsFocus(h))return 100<a.timeStamp-n||d&&window.top!==window&&v==="input"?this.targetElement=null:(this.focus(h),this.sendClick(h,a),d&&v==="select"||(this.targetElement=null,a.preventDefault())),!1;return!(!d||f||!(u=h.fastClickScrollParent)||u.fastClickLastScrollTop===u.scrollTop)||(this.needsClick(h)||(a.preventDefault(),this.sendClick(h,a)),!1)},x.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},x.prototype.onMouse=function(a){return!this.targetElement||!(!a.forwardedTouchEvent&&a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),1))},x.prototype.onClick=function(a){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):a.target.type==="submit"&&a.detail===0||((a=this.onMouse(a))||(this.targetElement=null),a)},x.prototype.destroy=function(){var a=this.layer;g&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},x.notNeeded=function(a){var n,u;return window.ontouchstart===void 0||(u=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!g||(n=document.querySelector("meta[name=viewport]"))&&(n.content.indexOf("user-scalable=no")!==-1||31<u&&document.documentElement.scrollWidth<=window.outerWidth))||o&&10<=(u=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=u[2]&&(n=document.querySelector("meta[name=viewport]"))&&(n.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)?!0:a.style.msTouchAction==="none"||a.style.touchAction==="manipulation"||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(n=document.querySelector("meta[name=viewport]"))&&(n.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))||a.style.touchAction==="none"||a.style.touchAction==="manipulation"},x.attach=function(a,n){return new x(a,n)},E.exports=x},{}],38:[function(k,E,ne){var x=k("./data");E.exports.bind=function(b,g,d){g.guid||(g.guid=x.guid());function f(){return g.apply(b,arguments)}return f.guid=d?d+"_"+g.guid:g.guid,f}},{"./data":33}],39:[function(k,E,ne){function x(){x=function(){return s};var s={},o=Object.prototype,a=o.hasOwnProperty,n=Object.defineProperty||function(q,j,F){q[j]=F.value},P=typeof Symbol=="function"?Symbol:{},u=P.iterator||"@@iterator",v=P.asyncIterator||"@@asyncIterator",h=P.toStringTag||"@@toStringTag";function c(q,j,F){return Object.defineProperty(q,j,{value:F,enumerable:!0,configurable:!0,writable:!0}),q[j]}try{c({},"")}catch{c=function(j,F,z){return j[F]=z}}function _(q,te,F,le){var K,L,O,H,te=te&&te.prototype instanceof l?te:l,te=Object.create(te.prototype),le=new N(le||[]);return n(te,"_invoke",{value:(K=q,L=F,O=le,H="suspendedStart",function(me,Pe){if(H==="executing")throw new Error("Generator is already running");if(H==="completed"){if(me==="throw")throw Pe;return J()}for(O.method=me,O.arg=Pe;;){var xe=O.delegate;if(xe&&(xe=function be(Oe,re){var ee=Oe.iterator[re.method];if(ee===void 0){if(re.delegate=null,re.method==="throw"){if(Oe.iterator.return&&(re.method="return",re.arg=void 0,be(Oe,re),re.method==="throw"))return T;re.method="throw",re.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}return ee=m(ee,Oe.iterator,re.arg),ee.type==="throw"?(re.method="throw",re.arg=ee.arg,re.delegate=null,T):(ee=ee.arg,ee?ee.done?(re[Oe.resultName]=ee.value,re.next=Oe.nextLoc,re.method!=="return"&&(re.method="next",re.arg=void 0),re.delegate=null,T):ee:(re.method="throw",re.arg=new TypeError("iterator result is not an object"),re.delegate=null,T))}(xe,O),xe)){if(xe===T)continue;return xe}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(H==="suspendedStart")throw H="completed",O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);if(H="executing",xe=m(K,L,O),xe.type==="normal"){if(H=O.done?"completed":"suspendedYield",xe.arg===T)continue;return{value:xe.arg,done:O.done}}xe.type==="throw"&&(H="completed",O.method="throw",O.arg=xe.arg)}})}),te}function m(q,j,F){try{return{type:"normal",arg:q.call(j,F)}}catch(z){return{type:"throw",arg:z}}}s.wrap=_;var T={};function l(){}function y(){}function w(){}var P={},C=(c(P,u,function(){return this}),Object.getPrototypeOf),C=C&&C(C(U([]))),R=(C&&C!==o&&a.call(C,u)&&(P=C),w.prototype=l.prototype=Object.create(P));function A(q){["next","throw","return"].forEach(function(j){c(q,j,function(F){return this._invoke(j,F)})})}function I(q,j){var F;n(this,"_invoke",{value:function(z,K){function L(){return new j(function(O,H){(function te(Oe,me,Pe,xe){var be,Oe=m(q[Oe],q,me);if(Oe.type!=="throw")return(me=(be=Oe.arg).value)&&typeof me=="object"&&a.call(me,"__await")?j.resolve(me.__await).then(function(re){te("next",re,Pe,xe)},function(re){te("throw",re,Pe,xe)}):j.resolve(me).then(function(re){be.value=re,Pe(be)},function(re){return te("throw",re,Pe,xe)});xe(Oe.arg)})(z,K,O,H)})}return F=F?F.then(L,L):L()}})}function D(q){var j={tryLoc:q[0]};1 in q&&(j.catchLoc=q[1]),2 in q&&(j.finallyLoc=q[2],j.afterLoc=q[3]),this.tryEntries.push(j)}function B(q){var j=q.completion||{};j.type="normal",delete j.arg,q.completion=j}function N(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(D,this),this.reset(!0)}function U(q){if(q){var j,F=q[u];if(F)return F.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length))return j=-1,(F=function z(){for(;++j<q.length;)if(a.call(q,j))return z.value=q[j],z.done=!1,z;return z.value=void 0,z.done=!0,z}).next=F}return{next:J}}function J(){return{value:void 0,done:!0}}return n(R,"constructor",{value:y.prototype=w,configurable:!0}),n(w,"constructor",{value:y,configurable:!0}),y.displayName=c(w,h,"GeneratorFunction"),s.isGeneratorFunction=function(q){return q=typeof q=="function"&&q.constructor,!!q&&(q===y||(q.displayName||q.name)==="GeneratorFunction")},s.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,w):(q.__proto__=w,c(q,h,"GeneratorFunction")),q.prototype=Object.create(R),q},s.awrap=function(q){return{__await:q}},A(I.prototype),c(I.prototype,v,function(){return this}),s.AsyncIterator=I,s.async=function(q,j,F,z,K){K===void 0&&(K=Promise);var L=new I(_(q,j,F,z),K);return s.isGeneratorFunction(j)?L:L.next().then(function(O){return O.done?O.value:L.next()})},A(R),c(R,h,"Generator"),c(R,u,function(){return this}),c(R,"toString",function(){return"[object Generator]"}),s.keys=function(q){var j,F=Object(q),z=[];for(j in F)z.push(j);return z.reverse(),function K(){for(;z.length;){var L=z.pop();if(L in F)return K.value=L,K.done=!1,K}return K.done=!0,K}},s.values=U,N.prototype={constructor:N,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!q)for(var j in this)j.charAt(0)==="t"&&a.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=void 0)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var j=this;function F(te,le){return L.type="throw",L.arg=q,j.next=te,le&&(j.method="next",j.arg=void 0),!!le}for(var z=this.tryEntries.length-1;0<=z;--z){var K=this.tryEntries[z],L=K.completion;if(K.tryLoc==="root")return F("end");if(K.tryLoc<=this.prev){var O=a.call(K,"catchLoc"),H=a.call(K,"finallyLoc");if(O&&H){if(this.prev<K.catchLoc)return F(K.catchLoc,!0);if(this.prev<K.finallyLoc)return F(K.finallyLoc)}else if(O){if(this.prev<K.catchLoc)return F(K.catchLoc,!0)}else{if(!H)throw new Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return F(K.finallyLoc)}}}},abrupt:function(q,j){for(var F=this.tryEntries.length-1;0<=F;--F){var z=this.tryEntries[F];if(z.tryLoc<=this.prev&&a.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var K=z;break}}var L=(K=K&&(q==="break"||q==="continue")&&K.tryLoc<=j&&j<=K.finallyLoc?null:K)?K.completion:{};return L.type=q,L.arg=j,K?(this.method="next",this.next=K.finallyLoc,T):this.complete(L)},complete:function(q,j){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&j&&(this.next=j),T},finish:function(q){for(var j=this.tryEntries.length-1;0<=j;--j){var F=this.tryEntries[j];if(F.finallyLoc===q)return this.complete(F.completion,F.afterLoc),B(F),T}},catch:function(q){for(var j=this.tryEntries.length-1;0<=j;--j){var F,z,K=this.tryEntries[j];if(K.tryLoc===q)return(F=K.completion).type==="throw"&&(z=F.arg,B(K)),z}throw new Error("illegal catch attempt")},delegateYield:function(q,j,F){return this.delegate={iterator:U(q),resultName:j,nextLoc:F},this.method==="next"&&(this.arg=void 0),T}},s}function b(s,o,a,n,u,v,h){try{var c=s[v](h),_=c.value}catch(m){return void a(m)}c.done?o(_):Promise.resolve(_).then(n,u)}function g(s){return function(){var o=this,a=arguments;return new Promise(function(n,u){var v=s.apply(o,a);function h(_){b(v,n,u,h,c,"next",_)}function c(_){b(v,n,u,h,c,"throw",_)}h(void 0)})}}var d,f=typeof Promise>"u"?k("es6-promise").Promise:Promise;k=self,d=function(){function s(y,w){var P=(w=w===void 0?"mp4":w)==="hls",C="";switch(y=y===void 0?"":y){case"hvc1":C=P?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":C=P?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:C=""}return C}function o(y,w,P,C){w===void 0&&(w=!1),P===void 0&&(P="");var R=performance.now(),A=C;return new f(function(I){D=y,(B=w?100:0)===void 0&&(B=100),(N=document.createElement("video")).setAttribute("width",""+B),N.setAttribute("height",""+B),N.setAttribute("muted","muted"),N.setAttribute("crossorigin","anonymous"),N.setAttribute("preload","preload"),N.setAttribute("autoplay","autoplay"),N.setAttribute("webkit-playsinline","webkit-playsinline"),N.setAttribute("playsinline","playsinline"),N.setAttribute("x-webkit-airplay","x-webkit-airplay"),N.setAttribute("playsinline","playsinline"),N.src=D;var D,B,N,U=N,J=setInterval(function(){var q,j,F,z,K;(performance.now()-R>A||U.videoWidth!==0)&&(clearInterval(J),q=U.videoWidth!==0,w?(U.setAttribute("controls","controls"),j=U,(F=P)===void 0&&(F=""),z=document.createElement("dv"),(K=document.createElement("h3")).innerText=F,z.appendChild(j),z.appendChild(K),document.body.appendChild(z)):(U.pause(),U=null),I(q))})})}var a={d:function(y,w){for(var P in w)a.o(w,P)&&!a.o(y,P)&&Object.defineProperty(y,P,{enumerable:!0,get:w[P]})},o:function(y,w){return Object.prototype.hasOwnProperty.call(y,w)}},n={},u=(a.d(n,{default:function(){return l}}),navigator.userAgent),h=/qqbrowser/i.test(u.toLowerCase()),c=/Edge/i.test(u),c=/Chrome/i.test(u)&&!c&&!h,v=/Safari/i.test(u)&&!c,h=u.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),c=h&&h[1],_=c&&Number(c.split(".")[0]),m=function(){var y=g(x().mark(function w(P){var C;return x().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,fetch(P);case 2:return C=R.sent,R.next=5,C.blob();case 5:return C=R.sent,R.abrupt("return",URL.createObjectURL(C));case 7:case"end":return R.stop()}},w)}));return function(w){return y.apply(this,arguments)}}(),T={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},l=function(y){return y===void 0&&(y={}),new f(function(){var w=g(x().mark(function P(C){var R,A,I,D,B,N,U,J,q,j,F,z,K;return x().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(D=Object.assign({},T,y),R=D.includeSystemHijack,A=D.showVideo,U=D.codecTags,I=D.format,D=D.timeout,B=performance.now(),N=-1<U.indexOf("hvc1"),U=-1<U.indexOf("hev1"),q=J=!1,!(v&&_&&11<=_)){L.next=14;break}if(j=s("hvc1",I),L.t0=R,L.t0){L.next=9;break}return L.next=8,m(j);case 8:j=L.sent;case 9:return L.next=11,o(j,A,"hvc1",D);case 11:J=L.sent,L.next=34;break;case 14:if(!N){L.next=24;break}if(F=s("hvc1",I),L.t1=R,L.t1){L.next=21;break}return L.next=20,m(F);case 20:F=L.sent;case 21:return L.next=23,o(F,A,"hvc1",D);case 23:J=L.sent;case 24:if(!U){L.next=34;break}if(z=s("hev1",I),L.t2=R,L.t2){L.next=31;break}return L.next=30,m(z);case 30:z=L.sent;case 31:return L.next=33,o(z,A,"hev1",D);case 33:q=L.sent;case 34:K=performance.now(),C({isHvc1Supported:J,isHev1Supported:q,time:Math.ceil(K-B)});case 36:case"end":return L.stop()}},P)}));return function(P){return w.apply(this,arguments)}}())};return n.default},typeof ne=="object"&&typeof E=="object"?E.exports=d():typeof ne=="object"?ne.hevcDetector=d():k.hevcDetector=d()},{"es6-promise":9}],40:[function(k,E,ne){function x(d){for(var f in d=typeof d=="string"?this.parseAttrList(d):d)d.hasOwnProperty(f)&&(this[f]=d[f])}var b=/^(\d+)x(\d+)$/,g=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;x.prototype={decimalInteger:function(d){return d=parseInt(this[d],10),d>Number.MAX_SAFE_INTEGER?1/0:d},hexadecimalInteger:function(d){if(this[d]){for(var f=(1&(f=(this[d]||"0x").slice(2)).length?"0":"")+f,s=new Uint8Array(f.length/2),o=0;o<f.length/2;o++)s[o]=parseInt(f.slice(2*o,2*o+2),16);return s}return null},hexadecimalIntegerAsNumber:function(d){return d=parseInt(this[d],16),d>Number.MAX_SAFE_INTEGER?1/0:d},decimalFloatingPoint:function(d){return parseFloat(this[d])},enumeratedString:function(d){return this[d]},decimalResolution:function(d){if(d=b.exec(this[d]),d!==null)return{width:parseInt(d[1],10),height:parseInt(d[2],10)}},parseAttrList:function(d){var f,s={};for(g.lastIndex=0;(f=g.exec(d))!==null;){var o=f[2];o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1&&(o=o.slice(1,-1)),s[f[1]]=o}return s}},E.exports=x},{}],41:[function(k,E,ne){function x(){this.method=null,this.key=null,this.iv=null,this._uri=null}function b(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function g(){this.loaders={}}var d=k("../constants"),f=k("../playerutil"),s=k("./attrlist"),o=k("../io"),a=k("./urltoolkit"),n=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,u=/#EXT-X-MEDIA:(.*)/g,v=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),h=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,c="RegionBlock";b.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},b.prototype.Seturl=function(_){this._url=_},b.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},b.prototype.GetbyteRange=function(){var _,m,T;return this._byteRange||(_=this._byteRange=[],this.rawByteRange&&((m=this.rawByteRange.split("@",2)).length===1?(T=this.lastByteRangeEndOffset,_[0]=T||0):_[0]=parseInt(m[1]),_[1]=parseInt(m[0])+_[0])),this._byteRange},b.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},b.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},b.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},g.prototype=((k={parseMasterPlaylist:function(_,m){var T=[];for(n.lastIndex=0;(w=n.exec(_))!=null;){var l={},y=l.attrs=new s(w[1]),w=(l.url=this.resolve(w[2],m),y.decimalResolution("RESOLUTION"));if(w&&(l.width=w.width,l.height=w.height),l.bitrate=y.decimalInteger("AVERAGE-BANDWIDTH")||y.decimalInteger("BANDWIDTH"),l.name=y.NAME,P=y.CODECS)for(var P=P.split(/[ ,]+/),C=0;C<P.length;C++){var R=P[C];R.indexOf("avc1")!==-1?l.videoCodec=this.avc1toavcoti(R):R.indexOf("hvc1")!==-1?l.videoCodec=R:l.audioCodec=R}T.push(l)}return T},parseMasterPlaylistMedia:function(_,m,T,l){var y=[],w=0;for(u.lastIndex=0;(C=u.exec(_))!=null;){var P={},C=new s(C[1]);C.TYPE===T&&(P.groupId=C["GROUP-ID"],P.name=C.NAME,P.type=T,P.default=C.DEFAULT==="YES",P.autoselect=C.AUTOSELECT==="YES",P.forced=C.FORCED==="YES",C.URI&&(P.url=this.resolve(C.URI,m)),P.lang=C.LANGUAGE,P.name||(P.name=P.lang),l&&(P.audioCodec=l),P.id=w++,y.push(P))}return y},avc1toavcoti:function(_){var m=_.split("."),T=2<m.length?(T=m.shift()+".",(T+=parseInt(m.shift()).toString(16))+("000"+parseInt(m.shift()).toString(16)).substr(-4)):_;return T},load:function(_,m,T){var l=this;o.get(_,function(y){var w,P,C,R=l.parseMasterPlaylist(y,_);R.length&&(w=l.parseMasterPlaylistMedia(y,_,"AUDIO",R[0].audioCodec),P=l.parseMasterPlaylistMedia(y,_,"SUBTITLES"),w.length)&&(C=!1,w.forEach(function(A){A.url||(C=!0)}),C===!1)&&R[0].audioCodec&&!R[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),w.unshift({type:"main",name:"main"})),m({levels:R,audioTracks:w,subtitles:P,url:_,string:y})},function(y,w,P){T&&((P=f.parseHttpHeaders(P)["x-tengine-error"])&&-1<d.RegionBlockMessages.indexOf(P)&&(y=c),T(y,w))})},loadMediaPlaylist:function(_,m,T){var l=this,y=(_=_||{}).string,w=_.url;y?(_=l.parseLevelPlaylist(y,w),m(_)):o.get(w,function(P){P=l.parseLevelPlaylist(P,w),m(P)},function(P){T&&T(P)})},resolve:function(_,m){return a.buildAbsoluteURL(m,_,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(_,m){var T=[];for(n.lastIndex=0;(w=n.exec(_))!=null;){var l={},y=l.attrs=new s(w[1]),w=(l.url=this.resolve(w[2],m),y.decimalResolution("RESOLUTION"));if(w&&(l.width=w.width,l.height=w.height),l.bitrate=y.decimalInteger("AVERAGE-BANDWIDTH")||y.decimalInteger("BANDWIDTH"),l.name=y.NAME,P=y.CODECS)for(var P=P.split(/[ ,]+/),C=0;C<P.length;C++){var R=P[C];R.indexOf("avc1")!==-1?l.videoCodec=this.avc1toavcoti(R):R.indexOf("hvc1")!==-1?l.videoCodec=R:l.audioCodec=R}T.push(l)}return T},k.parseMasterPlaylistMedia=function(_,m,T,l){var y=[],w=0;for(u.lastIndex=0;(C=u.exec(_))!=null;){var P={},C=new s(C[1]);C.TYPE===T&&(P.groupId=C["GROUP-ID"],P.name=C.NAME,P.type=T,P.default=C.DEFAULT==="YES",P.autoselect=C.AUTOSELECT==="YES",P.forced=C.FORCED==="YES",C.URI&&(P.url=this.resolve(C.URI,m)),P.lang=C.LANGUAGE,P.name||(P.name=P.lang),l&&(P.audioCodec=l),P.id=w++,y.push(P))}return y},k.avc1toavcoti=function(_){var m=_.split("."),T=2<m.length?(T=m.shift()+".",(T+=parseInt(m.shift()).toString(16))+("000"+parseInt(m.shift()).toString(16)).substr(-4)):_;return T},k.parseLevelPlaylist=function(_,m,T,l){var y,w,P=0,C=0,R={type:null,version:null,url:m,fragments:[],live:!0,startSN:0},A=new x,I=0,D=null,B=new b;for(v.lastIndex=0;(y=v.exec(_))!==null;){var N=y[1];if(N){B.duration=parseFloat(N);var U=(" "+y[2]).slice(1);B.title=U||null,B.tagList.push(U?["INF",N,U]:["INF",N])}else if(y[3])isNaN(B.duration)||(U=P++,B.type=l,B.start=C,B.levelkey=A,B.sn=U,B.level=T,B.cc=I,B.baseurl=m,B.relurl=(" "+y[3]).slice(1),R.fragments.push(B),C+=(D=B).duration,B=new b);else if(y[4])B.rawByteRange=(" "+y[4]).slice(1),D&&(N=D.byteRangeEndOffset)&&(B.lastByteRangeEndOffset=N);else if(y[5])B.rawProgramDateTime=(" "+y[5]).slice(1),B.tagList.push(["PROGRAM-DATE-TIME",B.rawProgramDateTime]),R.programDateTime===void 0&&(R.programDateTime=new Date(new Date(Date.parse(y[5]))-1e3*C));else{for(y=y[0].match(h),w=1;w<y.length&&y[w]===void 0;w++);var J=(" "+y[w+1]).slice(1),q=(" "+y[w+2]).slice(1);switch(y[w]){case"#":B.tagList.push(q?[J,q]:[J]);break;case"PLAYLIST-TYPE":R.type=J.toUpperCase();break;case"MEDIA-SEQUENCE":P=R.startSN=parseInt(J);break;case"TARGETDURATION":R.targetduration=parseFloat(J);break;case"VERSION":R.version=parseInt(J);break;case"EXTM3U":break;case"ENDLIST":R.live=!1;break;case"DIS":I++,B.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":I=parseInt(J);break;case"KEY":var z=new s(J),j=z.enumeratedString("METHOD"),F=z.URI,z=z.hexadecimalInteger("IV");j&&(A=new x,F)&&0<=["AES-128","SAMPLE-AES"].indexOf(j)&&(A.method=j,A.baseuri=m,A.reluri=F,A.key=null,A.iv=z);break;case"START":j=new s(J).decimalFloatingPoint("TIME-OFFSET"),isNaN(j)||(R.startTimeOffset=j);break;case"MAP":F=new s(J),B.relurl=F.URI,B.rawByteRange=F.BYTERANGE,B.baseurl=m,B.level=T,B.type=l,B.sn="initSegment",R.initSegment=B,B=new b;break;case"PART-INF":z=new s(J),R.partTarget=z.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+y)}}}return(B=D)&&!B.relurl&&(R.fragments.pop(),C-=B.duration),R.totalduration=C,R.averagetargetduration=C/R.fragments.length,R.endSN=P-1,R},k),g.ERROR_REGION_BLOCK=c,E.exports=g},{"../constants":31,"../io":43,"../playerutil":48,"./attrlist":40,"./urltoolkit":42}],42:[function(k,E,ne){var x=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,b=/^([^\/;?#]*)(.*)$/,g=/(?:\/|^)\.(?=\/)/g,d=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,f={buildAbsoluteURL:function(v,o,a){if(a=a||{},v=v.trim(),!(o=o.trim())){if(!a.alwaysNormalize)return v;var n=f.parseURL(v);if(n)return n.path=f.normalizePath(n.path),f.buildURLFromParts(n);throw new Error("Error trying to parse base URL.")}if(n=f.parseURL(o),!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return a.alwaysNormalize?(n.path=f.normalizePath(n.path),f.buildURLFromParts(n)):o;if(o=f.parseURL(v),!o)throw new Error("Error trying to parse base URL.");!o.netLoc&&o.path&&o.path[0]!=="/"&&(v=b.exec(o.path),o.netLoc=v[1],o.path=v[2]),o.netLoc&&!o.path&&(o.path="/");var u,v={scheme:o.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(v.netLoc=o.netLoc,n.path[0]!=="/"&&(n.path?(u=(u=o.path).substring(0,u.lastIndexOf("/")+1)+n.path,v.path=f.normalizePath(u)):(v.path=o.path,n.params||(v.params=o.params,n.query)||(v.query=o.query)))),v.path===null&&(v.path=a.alwaysNormalize?f.normalizePath(n.path):n.path),f.buildURLFromParts(v)},parseURL:function(s){return s=x.exec(s),s?{scheme:s[1]||"",netLoc:s[2]||"",path:s[3]||"",params:s[4]||"",query:s[5]||"",fragment:s[6]||""}:null},normalizePath:function(s){for(s=s.split("").reverse().join("").replace(g,"");s.length!==(s=s.replace(d,"")).length;);return s.split("").reverse().join("")},buildURLFromParts:function(s){return s.scheme+s.netLoc+s.path+s.params+s.query+s.fragment}};E.exports=f},{}],43:[function(k,E,ne){function x(o){try{var a=/vod(?:-product)?\.(\S+)\.aliyuncs\.com/.exec(o);return{value:!!a,region:a?a[1]:""}}catch{return{value:!1,region:""}}}function b(o){return(o||"").split("?")[0]}var g=k("../player/base/event/eventtype"),d=k("./url"),f="main",s="backup";E.exports.get=function(o,a,n,u,v){E.exports.ajax.call(this,"GET",o,{},a,n,u,v)},E.exports.post=function(o,a,n,u,v,h){var c={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};E.exports.ajax("POST",o,a,n,u,v,h,c)},E.exports.postWithHeader=function(o,a,n,u,v){E.exports.ajax("POST",o,a,u,v,!0,!1,n)},E.exports.ajax=function(o,a,n,u,v,h,c,_,m){var T,l,y,w,P=this,R=(m=m||{type:f,time:0},v=v||function(){},x(a)),C=R.value,R=R.region,A=a.replace("vod."+R+".aliyuncs.com","vod-product."+R+".aliyuncs.com");C&&P&&P._useBackupVodDomain&&(a=A),typeof XMLHttpRequest>"u"&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("This browser does not support XMLHttpRequest.")}),l=new XMLHttpRequest,R=d.parseUrl(a),y=window.location,R.protocol+R.host===y.protocol+y.host||!window.XDomainRequest||"withCredentials"in l?(T=R.protocol=="file:"||y.protocol=="file:",l.onreadystatechange=function(){if(l.readyState===4)if(B=(D=l).status,D=D.responseText,B=B===0||500<=B&&B<=599&&(D||"").indexOf("RequestId")===-1,w&&(clearTimeout(w),w=void 0),B||m.time!==0&&P&&typeof P.trigger=="function"&&(P._useBackupVodDomain=!0,P.trigger(g.Private.VodRequestExceptionResume,{url:b(a),status:l.status,response:l.status!==200?l.responseText:"",retryType:m.type,retryTime:m.time})),l.status===200||T&&l.status===0)u(l.responseText);else{if(B&&C&&m){if(P&&typeof P.trigger=="function"&&P.trigger(g.Private.VodRequestException,{url:b(a),status:l.status,response:l.responseText,retryType:m.type,retryTime:m.time}),m.type===f)return m.time<1?(m.time++,void setTimeout(function(){E.exports.ajax.call(P,o,a,n,u,v,h,c,_,m)},200)):(m.type=s,m.time=1,void setTimeout(function(){E.exports.ajax.call(P,o,A,n,u,v,h,c,_,m)},200));if(m.type===s){if(m.time<2)return m.time++,void setTimeout(function(){E.exports.ajax.call(P,o,A,n,u,v,h,c,_,m)},200);P&&(P._useBackupVodDomain=!1)}}v(l.responseText,l.status,l)}var D,B}):((l=new window.XDomainRequest).onload=function(){u(l.responseText)},l.onerror=v,l.onprogress=function(){},l.ontimeout=v);try{if(h===void 0&&(h=!0),l.open(o,a,h),c&&(l.withCredentials=!0),_)for(var I in _)_.hasOwnProperty(I)&&l.setRequestHeader(I,_[I])}catch(D){return void v(D)}try{x(a).value&&(w=setTimeout(function(){m.type===f?m.time=1:m.type===s&&(m.time=2),l.abort()},5e3)),l.send(n)}catch(D){v(D)}},E.exports.jsonp=function(o,a,n){var u="jsonp_callback_"+Math.round(1e5*Math.random()),v=document.createElement("script");o&&(v.src=o+(0<=o.indexOf("?")?"&":"?")+"callback="+u+"&cb="+u,v.onerror=function(){delete window[u],document.body.removeChild(v),n()},v.onload=function(){setTimeout(function(){window[u]&&(delete window[u],document.body.removeChild(v))},0)},window[u]=function(h){delete window[u],document.body.removeChild(v),a(h)},document.body.appendChild(v))},E.exports.loadJS=function(o,a,n){var u=document.getElementsByTagName("HEAD").item(0),v=document.createElement("script");v.setAttribute("crossorigin","anonymous"),o&&o.toLowerCase().indexOf("https://")<0&&o.toLowerCase().indexOf("http://")<0&&(o=document.URL.replace(/(\/[^\/]*?)$/i,"")+o),v.type="text/javascript",v.src=o,v.onload=function(){a&&a()},v.onerror=function(){n&&n()},u.appendChild(v)}},{"../player/base/event/eventtype":71,"./url":52}],44:[function(k,E,ne){var x=k("./dom");E.exports.render=function(b,s){var d=s.align||(s.className?"":"tl"),f=s.x||0,s=s.y||0,o=f.indexOf&&0<f.indexOf("%")?"":"px",a=s.indexOf&&0<s.indexOf("%")?"":"px";d==="tl"?x.css(b,{float:"left","margin-left":f+o,"margin-top":s+a}):d==="tr"?x.css(b,{float:"right","margin-right":f+o,"margin-top":s+a}):d==="tlabs"?x.css(b,{position:"absolute",left:f+o,top:s+a}):d==="trabs"?x.css(b,{position:"absolute",right:f+o,top:s+a}):d==="blabs"?x.css(b,{position:"absolute",left:f+o,bottom:s+a}):d==="brabs"?x.css(b,{position:"absolute",right:f+o,bottom:s+a}):d==="cc"&&x.addClass(b,"loading-center")}},{"./dom":35}],45:[function(k,E,ne){var x=Object.prototype.hasOwnProperty;E.exports.create=Object.create||function(b){function g(){}return g.prototype=b,new g},E.exports.isArray=function(b){return Object.prototype.toString.call(arg)==="[object Array]"},E.exports.isEmpty=function(b){for(var g in b)if(b[g]!==null)return!1;return!0},E.exports.each=function(b,g,d){if(E.exports.isArray(b))for(var f=0,s=b.length;f<s&&g.call(d||this,b[f],f)!==!1;++f);else for(var o in b)if(x.call(b,o)&&g.call(d||this,o,b[o])===!1)break;return b},E.exports.merge=function(b,g){if(g)for(var d in g)x.call(g,d)&&(b[d]=g[d]);return b},E.exports.deepMerge=function(b,g){var d,f,s;for(d in b=E.exports.copy(b),g)x.call(g,d)&&(f=b[d],s=g[d],E.exports.isPlain(f)&&E.exports.isPlain(s)?b[d]=E.exports.deepMerge(f,s):b[d]=g[d]);return b},E.exports.copy=function(b){return E.exports.merge({},b)},E.exports.isPlain=function(b){return!!b&&typeof b=="object"&&b.toString()==="[object Object]"&&b.constructor===Object},E.exports.isArray=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},E.exports.unescape=function(b){return b.replace(/&([^;]+);/g,function(g,d){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[d.toLowerCase()]||g})}},{}],46:[function(k,E,ne){var x,b=k("./object");(x=function(){}).extend=function(g){var d,f,s=(g=g||{}).init||g.init||this.prototype.init||this.prototype.init||function(){};for(f in(((d=function(){s.apply(this,arguments)}).prototype=b.create(this.prototype)).constructor=d).extend=x.extend,d.create=x.create,g)g.hasOwnProperty(f)&&(d.prototype[f]=g[f]);return d},x.create=function(){var g=b.create(this.prototype);return this.apply(g,arguments),g},E.exports=x},{"./object":45}],47:[function(k,E,ne){var x=!new Function("try {return this===window;}catch(e){ return false;}")();E.exports.isSSR=x},{}],48:[function(k,E,ne){var x=k("./object"),b=k("../config"),g=k("./dom"),d=k("./cookie"),f=k("./constants"),s=k("../lang/index"),o=k("./ua"),a=k("./io"),n=k("../player/base/plugin/defaultemptycomponent"),u=k("./hardware-decoding-detector"),v={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px ",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!0,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+b.domain+"/de/prismplayer-flash/"+b.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:o.IS_PC,clickPauseDelay:200,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:"",watchStartTime:void 0,watchEndTime:void 0,start:void 0,end:void 0,dbClickFullscreen:o.IS_PC,enableHlsH265:!1},h=(E.exports.getDefaultH5Layout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},E.exports.getDefaultAudioLayout=function(){return[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]},E.exports.getDefaultFlashLayout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},E.exports.canPlayType=function(c){var _=document.createElement("video");return _.canPlayType?_.canPlayType(c):""},E.exports.canPlayHls=function(){return E.exports.canPlayType("application/x-mpegURL")!=""},E.exports.isUsedHlsPluginOnMobile=function(c){return!!(o.IS_MOBILE&&(o.IS_CHROME||o.IS_FIREFOX||o.IS_X5||o.IS_EDGE_NEW)&&E.exports.isSupportHls())},E.exports.isSafariUsedHlsPlugin=function(c){return!!(o.os.pc&&o.browser.safari&&c)},E.exports.validateSource=function(c){return!0},E.exports.supportH5Video=function(){return document.createElement("video").canPlayType!==void 0},E.exports.createWrapper=function(c){var _=c.id,_=typeof _=="string"?(_.indexOf("#")===0&&(_=_.slice(1)),g.el(_)):_;if(_&&_.nodeName)return E.exports.adjustContainerLayout(_,c),_;throw new TypeError("")},E.exports.adjustContainerLayout=function(c,_){_.width&&!c.style.width&&(c.style.width=_.width),_.height&&!c.style.height&&(c.style.height=_.height)},E.exports.isSupportHls=function(){var c=window.MediaSource=window.MediaSource||window.WebKitMediaSource,_=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,c=c&&typeof c.isTypeSupported=="function"&&c.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),_=(o.IS_ANDROID&&o.is_X5&&(c=!0),!_||_.prototype&&typeof _.prototype.appendBuffer=="function"&&typeof _.prototype.remove=="function");return c&&_},E.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},E.exports.isSupportFlv=function(){return E.exports.isSupportHls()},E.exports.isSupportMSE=function(){return E.exports.isSupportHls()||E.exports.isSupportMMS()},E.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},E.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&E.exports.isSupportMSE()},E.exports.isAudio=function(c,_){if(_)return E.exports.isMp3Format(_);_=!1;try{_=c&&new URL("http:"+c).pathname.split(".").pop().toLowerCase()==="mp3"}catch{return c&&0<c.toLowerCase().indexOf(".mp3")}return _},E.exports.isLiveShift=function(c){return c.isLive&&c.liveStartTime&&c.liveOverTime},E.exports.isHls=function(c,_){if(_)return E.exports.isHlsFormat(_);_=!1;try{_=c&&new URL("http:"+c).pathname.split(".").pop().toLowerCase()==="m3u8"}catch{return c&&0<c.toLowerCase().indexOf(".m3u8")}return _},E.exports.isDash=function(c,_){if(_)return E.exports.isDashFormat(_);_=!1;try{_=c&&new URL("http:"+c).pathname.split(".").pop().toLowerCase()==="mpd"}catch{return c&&0<c.toLowerCase().indexOf(".mpd")}return _},E.exports.isFlv=function(c,_){if(_)return E.exports.isFlvFormat(_);_=!1;try{_=c&&new URL("http:"+c).pathname.split(".").pop().toLowerCase()==="flv"}catch{return c&&0<c.toLowerCase().indexOf(".flv")}return _},E.exports.isRTMP=function(c){return c&&-1<c.toLowerCase().indexOf("rtmp:")},E.exports.isRts=function(c){return c&&-1<c.toLowerCase().indexOf("artc:")},E.exports.isMp4=function(c,_){if(_)return E.exports.isMp4Format(_);_=!1;try{_=c&&new URL("http:"+c).pathname.split(".").pop().toLowerCase()==="mp4"}catch{return c&&-1<c.toLowerCase().indexOf(".mp4")}return _},E.exports.isSupportedFormat=function(c){if(!c)return!1;try{var _=c.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(_)}catch{return!1}},E.exports.isMp3Format=function(c){if(!c)return!1;try{var _=c.toLowerCase();return~["mp3"].indexOf(_)}catch{return!1}},E.exports.isMp4Format=function(c){if(!c)return!1;try{var _=c.toLowerCase();return~["mp4"].indexOf(_)}catch{return!1}},E.exports.isFlvFormat=function(c){if(!c)return!1;try{var _=c.toLowerCase();return~["flv"].indexOf(_)}catch{return!1}},E.exports.isHlsFormat=function(c){if(!c)return!1;try{var _=c.toLowerCase();return~["hls","m3u8"].indexOf(_)}catch{return!1}},E.exports.isDashFormat=function(c){if(!c)return!1;try{var _=c.toLowerCase();return~["mpd"].indexOf(_)}catch{return!1}},E.exports.getFormat=function(m){var _={artc:"rts",m3u8:"hls"},m=(m=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(m))==null?void 0:m[0];return m=m&&m.replace(/\.|:|artc|m3u8/gi,function(T){return _[T]||""})},E.exports.checkSecuritSupport=function(){return E.exports.isSupportMSE()?o.IS_IOS&&(o.IS_UC||o.IS_QUARK||o.IS_BAIDU)?s.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:location.protocol==="http:"?s.get("Error_SW_Https_required"):s.get("UseChromeForVodEncription")+"(SW not found)"},E.exports.nativeSupportH265=function(){return o.IS_IOS||o.IS_MAC_SAFARI},E.exports.findSelectedStreamLevel=function(c,_){var m=_;if(m||(m=d.get(f.SelectedStreamLevel))){for(var T=0;T<c.length;T++)if(c[T].definition==m)return T}else d.set(f.SelectedStreamLevel,c[0].definition,365);return 0},E.exports.getHistoryDetectResult=function(c,_){if(c)return _=_==="hls",c==="hvc1"?_?d.get(f.HWDetectHvc1Hls):d.get(f.HWDetectHvc1):c==="hev1"?_?d.get(f.HWDetectHev1Hls):d.get(f.HWDetectHev1):void 0},E.exports.setHistoryDetectResult=function(c,l,m){var T="unknownCodec",l=l==="hls";c==="hvc1"?T=l?f.HWDetectHvc1Hls:f.HWDetectHvc1:c==="hev1"&&(T=l?f.HWDetectHev1Hls:f.HWDetectHev1),d.set(T,m)},E.exports.handleOption=function(c,_){E.exports.isRts(c.source)&&(c.isLive=!0);var m,T=x.merge(x.copy(v),c),l=(c.autoplayPolicy&&(T.autoplayPolicy=x.merge(v.autoplayPolicy,c.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]),y=!1;if(c.useFlashPrism||E.exports.isRTMP(c.source)?(y=!0,l=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(m=E.exports.isLiveShift(T))?(l.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),l.push({name:"playButton",align:"tl",x:15,y:12}),l.push({name:"liveDisplay",align:"tl",x:15,y:6})):l.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),c.isLive){if(c.skinLayout===void 0)T.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:E.exports.isRts(c.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:l}];else if(c.skinLayout!=0){for(var w=c.skinLayout.length,P=[],C=-1,R=0;R<w;R++)if(T.skinLayout[R].name=="controlBar"){for(var C=R,A=T.skinLayout[R].children.length,I=0;I<A;I++){var D,B=T.skinLayout[R].children[I].name;B!="liveDisplay"&&B!="liveIco"&&B!="fullScreenButton"&&B!="volume"&&B!="snapshot"&&B!="setting"&&B!="subtitle"&&(!m||B!="progress"&&B!="playButton"&&B!="timeDisplay")||(D=T.skinLayout[R].children[I],B=="progress"?D.name="liveShiftProgress":B=="timeDisplay"?D.name="liveShiftTimeDisplay":y&&B=="liveDisplay"&&(D.name="liveIco"),P.push(D))}break}C!=-1&&(T.skinLayout[C].children=P)}}return(c.components===void 0||!c.components||x.isArray(c.components)&&c.components.length==0)&&c.components!="false"&&(T.components=[n]),T},E.exports.ignoreSkinLayouts=function(c,_){var m;if(_!=null&&_.length&&c!=null&&c.length)return m=c,_.forEach(function(T){var l,y,w;-1<T.indexOf(".")?(w=T.split("."),l=w[0],y=w[1],(w=m.find(function(P){return P.name===l}))&&(w.children=w.children.filter(function(P){return P.name!==y}))):m=m.filter(function(P){return P.name!==T})}),m},E.exports.getLiveHostByRegion=function(c){var _="live.aliyuncs.com";return c&&-1<["ap-southeast-1","eu-central-1"].indexOf(c)?"live."+c+".aliyuncs.com":_},E.exports.isVideoTag=function(c){return c&&typeof c.nodeName=="string"&&c.nodeName.toLowerCase()==="video"},E.exports.unqiueTextTracks=function(c){var _=[],_=(c=c===void 0?[]:c).reduce(function(T,l){var y;return T.some(function(w){return w.srclang===l.srclang})?T:((y=l).label=l.label||l.srclang,[].concat(T,[y]))},[]),m={};return _.forEach(function(T,l){m[T.label]?m[T.label].push(l):m[T.label]=[l]}),Object.keys(m).forEach(function(T){T=m[T]||[],1<T.length&&T.forEach(function(l){_[l].label=_[l].label+"("+_[l].srclang+")"})}),_},E.exports.isHvc1Codec=function(c){return-1<(c=c===void 0?"":c).indexOf("hvc1")},E.exports.isHev1Codec=function(c){return-1<(c=c===void 0?"":c).indexOf("hev1")},E.exports.isVvccCodec=function(c){return-1<(c=c===void 0?"":c).indexOf("vvcC")},E.exports.isVvc1Codec=function(c){return-1<(c=c===void 0?"":c).indexOf("vvc1")},E.exports.isH265Codec=function(c){return E.exports.isHvc1Codec(c=c===void 0?"":c)||E.exports.isHev1Codec(c)},E.exports.isH266Codec=function(c){return E.exports.isVvccCodec(c=c===void 0?"":c)||E.exports.isVvc1Codec(c)},E.exports.isH264Codec=function(c){return-1<(c=c===void 0?"":c).indexOf("avc1")},E.exports.getVideoTrack=function(c){var _;return(c=c===void 0?[]:c).forEach(function(m){Number(m.type)===1&&(_=m)}),_},o.IS_ANDROID&&(o.dingTalk()||o.IS_UC||o.is_X5||o.IS_HUAWEI||o.IS_XIAOMI||o.IS_OPPO||o.IS_VIVO||o.IS_MEIZU||o.IS_SAMSUNG||o.IS_WEBVIEW)||o.os&&o.os.name==="windows"&&o.IS_UC);E.exports.shouldUseBasePlayer=function(w,_){var m,T,l,y=w.codecTag,w=w.url,P="supported",C="unsupported";return!y||(l=E.exports.isHvc1Codec(y),m=E.exports.isMp4(w),w=E.exports.isHls(w),m&&E.exports.nativeSupportH265()&&l)||m&&function(){if(!(!h&&(o.IS_CHROME||o.IS_EDGE_NEW)))return!1;var R=0;try{R=o.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch{R=0}return!(parseInt(R)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))}()?_(!0):h?(l=E.exports.getHistoryDetectResult(y,T=w?"hls":"mp4"))===P?_(!0):l===C?_(!1):void u({codecTags:[y],format:T,timeout:2e3}).then(function(R){if(R=R.isHev1Supported||R.isHvc1Supported,E.exports.setHistoryDetectResult(y,T,R?P:C),R)return _(!0);_(!1)}).catch(function(R){console.log("hevcDetector ERROR",R),_(!1)}):_(!1)},E.exports.parseHttpHeaders=function(c){if(c){var _={};try{c instanceof Response?c.headers.forEach(function(m,T){_[T]=m}):c.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(l){var l=l.split(": "),T=l.shift(),l=l.join(": ");_[T]=l})}catch{}return _}},E.exports.detectRegionBlock=function(c,_){a.get(c,function(){_(!1)},function(m,T,l){l=E.exports.parseHttpHeaders(l)["x-tengine-error"],T===403&&l&&-1<f.RegionBlockMessages.indexOf(l)?_(!0):_(!1)})},E.exports.drawSnapshotText=function(c,_){_=_.snapshotWatermark,_&&_.text&&(c.font=_.font,_.fillColor&&(c.fillStyle=_.fillColor,c.fillText(_.text,_.left,_.top)),_.strokeColor&&(c.strokeStyle=_.strokeColor,c.strokeText(_.text,_.left,_.top)),c.stroke())},E.exports.hasValue=function(c){return c!=null&&c!==""}},{"../config":15,"../lang/index":26,"../player/base/plugin/defaultemptycomponent":95,"./constants":31,"./cookie":32,"./dom":35,"./hardware-decoding-detector":39,"./io":43,"./object":45,"./ua":51}],49:[function(k,E,ne){var x=k("./object"),b=k("../player/adaptiveplayer"),g=k("./constants").USER_EVENT_NAME;E.exports.reloadInstance=function(u,f,s){var o=s,a=(o.dispose(),u.readyCallback),n=u._readyCallbackCalled,u=b.create(u,function(v){f(v),n||a(v)});E.exports.restoreUserEvents(s,u),E.exports.removeAllProps(o),(o.__proto__=u)[g]=o[g]},E.exports.storeUserEvents=function(d){var f=d,s=f.__proto__.on,o={};f.on=function(a,n){typeof n=="function"&&(o[a]?o[a].push(n):o[a]=[n],this._el)&&(n.binded=!0,s.call(f,a,n))},f[g]=o},E.exports.restoreUserEvents=function(d,f){var s=d[g];s&&x.each(s,function(o){s[o].forEach(function(a){f.on(o,a)})})},E.exports.removeAllProps=function(d,f){for(var s in f=[].concat(f=f||[],[g]),d)d.hasOwnProperty(s)&&f.indexOf(s)===-1&&delete d[s]}},{"../player/adaptiveplayer":68,"./constants":31,"./object":45}],50:[function(k,E,ne){E.exports.set=function(x,b){try{window.localStorage&&localStorage.setItem(x,b)}catch{window[x+"_localStorage"]=b}},E.exports.get=function(x){try{if(window.localStorage)return localStorage.getItem(x)}catch{return window[x+"_localStorage"]}return""}},{}],51:[function(k,E,ne){var x,b,g,d;if(E.exports.USER_AGENT=navigator.userAgent,E.exports.IS_IPHONE=/iPhone/i.test(E.exports.USER_AGENT),E.exports.IS_IPAD=/iPad/i.test(E.exports.USER_AGENT),E.exports.IS_IPOD=/iPod/i.test(E.exports.USER_AGENT),E.exports.IS_MAC=/mac/i.test(E.exports.USER_AGENT),E.exports.IS_EDGE=/Edge/i.test(E.exports.USER_AGENT),E.exports.IS_EDGE_NEW=/Edg/i.test(E.exports.USER_AGENT)&&!E.exports.IS_EDGE,E.exports.IS_IE11=/Trident\/7.0/i.test(E.exports.USER_AGENT),E.exports.IS_X5=/qqbrowser/i.test(E.exports.USER_AGENT.toLowerCase()),E.exports.IS_CHROME=/Chrome/i.test(E.exports.USER_AGENT)&&!E.exports.IS_EDGE&&!E.exports.IS_EDGE_NEW&&!E.exports.IS_X5,E.exports.IS_SAFARI=/Safari/i.test(E.exports.USER_AGENT)&&!E.exports.IS_CHROME&&!E.exports.IS_EDGE_NEW,E.exports.IS_FIREFOX=/Firefox/i.test(E.exports.USER_AGENT),E.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(E.exports.USER_AGENT),E.exports.IS_QUARK=/Quark/i.test(E.exports.USER_AGENT),E.exports.IS_HUAWEI=/HuaweiBrowser/i.test(E.exports.USER_AGENT),E.exports.IS_XIAOMI=/MiuiBrowser/i.test(E.exports.USER_AGENT),E.exports.IS_OPPO=/HeyTapBrowser/i.test(E.exports.USER_AGENT),E.exports.IS_VIVO=/VivoBrowser/i.test(E.exports.USER_AGENT),E.exports.IS_MEIZU=/MZBrowser/i.test(E.exports.USER_AGENT),E.exports.IS_SAMSUNG=/samsungbrowser/i.test(E.exports.USER_AGENT),E.exports.IS_BAIDU=/baiduboxapp/i.test(E.exports.USER_AGENT),document.all)try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");E.exports.HAS_FLASH=!!f}catch{E.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(f=navigator.plugins["Shockwave Flash"],E.exports.HAS_FLASH=!!f):E.exports.HAS_FLASH=!1;E.exports.IS_MAC_SAFARI=E.exports.IS_MAC&&E.exports.IS_SAFARI&&!E.exports.IS_CHROME&&!E.exports.HAS_FLASH,E.exports.IS_IOS=E.exports.IS_IPHONE||E.exports.IS_IPAD||E.exports.IS_IPOD,E.exports.IOS_VERSION=function(){var s=E.exports.USER_AGENT.match(/OS (\d+)_/i);if(s&&s[1])return s[1]}(),E.exports.IOS_FULL_VERSION=function(){var s=E.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(s&&s[1]&&s[2])return s[1]+"."+s[2]}(),E.exports.IS_HARMONY=/OpenHarmony/i.test(E.exports.USER_AGENT),E.exports.IS_ANDROID=/Android/i.test(E.exports.USER_AGENT)||E.exports.IS_HARMONY,E.exports.ANDROID_VERSION=(f=E.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(b=f[1]&&parseFloat(f[1]),x=f[2]&&parseFloat(f[2]),b&&x?parseFloat(f[1]+"."+f[2]):b||null):null,E.exports.IS_OLD_ANDROID=E.exports.IS_ANDROID&&/webkit/i.test(E.exports.USER_AGENT)&&E.exports.ANDROID_VERSION<2.3,E.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),E.exports.IS_MOBILE=E.exports.IS_IOS||E.exports.IS_ANDROID,E.exports.IS_H5=E.exports.IS_MOBILE||!E.exports.HAS_FLASH,E.exports.IS_PC=!E.exports.IS_MOBILE,E.exports.is_X5=/micromessenger/i.test(E.exports.USER_AGENT)||/qqbrowser/i.test(E.exports.USER_AGENT),E.exports.IS_ANDROID_FIREFOX=E.exports.IS_ANDROID&&E.exports.IS_FIREFOX,E.exports.CHROME_VERSION=E.exports.IS_CHROME&&E.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],E.exports.getHost=function(s){var o,a,n="";return s===void 0||s==null||s==""?"":(o=s.indexOf("//"),a=s,n=a=-1<o?s.substring(o+2):a,(s=(n=(s=a.split("/"))&&0<s.length?s[0]:n).split(":"))&&0<s.length?s[0]:n)},E.exports.dingTalk=function(){var s=E.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(s)},E.exports.IS_DINGTALK=E.exports.dingTalk(),E.exports.wechat=function(){var s=E.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(s)},E.exports.inIFrame=function(){return self!=top},E.exports.getReferer=function(){var s=document.referrer;if(E.exports.inIFrame())try{s=top.document.referrer}catch{s=document.referrer}return s},E.exports.getHref=function(){if(E.exports.inIFrame())try{top.location.href}catch{}return location.href},E.exports.check360=function(){return navigator.userAgent.indexOf("Safari")!=-1?function(){var s=navigator.userAgent.split(" ");if(s[s.length-1].indexOf("Safari")!=-1){for(var o in navigator.plugins)if(navigator.plugins[o].filename=="np-mswmp.dll")return!0}return!1}():(navigator.msPointerEnabled==null||navigator.msPointerEnabled)&&(navigator.msDoNotTrack==1||window.doNotTrack==1)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(navigator.userAgent.indexOf("MSIE 7.0")!=-1||navigator.userAgent.indexOf("MSIE 8.0")!=-1)&&console.count==null)},x=E.exports,(function(s,l){var a=this.os={},n=this.browser={},u=s.match(/Web[kK]it[\/]{0,1}([\d.]+)/),v=s.match(/(Android);?[\s\/]+([\d.]+)?/),h=!!s.match(/\(Macintosh\; Intel /),c=s.match(/(iPad).*OS\s([\d_]+)/),_=s.match(/(iPod)(.*OS\s([\d_]+))?/),m=!c&&s.match(/(iPhone\sOS)\s([\d_]+)/),T=s.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=/Win\d{2}|Windows/.test(l),y=s.match(/Windows Phone ([\d.]+)/),w=T&&s.match(/TouchPad/),P=s.match(/Kindle\/([\d.]+)/),C=s.match(/Silk\/([\d._]+)/),R=s.match(/(BlackBerry).*Version\/([\d.]+)/),A=s.match(/(BB10).*Version\/([\d.]+)/),I=s.match(/(RIM\sTablet\sOS)\s([\d.]+)/),D=s.match(/PlayBook/),B=s.match(/Chrome\/([\d.]+)/)||s.match(/CriOS\/([\d.]+)/),N=s.match(/Firefox\/([\d.]+)/),U=s.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),J=s.match(/MSIE\s([\d.]+)/)||s.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),q=!B&&s.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),j=q||s.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!u)&&(n.version=u[1]),v&&(a.android=!0,a.version=v[2]),m&&!_&&(a.ios=a.iphone=!0,a.version=m[2].replace(/_/g,".")),c&&(a.ios=a.ipad=!0,a.version=c[2].replace(/_/g,".")),_&&(a.ios=a.ipod=!0,a.version=_[3]?_[3].replace(/_/g,"."):null),y&&(a.wp=!0,a.version=y[1]),T&&(a.webos=!0,a.version=T[2]),w&&(a.touchpad=!0),R&&(a.blackberry=!0,a.version=R[2]),A&&(a.bb10=!0,a.version=A[2]),I&&(a.rimtabletos=!0,a.version=I[2]),D&&(n.playbook=!0),P&&(a.kindle=!0,a.version=P[1]),C&&(n.silk=!0,n.version=C[1]),!C&&a.android&&s.match(/Kindle Fire/)&&(n.silk=!0),B&&(n.chrome=!0,n.version=B[1]),N&&(n.firefox=!0,n.version=N[1]),U&&(a.firefoxos=!0,a.version=U[1]),J&&(n.ie=!0,n.version=J[1]),j&&(h||a.ios||l||v)&&(n.safari=!0,a.ios||a.android||(n.version=j[1])),a.ios&&(n.version=a.version),q&&(n.webview=!0),h&&((u=s.match(/[\d]*_[\d]*_[\d]*/))&&0<u.length&&u[0]&&(a.version=u[0].replace(/_/g,".")),/MQBHD/.test(s))&&(n.version=((s.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),a.tablet=!!(c||D||v&&!s.match(/Mobile/)||N&&s.match(/Tablet/)||J&&!s.match(/Phone/)&&s.match(/Touch/)),a.phone=!(a.tablet||a.ipod||!(v||m||T||R||A||B&&s.match(/Android/)||B&&s.match(/CriOS\/([\d.]+)/)||N&&s.match(/Mobile/)||J&&s.match(/Touch/))),a.pc=!a.tablet&&!a.phone,h?a.name="macOS":l?(a.name="windows",a.version=function(){var F=navigator.userAgent,z="";return(-1<F.indexOf("Windows NT 5.0")||-1<F.indexOf("Windows 2000"))&&(z="2000"),(-1<F.indexOf("Windows NT 5.1")||-1<F.indexOf("Windows XP"))&&(z="XP"),(-1<F.indexOf("Windows NT 5.2")||-1<F.indexOf("Windows 2003"))&&(z="2003"),(-1<F.indexOf("Windows NT 6.0")||-1<F.indexOf("Windows Vista"))&&(z="Vista"),(-1<F.indexOf("Windows NT 6.1")||-1<F.indexOf("Windows 7"))&&(z="7"),(-1<F.indexOf("Windows NT 6.2")||-1<F.indexOf("Windows 8"))&&(z="8"),(-1<F.indexOf("Windows NT 6.3")||-1<F.indexOf("Windows 8.1"))&&(z="8.1"),(-1<F.indexOf("Windows NT 10")||-1<F.indexOf("Windows 10"))&&(z="10"),z}()):a.name=function(){var F=navigator.userAgent,z="other",K=E.exports.os;return K.ios?"iOS":K.android?"android":-1<F.indexOf("Baiduspider")?"Baiduspider":-1<F.indexOf("PlayStation")?"PS4":(K=navigator.platform=="Win32"||navigator.platform=="Windows"||-1<F.indexOf("Windows"),F=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel",F&&(z="macOS"),navigator.platform!="X11"||K||F||(z="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(z="Linux"),K?"windows":z)}(),n.name=(_=navigator.userAgent.toLowerCase(),(y=E.exports.browser).firefox?"Firefox":y.ie?/edge/.test(_)?"Edge":"IE":E.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(_)?"":/qqbrowser/.test(_)?"QQ":E.exports.IS_UC?"UC":E.exports.IS_QUARK?"Quark":E.exports.IS_DINGTALK?"Dingtalk":E.exports.IS_HUAWEI?"HuaweiBrowser":E.exports.IS_XIAOMI?"MiBrowser":E.exports.IS_OPPO?"OppoBrowser":E.exports.IS_VIVO?"VivoBrowser":E.exports.IS_MEIZU?"MeizuBrowser":E.exports.IS_SAMSUNG?"SamsungBrowser":E.exports.IS_WEBVIEW||/MQBHD/.test(_)?"webview":y.chrome?"Chrome":y.safari?"Safari":/baiduspider/.test(_)?"Baiduspider":/opera/.test(_)?"Opera":/360se/.test(_)?"360":/bidubrowser/.test(_)?"":/metasr/.test(_)?"":/lbbrowser/.test(_)?"":/playstation/.test(_)?"PS4":void 0)}).call(x,navigator.userAgent,navigator.platform),E.exports.IS_WEBVIEW=(b=E.exports.USER_AGENT,g=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),d=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!b.match(g)&&!b.match(d))},{}],52:[function(k,E,ne){var x=k("./dom");E.exports.getAbsoluteURL=function(b){return b=b.match(/^https?:\/\//)?b:x.createEl("div",{innerHTML:'<a href="'+b+'">x</a>'}).firstChild.href},E.exports.parseUrl=function(b){var g,d=["protocol","hostname","port","pathname","search","hash","host"],f=x.createEl("a",{href:b}),s=f.host===""&&f.protocol!=="file:";s&&((g=x.createEl("div")).innerHTML='<a href="'+b+'"></a>',f=g.firstChild,g.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(g));for(var o={},a=0;a<d.length;a++)o[d[a]]=f[d[a]];return o.segments=f.pathname.replace(/^\//,"").split("/"),s&&document.body.removeChild(g),o}},{"./dom":35}],53:[function(k,E,ne){var x=k("./dom"),b=k("./ua"),g=k("./playerutil");E.exports.formatTime=function(s){s=Math.max(0,s||0);var f,s=Math.floor(s),o=Math.floor(s/3600);return s%=3600,f=Math.floor(s/60),s=s%60,!(o===1/0||isNaN(o)||f===1/0||isNaN(f)||s==1/0||isNaN(s))&&((o=10<=o?o:"0"+o)==="00"?"":o+":")+(10<=f?f:"0"+f)+":"+(10<=s?s:"0"+s)},E.exports.extractTime=function(d){var f;return d?((f=10<=(f=parseInt(d.getHours()))?f:"0"+f)==="00"?"":f+":")+(f=10<=(f=parseInt(d.getMinutes()))?f:"0"+f)+":"+(f=10<=(f=parseInt(d.getSeconds()))?f:"0"+f):""},E.exports.convertToTimestamp=function(d,f){var s="";return d&&(f?s=d.gettime():(s=Date.parse(d),s/=1e3)),s},E.exports.convertToDate=function(d,f){var s="";return d&&(s=new Date).setTime(1e3*d),s},E.exports.parseTime=function(d){var f,s,o;return d?(o=s=f=0,(d=d.split(":")).length===3?(f=d[0],s=d[1],o=d[2]):d.length===2?(s=d[0],o=d[1]):d.length===1&&(o=d[0]),3600*(f=parseInt(f,10))+60*(s=parseInt(s,10))+(o=Math.ceil(parseFloat(o)))):"00:00:00"},E.exports.formatDate=function(d,f){var s,o={"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),S:d.getMilliseconds()};for(s in/(y+)/.test(f)&&(f=f.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+s+")").test(f)&&(f=f.replace(RegExp.$1,RegExp.$1.length==1?o[s]:("00"+o[s]).substr((""+o[s]).length)));return f},E.exports.sleep=function(d){},E.exports.htmlEncodeAll=function(d){return d==null?"":d.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},E.exports.toBinary=function(d){if(!window.atob)return"";for(var f=atob(d),s=f.length,o=new Uint8Array(s),a=0;a<s;a++)o[a]=f.charCodeAt(a);return o},E.exports.readyBinary=function(d){for(var f=new Uint8Array(d),s=f.length,o="",a=0;a<s;a++)o+=f[a];return o},E.exports.delayHide=function(d,f){d&&(f===void 0&&(f=1e3),d.delayHanlder&&clearTimeout(d.delayHanlder),d.delayHanlder=setTimeout(function(){x.css(d,"display","none")},f))},E.exports.openInFile=function(){return window.location.protocol.toLowerCase().indexOf("file")!=-1},E.exports.contentProtocolMixed=function(d,f,s){return!!((b.os.pc&&(g.isHls(d,s)&&!b.browser.safari||g.isFlv(d,s))||f)&&window.location.protocol.toLowerCase()=="https:"&&d&&-1<d.toLowerCase().indexOf("http://"))},E.exports.queryString=function(d){var f,s,o;return(d=(d=decodeURIComponent(d)).split("?")).length===2&&(d=d[1],f=d.split("&"))?(s={},o=0,$(f).each(function(){var a=f[o].split("=");a.length===2&&(s[a[0]]=a[1].replace(/\+/g," ")),o++}),s):{}},E.exports.log=function(d){var f=window.location.href,f=E.exports.queryString(f);f&&f.debug==1&&console.log(d)},E.exports.arrayBufferToB64=function(d){for(var f="",s=new Uint8Array(d),o=s.byteLength,a=0;a<o;a++)f+=String.fromCharCode(s[a]);return window.btoa(f)},E.exports.b64ToArrayBuffer=function(d){for(var f=atob(d),s=new Uint8Array(f.length),o=0;o<f.length;o++)s[o]=f.charCodeAt(o);return s.buffer},E.exports.throttle=function(d,f){var s=null,o=0;return function(){for(var a=this,n=arguments.length,u=new Array(n),v=0;v<n;v++)u[v]=arguments[v];var h=Date.now(),c=f-(h-o);c<=0?(d.apply(this,u),o=h):(clearTimeout(s),s=setTimeout(function(){d.apply(a,u),o=Date.now()},c))}}},{"./dom":35,"./playerutil":48,"./ua":51}],54:[function(k,E,ne){var x,b=typeof Promise>"u"?k("es6-promise").Promise:Promise;k=this,x=function(){return d={307:function(o,it,H){o=H.nmd(o);var u="__lodash_hash_undefined__",v=1,h=2,c=9007199254740991,_="[object Arguments]",m="[object Array]",T="[object AsyncFunction]",l="[object Boolean]",y="[object Date]",w="[object Error]",P="[object Function]",C="[object GeneratorFunction]",R="[object Map]",A="[object Number]",I="[object Object]",D="[object Promise]",B="[object Proxy]",N="[object RegExp]",U="[object Set]",J="[object String]",q="[object WeakMap]",j="[object ArrayBuffer]",F="[object DataView]",z=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,L={},H=(L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[_]=L[m]=L[j]=L[l]=L[F]=L[y]=L[w]=L[P]=L[R]=L[A]=L[I]=L[N]=L[U]=L[J]=L[q]=!1,typeof H.g=="object"&&H.g&&H.g.Object===Object&&H.g),At=typeof self=="object"&&self&&self.Object===Object&&self,At=H||At||Function("return this")(),it=it&&!it.nodeType&&it,Pt=it&&o&&!o.nodeType&&o,Pt=Pt&&Pt.exports===it,O=Pt&&H.process,it=function(){try{return O&&O.binding&&O.binding("util")}catch{}}(),H=it&&it.isTypedArray;function te(se){var pe=-1,Te=Array(se.size);return se.forEach(function(Ve,st){Te[++pe]=[st,Ve]}),Te}function le(se){var pe=-1,Te=Array(se.size);return se.forEach(function(Ve){Te[++pe]=Ve}),Te}var me,Pe,it=Array.prototype,Ee=Function.prototype,xe=Object.prototype,Ut=At["__core-js_shared__"],be=Ee.toString,Oe=xe.hasOwnProperty,re=(Ee=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||""))?"Symbol(src)_1."+Ee:"",ee=xe.toString,Me=RegExp("^"+be.call(Oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=Pt?At.Buffer:void 0,Ee=At.Symbol,qe=At.Uint8Array,rt=xe.propertyIsEnumerable,ot=it.splice,lt=Ee?Ee.toStringTag:void 0,Lt=Object.getOwnPropertySymbols,Pt=Ut?Ut.isBuffer:void 0,it=(me=Object.keys,Pe=Object,He(At,"DataView")),Ht=He(At,"Map"),Ut=He(At,"Promise"),zt=He(At,"Set"),At=He(At,"WeakMap"),Ot=He(Object,"create"),ar=ue(it),sr=ue(Ht),ir=ue(Ut),jt=ue(zt),ve=ue(At),Ee=Ee?Ee.prototype:void 0,De=Ee?Ee.valueOf:void 0;function V(se){var pe=-1,Te=se==null?0:se.length;for(this.clear();++pe<Te;){var Ve=se[pe];this.set(Ve[0],Ve[1])}}function ae(se){var pe=-1,Te=se==null?0:se.length;for(this.clear();++pe<Te;){var Ve=se[pe];this.set(Ve[0],Ve[1])}}function de(se){var pe=-1,Te=se==null?0:se.length;for(this.clear();++pe<Te;){var Ve=se[pe];this.set(Ve[0],Ve[1])}}function Y(se){var pe=-1,Te=se==null?0:se.length;for(this.__data__=new de;++pe<Te;)this.add(se[pe])}function ie(se){se=this.__data__=new ae(se),this.size=se.size}function _e(se,pe){var Te,Ve,st,Xe=je(se),yt=!Xe&&Re(se),vt=!Xe&&!yt&&Ze(se),bt=!Xe&&!yt&&!vt&&nt(se),dt=Xe||yt||vt||bt,pt=dt?function(Tt,ct){for(var at=-1,St=Array(Tt);++at<Tt;)St[at]=ct(at);return St}(se.length,String):[],ye=pt.length;for(Te in se)!pe&&!Oe.call(se,Te)||dt&&(Te=="length"||vt&&(Te=="offset"||Te=="parent")||bt&&(Te=="buffer"||Te=="byteLength"||Te=="byteOffset")||(Ve=Te,(st=(st=ye)==null?c:st)&&(typeof Ve=="number"||K.test(Ve))&&-1<Ve&&Ve%1==0&&Ve<st))||pt.push(Te);return pt}function fe(se,pe){for(var Te=se.length;Te--;)if(ge(se[Te][0],pe))return Te;return-1}function Se(se){{if(se==null)return se===void 0?"[object Undefined]":"[object Null]";if(lt&&lt in Object(se)){var pe=se,Te=Oe.call(pe,lt),Ve=pe[lt];try{var st=!(pe[lt]=void 0)}catch{}var Xe=ee.call(pe);return st&&(Te?pe[lt]=Ve:delete pe[lt]),Xe}return ee.call(se)}}function Le(se){return Fe(se)&&Se(se)==_}function Ue(se,pe,Te,Ve,st){return se===pe||(se==null||pe==null||!Fe(se)&&!Fe(pe)?se!=se&&pe!=pe:function(Xe,yt,vt,bt,dt,pt){var ye=je(Xe),St=je(yt),Tt=ye?m:Q(Xe),St=St?m:Q(yt),ct=(Tt=Tt==_?I:Tt)==I,at=(St=St==_?I:St)==I,St=Tt==St;if(St&&Ze(Xe)){if(!Ze(yt))return!1;ct=!(ye=!0)}if(St&&!ct)return pt=pt||new ie,(ye||nt(Xe)?Ie:function(kt,Dt,_r,Nr,tr,Tr){switch(Tt){case F:if(kt.byteLength!=Dt.byteLength||kt.byteOffset!=Dt.byteOffset)return!1;kt=kt.buffer,Dt=Dt.buffer;case j:return!(kt.byteLength!=Dt.byteLength||!tr(new qe(kt),new qe(Dt)));case l:case y:case A:return ge(+kt,+Dt);case w:return kt.name==Dt.name&&kt.message==Dt.message;case N:case J:return kt==Dt+"";case R:var Mt=te;case U:if(Mt=Mt||le,kt.size!=Dt.size&&!(_r&v))return!1;var gr=Tr.get(kt);return gr?gr==Dt:(_r|=h,Tr.set(kt,Dt),gr=Ie(Mt(kt),Mt(Dt),_r,Nr,tr,Tr),Tr.delete(kt),gr);case"[object Symbol]":if(De)return De.call(kt)==De.call(Dt)}return!1})(Xe,yt,vt,bt,dt,pt);if(!(vt&v)&&(ye=ct&&Oe.call(Xe,"__wrapped__"),ct=at&&Oe.call(yt,"__wrapped__"),ye||ct))return dt(ye?Xe.value():Xe,ct?yt.value():yt,vt,bt,pt=pt||new ie);if(St){pt=pt||new ie;var Rt=Xe,It=yt,er=vt,nr=bt,br=dt,Nt=pt,Vt=er&v,xr=$e(Rt),qt=xr.length;if(qt!=$e(It).length&&!Vt)return!1;for(var hr=qt;hr--;){var or=xr[hr];if(!(Vt?or in It:Oe.call(It,or)))return!1}if(at=Nt.get(Rt),at&&Nt.get(It))return at==It;for(var Sr=!0,Pr=(Nt.set(Rt,It),Nt.set(It,Rt),Vt);++hr<qt;){var fr,Jt=Rt[or=xr[hr]],ur=It[or];if(!((fr=nr?Vt?nr(ur,Jt,or,It,Rt,Nt):nr(Jt,ur,or,Rt,It,Nt):fr)===void 0?Jt===ur||br(Jt,ur,er,nr,Nt):fr)){Sr=!1;break}Pr=Pr||or=="constructor"}return Sr&&!Pr&&(at=Rt.constructor)!=(ye=It.constructor)&&"constructor"in Rt&&"constructor"in It&&!(typeof at=="function"&&at instanceof at&&typeof ye=="function"&&ye instanceof ye)&&(Sr=!1),Nt.delete(Rt),Nt.delete(It),Sr}return!1}(se,pe,Te,Ve,Ue,st))}function Ae(se){if(pe=se&&se.constructor,se!==(typeof pe=="function"&&pe.prototype||xe))return me(Pe(se));var pe,Te,Ve=[];for(Te in Object(se))Oe.call(se,Te)&&Te!="constructor"&&Ve.push(Te);return Ve}function Ie(se,pe,Te,Ve,st,Xe){var yt=Te&v,vt=se.length,bt=pe.length;if(vt!=bt&&!(yt&&vt<bt))return!1;if(bt=Xe.get(se),bt&&Xe.get(pe))return bt==pe;var dt=-1,pt=!0,ye=Te&h?new Y:void 0;for(Xe.set(se,pe),Xe.set(pe,se);++dt<vt;){var Tt,ct=se[dt],at=pe[dt];if((Tt=Ve?yt?Ve(at,ct,dt,pe,se,Xe):Ve(ct,at,dt,se,pe,Xe):Tt)!==void 0){if(Tt)continue;pt=!1;break}if(ye){if(!function(St,Rt){for(var It=-1,er=St==null?0:St.length;++It<er;)if(Rt(St[It],It,St))return 1}(pe,function(St,Rt){return!ye.has(Rt)&&(ct===St||st(ct,St,Te,Ve,Xe))&&ye.push(Rt)})){pt=!1;break}}else if(ct!==at&&!st(ct,at,Te,Ve,Xe)){pt=!1;break}}return Xe.delete(se),Xe.delete(pe),pt}function $e(se){var pe=G,Te=Et(se);if(je(se))return Te;for(var Ve=Te,st=pe(se),Xe=-1,yt=st.length,vt=Ve.length;++Xe<yt;)Ve[vt+Xe]=st[Xe];return Ve}function Be(Ve,pe){var Te,Ve=Ve.__data__;return((Te=typeof pe)=="string"||Te=="number"||Te=="symbol"||Te=="boolean"?pe!=="__proto__":pe===null)?Ve[typeof pe=="string"?"string":"hash"]:Ve.map}function He(se,pe){return se=se==null?void 0:se[pe],!he(pe=se)||re&&re in pe||!(Z(pe)?Me:z).test(ue(pe))?void 0:se}V.prototype.clear=function(){this.__data__=Ot?Ot(null):{},this.size=0},V.prototype.delete=function(se){return se=this.has(se)&&delete this.__data__[se],this.size-=se?1:0,se},V.prototype.get=function(se){var pe,Te=this.__data__;return Ot?(pe=Te[se])===u?void 0:pe:Oe.call(Te,se)?Te[se]:void 0},V.prototype.has=function(se){var pe=this.__data__;return Ot?pe[se]!==void 0:Oe.call(pe,se)},V.prototype.set=function(se,pe){var Te=this.__data__;return this.size+=this.has(se)?0:1,Te[se]=Ot&&pe===void 0?u:pe,this},ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(Te){var pe=this.__data__,Te=fe(pe,Te);return!(Te<0||(Te==pe.length-1?pe.pop():ot.call(pe,Te,1),--this.size,0))},ae.prototype.get=function(Te){var pe=this.__data__,Te=fe(pe,Te);return Te<0?void 0:pe[Te][1]},ae.prototype.has=function(se){return-1<fe(this.__data__,se)},ae.prototype.set=function(se,pe){var Te=this.__data__,Ve=fe(Te,se);return Ve<0?(++this.size,Te.push([se,pe])):Te[Ve][1]=pe,this},de.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(Ht||ae),string:new V}},de.prototype.delete=function(se){return se=Be(this,se).delete(se),this.size-=se?1:0,se},de.prototype.get=function(se){return Be(this,se).get(se)},de.prototype.has=function(se){return Be(this,se).has(se)},de.prototype.set=function(se,pe){var Te=Be(this,se),Ve=Te.size;return Te.set(se,pe),this.size+=Te.size==Ve?0:1,this},Y.prototype.add=Y.prototype.push=function(se){return this.__data__.set(se,u),this},Y.prototype.has=function(se){return this.__data__.has(se)},ie.prototype.clear=function(){this.__data__=new ae,this.size=0},ie.prototype.delete=function(Te){var pe=this.__data__,Te=pe.delete(Te);return this.size=pe.size,Te},ie.prototype.get=function(se){return this.__data__.get(se)},ie.prototype.has=function(se){return this.__data__.has(se)},ie.prototype.set=function(se,pe){var Te=this.__data__;if(Te instanceof ae){var Ve=Te.__data__;if(!Ht||Ve.length<199)return Ve.push([se,pe]),this.size=++Te.size,this;Te=this.__data__=new de(Ve)}return Te.set(se,pe),this.size=Te.size,this};var G=Lt?function(se){if(se==null)return[];se=Object(se);for(var pe=Lt(se),Te=-1,Ve=pe==null?0:pe.length,st=0,Xe=[];++Te<Ve;){var yt=pe[Te];rt.call(se,yt)&&(Xe[st++]=yt)}return Xe}:function(){return[]},Q=Se;function ue(se){if(se!=null){try{return be.call(se)}catch{}try{return se+""}catch{}}return""}function ge(se,pe){return se===pe||se!=se&&pe!=pe}(it&&Q(new it(new ArrayBuffer(1)))!=F||Ht&&Q(new Ht)!=R||Ut&&Q(Ut.resolve())!=D||zt&&Q(new zt)!=U||At&&Q(new At)!=q)&&(Q=function(Te){var pe=Se(Te),Te=pe==I?Te.constructor:void 0,Te=Te?ue(Te):"";if(Te)switch(Te){case ar:return F;case sr:return R;case ir:return D;case jt:return U;case ve:return q}return pe});var Re=Le(function(){return arguments}())?Le:function(se){return Fe(se)&&Oe.call(se,"callee")&&!rt.call(se,"callee")},je=Array.isArray,Ze=Pt||function(){return!1};function Z(se){if(he(se))return(se=Se(se))==P||se==C||se==T||se==B}function ce(se){return typeof se=="number"&&-1<se&&se%1==0&&se<=c}function he(se){var pe=typeof se;return se!=null&&(pe=="object"||pe=="function")}function Fe(se){return se!=null&&typeof se=="object"}var et,nt=H?(et=H,function(se){return et(se)}):function(se){return Fe(se)&&ce(se.length)&&!!L[Se(se)]};function Et(se){return(se!=null&&ce(se.length)&&!Z(se)?_e:Ae)(se)}o.exports=function(se,pe){return Ue(se,pe)}},801:function(o){o.exports=function(a){return a===void 0}},378:function(o,Oe,U){o=U.nmd(o);var u,v,h="__lodash_hash_undefined__",c=9007199254740991,_="[object Arguments]",m="[object AsyncFunction]",T="[object Function]",l="[object GeneratorFunction]",y="[object Null]",w="[object Object]",P="[object Proxy]",C="[object Undefined]",R=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,I={},U=(I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[_]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I[T]=I["[object Map]"]=I["[object Number]"]=I[w]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1,typeof U.g=="object"&&U.g&&U.g.Object===Object&&U.g),D=typeof self=="object"&&self&&self.Object===Object&&self,D=U||D||Function("return this")(),Oe=Oe&&!Oe.nodeType&&Oe,B=Oe&&o&&!o.nodeType&&o,Oe=B&&B.exports===Oe,N=Oe&&U.process,U=function(){try{return B&&B.require&&B.require("util").types||N&&N.binding&&N.binding("util")}catch{}}(),U=U&&U.isTypedArray,Y=Array.prototype,O=Function.prototype,J=Object.prototype,je=D["__core-js_shared__"],q=O.toString,j=J.hasOwnProperty,F=(O=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",z=J.toString,K=q.call(Object),L=RegExp("^"+q.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=Oe?D.Buffer:void 0,O=D.Symbol,H=D.Uint8Array,te=(je&&je.allocUnsafe,u=Object.getPrototypeOf,v=Object,function(Z){return u(v(Z))}),le=Object.create,me=J.propertyIsEnumerable,Pe=Y.splice,xe=O?O.toStringTag:void 0,be=function(){try{var Z=jt(Object,"defineProperty");return Z({},"",{}),Z}catch{}}(),Oe=je?je.isBuffer:void 0,re=Math.max,ee=Date.now,Me=jt(D,"Map"),qe=jt(Object,"create"),rt=function(Z){return Ie(Z)?le?le(Z):(ot.prototype=Z,Z=new ot,ot.prototype=void 0,Z):{}};function ot(){}function lt(Z){var ce=-1,he=Z==null?0:Z.length;for(this.clear();++ce<he;){var Fe=Z[ce];this.set(Fe[0],Fe[1])}}function Lt(Z){var ce=-1,he=Z==null?0:Z.length;for(this.clear();++ce<he;){var Fe=Z[ce];this.set(Fe[0],Fe[1])}}function Pt(Z){var ce=-1,he=Z==null?0:Z.length;for(this.clear();++ce<he;){var Fe=Z[ce];this.set(Fe[0],Fe[1])}}function it(Z){Z=this.__data__=new Lt(Z),this.size=Z.size}function Ht(Z,ce,he){(he===void 0||ie(Z[ce],he))&&(he!==void 0||ce in Z)||zt(Z,ce,he)}function Ut(Z,ce){for(var he=Z.length;he--;)if(ie(Z[he][0],ce))return he;return-1}function zt(Z,ce,he){ce=="__proto__"&&be?be(Z,ce,{configurable:!0,enumerable:!0,value:he,writable:!0}):Z[ce]=he}lt.prototype.clear=function(){this.__data__=qe?qe(null):{},this.size=0},lt.prototype.delete=function(Z){return Z=this.has(Z)&&delete this.__data__[Z],this.size-=Z?1:0,Z},lt.prototype.get=function(Z){var ce,he=this.__data__;return qe?(ce=he[Z])===h?void 0:ce:j.call(he,Z)?he[Z]:void 0},lt.prototype.has=function(Z){var ce=this.__data__;return qe?ce[Z]!==void 0:j.call(ce,Z)},lt.prototype.set=function(Z,ce){var he=this.__data__;return this.size+=this.has(Z)?0:1,he[Z]=qe&&ce===void 0?h:ce,this},Lt.prototype.clear=function(){this.__data__=[],this.size=0},Lt.prototype.delete=function(he){var ce=this.__data__,he=Ut(ce,he);return!(he<0||(he==ce.length-1?ce.pop():Pe.call(ce,he,1),--this.size,0))},Lt.prototype.get=function(he){var ce=this.__data__,he=Ut(ce,he);return he<0?void 0:ce[he][1]},Lt.prototype.has=function(Z){return-1<Ut(this.__data__,Z)},Lt.prototype.set=function(Z,ce){var he=this.__data__,Fe=Ut(he,Z);return Fe<0?(++this.size,he.push([Z,ce])):he[Fe][1]=ce,this},Pt.prototype.clear=function(){this.size=0,this.__data__={hash:new lt,map:new(Me||Lt),string:new lt}},Pt.prototype.delete=function(Z){return Z=ir(this,Z).delete(Z),this.size-=Z?1:0,Z},Pt.prototype.get=function(Z){return ir(this,Z).get(Z)},Pt.prototype.has=function(Z){return ir(this,Z).has(Z)},Pt.prototype.set=function(Z,ce){var he=ir(this,Z),Fe=he.size;return he.set(Z,ce),this.size+=he.size==Fe?0:1,this},it.prototype.clear=function(){this.__data__=new Lt,this.size=0},it.prototype.delete=function(he){var ce=this.__data__,he=ce.delete(he);return this.size=ce.size,he},it.prototype.get=function(Z){return this.__data__.get(Z)},it.prototype.has=function(Z){return this.__data__.has(Z)},it.prototype.set=function(Z,ce){var he=this.__data__;if(he instanceof Lt){var Fe=he.__data__;if(!Me||Fe.length<199)return Fe.push([Z,ce]),this.size=++he.size,this;he=this.__data__=new Pt(Fe)}return he.set(Z,ce),this.size=he.size,this};var At=function(Z,ce,he){for(var Fe=-1,et=Object(Z),nt=he(Z),Et=nt.length;Et--;){var se=nt[++Fe];if(ce(et[se],se,et)===!1)break}return Z};function Ot(Z){{if(Z==null)return Z===void 0?C:y;if(xe&&xe in Object(Z)){var ce=Z,he=j.call(ce,xe),Fe=ce[xe];try{var et=!(ce[xe]=void 0)}catch{}var nt=z.call(ce);return et&&(he?ce[xe]=Fe:delete ce[xe]),nt}return z.call(Z)}}function ar(Z){return $e(Z)&&Ot(Z)==_}function sr(Z,ce,he,Fe,et){Z!==ce&&At(ce,function(nt,Et){var se,pe,Te,Ve,st,Xe,yt,vt,bt,dt,pt,ye,Tt;et=et||new it,Ie(nt)?(pe=ce,Ve=he,st=sr,Xe=Fe,yt=et,pt=De(se=Z,Te=Et),ye=De(pe,Te),(Tt=yt.get(ye))||((pe=(Tt=Xe?Xe(pt,ye,Te+"",se,pe,yt):void 0)===void 0)&&(vt=!(dt=fe(ye))&&Le(ye),bt=!dt&&!vt&&He(ye),Tt=ye,dt||vt||bt?Tt=fe(pt)?pt:$e(dt=pt)&&Se(dt)?function(ct,at){var St=-1,Rt=ct.length;for(at=at||Array(Rt);++St<Rt;)at[St]=ct[St];return at}(pt):vt?(pe=!1,ye.slice()):bt?(pe=!1,bt=new(vt=(dt=ye).buffer).constructor(vt.byteLength),new H(bt).set(new H(vt)),new dt.constructor(bt,dt.byteOffset,dt.length)):[]:function(ct){if($e(ct)&&Ot(ct)==w)return(ct=te(ct))===null||typeof(ct=j.call(ct,"constructor")&&ct.constructor)=="function"&&ct instanceof ct&&q.call(ct)==K}(ye)||_e(ye)?_e(Tt=pt)?Tt=function(){for(var ct,at,St=pt,Rt=G(pt),It=void 0,er=!It,nr=(It=It||{},-1),br=Rt.length;++nr<br;){var Nt=Rt[nr],Vt=void 0;Vt===void 0&&(Vt=St[Nt]),er?zt(It,Nt,Vt):(Vt=Vt,at=void 0,at=(ct=It)[Nt=Nt],j.call(ct,Nt)&&ie(at,Vt)&&(Vt!==void 0||Nt in ct)||zt(ct,Nt,Vt))}return It}():Ie(pt)&&!Ue(pt)||(Tt=typeof ye.constructor!="function"||Ee(ye)?{}:rt(te(ye))):pe=!1),pe&&(yt.set(ye,Tt),st(Tt,ye,Ve,Xe,yt),yt.delete(ye))),Ht(se,Te,Tt)):(vt=Fe?Fe(De(Z,Et),nt,Et+"",Z,ce,et):void 0,Ht(Z,Et,vt=vt===void 0?nt:vt))},G)}function ir(Fe,ce){var he,Fe=Fe.__data__;return((he=typeof ce)=="string"||he=="number"||he=="symbol"||he=="boolean"?ce!=="__proto__":ce===null)?Fe[typeof ce=="string"?"string":"hash"]:Fe.map}function jt(Z,ce){return Z=Z==null?void 0:Z[ce],!Ie(ce=Z)||F&&F in ce||!(Ue(ce)?L:R).test(function(he){if(he!=null){try{return q.call(he)}catch{}try{return he+""}catch{}}return""}(ce))?void 0:Z}function ve(Z,ce){var he=typeof Z;return(ce=ce??c)&&(he=="number"||he!="symbol"&&A.test(Z))&&-1<Z&&Z%1==0&&Z<ce}function Ee(Z){var ce=Z&&Z.constructor;return Z===(typeof ce=="function"&&ce.prototype||J)}function De(Z,ce){if((ce!=="constructor"||typeof Z[ce]!="function")&&ce!="__proto__")return Z[ce]}V=be?function(Z,ce){return be(Z,"toString",{configurable:!0,enumerable:!1,value:(he=ce,function(){return he}),writable:!0});var he}:Ze,de=ae=0;var V,ae,de,Y=function(){var Z=ee(),ce=16-(Z-de);if(de=Z,0<ce){if(800<=++ae)return arguments[0]}else ae=0;return V.apply(void 0,arguments)};function ie(Z,ce){return Z===ce||Z!=Z&&ce!=ce}var _e=ar(function(){return arguments}())?ar:function(Z){return $e(Z)&&j.call(Z,"callee")&&!me.call(Z,"callee")},fe=Array.isArray;function Se(Z){return Z!=null&&Ae(Z.length)&&!Ue(Z)}var Le=Oe||function(){return!1};function Ue(Z){if(Ie(Z))return(Z=Ot(Z))==T||Z==l||Z==m||Z==P}function Ae(Z){return typeof Z=="number"&&-1<Z&&Z%1==0&&Z<=c}function Ie(Z){var ce=typeof Z;return Z!=null&&(ce=="object"||ce=="function")}function $e(Z){return Z!=null&&typeof Z=="object"}var Be,He=U?(Be=U,function(Z){return Be(Z)}):function(Z){return $e(Z)&&Ae(Z.length)&&!!I[Ot(Z)]};function G(Z){if(Se(Z)){var ce,he=Z,Fe=!0,et=fe(he),nt=!et&&_e(he),Et=!et&&!nt&&Le(he),se=!et&&!nt&&!Et&&He(he),pe=et||nt||Et||se,Te=pe?function(pt,ye){for(var Tt=-1,ct=Array(pt);++Tt<pt;)ct[Tt]=ye(Tt);return ct}(he.length,String):[],Ve=Te.length;for(ce in he)!Fe&&!j.call(he,ce)||pe&&(ce=="length"||Et&&(ce=="offset"||ce=="parent")||se&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||ve(ce,Ve))||Te.push(ce);return Te}var st=Z;if(Ie(st)){var Xe,yt=Ee(st),vt=[];for(Xe in st)(Xe!="constructor"||!yt&&j.call(st,Xe))&&vt.push(Xe);return vt}var bt=[];if(st!=null)for(var dt in Object(st))bt.push(dt);return bt}Q=function(Z,ce,he){sr(Z,ce,he)};var Q,ue,ge,Re,je=Y((ue=O=function(Z,ce){var he=-1,Fe=ce.length,nt=1<Fe?ce[Fe-1]:void 0,et=2<Fe?ce[2]:void 0,nt=3<Q.length&&typeof nt=="function"?(Fe--,nt):void 0;for(et&&function(se,pe,Te){var Ve;if(Ie(Te))return((Ve=typeof pe)=="number"?Se(Te)&&ve(pe,Te.length):Ve=="string"&&pe in Te)&&ie(Te[pe],se)}(ce[0],ce[1],et)&&(nt=Fe<3?void 0:nt,Fe=1),Z=Object(Z);++he<Fe;){var Et=ce[he];Et&&Q(Z,Et,he)}return Z},Re=Ze,ge=re(ue.length-1,0),function(){for(var Z=arguments,ce=-1,he=re(Z.length-ge,0),Fe=Array(he);++ce<he;)Fe[ce]=Z[ge+ce];for(var ce=-1,et=Array(ge+1);++ce<ge;)et[ce]=Z[ce];et[ge]=Re(Fe);var nt=ue,Et=this,se=et;switch(se.length){case 0:return nt.call(Et);case 1:return nt.call(Et,se[0]);case 2:return nt.call(Et,se[0],se[1]);case 3:return nt.call(Et,se[0],se[1],se[2])}return nt.apply(Et,se)}),O+"");function Ze(Z){return Z}o.exports=je},775:function(o){var a=Object.prototype.hasOwnProperty;function n(v){return"[Throws: "+(v?v.message:"?")+"]"}function u(v){var h=[];return function c(_){if(_===null||typeof _!="object")return _;if(h.indexOf(_)!==-1)return"[Circular]";if(h.push(_),typeof _.toJSON=="function")try{var m=c(_.toJSON());return h.pop(),m}catch(T){return n(T)}return m=Array.isArray(_)?_.map(c):Object.keys(_).reduce(function(T,l){return T[l]=c(function(y,w){return a.call(y,w),y[w]}(_,l)),T},{}),h.pop(),m}(v)}o.exports=function(v,h,c){return JSON.stringify(u(v),h,c)},o.exports.ensureProperties=u}},f={},g.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return g.d(a,{a}),a},g.d=function(o,a){for(var n in a)g.o(a,n)&&!g.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:a[n]})},g.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),g.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},g.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},g.nmd=function(o){return o.paths=[],o.children||(o.children=[]),o},s={},function(){g.r(s),g.d(s,{AACParser:function(){return o},AudioBody:function(){return hr},AvMultitrackType:function(){return _r},AvcSPS:function(){return At},BasicLoader:function(){return se},BitBuffer:function(){return l},Box:function(){return Se},ByteBuffer:function(){return n},CTrackTypeMap:function(){return ie},Demuxer:function(){return Ua},DiscardType:function(){return xe},EAudioCodecID:function(){return It},EAudioPacketType:function(){return Nt},EFormatType:function(){return re},EFrameType:function(){return Jt},EH264NALType:function(){return A},EH265NALType:function(){return I},EH266NALType:function(){return N},EHandlerType:function(){return Oe},ELoaderStatus:function(){return ce},EPID:function(){return Hr},ESampleFlag:function(){return Y},ESoundType:function(){return br},EStreamType:function(){return lr},ETSPacketType:function(){return vr},ETagType:function(){return nt},ETrackType:function(){return ee},EVideoCodecID:function(){return kt},EVideoCommand:function(){return ur},EVideoPacketType:function(){return Dt},ErrorCode:function(){return be},FLVParser:function(){return an},FullBox:function(){return Le},H264NAL:function(){return B},H265NAL:function(){return q},H266NAL:function(){return z},HLSParser:function(){return jo},HevcSPS:function(){return jt},Loader:function(){return st},LoaderError:function(){return Et},MP4Parser:function(){return Eo},MP4RemuxStream:function(){return ja},MPEGTSParser:function(){return Xi},PAT:function(){return Oo},PES:function(){return No},PMT:function(){return Mo},Remuxer:function(){return Ji},SOUND_RATE:function(){return Vt},SOUND_SIZE:function(){return xr},ScriptBody:function(){return Nr},TSHeader:function(){return Rr},TagHeader:function(){return er},VideoBody:function(){return Tr},VvcSPS:function(){return ve},esTypeMap:function(){return Do}});var o={},a=(g.r(o),g.d(o,{AAC_DURATION:function(){return v},AAC_SAMPLING_FREQUENCIES:function(){return u},addADTSHeader:function(){return h},getADTSHeaderLength:function(){return _},getADTSLength:function(){return m},isADTS:function(){return c},readAACSamples:function(){return T}}),{}),n=(g.r(a),g.d(a,{Box:function(){return Se},avc1:function(){return Mr},avcC:function(){return Ue},btrt:function(){return Vo},co64:function(){return Sa},ctts:function(){return ma},dinf:function(){return Wt},dref:function(){return Wo},edts:function(){return Wt},elst:function(){return $o},esds:function(){return Yo},ftyp:function(){return Qo},hdlr:function(){return ea},hev1:function(){return sn},hvc1:function(){return sn},hvcC:function(){return ue},mdat:function(){return ta},mdhd:function(){return ra},mdia:function(){return Wt},mfhd:function(){return da},mfra:function(){return Wt},minf:function(){return Wt},moof:function(){return la},moov:function(){return Wt},mp4a:function(){return ia},mvex:function(){return pa},mvhd:function(){return na},pasp:function(){return oa},sdtp:function(){return ha},sidx:function(){return fa},stbl:function(){return Wt},stco:function(){return ba},stsc:function(){return Ta},stsd:function(){return Ea},stss:function(){return wa},stsz:function(){return xa},stts:function(){return Pa},tfdt:function(){return _a},tfhd:function(){return ga},tkhd:function(){return aa},traf:function(){return ca},trak:function(){return Wt},trex:function(){return ya},trun:function(){return va},url:function(){return sa},vmhd:function(){return ua},vvc1:function(){return Jo},vvcC:function(){return on},vvi1:function(){return Zo}}),w.fromUint8=function(t){return new w(t.buffer,t.byteOffset,t.byteLength)},w.concatUint8s=function(t){return this.concatUint8.apply(this,t)},w.concatUint8=function(){for(var t,e,r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return r.length<=1?r[0]||new Uint8Array(0):(t=new Uint8Array(r.reduce(function(S,M){return S+M.byteLength},0)),e=0,r.forEach(function(S){t.set(S,e),e+=S.byteLength}),t)},w.concat=function(t,e){return w.concatUint8(new Uint8Array(t),new Uint8Array(e)).buffer},Object.defineProperty(w.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),w.prototype.readFloat=function(t){var e=0;switch(t){case 4:e=this.dv.getFloat32(this.offset);break;case 8:e=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+t)}return this.offset+=t,e},w.prototype.back=function(t){this.offset-=t},w.prototype.skip=function(t){this.offset+=t},w.prototype.readInt=function(t){var e=this.offset;switch(this.offset+=t,t){case 1:return this.dv.getInt8(e);case 2:return this.dv.getInt16(e);case 4:return this.dv.getInt32(e);default:throw new Error("not supported for read byte with "+t)}},w.prototype.read=function(t){var e=this.offset;switch(this.offset+=t,t){case 1:return this.dv.getUint8(e);case 2:return this.dv.getUint16(e);case 3:return(this.dv.getUint16(e)<<8)+this.dv.getUint8(e+2);case 4:return this.dv.getUint32(e);default:return this.back(t-4),this.read(t-4)+this.dv.getUint32(e)*Math.pow(256,t-4)}},w.prototype.writeInt=function(t,e){var r=this.offset;switch(this.offset+=t,t){case 1:return this.dv.setInt8(r,e);case 2:return this.dv.setInt16(r,e);case 3:return this.dv.setInt8(r,e>>16),this.dv.setInt16(r+1,65535&e);case 4:return this.dv.setInt32(r,e);default:throw new Error("Byte write "+t)}},w.prototype.write=function(t,e){var r=this.offset;switch(this.offset+=t,t){case 1:return this.dv.setUint8(r,e);case 2:return this.dv.setUint16(r,e);case 3:return this.dv.setUint8(r,e>>>16),this.dv.setUint16(r+1,65535&e);case 4:return this.dv.setUint32(r,e);default:throw new Error("Byte write "+t)}},w.prototype.readToUint8=function(t){return t=new Uint8Array(this.dv.buffer,this.offset,t||this.unreadLength),this.offset+=t.byteLength,t},w.prototype.readToBuffer=function(t){return t=this.offset||t?this.dv.buffer.slice(this.offset,t?this.offset+t:void 0):this.dv.buffer,this.offset+=t.byteLength,t},w),u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],v=1024,h=function(t,S){var r=S.audioObjectType,oe=S.sampleRate,X=S.samplingFrequencyIndex,p=S.channelCount,S=S.numberOfRawDataBlocksInFrame,S=S===void 0?0:S,M=X,X=(X===0&&0<oe&&(M=u.indexOf(oe)),t.byteLength+7),oe=new Uint8Array(7);return oe[0]=255,oe[1]=241,oe[2]=r-1<<6,oe[2]|=M<<2,oe[2]|=(4&p)>>2,oe[3]=(3&p)<<6,oe[3]|=(6144&X)>>11,oe[4]=(2047&X)>>3,oe[5]=(7&X)<<5,oe[5]|=31,oe[6]=252,oe[6]|=3&S,n.concatUint8(oe,t)},c=function(t,e){return e<t.byteLength-1&&t[e]===255&&(246&t[e+1])==240},_=function(t,e){return 1&t[e+1]?7:9},m=function(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5},T=function(t){for(var e,r,p=[],S=0,M=t.byteLength;S+6<M;)c(t,S)?(e=_(t,S),r=m(t,S),p.push({audioObjectType:1+(t[2]>>>6),sampleRate:u[t[2]>>>2&15],samplingFrequencyIndex:t[2]>>>2&15,channelCount:(1&t[2])<<2|t[3]>>>6,numberOfRawDataBlocksInFrame:0,data:t.subarray(S+e,S+r)}),S+=r):S++;return p},l=(y.fromByte=function(t,e){return new y(t.read(e),e<<3)},y.prototype.skip=function(t){this.offset+=t},y.prototype.read=function(t){var e=this.len-this.offset-t;if(0<=e){for(var r=0,p=0;p<t;p++)r+=1<<p;return this.offset+=t,this.num>>>e&r}return console.warn("bit "),0},y);function y(t,e){this.num=t,this.len=e,this.offset=0}function w(t,e,r){this.dv=new DataView(t),this.offset=e||this.dv.byteOffset,this.start=this.offset,this.end=r?this.start+r:this.dv.byteLength}C.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},C.createVVCAnnexbStartCode=function(){return new Uint8Array([0,0,1])},C.createAVCCStartCode=function(t){return new Uint8Array([t>>24&255,t>>16&255,t>>8&255,255&t])},C.extractAVCCNAL=function(t,e){for(var r,p=[],S=new n(t.buffer,t.byteOffset,t.byteLength);S.unreadLength>e;){if((r=S.read(e+1))<=0||r>S.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",e,"size:",r);break}var M=S.offset-S.start;p.push(t.subarray(M,M+r)),S.skip(r)}return p},C.extractAnnexbNAL=function(t){for(var e=t.byteLength,r=[],p=0;p<e-3;)t[p]===0?t[p+1]===0?t[p+2]===0?t[p+3]===0?p++:(t[p+3]===1&&p+4<e&&r.push({prefixStart:p,start:p+4}),p+=4):(t[p+2]===1&&r.push({prefixStart:p,start:p+3}),p+=3):p+=2:p++;return r.length?r.map(function(S,M){return M=r[M+1],M?t.subarray(S.start,M.prefixStart):t.subarray(S.start)}):[]};var P=C;function C(){}var R,A;R=function(t,e){return(R=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},(W=A=A||{})[W.UNUSED=0]="UNUSED",W[W.NON_IDR_SLICE=1]="NON_IDR_SLICE",W[W.DP_A=2]="DP_A",W[W.DP_B=3]="DP_B",W[W.DP_C=4]="DP_C",W[W.IDR=5]="IDR",W[W.SEI=6]="SEI",W[W.SPS=7]="SPS",W[W.PPS=8]="PPS",W[W.DIVIDER=9]="DIVIDER",W[W.SEQUENCE_END=10]="SEQUENCE_END",W[W.STREAM_END=11]="STREAM_END",W[W.FILL=12]="FILL";var I,D,B=function(t){function e(oe){var X=t.call(this)||this,oe=new l(oe.read(1),8);return X.forbiddenZeroBit=oe.read(1),X.nalRefIdc=oe.read(2),X.nalType=oe.read(5),X}var r=e,p=t;if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function S(){this.constructor=r}return R(r,p),r.prototype=p===null?Object.create(p):(S.prototype=p.prototype,new S),e.extractNALType=function(M){return 31&M[0]},e.isSlice=function(M){return M=this.extractNALType(M),M>=A.NON_IDR_SLICE&&M<=A.IDR},e}(P),W=(D=function(t,e){return(D=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}D(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});(ye=I=I||{})[ye.TRAIL_N=0]="TRAIL_N",ye[ye.TRAIL_R=1]="TRAIL_R",ye[ye.TSA_N=2]="TSA_N",ye[ye.TSA_R=3]="TSA_R",ye[ye.STSA_N=4]="STSA_N",ye[ye.STSA_R=5]="STSA_R",ye[ye.RADL_N=6]="RADL_N",ye[ye.RADL_R=7]="RADL_R",ye[ye.RASL_N=8]="RASL_N",ye[ye.RASL_R=9]="RASL_R",ye[ye.VCL_N10=10]="VCL_N10",ye[ye.VCL_R11=11]="VCL_R11",ye[ye.VCL_N12=12]="VCL_N12",ye[ye.VCL_R13=13]="VCL_R13",ye[ye.VCL_N14=14]="VCL_N14",ye[ye.VCL_R15=15]="VCL_R15",ye[ye.BLA_W_LP=16]="BLA_W_LP",ye[ye.BLA_W_RADL=17]="BLA_W_RADL",ye[ye.BLA_N_LP=18]="BLA_N_LP",ye[ye.IDR_W_RADL=19]="IDR_W_RADL",ye[ye.IDR_N_LP=20]="IDR_N_LP",ye[ye.CRA=21]="CRA",ye[ye.VPS=32]="VPS",ye[ye.SPS=33]="SPS",ye[ye.PPS=34]="PPS",ye[ye.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",ye[ye.EOS=36]="EOS",ye[ye.EOB=37]="EOB",ye[ye.FILLER_DATA=38]="FILLER_DATA",ye[ye.SEI=39]="SEI",ye[ye.SEI_SUFFIX=40]="SEI_SUFFIX",ye[ye.INVALID=64]="INVALID",W(j,J=P),j.extractNALType=function(t,e){return(126&t[e=e===void 0?0:e])>>1},j.isNonRefNALType=function(t){switch(t){case I.TRAIL_N:case I.STSA_N:case I.RADL_N:case I.RASL_N:case I.VCL_N10:case I.VCL_N12:case I.VCL_N14:return!0;default:return!1}},j.isNonRef=function(t){return this.isNonRefNALType(this.extractNALType(t))},j.isSlice=function(t){return t=this.extractNALType(t),t>=I.TRAIL_N&&t<=I.CRA},j.littleEndian=function(){var t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256},j.parseHVCVideoData=function(t,e){for(var r=t.byteLength,p=new DataView(t.buffer,t.byteOffset,t.byteLength),S=[],M=0,X=0+e,oe=this.littleEndian,we=!1;M<r;){if(r<=M+4){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+X+", offset = "+M+", dataSize = "+r);break}var ke=p.getUint32(M,!oe);if(r-4<ke)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+X+", NaluSize > DataSize!");var Ne=p.getUint8(M+4)>>1&63,Ce=(16<=Ne&&Ne<=23&&(we=!0),0+M+4),Ne={type:Ne,data:t.subarray(Ce,Ce+ke)};S.push(Ne),M+=4+ke}return{keyframe:we,units:S}};var N,U,J,q=j,ye=(U=function(t,e){return(U=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}U(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});function j(r){var e=J.call(this)||this,r=new l(r.read(2),16);return e.forbiddenZeroBit=r.read(1),e.nalType=r.read(6),e.nhLayerId=r.read(6),e.nhTimeId=r.read(3),e}(W=N=N||{})[W.VVC_TRAIL_NUT=0]="VVC_TRAIL_NUT",W[W.VVC_STSA_NUT=1]="VVC_STSA_NUT",W[W.VVC_RADL_NUT=2]="VVC_RADL_NUT",W[W.VVC_RASL_NUT=3]="VVC_RASL_NUT",W[W.VVC_RSV_VCL_4=4]="VVC_RSV_VCL_4",W[W.VVC_RSV_VCL_5=5]="VVC_RSV_VCL_5",W[W.VVC_RSV_VCL_6=6]="VVC_RSV_VCL_6",W[W.VVC_IDR_W_RADL=7]="VVC_IDR_W_RADL",W[W.VVC_IDR_N_LP=8]="VVC_IDR_N_LP",W[W.VVC_CRA_NUT=9]="VVC_CRA_NUT",W[W.VVC_GDR_NUT=10]="VVC_GDR_NUT",W[W.VVC_RSV_IRAP_11=11]="VVC_RSV_IRAP_11",W[W.VVC_OPI_NUT=12]="VVC_OPI_NUT",W[W.VVC_DCI_NUT=13]="VVC_DCI_NUT",W[W.VVC_VPS_NUT=14]="VVC_VPS_NUT",W[W.VVC_SPS_NUT=15]="VVC_SPS_NUT",W[W.VVC_PPS_NUT=16]="VVC_PPS_NUT",W[W.VVC_PREFIX_APS_NUT=17]="VVC_PREFIX_APS_NUT",W[W.VVC_SUFFIX_APS_NUT=18]="VVC_SUFFIX_APS_NUT",W[W.VVC_PH_NUT=19]="VVC_PH_NUT",W[W.VVC_AUD_NUT=20]="VVC_AUD_NUT",W[W.VVC_EOS_NUT=21]="VVC_EOS_NUT",W[W.VVC_EOB_NUT=22]="VVC_EOB_NUT",W[W.VVC_PREFIX_SEI_NUT=23]="VVC_PREFIX_SEI_NUT",W[W.VVC_SUFFIX_SEI_NUT=24]="VVC_SUFFIX_SEI_NUT",W[W.VVC_FD_NUT=25]="VVC_FD_NUT",W[W.VVC_RSV_NVCL_26=26]="VVC_RSV_NVCL_26",W[W.VVC_RSV_NVCL_27=27]="VVC_RSV_NVCL_27",W[W.VVC_UNSPEC_28=28]="VVC_UNSPEC_28",W[W.VVC_UNSPEC_29=29]="VVC_UNSPEC_29",W[W.VVC_UNSPEC_30=30]="VVC_UNSPEC_30",W[W.VVC_UNSPEC_31=31]="VVC_UNSPEC_31",ye(L,F=P),L.parseNaluHeader=function(t){return{nuh_layer_id:63&t[0],nal_unit_type:t[1]>>3&31,nuh_temporal_id_plus1:7&t[1]}},L.extractNALType=function(t){return this.parseNaluHeader(t).nal_unit_type},L.isNonRefNALType=function(t){switch(t){case N.VVC_IDR_W_RADL:case N.VVC_IDR_N_LP:return!0;default:return!1}},L.isNonRef=function(t){return this.isNonRefNALType(this.extractNALType(t))},L.isSlice=function(t){return t=this.extractNALType(t),t<=N.VVC_RASL_NUT||t>=N.VVC_IDR_W_RADL&&t<=N.VVC_GDR_NUT},L.littleEndian=function(){var t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256},L.parseHVCVideoData=function(t,e){for(var r=t.byteLength,p=new DataView(t.buffer,t.byteOffset,t.byteLength),S=[],M=0,X=0+e,oe=this.littleEndian,we=!1;M<r;){if(r<=M+4){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+X+", offset = "+M+", dataSize = "+r);break}var ke=p.getUint32(M,!oe);if(r-4<ke)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+X+", NaluSize > DataSize!");var Ne=p.getUint8(M+4)>>1&63,Ce=(16<=Ne&&Ne<=23&&(we=!0),0+M+4),Ne={type:Ne,data:t.subarray(Ce,Ce+ke)};S.push(Ne),M+=4+ke}return{keyframe:we,units:S}};var F,z=L,W=g(307),K=g.n(W);function L(r){var e=F.call(this)||this,r=r.readToUint8(2),r={nuh_layer_id:63&r[0],nal_unit_type:r[1]>>3&31,nuh_temporal_id_plus1:7&r[1]};return e.forbiddenZeroBit=0,e.nalType=r.nal_unit_type,e.nhLayerId=r.nuh_layer_id,e.nhTimeId=r.nuh_temporal_id_plus1,e}function O(t,e){var r=!1;return Object.keys(e).forEach(function(p){K()(t[p],e[p])||(t[p]=e[p],r=!0)}),r}function H(t){return t<10?"0"+t:t}var ye=g(775),te=g.n(ye),le=typeof performance<"u"&&typeof performance.now=="function";function me(){return(le?performance:Date).now()}var Pe;(W=Pe=Pe||{})[W.TRACE=-1]="TRACE",W[W.DEBUG=0]="DEBUG",W[W.LOG=1]="LOG",W[W.INFO=2]="INFO",W[W.WARN=10]="WARN",W[W.ERROR=11]="ERROR",W[W.NONE=1e3]="NONE";var xe,be,Oe,re,ee,Me=Pe.INFO,qe=Pe.ERROR,rt=2e3,ot=me(),lt=[],Lt=0,Pt=(ae.prototype._print=function(t,e){var r,p,S,M,X,oe,we,ke;Me<=t&&(r=me()-ot,S="[".concat(Pe[t],"][").concat(this.name,"][").concat((p=r,(S=!0)===void 0&&(S=!0),ke=Math.floor(p/1e3),S=S!==void 0&&S,((M=ke)===1/0?M:(oe=Math.floor(M/60),oe-=60*(X=Math.floor(oe/60)),M=Math.floor(M-60*(60*X+oe)),we=[],(S||0<X)&&we.push(H(X)),we.push(H(oe)),we.push(H(M)),we.join(":")))+"."+Math.floor(1e3*(p-1e3*ke))),"]"),lt.push({id:Lt++,level:t,name:this.name,timestamp:r,args:e,prefix:S,message:""}),lt.length>rt&&lt.shift(),qe<=t)&&(X=(Pe[t]||"").toLowerCase(),oe=console[X])&&oe.apply(void 0,function(Ce,Ne,Ye){if(arguments.length===2)for(var _t,Qe=0,Je=Ne.length;Qe<Je;Qe++)!_t&&Qe in Ne||((_t=_t||Array.prototype.slice.call(Ne,0,Qe))[Qe]=Ne[Qe]);return Ce.concat(_t||Array.prototype.slice.call(Ne))}([S],e,!1))},ae.prototype.getLogs=function(){return lt.map(function(t){return t.message=t.prefix+" "+t.args.map(function(e){return typeof e=="string"?e:te()(e)}).join(" "),t})},ae.prototype.clear=function(){lt=[]},ae.prototype.setSize=function(t){rt=t},ae.prototype.setLevel=function(t){Me=t},ae.prototype.getLevel=function(){return Me},ae.prototype.setPrintLevel=function(t){qe=t},ae.prototype.reset=function(){Me=Pe.INFO,qe=Pe.ERROR,rt=2e3,ot=me(),lt=[],Lt=0},ae.LogLevel=Pe,ae),it=(new Pt("common"),new Pt("demuxer")),Ht=(V.prototype.loadWord=function(){var t=this.data,p=this.bytesAvailable,e=t.byteLength-p,r=new Uint8Array(4),p=Math.min(4,p);if(p===0)throw new Error("no bytes available");r.set(t.subarray(e,e+p)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*p,this.bytesAvailable-=p},V.prototype.skipBits=function(t){var e;this.bitsAvailable>t||(t=(t-=this.bitsAvailable)-((e=t>>3)<<3),this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},V.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return 32<t&&it.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable?this.word<<=e:0<this.bytesAvailable&&this.loadWord(),0<(e=t-e)&&this.bitsAvailable?r<<e|this.readBits(e):r},V.prototype.skipLZ=function(){for(var t=0;t<this.bitsAvailable;++t)if(this.word&2147483648>>>t)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},V.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},V.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},V.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},V.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},V.prototype.readUByte=function(){return this.readBits(8)},V.prototype.readUShort=function(){return this.readBits(16)},V.prototype.readUInt=function(){return this.readBits(32)},V.prototype.skipScalingList=function(t){for(var e=8,r=8,p=0;p<t;p++)e=(r=r!==0?(e+this.readEG()+256)%256:r)===0?e:r},V),Ut=[100,110,122,244,44,83,86,118,128,138,144],zt=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],At=(De.generateCodec=function(t){return"avc1."+[t.generalProfileIdc,t.generalProfileCompatibility,t.generalLevelIdc].map(function(e){return(e=e.toString(16)).length<2?"0"+e:e}).join("")},De),Ot=[1,2,2,1],ar=[1,2,1,1],sr=[1,2,2,1],ir=[1,2,1,1],jt=(Ee.generateCodec=function(t){var e=["hvc1"],r=t.generalProfileSpace;e.push((0<r&&r<4?String.fromCharCode(64+r):"")+t.generalProfileIdc.toString()),e.push(t.generalProfileCompatibilityFlags.reverse().reduce(function(oe,we){return oe<<1|we},0).toString(16)),e.push((t.generalTierFlag?"H":"L")+t.generalLevelIdc);for(var p=!1,S=[],M=5;0<=M;M--){var X=t.generalConstraintIndicatorFlags[M];(X||p)&&(S.unshift(X.toString(16)),p=!0)}return e.concat(S).join(".")},Ee),ve=function(t){this.log2CtuSizeMinus5=0,this.ptlDpbHrdParamsPresentFlag=0,this.gdrEnabledFlag=0,this.refPicResamplingEnabledFlag=0,this.resChangeInClvsAllowedFlag=0,this.picWidthMaxInLumasamples=0,this.picHeightMaxInLumasamples=0,this.conformanceWindowFlag=0,this.profileTierPresentFlag=0,this.generalProfileIdc=0,this.generalTierFlag=0,this.generalLevelIdc=0,this.ptlFrameOnlyConstraintFlag=0,this.ptlMultiLayerEnabledFlag=0,this.subLayerProfilePresentFlags=[],this.ptlSubLayerLevelPresentFlags=[],this.subLayerLevelIdc=[],this.ptlNumSubProfiles=0,this.generalSubProfileIdc=[],this.gciPresentFlag=0,this.width=0,this.height=0,this.pixelRatio=[],this.codec="vvc1.1.L48.CA";var e,r,p,S=new Ht(t),M=0;if(this.spsId=S.readBits(4),this.vpsId=S.readBits(4),this.maxSubLayersMinus1=S.readBits(3),this.chromaFormatIdc=S.readBits(2),this.log2CtuSizeMinus5=S.readBits(2),this.ptlDpbHrdParamsPresentFlag=S.readBits(1),M+=16,this.ptlDpbHrdParamsPresentFlag){if(this.profileTierPresentFlag=1,this.profileTierPresentFlag&&(this.generalProfileIdc=S.readBits(7),this.generalTierFlag=S.readBits(1),M+=8),this.generalLevelIdc=S.readBits(8),M+=8,this.ptlFrameOnlyConstraintFlag=S.readBits(1),this.ptlMultiLayerEnabledFlag=S.readBits(1),M+=2,this.profileTierPresentFlag&&(this.gciPresentFlag=S.readBits(1),M+=1,this.gciPresentFlag)){S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=3,S.skipBits(4),S.skipBits(2),M+=6,S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=10,S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=6,S.skipBits(2),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=5,S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=6,S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=16,S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=13,S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=6;for(var X=S.readBits(8),oe=(M+=8,0),we=(5<X&&(S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),S.skipBits(1),M+=6,oe=6),0),we=0;we<X-oe;we++)S.skipBits(1),M+=1}var t=8-M%8;for(S.skipBits(t),M+=t,we=this.maxSubLayersMinus1-1;0<=we;we--)this.ptlSubLayerLevelPresentFlags[we]=S.readBits(1),M+=1;for(S.skipBits(t=8-M%8),M+=t,we=this.maxSubLayersMinus1-1;0<=we;we--)this.ptlSubLayerLevelPresentFlags[we]&&(this.subLayerLevelIdc[we]=S.readBits(8),M+=8);if(this.profileTierPresentFlag)for(this.ptlNumSubProfiles=S.readBits(8),we=0;we<this.ptlNumSubProfiles;we++)this.generalSubProfileIdc[we]=S.readBits(32),M+=32}this.gdrEnabledFlag=S.readBits(1),this.refPicResamplingEnabledFlag=S.readBits(1),M+=2,this.refPicResamplingEnabledFlag&&(this.resChangeInClvsAllowedFlag=S.readBits(1),M+=1),this.picWidthMaxInLumasamples=S.readUEG(),this.picHeightMaxInLumasamples=S.readUEG(),M+=16,this.conformanceWindowFlag=S.readBits(1),M+=1,this.width=this.picWidthMaxInLumasamples,this.height=this.picHeightMaxInLumasamples,this.conformanceWindowFlag&&(t=sr[this.chromaFormatIdc],p=ir[this.chromaFormatIdc],e=S.readUEG()*t,t=S.readUEG()*t,r=S.readUEG()*p,p=S.readUEG()*p,this.width-=e+t,this.height-=r+p)};function Ee(t){var e=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(oe){return e.generalProfileIdc===oe||e.generalProfileCompatibilityFlags[oe]};var r,p,S,M,X=new Ht(t);for(this.vpsId=X.readBits(4),this.maxSubLayersMinus1=X.readBits(3),this.temporalIdNestingFlag=X.readBits(1),this.generalProfileSpace=X.readBits(2),this.generalTierFlag=X.readBits(1),this.generalProfileIdc=X.readBits(5),r=0;r<32;r++)this.generalProfileCompatibilityFlags[r]=X.readBits(1),this.generalProfileIdc===0&&0<r&&this.generalProfileCompatibilityFlags[r]&&(this.generalProfileIdc=r);for(r=0;r<6;r++)this.generalConstraintIndicatorFlags.push(X.readUByte());for(this.generalLevelIdc=X.readUByte(),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]=X.readBits(1),this.subLayerLevelPresentFlags[r]=X.readBits(1);for(0<this.maxSubLayersMinus1&&X.skipBits(2*(8-this.maxSubLayersMinus1)),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]&&X.skipBits(48),this.subLayerLevelPresentFlags[r]&&X.readUByte();this.spsId=X.readUEG(),this.codec=Ee.generateCodec(this),this.chromaFormatIdc=X.readUEG(),this.chromaFormatIdc===3&&(this.separateColourPlaneFlag=X.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=X.readUEG(),this.height=X.readUEG(),X.readBits(1)&&(t=Ot[this.chromaFormatIdc],M=ar[this.chromaFormatIdc],p=X.readUEG()*t,t=X.readUEG()*t,S=X.readUEG()*M,M=X.readUEG()*M,this.width-=p+t,this.height-=S+M)}function De(M){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var e,r,p=new Ht(M);if(this.generalProfileIdc=p.readUByte(),this.generalProfileCompatibility=p.readUByte(),this.generalLevelIdc=p.readUByte(),this.spsId=p.readUEG(),this.codec=De.generateCodec(this),-1<Ut.indexOf(this.generalProfileIdc)){if(this.chromaFormatIdc=p.readUEG(),this.chromaFormatIdc===3&&p.skipBits(1),p.skipUEG(),p.skipUEG(),p.skipBits(1),p.readBits(1))for(e=0,r=this.chromaFormatIdc!==3?8:12;e<r;e++)p.readBits(1)&&(e<6?p.skipScalingList(16):p.skipScalingList(64))}else this.chromaFormatIdc=1;if(p.skipUEG(),M=p.readUEG(),M===0)p.skipUEG();else if(M===1)for(p.skipBits(1),p.skipEG(),p.skipEG(),e=0,r=p.readUEG();e<r;e++)p.skipEG();p.skipUEG(),p.skipBits(1);var S,M=p.readUEG()+1,X=p.readUEG()+1,oe=p.readBits(1);oe||p.skipBits(1),this.height=X*(2-oe),p.skipBits(1),this.crop=p.readBits(1),this.crop&&(S=1<<(this.chromaFormatIdc===1||this.chromaFormatIdc===2?1:0),oe=2-oe<<(this.chromaFormatIdc===1?1:0),this.cropLeft=p.readUEG()*S,this.cropRight=p.readUEG()*S,this.cropTop=p.readUEG()*oe,this.cropBottom=p.readUEG()*oe),this.width=16*M-(this.cropRight+this.cropLeft),this.height=16*X-(this.cropTop+this.cropBottom),p.readBits(1)&&p.readBits(1)&&((S=p.readUByte())===255?(this.pixelRatio[0]=p.readUByte()<<8|p.readUByte(),this.pixelRatio[1]=p.readUByte()<<8|p.readUByte()):S<zt.length&&(this.pixelRatio=zt[S]))}function V(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}function ae(t){var e=this;this.trace=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return e._print(Pe.TRACE,r)},this.debug=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return e._print(Pe.DEBUG,r)},this.log=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return e._print(Pe.LOG,r)},this.info=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return e._print(Pe.INFO,r)},this.warn=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return e._print(Pe.WARN,r)},this.error=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return e._print(Pe.ERROR,r)},this.name=t}(ye=xe=xe||{})[ye.NONE=-16]="NONE",ye[ye.DEFAULT=0]="DEFAULT",ye[ye.NONREF=8]="NONREF",ye[ye.BIDIR=16]="BIDIR",ye[ye.NONINTRA=24]="NONINTRA",ye[ye.NONKEY=32]="NONKEY",ye[ye.ALL=48]="ALL",(W=be=be||{})[W.ABORTED=1]="ABORTED",W[W.NETWORK=2]="NETWORK",W[W.DECODE=3]="DECODE",W[W.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",W[W.PARSER=1001]="PARSER",W[W.WEBGL_NOT_SUPPORTED=10005]="WEBGL_NOT_SUPPORTED",W[W.COROUTINE=20001]="COROUTINE",W[W.BUFFERING=20003]="BUFFERING",W[W.RENDERER=20005]="RENDERER",(ye=Oe=Oe||{}).VIDE="vide",ye.SOUN="soun",(W=re=re||{})[W.FLV=0]="FLV",W[W.MP4=1]="MP4",W[W.HLS=2]="HLS",W[W.MPEGTS=3]="MPEGTS",W[W.UNKNOWN=4]="UNKNOWN",(ye=ee=ee||{})[ye.UNKNOWN=0]="UNKNOWN",ye[ye.VIDEO=1]="VIDEO",ye[ye.AUDIO=2]="AUDIO";function de(t,e){var r=t.offset;this.start=e,this.size=t.read(4),this.type=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)).trim(),this.size===1&&(this.size=t.read(8)),this.length=t.offset-r}(W={})[Oe.VIDE]=ee.VIDEO,W[Oe.SOUN]=ee.AUDIO;var Y,ie=W,W=((ye=Y=Y||{})[ye.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",ye[ye.IS_NON_SYNC=65536]="IS_NON_SYNC",ye[ye.PADDING_MASK=917504]="PADDING_MASK",ye[ye.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",ye[ye.DEPENDED_MASK=12582912]="DEPENDED_MASK",ye[ye.DEPENDS_MASK=50331648]="DEPENDS_MASK",ye[ye.DEPENDS_NO=33554432]="DEPENDS_NO",ye[ye.DEPENDS_YES=16777216]="DEPENDS_YES",Q=function(t,e){return(Q=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Q(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),_e=function(){return(_e=Object.assign||function(t){for(var e,r=1,p=arguments.length;r<p;r++)for(var S in e=arguments[r])Object.prototype.hasOwnProperty.call(e,S)&&(t[S]=e[S]);return t}).apply(this,arguments)},fe=new Date("1904-01-01T00:00:00Z").getTime(),Se=(Ze.prototype.append=function(t){this.children.push(t)},Ze.mapBoxToJSON=function(t){return _e({box:t},t.children.reduce(function(e,M){var p=M.header.type,S=e[p],M=Ze.mapBoxToJSON(M);return S?Array.isArray(S)?S.push(M):e[p]=[S,M]:e[p]=M,e},{}))},Ze),Le=(W(je,G=Se),je);He=function(t,e){return(He=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}He(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Re,Be=Se);var Ue=Re;$e=function(t,e){return($e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)};function Ae(t){for(var e=t.byteLength,r=[],p=1;p<e-2;)t[p]===0&&t[p+1]===0&&t[p+2]===3?r.push(p+=2):p++;if(r.length===0)return t;for(var S=e-r.length,M=new Uint8Array(S),X=0,p=0;p<S;X++,p++)X===r[0]&&(X++,r.shift()),M[p]=t[X];return M}(function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}$e(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)})(ge,Ie=Se);var Ie,$e,Be,He,G,Q,ue=ge;function ge(t,e){var r,p=Ie.call(this,t,e)||this;p.nalus=[],p.vps=[],p.sps=[],p.pps=[],p.sei=[],p.configVersion=e.read(1),r=new l(e.read(1),8),p.generalProfileSpace=r.read(2),p.generalTierFlag=r.read(1),p.generalProfileIdc=r.read(5),r=new l(e.read(4),32),p.generalProfileCompatibilityFlags=Array.from(new Array(32)).map(function(){return r.read(1)}),p.generalConstraintIndicatorFlags=Array.from(new Array(6)).map(function(){return e.read(1)}),p.generalLevelIdc=e.read(1),p.minSpatialSegmentationIdc=4095&e.read(2),p.parallelismType=3&e.read(1),p.chromaFormatIdc=3&e.read(1),p.bitDepthLumaMinus8=7&e.read(1),p.bitDepthChromaMinus8=7&e.read(1),p.avgFrameRate=e.read(2),r=new l(e.read(1),8),p.constantFrameRate=r.read(2),p.numTemporalLayers=r.read(3),p.temporalIdNested=r.read(1),p.lengthSizeMinusOne=r.read(2),p.nalus=[];for(var S=e.read(1),M=0;M<S;M++){var X=[],oe=(r=new l(e.read(1),8)).read(1);r.read(1);for(var we=r.read(6),ke=e.read(2),Ce=0;Ce<ke;Ce++)X.push(new Uint8Array(e.read(2)).map(function(){return e.read(1)}));p.nalus.push({completeness:oe,type:we,data:X}),we===I.VPS?X.forEach(function(Ne){return p.vps.push(Ne)}):we===I.SPS?X.forEach(function(Ne){return p.sps.push(Ne)}):we===I.PPS?X.forEach(function(Ne){return p.pps.push(Ne)}):we===I.SEI&&X.forEach(function(Ne){return p.sei.push(Ne)})}return p.codec=jt.generateCodec(p),p}function Re(t,e){var r=Be.call(this,t,e)||this;r.sps=[],r.pps=[],r.configVersion=e.read(1),r.generalProfileIdc=e.read(1),r.generalProfileCompatibility=e.read(1),r.generalLevelIdc=e.read(1),r.lengthSizeMinusOne=3&e.read(1),r.numOfSequenceParameterSets=31&e.read(1);for(var p,M=0,S=[],M=0;M<r.numOfSequenceParameterSets;M++){for(p=e.read(2),S=[];p--;)S.push(e.read(1));r.sps.push(new Uint8Array(S))}for(r.numOfPictureParameterSets=31&e.read(1),M=0;M<r.numOfPictureParameterSets;M++){for(p=e.read(2),S=[];p--;)S.push(e.read(1));r.pps.push(new Uint8Array(S))}return r.codec=At.generateCodec(r),r}function je(t,e){return t=G.call(this,t,e)||this,t.version=e.read(1),t.flag=e.read(3),t}function Ze(t,e){this.children=[],this.isContainer=!1,this.toStandardTime=function(r){return r&&fe+1e3*r},this.header=t}function Z(){var t=this;this._eventMap={},this.listeners=function(e){return t._eventMap[e]||[]},this.emit=function(e,r){return e=t._eventMap[e],!!Array.isArray(e)&&(e.forEach(function(p){return p(r)}),!0)},this.off=function(e,r){var p=t._eventMap[e];return Array.isArray(p)&&(t._eventMap[e]=p.filter(function(S){return S!==r})),t},this.removeAllListeners=function(e){return e===void 0?t._eventMap={}:t._eventMap[e]&&(t._eventMap[e]=[]),t},this.on=function(e,r){return t._eventMap[e]?t._eventMap[e].push(r):t._eventMap[e]=[r],t},this.once=function(e,r){return t.on(e,function p(){for(var S=[],M=0;M<arguments.length;M++)S[M]=arguments[M];t.off(e,p),r.apply(t,S)}),t},this.proxy=function(e,r){r.forEach(function(p){t.on(p,function(){for(var S=[],M=0;M<arguments.length;M++)S[M]=arguments[M];S.unshift(p),e.emit.apply(e,S)})})},this.proxyOnce=function(e,r){r.forEach(function(p){t.once(p,function(){for(var S=[],M=0;M<arguments.length;M++)S[M]=arguments[M];S.unshift(p),e.emit.apply(e,S)})})}}he=function(t,e){return(he=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)};var ce,he,Fe,et,nt,ye=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}he(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Et=((W=ce=ce||{})[W.IDLE=0]="IDLE",W[W.LOADING=1]="LOADING",W[W.SUSPENGING=2]="SUSPENGING",W[W.ERROR=3]="ERROR",et=Error,ye(Ve,et),Ve),se=(ye(Te,Fe=Z),Object.defineProperty(Te.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),Te.prototype._changeStatus=function(t){this.status!==t&&(it.log("loader status changed: ".concat(ce[this.status]," -> ").concat(ce[t])),this.status=t)},Te.prototype.jump=function(t){this.offset=t},Te.prototype.load=function(t,e,r){return this.reset(),this.url=t,this.loadRange(e,r)},Te.prototype.resume=function(){return this.loadRange(this.offset)},Te.prototype.suspend=function(){var t=this.status;this._abort(),t===ce.LOADING&&(this._changeStatus(ce.SUSPENGING),this.emit("suspend",void 0))},Te.prototype.abort=function(){var t=this.status;this._abort(),t!==ce.SUSPENGING&&t!==ce.LOADING||this.emit("abort",void 0)},Te.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},Te.prototype.destroy=function(){this.removeAllListeners(),this.reset()},Te),pe={isIos:!1,isDingtalk:!1,isQQBrowser:!1},W=(window.navigator.userAgent||"").toLowerCase();function Te(t){t===void 0&&(t={});var e=Fe.call(this)||this;return e.timeout=15e3,e.total=1/0,e.offset=0,e.status=ce.IDLE,e.url="",e._handleError=function(r){r.name!=="AbortError"&&(e._changeStatus(ce.ERROR),e.emit("error",{code:be.NETWORK,message:r.message,origin:r}))},e.timeout=t.timeout||e.timeout,e}function Ve(t){return et.call(this,t)||this}/(iPhone\sOS)\s([\d_]+)/i.test(W)&&(pe.isIos=!0),-1<W.indexOf("dingtalk")?pe.isDingtalk=!0:-1<W.indexOf("qqbrowser")&&(pe.isQQBrowser=!0),pt=function(t,e){return(pt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}pt(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Rt,dt=se),Rt.isSupported=function(){return pe.isIos&&(pe.isDingtalk||pe.isQQBrowser)?(console.log("ios","isDingtalk",pe.isDingtalk,"isQQBrowser",pe.isQQBrowser),!1):typeof AbortController<"u"&&typeof ReadableStream<"u"},Rt.prototype.loadRange=function(t,e){var r=this;if(t===void 0&&(t=0),e===void 0&&(e=1/0),!this.url||t>=this.total||this.status===ce.LOADING||this.status===ce.ERROR)return b.resolve(!1);it.info("load, ".concat(this.total," from=").concat(t," to=").concat(e," url=").concat(this.url)),this.abort();var p=new Headers,S=0<t||e<1/0;return S&&(e=Math.min(this.total-1,e),p.set("Range","bytes=".concat(t,"-").concat(e===1/0?"":e))),this._changeStatus(ce.LOADING),this.controller=new AbortController,this.emit("loadstart",void 0),this.timer=setTimeout(this.triggerTimeout,this.timeout),fetch(this.url,{method:"GET",headers:p,signal:this.controller.signal}).then(function(M){if(clearTimeout(r.timer),200<=M.status&&M.status<300){var X;if(r.offset=t,S?(oe=M.headers.get("Content-Range")||"",r.total=Number(oe.split("/")[1])||r.total):r.total=Number(M.headers.get("Content-Length"))||r.total,M.body)return X=M.body.getReader(),function we(){return X.read().then(function(ke){return ke.done?(r.total===1/0&&(r.total=r.offset),r.controller=null,r._changeStatus(ce.IDLE),r.emit("loadend",void 0),!0):(r.offset+=ke.value.byteLength,r.emit("progress",{offset:r.offset-ke.value.byteLength,data:ke.value}),we())})}();if(M.arrayBuffer)return M.arrayBuffer().then(function(we){return r.offset+=we.byteLength,r.emit("progress",{offset:r.offset-we.byteLength,data:new Uint8Array(we)}),r.controller=null,r._changeStatus(ce.IDLE),r.emit("loadend",void 0),!0})}var oe=new Et(": ".concat(r.url));throw oe.response=M,oe}).catch(function(M){return clearTimeout(r.timer),r._handleError(M),!1})},ye=Rt,bt=function(t,e){return(bt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}bt(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(St,vt=se),St.prototype._abort=function(){var t=this.xhr;t&&(t.onerror=null,t.onprogress=null,t.onloadend=null,t.onreadystatechange=null,t.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(ce.IDLE)},St.prototype.loadRange=function(t,e){var r=this;return t===void 0&&(t=0),e===void 0&&(e=1/0),!this.url||t>=this.total||this.status===ce.LOADING||this.status===ce.ERROR?b.resolve(!1):(this.abort(),new b(function(p,S){r.xhr=new XMLHttpRequest,r._resolve=p;function M(ke){var Ce,Ne=X.responseText,Ye=Ne.length,_t=we,Qe=r.offset,Je=Ye-_t;0<Je&&(r.offset+=Je),!oe&&ke&&r.total===1/0&&(r.total=r.offset),0<Je&&(we=Ye,r.emit("progress",{offset:Qe,data:(Ce=Ne.substring(_t,Ye),new Uint8Array(Ce.length).map(function(tt,We){return Ce.charCodeAt(We)}))}))}var X=r.xhr,oe=0<t||e<1/0,we=(X.open("GET",r.url),oe&&X.setRequestHeader("Range","bytes=".concat(t,"-").concat(e===1/0?"":e)),X.onreadystatechange=function(){var ke;X.readyState===X.HEADERS_RECEIVED&&200<=X.status&&X.status<300&&(oe?(ke=X.getResponseHeader("Content-Range")||"",r.total=Number(ke.split("/")[1])||r.total):r.total=Number(X.getResponseHeader("Content-Length"))||r.total),X.readyState>=X.HEADERS_RECEIVED&&clearTimeout(r._timer)},r.offset=t,0);X.timeout=r.timeout,X.onprogress=function(){M(!1)},X.onloadend=function(){M(!0),r.xhr=null,r._changeStatus(ce.IDLE),r.emit("loadend",void 0),p(!0)},X.onerror=function(ke){r.xhr=null,ke=new Error(ke.constructor.name),r._handleError(ke),S(ke)},X.overrideMimeType("text/plain; charset=x-user-defined"),r._changeStatus(ce.LOADING),r.emit("loadstart",void 0),r._timer=setTimeout(r.triggerTimeout,r.timeout),X.send()}))};var W=St,st=ye.isSupported()?ye:W;yt=function(t,e){return(yt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}yt(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(at,Xe=Z),Object.defineProperty(at.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(at.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),Object.defineProperty(at.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),at.probe=function(t){throw new Error("parser should implements static probe")},at.prototype.onProgress=function(t){},at.prototype.onLoadEnd=function(){},at.prototype.load=function(t){return this.reset(),this.loader.load(t)},at.prototype.suspend=function(){return this.loader.suspend()},at.prototype.resume=function(){return this.loader.resume()},at.prototype.reset=function(){this.loader.reset(),this.metadata=null},at.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()};var Xe,yt,vt,bt,dt,pt,ye=at,Tt=(ct.BUFFER_LENGTH=9,ct);function ct(r){this.signature=String.fromCharCode(r.read(1),r.read(1),r.read(1)),this.version=r.read(1);var e=r.read(1),r=(this.size=r.read(4),new l(e,8));r.read(5),this.hasAudio=!!r.read(1),r.read(1),this.hasVideo=!!r.read(1)}function at(t){var e=Xe.call(this)||this;return e.skipFrame=xe.DEFAULT,e.metadata=null,e.options=t,e.onProgress=e.onProgress.bind(e),e.onLoadEnd=e.onLoadEnd.bind(e),e.originLoader=new st(e.options),e.customLoader=t.loader,e.loader.on("progress",e.onProgress),e.loader.on("loadend",e.onLoadEnd),e.skipFrame=t.skipFrame||xe.DEFAULT,e}function St(){var t=vt!==null&&vt.apply(this,arguments)||this;return t.xhr=null,t._timer=-1,t._resolve=function(e){},t.triggerTimeout=function(){t._abort(),t._handleError(new Error(""))},t}function Rt(){var t=dt!==null&&dt.apply(this,arguments)||this;return t.controller=null,t.timer=-1,t._abort=function(){clearTimeout(t.timer),t.controller&&!t.controller.signal.aborted&&(t.controller.abort(),t.controller=null),t._changeStatus(ce.IDLE)},t.triggerTimeout=function(){t._abort(),t._handleError(new Et(""))},t}(W=nt=nt||{})[W.AUDIO=8]="AUDIO",W[W.VIDEO=9]="VIDEO",W[W.SCRIPT=18]="SCRIPT",nr.BUFFER_LENGTH=11;var It,er=nr;function nr(t){this.type=t.read(1),this.size=t.read(3),this.dts=t.read(3),this.dts|=t.read(1)<<24,t.skip(3)}(W=It=It||{})[W.PCM=0]="PCM",W[W.ADPCM=1]="ADPCM",W[W.MP3=2]="MP3",W[W.PCM_LE=3]="PCM_LE",W[W.NELLYMOSER_16KHZ_MONO=4]="NELLYMOSER_16KHZ_MONO",W[W.NELLYMOSER_8KHZ_MONO=5]="NELLYMOSER_8KHZ_MONO",W[W.NELLYMOSER=6]="NELLYMOSER",W[W.PCM_ALAW=7]="PCM_ALAW",W[W.PCM_MULAW=8]="PCM_MULAW",W[W.AAC=10]="AAC",W[W.SPEEX=11]="SPEEX";var br,Nt,Vt=[5512,11025,22050,44100],xr=[8,16];(W=br=br||{})[W.MONO=0]="MONO",W[W.STEREO=1]="STEREO",(W=Nt=Nt||{})[W.ADTS_HEADER=0]="ADTS_HEADER",W[W.RAW=1]="RAW",or.readAudioSpecificConfig=function(p){var p=new l(p.read(2),16),e=p.read(5),r=p.read(4),p=p.read(4);return{audioObjectType:e,sampleRate:u[r],samplingFrequencyIndex:r,channelCount:p}};var qt,hr=or;function or(t){var e=new l(t.read(1),8);this.codecId=e.read(4),this.sampleRate=Vt[e.read(2)],this.sampleSize=xr[e.read(1)],this.soundType=e.read(1),this.packetType=t.read(1),this.data=t.readToUint8()}function Sr(t){var e=t.read(2);return Array.from(Array(e)).map(function(){var r=t.read(1);return 0<r?String.fromCharCode(r):""}).join("")}function Pr(r){var e=Sr(r),r=fr(r);return{key:e,value:r.value,objectEnd:r.objectEnd}}function fr(t){var e={value:null,objectEnd:!1},r=t.read(1);switch(r){case qt.NUMBER:e.value=t.readFloat(8);break;case qt.BOOLEAN:e.value=!!t.read(1);break;case qt.LONG_STRING:case qt.STRING:e.value=Sr(t);break;case qt.OBJECT_START:e.value=function(p){for(var S={};0<p.unreadLength;){var M=Pr(p);if(M.objectEnd)break;S[M.key]=M.value}return S}(t);break;case qt.ECMA_ARRAY:e.value=function(p){for(var S=p.read(4),M={};0<S--;){var X=Pr(p);M[X.key]=X.value}return M}(t);break;case qt.OBJECT_END:e.objectEnd=!0;break;case qt.STRICT_ARRAY:e.value=function(p){for(var S=p.read(4),M=[];0<S--;){var X=fr(p);M.push(X.value)}return M}(t);break;case qt.DATE:e.value=new Date(t.readFloat(8)+60*t.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",r)}return e}(W=qt=qt||{})[W.NUMBER=0]="NUMBER",W[W.BOOLEAN=1]="BOOLEAN",W[W.STRING=2]="STRING",W[W.OBJECT_START=3]="OBJECT_START",W[W.NULL=5]="NULL",W[W.UNDEFINED=6]="UNDEFINED",W[W.REFERENCE=7]="REFERENCE",W[W.ECMA_ARRAY=8]="ECMA_ARRAY",W[W.OBJECT_END=9]="OBJECT_END",W[W.STRICT_ARRAY=10]="STRICT_ARRAY",W[W.DATE=11]="DATE",W[W.LONG_STRING=12]="LONG_STRING";var Jt,ur,kt,Dt,_r,Nr=function(t){this.name=fr(t).value,this.value=fr(t).value};(W=Jt=Jt||{})[W.KEY=1]="KEY",W[W.INTER=2]="INTER",W[W.DISP_INTER=3]="DISP_INTER",W[W.GENERATED_KEY=4]="GENERATED_KEY",W[W.VIDEO_INFO_CMD=5]="VIDEO_INFO_CMD",(W=ur=ur||{})[W.STARTSEEK=0]="STARTSEEK",W[W.ENDSEEK=1]="ENDSEEK",(W=kt=kt||{})[W.JPEG=1]="JPEG",W[W.H263=2]="H263",W[W.SCREEN=3]="SCREEN",W[W.VP6=4]="VP6",W[W.VP6A=5]="VP6A",W[W.SCREEN2=6]="SCREEN2",W[W.H264=7]="H264",W[W.REALH263=8]="REALH263",W[W.MPEG4=9]="MPEG4",W[W.H265=12]="H265",W[W.H266=14]="H266",(W=Dt=Dt||{})[W.AVC_SEQUENCE_HEADER=0]="AVC_SEQUENCE_HEADER",W[W.AVC_NALU=1]="AVC_NALU",W[W.AVC_END=2]="AVC_END",W[W.COCED_FRAMES_X=3]="COCED_FRAMES_X",W[W.METADATA=4]="METADATA",W[W.MPEG2_TS_SEQUENCE_START=5]="MPEG2_TS_SEQUENCE_START",W[W.MULTI_TRACK=6]="MULTI_TRACK",(W=_r=_r||{})[W.OneTrackOneCodec=0]="OneTrackOneCodec",W[W.ManyTracksOneCodec=1]="ManyTracksOneCodec",W[W.ManyTracksManyCodecs=2]="ManyTracksManyCodecs",gr.prototype.bin2str=function(t){return String.fromCharCode.apply(null,t)},gr.prototype.convertCodecNameToVideoCodecID=function(t){return/hvc1/.test(t)||/1cvh/.test(t)?kt.H265:/vvc1/.test(t)||/1cvv/.test(t)||/vvi1/.test(t)?kt.H266:void 0};var tr,Tr=gr,Mt={isFirefox:!1,isOpera:!1,isTrident:!1,isEdge:!1,isChrome:!1,isSafari:!1,isMQQBrowser:!1,isMobile:!1,isIos:!1,isDingtalk:!1},W=window.navigator!==void 0,Ge=W?window.navigator.userAgent:"";function gr(t){this.videoCommand=ur.STARTSEEK,this.codecId=kt.H265,this.packetType=Dt.AVC_NALU,this.cts=0,this.videoFourCC="";var e,r,p=new l(t.read(1),8);this.isExVideoHeader=p.read(1),this.type=p.read(3),this.videoFrameType=this.type,this.isExVideoHeader===0&&(this.codecId=p.read(4),this.packetType=t.read(1),this.type===Jt.VIDEO_INFO_CMD)&&(this.videoCommand=t.read(1)),this.isExVideoHeader===1&&((p=p.read(4))!=Dt.METADATA&&this.videoFrameType===Jt.VIDEO_INFO_CMD?this.videoCommand=t.read(1):p==Dt.MULTI_TRACK?(r=(e=new l(t.read(1),8)).read(4),p=e.read(4),r==_r.ManyTracksManyCodecs&&(String.fromCharCode(t.read(1)),this.videoFourCC=this.bin2str(t.readToUint8(4)))):this.videoFourCC=this.bin2str(t.readToUint8(4)),this.packetType=p),this.codecId=this.convertCodecNameToVideoCodecID(this.videoFourCC)||this.codecId,this.cts=t.read(3)+4286578688^4286578688,this.data=t.readToUint8()}-1<Ge.indexOf("MQQBrowser")?Mt.isMQQBrowser=!0:-1<Ge.indexOf("Firefox")?Mt.isFirefox=!0:-1<Ge.indexOf("Opera")||-1<Ge.indexOf("OPR")?Mt.isOpera=!0:-1<Ge.indexOf("Trident")?Mt.isTrident=!0:-1<Ge.indexOf("Edge")?Mt.isEdge=!0:-1<Ge.indexOf("Chrome")?(Mt.isChrome=!0,(Ge.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1]):-1<Ge.indexOf("Safari")||-1<Ge.indexOf("iPhone")||-1<Ge.indexOf("iPad")||-1<Ge.indexOf("iPod")?Mt.isSafari=!0:-1<Ge.toLowerCase().indexOf("dingtalk")&&(Mt.isDingtalk=!0),/(iPhone\sOS)\s([\d_]+)/i.test(Ge)&&(Mt.isIos=!0),W&&("maxTouchPoints"in(Ge=window.navigator)?Mt.isMobile=0<Ge.maxTouchPoints:"msMaxTouchPoints"in Ge?Mt.isMobile=0<Ge.msMaxTouchPoints:(W=(W=window.matchMedia)==null?void 0:W.call(window,"(pointer:coarse)"))&&W.media==="(pointer:coarse)"?Mt.isMobile=!!W.matches:"orientation"in window?Mt.isMobile=!0:(W=Ge.userAgent,Mt.isMobile=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(W)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(W))),ri=function(t,e){return(ri=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ri(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(mn,pn=Le);var on=mn;ti=function(t,e){return(ti=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ti(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Zt,Ur=ye),Zt.probe=function(t){return!(t.byteLength<9)&&new Tt(new n(t.buffer,t.byteOffset,t.byteLength)).signature==="FLV"},Zt.prototype.parse=function(t,e){var r=[];if(t.byteLength){this.unhandleBuffer&&(t=n.concat(this.unhandleBuffer,t),e-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null);var p=new n(t);for(!this.header&&p.unreadLength>=Tt.BUFFER_LENGTH&&(this.header=new Tt(p),this.header.hasVideo===!1&&(this.header.hasVideo=!0),p.skip(this.header.size-Tt.BUFFER_LENGTH));p.unreadLength>4+er.BUFFER_LENGTH;){p.skip(4);var S=new er(p);if(!(p.unreadLength>=S.size)){p.back(4+er.BUFFER_LENGTH);break}var M=new n(p.buffer,p.offset,S.size);switch(p.skip(S.size),S.type){case nt.VIDEO:r=r.concat(this.parseVideoBody(S,M,p.offset+e));break;case nt.AUDIO:r=r.concat(this.parseAudioBody(S,M,p.offset+e));break;case nt.SCRIPT:this.parseScriptBody(S,M);break;default:return it.warn("unknown tag type",S.type),r}}this.unhandleBuffer=p.unreadLength?p.readToBuffer():null}return r},Zt.prototype.checkMetadata=function(){var t=this.flvMetadata,e=this.header;if(console.log("checkMetadata flvMetadata:",t,"header:",e,", this.metadata:",this.metadata),e&&!this.metadata){var r=[];if(e.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return void console.log("checkMetadata hasVideo no this.videoTrackMeta",this.videoTrackMeta,", this.videoLoaded",this.videoLoaded);this.videoTrackMeta.baseDTS=this.baseVideoDTS,this.videoTrackMeta.basePTS=this.baseVideoPTS,this.videoTrackMeta.fps=t==null?void 0:t.framerate,r.push(this.videoTrackMeta)}if(e.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return void console.log("checkMetadata hasAudio no this.audioTrackMeta",this.audioTrackMeta,", this.audioLoaded",this.audioLoaded);this.audioTrackMeta.baseDTS=this.baseAudioDTS,this.audioTrackMeta.basePTS=this.baseAudioPTS,r.push(this.audioTrackMeta)}var e=this.options,p=e.live,e=e.progressive;this.metadata={formatType:re.FLV,live:!!p,progressive:!p&&!!e,url:this.loader.url,basePTS:Math.min.apply(Math,r.map(function(M){return M.basePTS||0})),baseDTS:Math.min.apply(Math,r.map(function(M){return M.baseDTS||0})),timescale:1e3,duration:1e3*((t==null?void 0:t.duration)||1/0),tracks:r},console.log("checkMetadata loadedmetadata",this.metadata),this.emit("loadedmetadata",this.metadata)}},Zt.prototype.parseVideoBody=function(t,S,r){var p=this,S=new Tr(S),M=(this.emit("loadedtag",{header:t,body:S}),[]),X=S.type===Jt.KEY,oe=!1;if(S.data.length)if(S.packetType===Dt.AVC_SEQUENCE_HEADER){var we,ke,Ce=this.flvMetadata||{},Ne={type:ee.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:Ce.width||0,height:Ce.height||0,codec:"",pixelRatio:[],live:((Ce=this.metadata)==null?void 0:Ce.live)||!1};S.codecId===kt.H264?(we=new de(new n(new ArrayBuffer(8)),0),ke=new n(S.data.buffer,S.data.byteOffset,S.data.byteLength),Ce=new Ue(we,ke),Ne.pps=Ce.pps,Ne.sps=Ce.sps,Ne.codec=Ce.codec,(Ce=Ce.sps[0])&&(wt=new At(Ce.subarray(1)),Ne.width=wt.width,Ne.height=wt.height)):S.codecId===kt.H265?(P.extractAnnexbNAL(S.data).forEach(function(gt){var ze=new n(gt.buffer,gt.byteOffset,gt.length),Ke=new q(ze);Ke.nalType<I.ACCESS_UNIT_DELIMITER&&(Ke.nalType===I.SPS?(ze=new jt(Ae(ze.readToUint8())),Ne.sps.push(gt),Ne.codec=ze.codec,console.log("thisvideoTrackMeta sps.codec=",ze.codec),Ne.width=ze.width,Ne.height=ze.height):Ke.nalType===I.VPS?Ne.vps.push(gt):Ke.nalType===I.PPS&&Ne.pps.push(gt))}),Ne.codec===""&&(we=new de(new n(new ArrayBuffer(8)),0),ke=new n(S.data.buffer,S.data.byteOffset,S.data.byteLength),Ce=new ue(we,ke),Ne.vps=Ce.vps,Ne.pps=Ce.pps,Ne.sps=Ce.sps,Ne.sei=Ce.sei,Ne.codec=Ce.codec,Ce.sps&&0<Ce.sps.length&&(wt=new jt(Ae(Ce.sps[0])),Ne.width=wt.width,Ne.height=wt.height),this.isHVCC=!0)):S.codecId===kt.H266&&(P.extractAnnexbNAL(S.data).forEach(function(gt){var ze=new n(gt.buffer,gt.byteOffset,gt.length),Ke=new z(ze);Ke.nalType<N.VVC_UNSPEC_31&&(Ke.nalType===N.VVC_SPS_NUT?(ze=new ve(Ae(ze.readToUint8())),Ne.width=ze.width,Ne.height=ze.height,Ne.codec=ze.codec,Ne.sps.push(gt)):Ke.nalType===N.VVC_VPS_NUT?Ne.vps.push(gt):Ke.nalType===N.VVC_PPS_NUT&&Ne.pps.push(gt))}),Ne.codec==="")&&(we=new de(new n(new ArrayBuffer(8)),0),ke=new n(S.data.buffer,S.data.byteOffset,S.data.byteLength),Ce=new on(we,ke),Ne.vps=Ce.vps,Ne.pps=Ce.pps,Ne.sps=Ce.sps,Ne.sei=Ce.sei,Ne.codec=Ce.codec,this.isHVCC=!0),this.videoTrackMeta=Ne,this.checkMetadata()}else{var Ye=[];if(S.codecId===kt.H266){var _t={type:ee.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((wt=this.flvMetadata)==null?void 0:wt.width)||0,height:((we=this.flvMetadata)==null?void 0:we.height)||0,codec:"",pixelRatio:[],live:((ke=this.metadata)==null?void 0:ke.live)||!1},Qe=[],Je=[],tt=[],We=[],Ce=[],Ce=4<S.data.length&&S.data[0]===0&&S.data[1]===0&&S.data[2]===0&&S.data[3]===1?P.extractAnnexbNAL(S.data):P.extractAVCCNAL(S.data,3),ht=[],wt=(Ce.forEach(function(ze){var Ke=new n(ze.buffer,ze.byteOffset,ze.length),Ft=new z(Ke);7<=Ft.nalType&&Ft.nalType<=10&&(X=!0,p.videoTrackMeta&&0<p.videoTrackMeta.sps.length&&ht.push(z.createAnnexbStartCode(),p.videoTrackMeta.sps[0]),p.videoTrackMeta&&0<p.videoTrackMeta.pps.length&&ht.push(z.createAnnexbStartCode(),p.videoTrackMeta.pps[0]),p.videoTrackMeta&&0<p.videoTrackMeta.vps.length&&ht.push(z.createAnnexbStartCode(),p.videoTrackMeta.vps[0]),p.videoTrackMeta)&&0<p.videoTrackMeta.sei.length&&ht.push(z.createAnnexbStartCode(),p.videoTrackMeta.sei[0]),ht.push(z.createAnnexbStartCode(),ze),Ft.nalType<N.VVC_UNSPEC_31&&(Ft.nalType===N.VVC_SPS_NUT?(Ke=new ve(Ae(Ke.readToUint8())),_t.width=Ke.width,_t.height=Ke.height,_t.codec=Ke.codec,Qe.push(ze)):Ft.nalType===N.VVC_VPS_NUT?Je.push(ze):Ft.nalType===N.VVC_PPS_NUT?tt.push(ze):Ft.nalType===N.VVC_PREFIX_SEI_NUT&&We.push(ze)),oe=z.isNonRefNALType(Ft.nalType)}),n.concatUint8s(ht));Ye.push(wt),Je.length&&(_t.vps=Je),Qe.length&&(_t.sps=Qe),tt.length&&(_t.pps=tt),We.length&&(_t.sei=We),Qe.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],Je.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.vps.push(ze)}),Qe.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.sps.push(ze)}),tt.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.pps.push(ze)}),We.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.sei.push(ze)})):this.videoTrackMeta=_t)}else if(S.codecId!==kt.H265||this.isHVCC){var Ct=P.extractAVCCNAL(S.data,3),ut={type:ee.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((we=this.flvMetadata)==null?void 0:we.width)||0,height:((ke=this.flvMetadata)==null?void 0:ke.height)||0,codec:"",pixelRatio:[],live:((Ce=this.metadata)==null?void 0:Ce.live)||!1},ft=[],wr=[],mr=[],Xt=[];Ct.forEach(function(gt){var ze=new n(gt.buffer,gt.byteOffset,gt.length),Ke=new q(ze);16<=Ke.nalType&&Ke.nalType<=23&&(X=!0),Ke.nalType<I.ACCESS_UNIT_DELIMITER&&(Ke.nalType===I.SPS?(ze=new jt(Ae(ze.readToUint8())),ft.push(gt),ut.codec=ze.codec,ut.width=ze.width,ut.height=ze.height):Ke.nalType===I.VPS?wr.push(gt):Ke.nalType===I.PPS?mr.push(gt):Ke.nalType===I.SEI?Xt.push(gt):!Mt.isSafari||Ke.nalType===I.TRAIL_R||Ke.nalType===I.TRAIL_N||Ke.nalType===I.IDR_W_RADL||Ke.nalType===I.IDR_N_LP||Ke.nalType===I.CRA?Ye.push(gt):console.warn("skip this nalu nalType:",Ke.nalType),oe=q.isNonRefNALType(Ke.nalType))}),wr.length&&(ut.vps=wr),ft.length&&(ut.sps=ft),mr.length&&(ut.pps=mr),Xt.length&&(ut.sei=Xt),0<ft.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],this.videoTrackMeta.sei=[],wr.forEach(function(gt){var ze;return(ze=p.videoTrackMeta)==null?void 0:ze.vps.push(gt)}),ft.forEach(function(gt){var ze;return(ze=p.videoTrackMeta)==null?void 0:ze.sps.push(gt)}),mr.forEach(function(gt){var ze;return(ze=p.videoTrackMeta)==null?void 0:ze.pps.push(gt)}),Xt.forEach(function(gt){var ze;return(ze=p.videoTrackMeta)==null?void 0:ze.sei.push(gt)})):this.videoTrackMeta=ut)}else{if(this.skipFrame===xe.NONREF&&q.isNonRefNALType(q.extractNALType(S.data,4)))return console.warn("skipFrame isNonRefNALType"),[];var Ct,xt={type:ee.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:((wt=this.flvMetadata)==null?void 0:wt.width)||0,height:((we=this.flvMetadata)==null?void 0:we.height)||0,codec:"",pixelRatio:[],live:((ke=this.metadata)==null?void 0:ke.live)||!1},Qt=[],Wr=[],$r=[],qr=[];(Ct=P.extractAnnexbNAL(S.data)).forEach(function(ze){var Ke=new n(ze.buffer,ze.byteOffset,ze.length),Ft=new q(Ke);16<=Ft.nalType&&Ft.nalType<=23&&(X=!0),Ft.nalType<I.ACCESS_UNIT_DELIMITER&&(Ft.nalType===I.SPS?(Ke=new jt(Ae(Ke.readToUint8())),Qt.push(ze),xt.codec=Ke.codec,xt.width=Ke.width,xt.height=Ke.height):Ft.nalType===I.VPS?Wr.push(ze):Ft.nalType===I.PPS?$r.push(ze):Ft.nalType===I.SEI&&qr.push(ze)),oe=q.isNonRefNALType(Ft.nalType),Ye.push(ze)}),Wr.length&&(xt.vps=Wr),Qt.length&&(xt.sps=Qt),$r.length&&(xt.pps=$r),qr.length&&(xt.sei=qr),Qt.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],Wr.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.vps.push(ze)}),Qt.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.sps.push(ze)}),$r.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.pps.push(ze)}),qr.forEach(function(ze){var Ke;return(Ke=p.videoTrackMeta)==null?void 0:Ke.sei.push(ze)})):this.videoTrackMeta=xt)}if(!this.videoLoaded&&this.videoTrackMeta){if(!X)return[];this.videoLoaded=!0,this.baseVideoDTS=t.dts,this.baseVideoPTS=S.cts+t.dts,this.checkMetadata()}this.videoTrackMeta&&S.codecId==kt.H265&&X&&(this.videoTrackMeta.pps.forEach(function(gt){return Ye.unshift(gt)}),this.videoTrackMeta.sps.forEach(function(gt){return Ye.unshift(gt)}),this.videoTrackMeta.vps.forEach(function(gt){return Ye.unshift(gt)}),this.videoTrackMeta.sei.forEach(function(gt){return Ye.unshift(gt)})),Ye.length&&(wt={trackId:2,codec:((Ce=this.videoTrackMeta)==null?void 0:Ce.codec)||"",trackType:ee.VIDEO,isSync:X||S.type===Jt.KEY,isNonRef:oe,data:Ye,dts:t.dts,pts:t.dts+S.cts,offset:r,size:Ye.reduce(function(gt,ze){return gt+ze.byteLength},0)},M.push(wt))}else it.warn("[videox] flv parse empty data",t,S);return M},Zt.prototype.parseAudioBody=function(t,S,r){var p,S=new hr(S),M=(this.emit("loadedtag",{header:t,body:S}),[]);return S.packetType===Nt.ADTS_HEADER?(p=new n(S.data.buffer,S.data.byteOffset,S.data.byteLength),p=hr.readAudioSpecificConfig(p),this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:ee.AUDIO,codec:"mp4a.40."+p.audioObjectType,timescale:1e3,audioObjectType:p.audioObjectType,sampleRate:p.sampleRate,samplingFrequencyIndex:p.samplingFrequencyIndex,sampleSize:S.sampleSize,channelCount:p.channelCount},this.checkMetadata()):(this.audioLoaded||(this.audioLoaded=!0,this.baseAudioDTS=t.dts,this.baseAudioPTS=t.dts,this.checkMetadata()),M.push({codec:((p=this.audioTrackMeta)==null?void 0:p.codec)||"",trackId:1,trackType:ee.AUDIO,isSync:!0,isNonRef:!1,data:[S.data],dts:t.dts,pts:t.dts,offset:r,size:S.data.byteLength})),M},Zt.prototype.parseScriptBody=function(t,e){e=new Nr(e),this.emit("loadedtag",{header:t,body:e}),t=e.value,t&&e.name==="onMetaData"&&(this.flvMetadata=t,it.info("flv script tag loaded, flv metadata:",this.flvMetadata))},Zt.prototype.onProgress=function(r){var e=r.data,r=r.offset;e.byteLength&&(e=this.parse(e.buffer,r)).length&&(r=void 0,this.cachePackets.length?(r=this.cachePackets.concat(e),this.cachePackets=[]):r=e,this.metadata&&this.loader.status!==ce.SUSPENGING?this.emit("loadeddata",{packets:r}):this.cachePackets=r)},Zt.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},Zt.prototype.seek=function(){},Zt.prototype.reset=function(){Ur.prototype.reset.call(this),this.cachePackets=[],this.videoLoaded=!1,this.audioLoaded=!1,this.baseVideoDTS=0,this.baseVideoPTS=0,this.baseAudioDTS=0,this.baseAudioPTS=0,this.header=null,this.unhandleBuffer=null,this.flvMetadata=null,this.videoTrackMeta=null,this.audioTrackMeta=null};var an=Zt;ei=function(t,e){return(ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ei(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(vn,Zr=Se);var Wt=vn;Jr=function(t,e){return(Jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Jr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(yn,dn=Wt);var Mr=yn;Qr=function(t,e){return(Qr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Qr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(gn,Yr=Mr);var sn=gn;Kr=function(t,e){return(Kr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Kr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(_n,cn=Se);var Vo=_n;Gr=function(t,e){return(Gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Gr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(fn,ln=Wt);var Wo=fn;zr=function(t,e){return(zr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}zr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(hn,un=Se);var Xr,un,zr,ln,Gr,cn,Kr,Yr,Qr,dn,Jr,Zr,ei,Ur,ti,pn,ri,$o=hn,Ge=(Xr=function(t,e){return(Xr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Xr(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});function hn(t,e){var r=un.call(this,t,e)||this;r.entries=[],r.version=e.read(1),r.flag=e.read(3),r.entryCount=e.read(4);for(var p=0;p<r.entryCount;p++){var S=r.version===1;r.entries.push({segmentDuration:e.read(S?8:4),mediaTime:e.read(S?8:4),mediaRateInteger:e.read(2),mediaRateFraction:e.read(2)})}return r}function fn(t,e){return t=ln.call(this,t,e)||this,t.version=e.read(1),t.flag=e.read(3),t.entryCount=e.read(4),t}function _n(t,e){return t=cn.call(this,t,e)||this,t.bufferSizeDB=e.read(4),t.maxBitrate=e.read(4),t.avgBitrate=e.read(4),t}function gn(){return Yr!==null&&Yr.apply(this,arguments)||this}function yn(r,e){var r=dn.call(this,r,e)||this,p=(e.skip(4),e.skip(2),r.bitReferenceId=e.read(2),r.codeStreamVersion=e.read(4),e.skip(4),e.skip(8),r.width=e.read(2),r.heigth=e.read(2),r.horizontalResolution=e.read(4),r.verticalResolution=e.read(4),e.skip(4),r.frameCount=e.read(2),Math.min(e.read(1),32));return r.compressorName=Array.from(new Array(p)).map(function(){return String.fromCharCode(e.read(1))}).join(""),e.skip(32-(p+1)),r.depth=e.read(2),e.skip(2),r}function vn(){var t=Zr!==null&&Zr.apply(this,arguments)||this;return t.isContainer=!0,t}function Zt(){var t=Ur!==null&&Ur.apply(this,arguments)||this;return t.header=null,t.flvMetadata=null,t.videoTrackMeta=null,t.audioTrackMeta=null,t.unhandleBuffer=null,t.cachePackets=[],t.videoLoaded=!1,t.baseVideoPTS=0,t.baseVideoDTS=0,t.audioLoaded=!1,t.baseAudioPTS=0,t.baseAudioDTS=0,t.isHVCC=!1,t.formatType=re.FLV,t}function mn(p,e){var r=pn.call(this,p,e)||this,p=(r.generalTierFlag=0,r.numBytesConstraintInfo=0,r.generalProfileIdc=0,r.generalLevelIdc=0,r.chromaFormatIdc=0,r.bitDepthLumaMinus8=0,r.bitDepthChromaMinus8=0,r.avgFrameRate=0,r.constantFrameRate=0,r.lengthSizeMinusOne=0,r.olsIdx=0,r.ptlFrameOnlyConstraintFlag=0,r.ptlMultilayerEnabledFlag=0,r.maxPictureWidth=0,r.maxPictureHeight=0,r.nalus=[],r.vps=[],r.sps=[],r.pps=[],r.sei=[],r.codec="",r.codecTag="vvc1",(Ce=new l(e.read(1),8)).skip(5),Ce.read(2)),S=Ce.read(1);if(r.lengthSizeMinusOne=p,S){var p=(Ce=new l(e.read(3),24)).read(9),M=Ce.read(3),S=Ce.read(2),oe=Ce.read(2),X=Ce.read(3),p=(r.olsIdx=p,r.constantFrameRate=S,r.chromaFormatIdc=oe,r.bitDepthLumaMinus8=X,Ce.skip(5),(Ce=new l(e.read(2),16)).skip(2),Ce.read(6)),S=Ce.read(7),oe=Ce.read(1),X=(r.numBytesConstraintInfo=p,r.generalTierFlag=oe,r.generalProfileIdc=S,e.read(1)),oe=(r.generalLevelIdc=X,(Ce=new l(e.read(1),8)).read(1)),S=Ce.read(1),we=(r.ptlFrameOnlyConstraintFlag=oe,r.ptlMultilayerEnabledFlag=S,0),ke=(0<p?Ce.skip(8*p-2):Ce.read(6),0);if(1<M){for(var Ce=new l(e.read(1),8),Ne=0,ke=M-2;0<=ke;--ke)Ne|=Ce.read(1)<<ke;for(ke=M;ke<=8&&1<M;++ke)Ce.read(1);for(ke=M-2;0<=ke;--ke)Ne&1<<ke&&e.read(1);var Ye=e.read(1),_t=[];if(Ye)for(we=0;we<Ye;we++)_t.push(e.readInt(1))}X=e.read(2),oe=e.read(2),S=(r.maxPictureWidth=X,r.maxPictureHeight=oe,e.read(2)),r.avgFrameRate=S}for(var Qe=e.read(1),tt=0,Je=0,tt=0;tt<Qe;tt++){(Ce=new l(e.read(1),8)).read(1),Ce.skip(2);var We=Ce.read(5),ht=[],wt=0;for(We!=N.VVC_DCI_NUT&&We!=N.VVC_OPI_NUT&&(wt=e.read(2)),Je=0;Je<wt;Je++)ht.push(new Uint8Array(e.read(2)).map(function(){return e.read(1)}));We===N.VVC_VPS_NUT?ht.forEach(function(Ct){return r.vps.push(Ct)}):We===N.VVC_SPS_NUT?ht.forEach(function(Ct){return r.sps.push(Ct)}):We===N.VVC_PPS_NUT&&ht.forEach(function(Ct){return r.pps.push(Ct)})}return r.configVersion=0,r.codec="vvc1.1.L48.CA",r}(W=tr=tr||{})[W.OD=1]="OD",W[W.IOD=2]="IOD",W[W.ESD=3]="ESD",W[W.DCD=4]="DCD",W[W.DSD=5]="DSD",W[W.SLCD=6]="SLCD";{let r=function(){this.constructor=ii};Cr.readSize=function(p){for(var S,M=0,X=4;X--&&(M=M<<7|127&(S=p.read(1)),128&S););return M},Cr.extractDescriptors=function(p){for(var S,M,X,oe=[];p.unreadLength;){if(S=new Cr(p),X=new n(p.buffer,p.offset,S.size),p.skip(S.size),S.size<=0)return oe;switch(S.tag){case tr.ESD:M=new Xo(S,X);break;case tr.DCD:M=new zo(S,X);break;case tr.DSD:M=new Go(S,X);break;case tr.SLCD:M=new Ko(S,X);break;default:M=null}M&&X.unreadLength&&(M.children=Cr.extractDescriptors(X)),oe.push(M)}return oe};var Gt,qo=Cr,kr=(Ri.findDescriptor=function(p,S){var M;return p.some(function(X){return!!(M=X.probe.tag===S?X:Ri.findDescriptor(X.children,S))}),M},Ri),Xo=(Ge(so,Un=kr),so),zo=(Ge(ao,Mn=kr),ao),Go=(Ge(oo,Nn=kr),oo),Ko=(Ge(no,On=kr),no);Li=function(p,S){return(Li=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var W,Yo=((W=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Li(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(io,Dn=Le),io);Ii=function(p,S){return(Ii=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var Ge,Qo=((Ge=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Ii(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(ro,An=Se),ro);Ci=function(p,S){return(Ci=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var W,Jo=((W=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Ci(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(to,ki=Mr),to);Pi=function(p,S){return(Pi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var Ge,Zo=((Ge=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Pi(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(eo,xi=Mr),eo);wi=function(p,S){return(wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var W,ea=((W=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}wi(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(Zn,Rn=Se),Zn);Ei=function(p,S){return(Ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var Ge,ta=((Ge=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Ei(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(Jn,Ln=Se),Jn);Ti=function(p,S){return(Ti=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var W,ra=((W=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Ti(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(Qn,In=Se),Qn);Si=function(p,S){return(Si=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var Ge,ia=((Ge=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}Si(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(Yn,Cn=Wt),Yn);bi=function(p,S){return(bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)};var W,na=((W=function(p,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=p}bi(p,S),p.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)})(Kn,kn=Se),Kn),ii=(mi=function(p,S){return(mi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(M,X){M.__proto__=X}:function(M,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(M[oe]=X[oe])}))(p,S)},Gn),Er=Pn=Se;if(typeof Er!="function"&&Er!==null)throw new TypeError("Class extends value "+String(Er)+" is not a constructor or null");mi(ii,Er),ii.prototype=Er===null?Object.create(Er):(r.prototype=Er.prototype,new r);var oa=Gn}vi=function(t,e){return(vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}vi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(zn,xn=Se);var aa=zn;yi=function(t,e){return(yi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}yi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Xn,wn=Se);var sa=Xn;gi=function(t,e){return(gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}gi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(qn,En=Se);var ua=qn;_i=function(t,e){return(_i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}_i(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}($n,fi=Wt);var la=$n;hi=function(t,e){return(hi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}hi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Wn,pi=Wt);var ca=Wn;di=function(t,e){return(di=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}di(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Vn,ci=Le);var da=Vn;li=function(t,e){return(li=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}li(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Fn,ui=Wt);var pa=Fn;si=function(t,e){return(si=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}si(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Hn,Tn=Le);var ha=Hn;ai=function(t,e){return(ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ai(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(jn,Sn=Le);var fa=jn;oi=function(t,e){return(oi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}oi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Bn,bn=Le);var ni,bn,oi,Sn,ai,Tn,si,ui,li,ci,di,pi,hi,fi,_i,En,gi,wn,yi,xn,vi,Pn,mi,kn,bi,Cn,Si,In,Ti,Ln,Ei,Rn,wi,xi,Pi,ki,Ci,An,Ii,Dn,Li,On,Nn,Mn,Un,_a=Bn,Ge=(ni=function(t,e){return(ni=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ni(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});function Bn(t,e){return t=bn.call(this,t,e)||this,t.version===1?t.baseMediaDecodeTime=e.read(8):t.baseMediaDecodeTime=e.read(4),t}function jn(t,e){var r=Sn.call(this,t,e)||this;r.references=[],r.trackId=e.read(4),r.timescale=e.read(4),r.version===0?(r.pts=e.read(4),r.offset=e.read(4)):(r.pts=e.read(8),r.offset=e.read(8)),e.skip(2),r.references=[];for(var p=e.read(2),S=0;S<p;S++){var M=new l(e.read(4),32),X=e.read(4),oe=new l(e.read(4),32);r.references.push({type:M.read(1),size:M.read(31),duration:X,startWithSap:oe.read(1),sapType:oe.read(3),sapDeltaTime:oe.read(28)})}return r}function Hn(t,e){var r=Tn.call(this,t,e)||this;r.isLeadings=[],r.sampleDependsOns=[],r.sampleIsDependedOns=[],r.sampleHasRedundancys=[];for(var p=0,S=void 0;p<e.unreadLength;p++)S=new l(e.read(1),8),r.isLeadings[p]=S.read(2),r.sampleDependsOns[p]=S.read(2),r.sampleIsDependedOns[p]=S.read(2),r.sampleHasRedundancys[p]=S.read(2);return r}function Fn(){return ui!==null&&ui.apply(this,arguments)||this}function Vn(){return ci!==null&&ci.apply(this,arguments)||this}function Wn(){return pi!==null&&pi.apply(this,arguments)||this}function $n(){return fi!==null&&fi.apply(this,arguments)||this}function qn(t,e){return t=En.call(this,t,e)||this,t.version=e.read(1),t.flag=e.read(3),t.graphicsMode=e.read(2),t.opcolor=[e.read(2),e.read(2),e.read(2)],t}function Xn(t,e){return t=wn.call(this,t,e)||this,t.version=e.read(1),t.flag=e.read(3),t}function zn(t,e){var r=xn.call(this,t,e)||this;r.matrix=[],r.version=e.read(1),r.flag=e.read(3),r.createTime=r.toStandardTime(e.read(4)),r.modifyTime=r.toStandardTime(e.read(4)),r.trackId=e.read(4),e.skip(4),r.duration=e.read(4),e.skip(8),r.layer=e.read(2),r.alternateGroup=e.read(2),r.volume=+(e.read(1)+"."+e.read(1)),e.skip(2);for(var p=0;p<9;p++)r.matrix.push(+(e.read(2)+"."+e.read(2)));return r.width=+(e.read(2)+"."+e.read(2)),r.height=+(e.read(2)+"."+e.read(2)),r}function Gn(t,e){var r=Pn.call(this,t,e)||this;for(r.data=[];0<e.unreadLength;)r.data.push(e.read(1));return r}function Kn(t,e){var r=kn.call(this,t,e)||this;r.matrix=[],r.version=e.read(1),r.flag=e.read(3),r.createTime=r.toStandardTime(e.read(4)),r.modifyTime=r.toStandardTime(e.read(4)),r.timeScale=e.read(4),r.duration=e.read(4),r.rate=+(e.read(2)+"."+e.read(2)),r.volume=+(e.read(1)+"."+e.read(1)),e.skip(10);for(var p=0;p<9;p++)r.matrix.push(+(e.read(2)+"."+e.read(2)));return e.skip(24),r.nextTrackId=e.read(4),r}function Yn(t,e){return t=Cn.call(this,t,e)||this,e.skip(6),t.dataReferenceIndex=e.read(2),e.skip(8),t.channelCount=e.read(2),t.sampleSize=e.read(2),e.skip(4),t.sampleRate=e.read(4)>>>16,t}function Qn(p,e){function r(M){return 96+(31&M)}var p=In.call(this,p,e)||this,S=(p.version=e.read(1),p.flag=e.read(3),p.version===1),S=(p.createTime=p.toStandardTime(e.read(S?8:4)),p.modifyTime=p.toStandardTime(e.read(S?8:4)),p.timeScale=e.read(4),p.duration=e.read(S?8:4),e.read(2));return p.language=String.fromCharCode(r(S>>10),r(S>>5),r(S)),p.quality=+(e.read(1)+"."+e.read(1)),p}function Jn(t,e){var r=Ln.call(this,t,e)||this;return r.data=e.readToUint8(t.size-t.length),r}function Zn(t,e){var r=Rn.call(this,t,e)||this;for(r.name="",r.version=e.read(1),r.flag=e.read(3),r.preDefined=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)),r.handleType=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)),e.skip(12);0<e.unreadLength;)r.name+=String.fromCharCode(e.read(1));return r}function eo(){return xi!==null&&xi.apply(this,arguments)||this}function to(){return ki!==null&&ki.apply(this,arguments)||this}function ro(t,e){var r=An.call(this,t,e)||this;for(r.compatibleBrands=[],r.majorBrand=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)),r.minorVersion=e.read(4);4<=e.unreadLength;)r.compatibleBrands.push(String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)));return r}function io(r,p){var r=Dn.call(this,r,p)||this,p=(r.descriptors=[],r.audioObjectType=0,r.samplingFrequencyIndex=0,r.descriptors=qo.extractDescriptors(p),kr.findDescriptor(r.descriptors,tr.DCD)),S=kr.findDescriptor(r.descriptors,tr.DSD);return S&&(r.audioObjectType=S.audioObjectType,r.samplingFrequencyIndex=S.samplingFrequencyIndex),r.codec=p&&S?"mp4a."+p.mepg4Audio.toString(16)+"."+S.audioObjectType.toString(16):"mp4a",r}function no(t,e){return t=On.call(this,t)||this,t.esId=e.read(2),t}function oo(t,e){return t=Nn.call(this,t)||this,e=new l(e.read(2),16),t.audioObjectType=e.read(5),t.samplingFrequencyIndex=e.read(4),t.channel=e.read(4),t.frameLengthFlag=e.read(1),t.dependsOnCoreCoder=e.read(1),t.extesionFlag=e.read(1),t}function ao(t,e){return t=Mn.call(this,t)||this,t.mepg4Audio=e.read(1),t.audioStream=e.read(1),t.bufferSize=e.read(3),t.maxBitrate=e.read(4),t.avgBitrate=e.read(4),t}function so(t,e){return t=Un.call(this,t)||this,t.streamDependenceFlag=0,t.URLFlag=0,t.OCRStreamFlag=0,t.esId=e.read(2),t.esFlag=e.read(1),128&t.esFlag&&(t.streamDependenceFlag=e.read(2)),64&t.esFlag&&(t.URLFlag=e.read(1),e.skip(t.URLFlag)),32&t.esFlag&&(t.OCRStreamFlag=e.read(2)),t}function Ri(t){this.children=[],this.probe=t}function Cr(t){this.tag=t.read(1),this.size=Cr.readSize(t)}(W=Gt=Gt||{})[W.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",W[W.SAMPLE_DESC=2]="SAMPLE_DESC",W[W.SAMPLE_DUR=8]="SAMPLE_DUR",W[W.SAMPLE_SIZE=16]="SAMPLE_SIZE",W[W.SAMPLE_FLAG=32]="SAMPLE_FLAG",W[W.DUR_EMPTY=65536]="DUR_EMPTY",W[W.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",Ge(po,lo=Le);var Kt,ga=po;Di=function(t,e){return(Di=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Di(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(co,uo=Le);var Ai,uo,Di,lo,ya=co,W=(Ai=function(t,e){return(Ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ai(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});function co(t,e){return t=uo.call(this,t,e)||this,t.trackId=e.read(4),t.defaultSampleDescriptionIndex=e.read(4),t.defaultSampleDuration=e.read(4),t.defaultSampleSize=e.read(4),t.defaultSampleFlag=e.read(4),t}function po(t,e){return t=lo.call(this,t,e)||this,t.baseDataOffset=0,t.defaultSampleDescriptionIndex=0,t.defaultSampleDuration=0,t.defaultSampleSize=0,t.defaultSampleFlag=0,t.trackId=e.read(4),t.flag&Gt.BASE_DATA_OFFSET&&(t.baseDataOffset=e.read(8)),t.flag&Gt.SAMPLE_DESC&&(t.defaultSampleDescriptionIndex=e.read(4)),t.flag&Gt.SAMPLE_DUR&&(t.defaultSampleDuration=e.read(4)),t.flag&Gt.SAMPLE_SIZE&&(t.defaultSampleSize=e.read(4)),t.flag&Gt.SAMPLE_FLAG&&(t.defaultSampleFlag=e.read(4)),t}(Ge=Kt=Kt||{})[Ge.DATA_OFFSET=1]="DATA_OFFSET",Ge[Ge.FIRST_FLAG=4]="FIRST_FLAG",Ge[Ge.DURATION=256]="DURATION",Ge[Ge.SIZE=512]="SIZE",Ge[Ge.FLAG=1024]="FLAG",Ge[Ge.CTS_OFFSET=2048]="CTS_OFFSET",W(Ao,To=Le);var lr,va=Ao;$i=function(t,e){return($i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}$i(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Ro,So=Se);var ma=Ro;Wi=function(t,e){return(Wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Wi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Lo,bo=Se);var ba=Lo;Vi=function(t,e){return(Vi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Vi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Io,mo=Se);var Sa=Io;Fi=function(t,e){return(Fi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Fi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Co,vo=Se);var Ta=Co;Hi=function(t,e){return(Hi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Hi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(ko,yo=Wt);var Ea=ko;ji=function(t,e){return(ji=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}ji(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Po,go=Wt);var wa=Po;Bi=function(t,e){return(Bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Bi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(xo,_o=Se);var xa=xo;Ui=function(t,e){return(Ui=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)};function ho(t){return Array.isArray(t)?t:t?[t]:[]}(function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ui(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)})(wo,fo=Se);var Pa=wo,ka=(jr.prototype.addTrack=function(t){this.tracks.push(t)},jr.prototype.getTracks=function(){return this.tracks},jr.prototype.getTrackById=function(t){return this.tracks.find(function(e){return e.options.id===t})},jr),Oi=function(){return(Oi=Object.assign||function(t){for(var e,r=1,p=arguments.length;r<p;r++)for(var S in e=arguments[r])Object.prototype.hasOwnProperty.call(e,S)&&(t[S]=e[S]);return t}).apply(this,arguments)},Ca=(yr.prototype.getSamples=function(){return this.samples},yr.prototype.getNextSampleOffset=function(){var t=this.samples[this.nextSampleIndex];return t?t.offset:0},yr.prototype.addSample=function(t){this.samples.push(t),this.duration+=t.duration},yr.prototype.processNextSample=function(t,e){e===void 0&&(e=0);var r=this.samples[this.nextSampleIndex];if(r)return this.processSample(t,e,r)},yr.prototype.processSample=function(t,S,r){var p=(S=S===void 0?0:S)+t.byteLength,S=r.offset-S;if(0<=S&&r.offset+r.size<=p)return this.nextSampleIndex++,Oi(Oi({},r),{data:t.subarray(S,S+r.size)})},yr.prototype.processSamples=function(t,e){e===void 0&&(e=0);for(var r=this.samples,p=[],S=this.nextSampleIndex,M=r.length;S<M;S++){var X=this.processSample(t,e,r[S]);if(!X)break;p.push(X)}return p},yr.prototype.seek=function(t){for(var e,r=t*this.options.timeScale,p=-1,S=-1,M=0,X=this.samples.length;M<X;M++)if((e=this.samples[M]).isSync&&(S=M),e.dts+e.cts>=r){p=S;break}if(-1<p)return this.nextSampleIndex=p,this.samples[p]},yr),Ia=(Br.prototype.createMedia=function(t){return this._parseMoovJSON(t)},Br.prototype._parseMoovJSON=function(t){var e=this,r=t.mvhd.box,p=new ka({duration:r.duration,timeScale:r.timeScale,rate:r.rate,modifyTime:r.modifyTime,createTime:r.createTime});return t.trak&&[].concat(t.trak).forEach(function(we){var M=we.tkhd,we=we.mdia,oe=we.mdhd,X=we.hdlr,we=we.minf.stbl,M=M.box,X=X.box,oe=oe.box,Ce=ie[X.handleType],we=e._buildSamples(we,Ce),ke={id:M.trackId,name:X.name,handleType:X.handleType,type:Ce,createTime:M.createTime,modifyTime:M.modifyTime,layer:M.layer,volume:M.volume,matrix:M.matrix,duration:M.duration,width:M.width,height:M.height,timeScale:oe.timeScale,language:oe.language,quality:oe.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},Ce=(X=t.mvex)==null?void 0:X.trex,Ne=(Ce&&[].concat(Ce).forEach(function(Ye){Ye=Ye.box,ke.defaultSampleDescriptionIndex=Ye.defaultSampleDescriptionIndex,ke.defaultSampleDuration=Ye.defaultSampleDuration,ke.defaultSampleSize=Ye.defaultSampleSize,ke.defaultSampleFlag=Ye.defaultSampleFlag}),new Ca(ke));we.forEach(function(Ye){return Ne.addSample(Ye)}),p.addTrack(Ne)}),p},Br.prototype._buildSamples=function(t,e){var r,p,S,M,X,oe,we,ke,Ce,Ne,Ye,_t,Qe,Je,tt,We,ht,wt=t.stts,Ct=t.stss,ut=t.ctts,ft=t.stsc,wr=t.stsz||t.stz2;return wr?(oe=t.stco||t.co64,we=ft.box,ke=Ct==null?void 0:Ct.box,Ce=wt.box,Ne=ut==null?void 0:ut.box,Je=Qe=_t=Ye=-1,tt=0,We=[],(ht=wr.box.sampleSizes).forEach(function(mr,Xt){var xt={},Qt=we.entries;xt.size=mr,xt.trackType=e,Xt===0?(p=1,r=0,xt.chunkIndex=p,X=Qt[xt.chunkRunIndex=r].samplePerChunk,M=0,S=r+1<Qt.length?Qt[r+1].firstChunk-1:1/0):Xt<X?(xt.chunkIndex=p,xt.chunkRunIndex=r):(p++,M=0,S<(xt.chunkIndex=p)&&(S=++r+1<Qt.length?Qt[r+1].firstChunk-1:1/0),X+=Qt[xt.chunkRunIndex=r].samplePerChunk),xt.descriptionIndex=Qt[r].sampleDescriptionIndex-1,xt.offset=oe.box.chunkOffsets[xt.chunkIndex-1]+M,M+=xt.size,Ye<Xt&&(_t++,Ye=Math.max(Ye,0),Ye+=Ce.sampleCounts[_t]),0<Xt?((mr=We[Xt-1]).duration=Ce.sampleDurations[_t],xt.dts=We[Xt-1].dts+mr.duration):xt.dts=0,Ne?(Qe<=Xt&&(Je++,Qe=Math.max(Qe,0),Qe+=Ne.sampleCounts[Je]),xt.cts=Ne.sampleOffsets[Je]):xt.cts=0,ke?Xt===ke.sampleNumbers[tt]-1?(xt.isSync=!0,tt++):xt.isSync=!1:xt.isSync=!0,xt.isLast=Xt===ht.length-1,We.push(xt)}),We):[]},Br),La=(Lr.prototype.init=function(t){this.options=t},Lr.prototype.parse=function(t){var e=this;ho(t.traf).forEach(function(r){return e._buildSamples(r,t.box)})},Lr.prototype._buildSamples=function(t,e){var r=t.tfhd.box,p=this._getTrakById(r.trackId);if(p)for(var S=p.options,M=t.tfdt.box,X=r.flag,oe=(X&Gt.SAMPLE_DESC?r:S).defaultSampleDescriptionIndex,we=(X&Gt.SAMPLE_DUR?r:S).defaultSampleDuration,ke=(X&Gt.SAMPLE_SIZE?r:S).defaultSampleSize,Ce=(X&Gt.SAMPLE_FLAG?r:S).defaultSampleFlag,Ne=ho(t.trun),Ye=S.id,_t=S.type,Qe=X&Gt.BASE_DATA_OFFSET?r.baseDataOffset:X&Gt.DEFAULT_BASE_IS_MOOF?e.header.start:0,Je=0,tt=0;tt<Ne.length;tt++)for(var We=Ne[tt].box,ht=We.flag,wt=We.dataOffset+Qe,Ct=0;Ct<We.sampleCount;Ct++){var ut={},ft=(ut.trackId=Ye,ut.trackType=_t,ut.descriptionIndex=oe,ht&Kt.SIZE?ut.size=We.sampleSizes[Ct]:ut.size=ke,ht&Kt.DURATION?ut.duration=We.sampleDurations[Ct]:ut.duration=we,ut.dts=0<Je?Je:M?M.baseMediaDecodeTime:0,Je=ut.dts+ut.duration,ht&Kt.CTS_OFFSET?ut.cts=We.sampleCTSs[Ct]:ut.cts=0,Ce);ht&Kt.FLAG?ft=We.sampleFlags[Ct]:Ct===0&&ht&Kt.FIRST_FLAG&&(ft=We.firstSampleFlag),ut.offset=wt,ut.flag=ft,ut.isSync=!(ft&(Y.IS_NON_SYNC|Y.DEPENDS_YES)),ut.isLeading=ft>>26&3,ut.dependsOn=ft>>24&3,ut.isDependedOn=ft>>22&3,ut.hasRedundancy=ft>>20&3,ut.degradationPriority=65535&ft,wt+=ut.size,ut.isLast=tt===Ne.length-1&&Ct===We.sampleCount-1,p.addSample(ut)}},Lr.prototype.destroy=function(){this.options=null},Lr);Mi=function(t,e){return(Mi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Mi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(rr,Ni=ye),rr.probe=function(t){return!(t.byteLength<8)&&[t[4],t[5],t[6],t[7]].map(function(e){return String.fromCharCode(e)}).join("")==="ftyp"},rr.prototype.processPackets=function(t,e){var r,p=this,S=[];return this.media&&t.byteLength&&(this.media.getTracks().forEach(function(M){M.processSamples(t,e).forEach(function(X){X=p.convertSampleToPacket(X),X&&S.push(X)})}),r=this.getMinNextSampleOffset()-e,this.unhandleBuffer=r>=t.byteLength?null:t.slice(r).buffer),S},rr.prototype.seek=function(t){var e,r=this.options.progressive;this.unhandleBuffer=null,r&&this.loader.suspend(),(e=this.media)!=null&&e.getTracks().map(function(p){return p.seek(t)}),r&&this.loader.loadRange(this.getMinNextSampleOffset())},rr.prototype.onProgress=function(r){var e=r.data,r=r.offset;e.length&&(this.unhandleBuffer&&(e=n.concatUint8(new Uint8Array(this.unhandleBuffer),e),r-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new n(e.buffer,0),r),this.metadata)&&(e=this.processPackets(e,r)).length&&this.emit("loadeddata",{packets:e})},rr.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},rr.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map(function(t){return t.getNextSampleOffset()})):0},rr.prototype.parse=function(t,e){var r,p=this;e===void 0&&(e=0);for(var S=t.offset,M=0,X=this;8<=t.unreadLength;){var oe=function(){var we,ke,Ce,Ne,Ye;return M=t.offset-S,(we=new de(t,e+M)).size===0?(Ce=new Error("box [".concat(we.type,"] size  0")),it.error(Ce),X.emit("error",{code:be.PARSER,message:Ce.message,origin:Ce}),"break"):X.options.progressive&&we.type==="mdat"&&!X.metadata?(ke=we.start+we.size,X.loader.suspend(),X.unhandleBuffer=null,it.info("mdat boxmoov boxmoov"),X.loader.loadRange(ke).then(function(_t){_t&&(p.unhandleBuffer=null,p.loader.jump(we.start),p.loader.status!==ce.SUSPENGING)&&p.loader.loadRange(we.start,ke)}),{value:void 0}):(Ce=we.size-we.length,t.unreadLength>=Ce?((Ye=a[we.type])?(Ne=new n(t.buffer,t.offset,Ce),(r=new Ye(we,Ne)).isContainer&&((Ye=new rr({sub:!0})).proxy(X,["loadedbox"]),Ye.parse(Ne,M+e+we.length),Ye.removeAllListeners(),Ye.boxes.forEach(function(_t){r.append(_t)}))):r=new Se(we),t.skip(Ce),X.boxes.push(r),void X.emit("loadedbox",r)):(t.back(we.length),"break"))}();if(typeof oe=="object")return oe.value;if(oe==="break")break}t.unreadLength&&(this.unhandleBuffer=t.readToBuffer())},rr.prototype.reset=function(){Ni.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.destroy()};var Ni,Mi,fo,Ui,_o,Bi,go,ji,yo,Hi,vo,Fi,mo,Vi,bo,Wi,So,$i,To,Eo=rr;function rr(t){var e=Ni.call(this,t=t===void 0?{}:t)||this;return e.media=null,e.unhandleBuffer=null,e.formatType=re.MP4,e.boxes=[],e._handleBoxLoad=function(r){var p,S,M,X,oe,we,ke,Ce,Ne,Ye,_t,Qe,Je,tt,We=r.header.type;We==="vvcC"?e.vvcCBox=r:We==="vvc1"||We==="vvi1"?e.vvcCBox&&(e.vvcCBox.codecTag=We):We==="hvcC"?e.hvcCBox=r:We==="hvc1"||We==="hev1"?e.hvcCBox&&(e.hvcCBox.codecTag=We):We==="avcC"?e.avcCBox=r:We==="esds"?e.esdsBox=r:We==="mp4a"?e.mp4aBox=r:We==="moov"?(Je=Se.mapBoxToJSON(r),e.media=e.moovParser.createMedia(Je),e.moofParser.init({media:e.media}),Qe=(Je=e.mp4aBox||{}).sampleRate,S=Qe===void 0?0:Qe,Qe=Je.sampleSize,M=Qe===void 0?0:Qe,Qe=Je.channelCount,X=Qe===void 0?0:Qe,Qe=(Je=e.esdsBox||{}).audioObjectType,oe=Qe===void 0?0:Qe,Qe=Je.samplingFrequencyIndex,we=Qe===void 0?0:Qe,Qe=Je.codec,ke=Qe===void 0?"":Qe,Ce=[],Ne=[],Ye=[],e.hvcCBox?(Ne=e.hvcCBox.vps,Ye=e.hvcCBox.pps,Ce=e.hvcCBox.sps):e.vvcCBox?(Ye=e.vvcCBox.pps,Ce=e.vvcCBox.sps,Ce=e.vvcCBox.sps):e.avcCBox&&(Ye=e.avcCBox.pps,Ce=e.avcCBox.sps),Qe=(Je=e.options).live,Je=Je.progressive,tt=((p=e.avcCBox)==null?void 0:p.codec)||"",e.vvcCBox?(tt=e.vvcCBox.codec,_t=e.vvcCBox?e.vvcCBox.codecTag:void 0):e.hvcCBox&&(tt=e.hvcCBox?e.hvcCBox.codec:((p=e.avcCBox)==null?void 0:p.codec)||"",_t=e.hvcCBox?e.hvcCBox.codecTag:void 0),e.metadata={formatType:re.MP4,live:!!Qe,progressive:!Qe&&!!Je,url:e.loader.url,basePTS:0,baseDTS:0,duration:e.media.options.duration,timescale:e.media.options.timeScale,tracks:e.media.getTracks().map(function(ht){var wt,Ct,ut,ft={};switch(ft.id=ht.options.id,ft.type=ht.options.type,ft.timescale=ht.options.timeScale,ft.baseDTS=0,ft.basePTS=0,ft.type){case ee.VIDEO:ft.width=ht.options.width,ft.height=ht.options.height,ft.vps=Ne,ft.sps=Ce,ft.pps=Ye,ft.rotate=(wt=ht.options.matrix).length<5||(Ct=Math.hypot(wt[0],wt[3]),ut=Math.hypot(wt[1],wt[4]),Ct===0)||ut===0?0:180*Math.atan2(wt[1]/ut,wt[0]/Ct)/Math.PI,ft.pixelRatio=[],ft.codec=tt,ft.codecTag=_t,ft.fps=e.computeFps(ht,(ut=e.media)==null?void 0:ut.options);break;case ee.AUDIO:ft.audioObjectType=oe,ft.sampleRate=S,ft.samplingFrequencyIndex=we,ft.sampleSize=M,ft.channelCount=X,ft.codec=ke;break;default:ft.type=ee.UNKNOWN}return ft})},it.info("loadedmetadata metadata:",e.metadata),e.emit("loadedmetadata",e.metadata)):We==="moof"&&(it.info("moof boxfMP4"),e.moofParser.parse(Se.mapBoxToJSON(r)))},e.computeFps=function(r,p){return p?r.getSamples().length/(p.duration/p.timeScale):0},e.convertSampleToPacket=function(r){var p,S,M,X,oe,we;return r.trackType===ee.VIDEO&&(e.hvcCBox||e.avcCBox||e.vvcCBox)?(p=r.data,S=r.isSync,M=(X=e.hvcCBox||e.avcCBox||e.vvcCBox).lengthSizeMinusOne,X=X.codec,we=!1,e.vvcCBox&&4<p.length&&p[0]===0&&p[1]===0&&p[2]===0&&p[3]===1&&(we=!0),oe=[],oe=we?P.extractAnnexbNAL(p):P.extractAVCCNAL(p,M),we=!1,e.hvcCBox&&(we=oe.every(function(ke){return q.isNonRef(ke)})),e.vvcCBox&&(we=oe.every(function(ke){z.isNonRef(ke)})),S&&(e.hvcCBox?(e.hvcCBox.pps.forEach(function(ke){return oe.unshift(ke)}),e.hvcCBox.sps.forEach(function(ke){return oe.unshift(ke)}),e.hvcCBox.vps.forEach(function(ke){return oe.unshift(ke)})):e.vvcCBox?(e.vvcCBox.pps.forEach(function(ke){return oe.unshift(ke)}),e.vvcCBox.sps.forEach(function(ke){return oe.unshift(ke)}),e.vvcCBox.vps.forEach(function(ke){return oe.unshift(ke)})):e.avcCBox&&(e.avcCBox.pps.forEach(function(ke){return oe.unshift(ke)}),e.avcCBox.sps.forEach(function(ke){return oe.unshift(ke)}))),{codec:X,trackId:r.trackId,trackType:r.trackType,isLast:r.isLast,dts:r.dts,pts:r.cts+r.dts,isSync:r.isSync,isNonRef:we,data:oe,size:oe.reduce(function(ke,Ce){return ke+Ce.byteLength},0),offset:r.offset}):r.trackType===ee.AUDIO&&e.esdsBox?{codec:e.esdsBox.codec,trackId:r.trackId,trackType:r.trackType,dts:r.dts,pts:r.cts+r.dts,isLast:r.isLast,isSync:!0,isNonRef:!1,data:[r.data],size:r.data.byteLength,offset:r.offset}:void 0},e.options=t,e.moovParser=new Ia,e.moofParser=new La,t.sub||e.on("loadedbox",e._handleBoxLoad),e}function Lr(){var t=this;this.options=null,this._getTrakById=function(e){var r;return(r=t.options)==null?void 0:r.media.getTracks().find(function(p){return p.options.id===e})}}function Br(){}function yr(t){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=t}function jr(t){this.tracks=[],this.options=t}function wo(t,e){var r=fo.call(this,t,e)||this;r.sampleCounts=[],r.sampleDurations=[],r.version=e.read(1),r.flag=e.read(3);for(var p=e.read(4),S=0;S<p;S++)r.sampleCounts[S]=e.read(4),r.sampleDurations[S]=e.read(4);return r}function xo(t,e){var r=_o.call(this,t,e)||this;r.isContainer=!0,r.sampleSizes=[],r.version=e.read(1),r.flag=e.read(3),r.sampleSize=e.read(4);for(var p=e.read(4),S=0;S<p;S++)r.sampleSize===0?r.sampleSizes.push(e.read(4)):r.sampleSizes.push(r.sampleSize);return r}function Po(t,e){var r=go.call(this,t,e)||this;r.sampleNumbers=[],r.version=e.read(1),r.flag=e.read(3);for(var p=e.read(4),S=0;S<p;S++)r.sampleNumbers.push(e.read(4));return r}function ko(t,e){return t=yo.call(this,t,e)||this,t.version=e.read(1),t.flag=e.read(3),t.entryCount=e.read(4),t}function Co(t,e){var r=vo.call(this,t,e)||this;r.entries=[],r.version=e.read(1),r.flag=e.read(3);for(var p=e.read(4),S=0;S<p;S++)r.entries.push({firstChunk:e.read(4),samplePerChunk:e.read(4),sampleDescriptionIndex:e.read(4)});return r}function Io(t,e){var r=mo.call(this,t,e)||this;r.chunkOffsets=[],r.version=e.read(1),r.flag=e.read(3);for(var p=e.read(4),S=0;S<p;S++)r.chunkOffsets.push(e.read(8));return r}function Lo(t,e){var r=bo.call(this,t,e)||this;r.chunkOffsets=[],r.version=e.read(1),r.flag=e.read(3);for(var p=e.read(4),S=0;S<p;S++)r.chunkOffsets.push(e.read(4));return r}function Ro(t,e){var r=So.call(this,t,e)||this;r.sampleCounts=[],r.sampleOffsets=[],r.version=e.read(1),r.flag=e.read(3),r.entryCount=e.read(4);for(var p=0;p<r.entryCount;p++)r.sampleCounts.push(e.read(4)),r.sampleOffsets.push(e.readInt(4));return r}function Ao(t,e){var r=To.call(this,t,e)||this;r.sampleDurations=[],r.sampleSizes=[],r.sampleFlags=[],r.sampleCTSs=[],r.sampleCount=e.read(4),r.flag&Kt.DATA_OFFSET?r.dataOffset=e.readInt(4):r.dataOffset=0,r.flag&Kt.FIRST_FLAG?r.firstSampleFlag=e.read(4):r.firstSampleFlag=0;for(var p=0;p<r.sampleCount;p++)r.flag&Kt.DURATION&&(r.sampleDurations[p]=e.read(4)),r.flag&Kt.SIZE&&(r.sampleSizes[p]=e.read(4)),r.flag&Kt.FLAG&&(r.sampleFlags[p]=e.read(4)),r.flag&Kt.CTS_OFFSET&&(r.version===0?r.sampleCTSs[p]=e.read(4):r.sampleCTSs[p]=e.readInt(4));return r}(Ge=lr=lr||{})[Ge.H264=27]="H264",Ge[Ge.H265=36]="H265",Ge[Ge.H266=51]="H266",Ge[Ge.AAC=15]="AAC";var Do={1:ee.VIDEO,2:ee.VIDEO,3:ee.AUDIO,4:ee.AUDIO,5:ee.UNKNOWN,6:ee.UNKNOWN,7:ee.UNKNOWN,8:ee.UNKNOWN,9:ee.UNKNOWN,10:ee.UNKNOWN,11:ee.UNKNOWN,12:ee.UNKNOWN,13:ee.UNKNOWN,14:ee.UNKNOWN,15:ee.AUDIO,16:ee.VIDEO,17:ee.AUDIO,18:ee.UNKNOWN,19:ee.UNKNOWN,20:ee.UNKNOWN,21:ee.UNKNOWN,22:ee.UNKNOWN,23:ee.UNKNOWN,24:ee.UNKNOWN,25:ee.UNKNOWN,26:ee.UNKNOWN,27:ee.VIDEO,28:ee.AUDIO,29:ee.UNKNOWN,30:ee.VIDEO,31:ee.UNKNOWN,32:ee.UNKNOWN,33:ee.VIDEO,36:ee.VIDEO,51:ee.VIDEO,66:ee.UNKNOWN,127:ee.UNKNOWN,128:ee.AUDIO,129:ee.AUDIO,130:ee.AUDIO,131:ee.AUDIO,132:ee.AUDIO,133:ee.AUDIO,134:ee.AUDIO,135:ee.AUDIO,144:ee.UNKNOWN,145:ee.UNKNOWN,192:ee.UNKNOWN,193:ee.AUDIO,194:ee.AUDIO,207:ee.UNKNOWN,209:ee.VIDEO,210:ee.VIDEO,219:ee.UNKNOWN,234:ee.VIDEO},Hr,Oo=function(t){this.programs=[],this.tableId=t.read(1);var e=new l(t.read(2),16),e=(this.sectionSyntaxIndicator=e.read(1),e.skip(1),e.skip(2),this.sectionLength=e.read(12),this.transportStreamId=t.read(2),new l(t.read(1),8));e.skip(2),this.versionNumber=e.read(5),this.currentNextIndicator=e.read(1),this.sectionNumber=t.read(1),this.lastSectionNumber=t.read(1);for(var r=0;r<this.sectionLength-12;r+=4)this.programs.push({number:t.read(2),pid:8191&t.read(2)});this.crc32=t.read(4)},No=function(t){this.streamId=t.read(1),this.pesPacketLength=t.read(2);var e=new l(t.read(2),16),e=(e.skip(2),this.pesScramblingControl=e.read(2),this.pesPriority=e.read(1),this.dataAlignmentIndicator=e.read(1),this.copyright=e.read(1),this.originalOrCopy=e.read(1),this.ptsDtsFlags=e.read(2),this.esCRFlag=e.read(1),this.esRateFlag=e.read(1),this.dsmTrickModeFlag=e.read(1),this.additionalCopyInfoFlag=e.read(1),this.pesCRCFlag=e.read(1),this.pesExtensionFlag=e.read(1),this.pesHeaderDataLength=t.read(1),t.offset),e=(2&this.ptsDtsFlags?(this.pts=(14&t.read(1))<<27|t.read(2)>>>1<<13|t.read(2)>>>3,this.pts*=4,t.back(1),this.pts+=(6&t.read(1))>>>1,1&this.ptsDtsFlags?(this.dts=(14&t.read(1))<<27|t.read(2)>>>1<<13|t.read(2)>>>3,this.dts*=4,t.back(1),this.dts+=(6&t.read(1))>>>1):this.dts=this.pts):(this.pts=0,this.dts=0),this.pesHeaderDataLength-(t.offset-e));0<e&&t.skip(e),this.data=t.readToUint8()},Mo=function(t){this.streams=[],this.tableId=t.read(1);var e=new l(t.read(2),16),e=(this.sectionSyntaxIndicator=e.read(1),e.skip(1),e.skip(2),this.sectionLength=e.read(12),this.programNumber=t.read(2),new l(t.read(1),8));e.skip(2),this.versionNumber=e.read(5),this.currentNextIndicator=e.read(1),this.sectionNumber=t.read(1),this.lastSectionNumber=t.read(1),this.pcrPid=8191&t.read(2),this.programInfoLength=4095&t.read(2);for(var r=12+this.programInfoLength;r<=this.sectionLength-2;r+=5){var p={streamType:t.read(1),pid:8191&t.read(2),esInfoLength:4095&t.read(2)};this.streams.push(p),t.skip(p.esInfoLength),r+=p.esInfoLength}this.crc32=t.read(4)};(W=Hr=Hr||{})[W.PAT=0]="PAT",W[W.CAT=1]="CAT",W[W.TSDT=2]="TSDT",Bo.SYNC_BYTE=71;var vr,qi,Rr=Bo,Ge=g(378),Uo=g.n(Ge),Ra=(Object.freeze({formatType:re.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),Object.freeze({type:ee.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],sei:[],pixelRatio:[],fps:25,live:!1})),Aa=Object.freeze({type:ee.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,samplingFrequencyIndex:0,sampleRate:0,sampleSize:16,channelCount:0}),Da=(Object.defineProperty(Ir.prototype,"size",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),Ir.prototype.write=function(t){this.list.push(t)},Ir.prototype.read=function(){return this.list.shift()},Ir.prototype.readAll=function(){var t=this.list;return this.list=[],t},Ir.prototype.clear=function(){this.list=[]},Ir),W=(qi=function(t,e){return(qi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}qi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});function Ir(){this.list=[]}function Bo(t){var e=new l(t.read(4),32);this.syncByte=e.read(8),this.errorIndicator=e.read(1),this.payloadUnitStartIndicator=e.read(1),this.transportPriority=e.read(1),this.pid=e.read(13),this.transportScramblingControl=e.read(2),this.adaptationFlag=e.read(1),this.payloadFlag=e.read(1),this.continueCounter=e.read(4),this.adaptationFlag&&(e=t.read(1),t.skip(e)),this.payloadUnitStartIndicator&&t.skip(1)}(Ge=vr=vr||{})[Ge.UNKNOWN=0]="UNKNOWN",Ge[Ge.PAT=1]="PAT",Ge[Ge.PES=2]="PES",Ge[Ge.PMT=3]="PMT",W(Bt,Or=ye),Bt.probe=function(t){if(t.byteLength<1)return!1;for(var e=0,r=t.byteLength;e<r;e+=188)if(t[e]!==Rr.SYNC_BYTE)return!1;return!0},Bt.prototype.splitToTsPacket=function(t){this.unhandleBuffer&&this.unhandleBuffer.byteLength&&(t=n.concat(this.unhandleBuffer,t),this.unhandleBuffer=void 0);for(var e=new Uint8Array(t),r=e.byteLength,p=0;p+188<=r;){if(e[p]!==Rr.SYNC_BYTE){var S=new Uint8Array(e.buffer,p).findIndex(function(M){return M===Rr.SYNC_BYTE});if(console.warn("[videox] mpegts sync byte error",e[p],p,S),-1<S){p+=S;continue}break}this.parseTsPacket(e.subarray(p,p+188)),p+=188}p<r&&(this.unhandleBuffer=t.slice(p))},Bt.prototype.parseTsPacket=function(r){var e,r=n.fromUint8(r),p=new Rr(r),S=null;p.pid===Hr.PAT?(S=new Oo(r),this.patPrograms=S.programs,this.emitTSPacket(vr.PAT,p,S)):this.patPrograms.some(function(M){return M.pid===p.pid})?(S=new Mo(r),(e=K()(this.pmtStreams,S.streams))&&this.emitPackets(),this.metadataChanged=e,this.pmtStreams=S.streams,this.emitTSPacket(vr.PMT,p,S)):(e=this.pmtStreams.find(function(M){return M.pid===p.pid}))?(p.payloadUnitStartIndicator&&this.parsePes(),this.prevPesSegments.push(r.readToUint8()),this.prevPesTSHeader=p,this.prevPmtStream=e):this.emitTSPacket(vr.UNKNOWN,p,S)},Bt.prototype.parsePes=function(){var t,e=this.prevPmtStream;this.prevPesSegments.length&&this.prevPesTSHeader&&e&&(t=n.fromUint8(n.concatUint8s(this.prevPesSegments)),this.prevPesSegments=[],t.read(2)===1)&&(t=new No(t),this.emitTSPacket(vr.PES,this.prevPesTSHeader,t),e.streamType===lr.H265||e.streamType===lr.H266||e.streamType===lr.H264?this.parseVideoPes(t,e):e.streamType===lr.AAC&&this.parseAudioPes(t,e))},Bt.prototype.parseVideoPes=function(Qe,e){var r,p=Math.round(Qe.dts/90),S=Math.round(Qe.pts/90),M=e.streamType===lr.H265,X=e.streamType===lr.H266,oe={},we=!0,ke=!1,Ce=[],Ne=[],Ye=[],_t=[],Qe=P.extractAnnexbNAL(Qe.data);if(X?(r=[],Qe.forEach(function(Je){var tt,We=n.fromUint8(Je);Je.length<4?console.log("skip this too small nalu:",Je):(tt=new z(We)).nalType<N.VVC_AUD_NUT&&(tt.nalType===N.VVC_SPS_NUT?(ke=!0,We=new ve(Ae(We.readToUint8())),oe.width=We.width,oe.height=We.height,oe.codec=We.codec,Ne.push(Je)):tt.nalType===N.VVC_VPS_NUT?Ye.push(Je):tt.nalType===N.VVC_PPS_NUT&&_t.push(Je),we=z.isNonRefNALType(tt.nalType)&&we,r.push(z.createAnnexbStartCode(),Je))}),X=n.concatUint8s(r),Ce.push(X)):Qe.forEach(function(Je){var tt,We,ht=n.fromUint8(Je);Je.length<2||(M?(We=new q(ht)).nalType<I.ACCESS_UNIT_DELIMITER&&(We.nalType>=I.VPS&&(We.nalType===I.SPS?(ke=!0,tt=new jt(Ae(ht.readToUint8())),oe.width=tt.width,oe.height=tt.height,oe.pixelRatio=tt.pixelRatio,oe.codec=tt.codec,Ne.push(Je)):We.nalType===I.VPS?Ye.push(Je):We.nalType===I.PPS&&_t.push(Je)),!Mt.isSafari||We.nalType===I.TRAIL_R||We.nalType===I.TRAIL_N||We.nalType===I.IDR_W_RADL||We.nalType===I.IDR_N_LP||We.nalType===I.CRA||We.nalType===I.SPS||We.nalType===I.VPS||We.nalType===I.PPS||We.nalType===I.SEI?Ce.push(Je):console.warn("skip this nalu nalType:",We.nalType),we=q.isNonRefNALType(We.nalType)&&we):((We=new B(ht)).nalType<A.DIVIDER&&(We.nalType===A.SPS?(ke=!0,tt=new At(Ae(ht.readToUint8())),oe.width=tt.width,oe.height=tt.height,oe.pixelRatio=tt.pixelRatio,oe.codec=tt.codec,Ne.push(Je)):We.nalType===A.PPS&&_t.push(Je),Ce.push(Je)),we=!1))}),!this.videoLoaded){if(!ke)return;this.videoLoaded=!0,oe.baseDTS=p,oe.basePTS=S}Ye.length&&(oe.vps=Ye),Ne.length&&(oe.sps=Ne),_t.length&&(oe.pps=_t),this.videoMetadata?(this.metadataChanged=O(this.videoMetadata,oe),this.metadataChanged&&this.emit("updatedtrackmetadata",this.videoMetadata)):(this.videoMetadata=Uo()({},Ra,oe),this.metadataChanged=!0),this.checkMetadataChanged(),this.packetQueue.write({trackId:e.pid,codec:this.videoMetadata.codec,trackType:ee.VIDEO,isSync:ke,isNonRef:we,data:Ce,dts:p,pts:S,size:Ce.reduce(function(Je,tt){return Je+tt.byteLength},0)})},Bt.prototype.parseAudioPes=function(ke,e){var r,p,S,M=this,X={},oe=Math.round(ke.dts/90),we=Math.round(ke.pts/90),ke=(this.audioLoaded||(this.audioLoaded=!0,X.baseDTS=oe,X.basePTS=we),T(ke.data));ke.length&&(r=ke[0],p="mp4a.40."+r.audioObjectType,X.codec=p,X.audioObjectType=r.audioObjectType,X.sampleRate=r.sampleRate,X.channelCount=r.channelCount,this.audioMetadata?(this.metadataChanged=O(this.audioMetadata,X),this.metadataChanged&&this.emit("updatedtrackmetadata",this.audioMetadata)):(this.audioMetadata=Uo()({},Aa,X),this.metadataChanged=!0),this.checkMetadataChanged(),S=Math.round(9e4*v/r.sampleRate/90),ke.forEach(function(Ce,Ne){M.packetQueue.write({trackId:e.pid,codec:p,trackType:ee.AUDIO,isSync:!0,isNonRef:!0,data:[Ce.data],dts:S*Ne+oe,pts:S*Ne+we,size:Ce.data.byteLength})}))},Bt.prototype.checkMetadataChanged=function(){var t,e,r=this;return this.pmtStreams.length&&this.metadataChanged&&(t=[],this.pmtStreams.every(function(p){return p=Do[p.streamType],p===ee.VIDEO?(r.videoMetadata&&t.push(r.videoMetadata),!(!r.videoMetadata||!r.videoMetadata.codec)):p!==ee.AUDIO||(r.audioMetadata&&t.push(r.audioMetadata),!(!r.audioMetadata||!r.audioMetadata.codec))}))&&(e={formatType:re.MPEGTS,live:!1,progressive:!!this.options.progressive,url:this.loader.url,basePTS:Math.min.apply(Math,t.map(function(p){return p.basePTS||0})),baseDTS:Math.min.apply(Math,t.map(function(p){return p.baseDTS||0})),timescale:1e3,duration:0,tracks:t},this.metadataChanged=!1,this.metadata?O(this.metadata,e)&&this.emit("updatedmetadata",this.metadata):(this.metadata=e,this.emit("loadedmetadata",this.metadata))),this.metadataChanged},Bt.prototype.emitTSPacket=function(t,e,r){it.debug("loadedtspacket","type:",vr[t],"header:",e,"payload:",r),this.emit("loadedtspacket",{type:t,header:e,payload:r})},Bt.prototype.emitPackets=function(){var t;this.metadata&&this.loader.status!==ce.SUSPENGING&&!this.metadataChanged&&0<this.packetQueue.size&&(t=this.packetQueue.readAll(),this.emit("loadeddata",{packets:t}))},Bt.prototype.continuousLoad=function(t){return this.loader.load(t)},Bt.prototype.parse=function(t){this.splitToTsPacket(t),this.emitPackets()},Bt.prototype.onProgress=function(t){t.data.byteLength&&this.parse(t.data.buffer)},Bt.prototype.onLoadEnd=function(){this.parsePes(),this.emitPackets(),this.loader.eof&&this.emit("end",void 0)},Bt.prototype.resume=function(){return this.options.progressive?Or.prototype.resume.call(this):b.resolve(!1)},Bt.prototype.flush=function(){this.unhandleBuffer=void 0,this.prevPesTSHeader=void 0,this.prevPmtStream=void 0,this.prevPesSegments=[]},Bt.prototype.seek=function(){this.reset(),this.loader.jump(0)},Bt.prototype.reset=function(){Or.prototype.reset.call(this),this.flush(),this.audioLoaded=!1,this.videoLoaded=!1,this.packetQueue.clear(),this.patPrograms=[],this.pmtStreams=[],this.metadata=null,this.audioMetadata=void 0,this.videoMetadata=void 0,this.metadataChanged=!1};var Xi=Bt;Ki=function(t,e){return(Ki=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)};var zi=function(){return(zi=Object.assign||function(t){for(var e,r=1,p=arguments.length;r<p;r++)for(var S in e=arguments[r])Object.prototype.hasOwnProperty.call(e,S)&&(t[S]=e[S]);return t}).apply(this,arguments)},Ar={M3U:/^#EXTM3U/,INF:/^#EXTINF:?([0-9\.]*)?,?(.*)?(?:\n|\r\n)(.*)$/,X_TARGETDURATION:/^#EXT-X-TARGETDURATION:?([0-9.]*)?/,X_VERSION:/^#EXT-X-VERSION:?([0-9.]*)?/,X_MEDIA_SEQUENCE:/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/,X_DISCONTINUITY_SEQUENCE:/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/,X_PLAYLIST_TYPE:/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/,X_BYTERANGE:/^#EXT-X-BYTERANGE:?(.*)?$/,X_ALLOW_CACHE:/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/,X_MAP:/^#EXT-X-MAP:?(.*)$/,X_STREAM_INF:/^#EXT-X-STREAM-INF:?(.*)$/,X_MEDIA:/^#EXT-X-MEDIA:?(.*)$/,X_ENDLIST:/^#EXT-X-ENDLIST/,X_DISCONTINUITY:/^#EXT-X-DISCONTINUITY/,X_PROGRAM_DATE_TIME:/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/,X_KEY:/^#EXT-X-KEY:?(.*)$/,X_START:/^#EXT-X-START:?(.*)$/,X_CUE_OUT_CONT:/^#EXT-X-CUE-OUT-CONT:?(.*)?$/,X_CUE_OUT:/^#EXT-X-CUE-OUT:?(.*)?$/,X_CUE_IN:/^#EXT-X-CUE-IN:?(.*)?$/,X_SKIP:/^#EXT-X-SKIP:(.*)$/,X_PART:/^#EXT-X-PART:(.*)$/,X_SERVER_CONTROL:/^#EXT-X-SERVER-CONTROL:(.*)$/,X_PART_INF:/^#EXT-X-PART-INF:(.*)$/,X_PRELOAD_HINT:/^#EXT-X-PRELOAD-HINT:(.*)$/,X_RENDITION_REPORT:/^#EXT-X-RENDITION-REPORT:(.*)$/},jo=(function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ki(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}($t,Dr=ye),$t.probe=function(t){var e;return 7<=t.byteLength&&(e=[],t.forEach(function(r){return e.push(String.fromCharCode(r))}),Ar.M3U.test(e.join("")))},Object.defineProperty($t.prototype,"status",{get:function(){return this.loader.eof?this.mpegtsParser.status===ce.IDLE?this.shouldContinuousLoad?ce.LOADING:ce.SUSPENGING:this.mpegtsParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"duration",{get:function(){return this.isLive?1/0:Math.round(1e3*this.segments.reduce(function(t,e){return t+e.duration},0))},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"currentSegment",{get:function(){return this.segments[this.currSegmentIndex]},enumerable:!1,configurable:!0}),Object.defineProperty($t.prototype,"prevSegmentsTotalDuration",{get:function(){return this.segments.slice(0,this.currSegmentIndex).reduce(function(t,e){return t+e.duration},0)},enumerable:!1,configurable:!0}),$t.prototype.insertSegment=function(t){var e=!this.segments.some(function(r){return r.uri===t.uri});return e&&this.segments.push(t),e},$t.prototype.onProgress=function(t){this.bufferSegments.push(t)},$t.prototype.onLoadEnd=function(){var t,e,r,p,S,M=this;this.loader.eof&&(e=n.concatUint8s(this.bufferSegments.map(function(X){return X.data})),this.bufferSegments=[],e.byteLength&&(e=new TextDecoder().decode(e).split(/\n#/).map(function(X){return"#"+X.trim()}),r=0,S=p=!1,e.forEach(function(X){var oe=X.match(Ar.INF);oe?(oe={sequence:r,duration:parseFloat(oe[1]),uri:new URL(oe[3],M.url).href,discontinuity:S},M.insertSegment(oe),M.emit("loadedsegment",oe)):(t=X.match(Ar.X_MEDIA_SEQUENCE))?r=Number(t[1]):Ar.X_ENDLIST.test(X)?p=!0:Ar.X_DISCONTINUITY.test(X)&&(S=!0)}),this.discontinuity=S,this.isLive=!p,this.segments.length||this.emit("error",{code:be.PARSER,message:"M3U8TS"}),this.prevManifestLoadedTime=Date.now(),this.loadSegment()),it.info("hls manifest loaded, all segments length:",this.segments.length))},$t.prototype.loadSegment=function(){var t,e,r=this;return this.shouldContinuousLoad?(t=this.segments[this.currSegmentIndex],this.isLive&&!t?(e=1e3*this.m3u8UpdateDuration-(Date.now()-this.prevManifestLoadedTime))<=0?this.loader.load(this.loader.url):new b(function(p){clearTimeout(r.fetchTimer),r.fetchTimer=setTimeout(function(){p(r.loader.load(r.loader.url))},e)}):t?(this.cachePackets=[],this.m3u8UpdateDuration=t.duration||2,this.currSegmentStartPTS=void 0,this.mpegtsParser.continuousLoad(t.uri)):(this.ended=!0,b.resolve(!1))):b.resolve(!1)},$t.prototype.suspend=function(){clearTimeout(this.fetchTimer),this.shouldContinuousLoad=!1},$t.prototype.resume=function(){var t;return this.cachePackets.length?(t=this.cachePackets,this.cachePackets=[],this.emit("loadeddata",{packets:t}),b.resolve(!1)):this.shouldContinuousLoad||this.ended?b.resolve(!1):(this.shouldContinuousLoad=!0,this.loader.eof?this.mpegtsParser.loader.status===ce.LOADING||this.mpegtsParser.loader.status===ce.ERROR?b.resolve(!0):this.loadSegment():Dr.prototype.resume.call(this))},$t.prototype.seek=function(t){this.ended=!1;var e=0,r=this.segments.findIndex(function(p){return e+=p.duration,t<e});this.currSegmentIndex=-1<r?r:this.segments.length-1,this.cachePackets=[],this.bufferSegments=[],this.mpegtsParser.suspend(),this.mpegtsParser.flush(),this.shouldContinuousLoad=!0,this.loadSegment()},$t.prototype.reset=function(){clearTimeout(this.fetchTimer),Dr.prototype.reset.call(this),this.discontinuity=!1,this.cachePackets=[],this.bufferSegments=[],this.shouldContinuousLoad=!0,this.mpegtsParser.reset(),this.segments=[],this.currSegmentIndex=0,this.isLive=!1,this.ended=!1},$t.prototype.destroy=function(){Dr.prototype.destroy.call(this),this.mpegtsParser.loader.removeAllListeners(),this.mpegtsParser.destroy()},$t),Ge=g(801),Oa=g.n(Ge);Gi=function(t,e){return(Gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)};function Fr(t,e,r){if(arguments.length===2)for(var p,S=0,M=e.length;S<M;S++)!p&&S in e||((p=p||Array.prototype.slice.call(e,0,S))[S]=e[S]);return t.concat(p||Array.prototype.slice.call(e))}function cr(t){return t.split("").map(function(e){return e.charCodeAt(0)})}var Ho,Gi,Dr,Ki,Or,Yi=function(){return(Yi=Object.assign||function(t){for(var e,r=1,p=arguments.length;r<p;r++)for(var S in e=arguments[r])Object.prototype.hasOwnProperty.call(e,S)&&(t[S]=e[S]);return t}).apply(this,arguments)},Na=["loadedmetadata","updatedmetadata","updatedtrackmetadata","loadeddata","error","end"],Ma=[Eo,jo,an,Xi],Ua=(function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Gi(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Yt,Ho=Z),Yt.prototype.createLoader=function(){var t=new st(this.options);return t.proxy(this,["progress","error"]),t.proxyOnce(this,["loadstart","loadend"]),t.once("progress",this.handleFirstLoadData),t},Yt.prototype.createParser=function(t){return t=new t(Yi(Yi({},this.options),{loader:this.loader})),t.proxy(this,Na),t},Object.defineProperty(Yt.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(t){it.info("skipFrame:",t),Oa()(t)||(this.options.skipFrame=t,this.activeParser.skipFrame=t)},enumerable:!1,configurable:!0}),Object.defineProperty(Yt.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty(Yt.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),Yt.prototype.parse=function(t){it.info("parse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:t}),this.activeParser.onLoadEnd()},Yt.prototype.load=function(t){return it.info("load",t),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(t)},Yt.prototype.seek=function(t){return it.info("seek",t),this.activeParser.seek(t)},Yt.prototype.suspend=function(){return this.activeParser.suspend()},Yt.prototype.resume=function(){return this.activeParser.resume()},Yt.prototype.destroy=function(){it.info("destory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()},Yt);function Yt(t){t===void 0&&(t={});var e=Ho.call(this)||this;return e.loader=new st,e.parserClasses=Ma,e.logger=it,e.handleFirstLoadData=function(r){var p,S;r&&((S=e.parserClasses.find(function(M){return M.probe(r.data)}))?(p=e.activeParser.formatType,e.activeParser.destroy(),e.activeParser=e.createParser(S),it.info("parser, ".concat(re[p]," -> ").concat(re[e.activeParser.formatType])),e.emit("parserchange",void 0),e.activeParser.onProgress(r)):(S="Parser, Byte: "+r.data.slice(0,20).join(","),it.error(S),e.emit("error",{code:be.PARSER,message:S})))},e.options=t,e.loader=e.createLoader(),e.activeParser=e.createParser(e.parserClasses[0]),e.logger.info("demuxer options",t),e}function $t(t){var e=Dr.call(this,t)||this;return e.mpegtsParser=new Xi({progressive:!0,timeout:e.options.timeout}),e.currSegmentIndex=0,e.isLive=!1,e.shouldContinuousLoad=!0,e.ended=!1,e.prevManifestLoadedTime=0,e.fetchTimer=-1,e.discontinuity=!1,e.m3u8UpdateDuration=2,e.bufferSegments=[],e.cachePackets=[],e.formatType=re.HLS,e.segments=[],e.handleTSEnd=function(){e.currSegmentIndex>=e.segments.length-1&&e.emit("end",void 0)},e.handleTSLoadedMetadata=function(r){e.basePTS===void 0&&(e.basePTS=r.basePTS),e.baseDTS===void 0&&(e.baseDTS=r.baseDTS),r=zi(zi({},r),{formatType:re.HLS,live:e.isLive,progressive:!0,basePTS:e.basePTS,baseDTS:e.baseDTS,duration:e.duration,url:e.loader.url,discontinuity:e.discontinuity}),e.metadata?O(e.metadata,r)&&e.emit("updatedmetadata",e.metadata):(e.metadata=r,e.emit("loadedmetadata",e.metadata))},e.handleTSLoadedData=function(oe){var p,S,M,X,oe=oe.packets;oe.length&&((p=e.currentSegment)!=null&&p.discontinuity&&(p=oe.slice().sort(function(we,ke){return we.pts-ke.pts}),e.currSegmentStartPTS===void 0&&(e.currSegmentStartPTS=p[0].pts),S=e.currSegmentStartPTS,M=Math.round(1e3*e.prevSegmentsTotalDuration)+(e.basePTS||0),p.forEach(function(we){var ke=we.dts-we.pts;we.pts=M+we.pts-S,we.dts=we.pts+ke})),e.cachePackets.length?(X=e.cachePackets.concat(oe),e.cachePackets=[]):X=oe,e.shouldContinuousLoad?e.emit("loadeddata",{packets:X}):e.cachePackets=X)},e.handleTSLoadEnd=function(){e.currSegmentIndex++,e.loadSegment()},e.mpegtsParser.on("loadedmetadata",e.handleTSLoadedMetadata),e.mpegtsParser.on("updatedmetadata",e.handleTSLoadedMetadata),e.mpegtsParser.on("loadeddata",e.handleTSLoadedData),e.mpegtsParser.on("end",e.handleTSEnd),e.mpegtsParser.loader.on("loadend",e.handleTSLoadEnd),e.mpegtsParser.loader.proxy(e,["error"]),e.mpegtsParser.proxy(e,["updatedtrackmetadata"]),e}function Bt(){var t=Or!==null&&Or.apply(this,arguments)||this;return t.patPrograms=[],t.pmtStreams=[],t.prevPesSegments=[],t.packetQueue=new Da,t.audioLoaded=!1,t.videoLoaded=!1,t.metadataChanged=!1,t.metadata=null,t.formatType=re.MPEGTS,t}mt.prototype.create=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var p=new Uint8Array(8),S=[p].concat(e.map(function(oe){return new Uint8Array(oe)})),M=S.reduce(function(oe,we){return oe+we.byteLength},0),X=new n(p.buffer);return X.write(4,M),cr(t).forEach(function(oe){return X.write(1,oe)}),n.concatUint8s(S)},mt.prototype.avc1=function(t){var S=t.pixelRatio,e=t.vps,r=new ArrayBuffer(78),p=new n(r),S=(p.write(4,0),p.write(2,0),p.write(2,1),p.write(4,0),p.write(4,0),p.write(4,0),p.write(4,0),p.write(2,t.width),p.write(2,t.height),p.write(4,4718592),p.write(4,4718592),p.write(4,0),p.write(2,1),p.write(1,12),cr("@ali/splayer").forEach(function(M){return p.write(1,M)}),p.skip(19),p.write(2,24),p.write(2,65535),S.length===2?this.pasp(S[0],S[1]):[]);return e.length?this.create("hvc1",r,this.hvcC(t),S):this.create("avc1",r,this.avcC(t),S)},mt.prototype.avcC=function(S){var p=S.sps,S=S.pps,e=[],r=[],p=(e.push(p.length),p.forEach(function(M){e.push(M.byteLength>>>8&255),e.push(255&M.byteLength),M.forEach(function(X){return e.push(X)})}),r.push(S.length),S.forEach(function(M){r.push(M.byteLength>>>8&255),r.push(255&M.byteLength),M.forEach(function(X){return r.push(X)})}),new ArrayBuffer(5)),S=new n(p);return S.write(1,1),S.write(1,e[4]||0),S.write(1,e[5]||0),S.write(1,e[6]||0),S.write(1,255),this.create("avcC",p,e,r)},mt.prototype.btrt=function(){var t=new ArrayBuffer(12),e=new n(t);return e.write(4,1875072),e.write(4,3e6),e.write(4,3e6),this.create("btrt",t)},mt.prototype.pasp=function(t,e){var r=new ArrayBuffer(8),p=new n(r);return p.write(4,t),p.write(4,e),this.create("pasp",r)},mt.prototype.dinf=function(){return this.create("dinf",this.dref())},mt.prototype.dref=function(){var t=new ArrayBuffer(8),e=new n(t);return e.write(4,0),e.write(4,1),this.create("dref",t,this.url())},mt.prototype.esds=function(p){var e=p.audioObjectType,r=p.sampleRate,p=p.channelCount,S=new ArrayBuffer(33),M=new n(S),X=5<=e,oe=(M.write(4,0),M.write(1,3),M.write(1,X?27:25),M.write(2,1),M.write(1,0),M.write(1,4),M.write(1,X?19:17),M.write(1,64),M.write(1,21),M.write(3,0),M.write(4,0),M.write(4,0),M.write(1,5),M.write(1,X?4:2),u.findIndex(function(we){return r===we}));return M.write(1,e<<3|(14&oe)>>1),X?(M.write(1,(1&(e=oe))<<7|p<<3|(14&e)>>1),M.write(1,(1&e)<<7|8),M.write(1,0)):M.write(1,(1&oe)<<7|p<<3),M.back(4),M.skip(4),M.write(1,6),M.write(1,1),M.write(1,2),this.create("esds",S)},mt.prototype.ftyp=function(){var t=new ArrayBuffer(16),e=new n(t);return cr("isom").forEach(function(r){return e.write(1,r)}),e.write(4,1),cr("isom").forEach(function(r){return e.write(1,r)}),cr("avc1").forEach(function(r){return e.write(1,r)}),this.create("ftyp",t)},mt.prototype.hdlr=function(t){var e=new ArrayBuffer(37),r=new n(e);return r.skip(8),t===ee.VIDEO?cr("vide").forEach(function(p){return r.write(1,p)}):t===ee.AUDIO&&cr("soun").forEach(function(p){return r.write(1,p)}),r.skip(12),t===ee.VIDEO?cr("VideoHandler").forEach(function(p){return r.write(1,p)}):t===ee.AUDIO&&cr("SoundHandler").forEach(function(p){return r.write(1,p)}),r.write(1,0),this.create("hdlr",e)},mt.prototype.hvcC=function(S){var p=S.vps,e=S.sps,S=S.pps,r=[],p=[{type:I.VPS,data:p},{type:I.SPS,data:e},{type:I.PPS,data:S}],S=(p.forEach(function(Ce){var ke=Ce.type,Ce=Ce.data;r.push(128|ke),r.push(Ce.length>>>8&255),r.push(255&Ce.length),Ce.forEach(function(Ne){r.push(Ne.byteLength>>>8&255),r.push(255&Ne.byteLength),Ne.forEach(function(Ye){return r.push(Ye)})})}),new ArrayBuffer(23)),M=new n(S),X=e.length?e[0]:[];M.write(1,1);for(var oe=1;oe<12;oe++)M.write(1,X[oe]||0);return M.write(1,0),M.write(2,0),M.write(1,0),M.write(1,1),M.write(1,0),M.write(1,0),M.write(2,0),M.write(1,15),M.write(1,p.length),this.create("hvcC",S,r)},mt.prototype.mdat=function(t){return this.create("mdat",t)},mt.prototype.mdhd=function(t){var e=new ArrayBuffer(24),r=new n(e);return r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,t.timescale),r.write(4,0),r.write(2,21956),r.write(2,0),this.create("mdhd",e)},mt.prototype.mdia=function(t){return this.create("mdia",this.mdhd(t),this.hdlr(t.type),this.minf(t))},mt.prototype.mfhd=function(t){var e=new ArrayBuffer(8),r=new n(e);return r.write(4,0),r.write(4,t),this.create("mfhd",e)},mt.prototype.minf=function(t){var e=t.type===ee.VIDEO?this.vmhd():this.smhd();return this.create("minf",e,this.dinf(),this.stbl(t))},mt.prototype.moof=function(X,S,r){var p=this,S=this.mfhd(S),M=8+S.byteLength+60*X.tracks.length+16*r.length+8,X=X.tracks.map(function(oe){var we=r.filter(function(Ce){return Ce.trackType===oe.type}),ke=p.traf(oe,we,M);return M+=we.reduce(function(Ce,Ne){return Ce+Ne.size},0),ke});return this.create.apply(this,Fr(["moof",S],X,!1))},mt.prototype.moov=function(t){var e=this,r=t.tracks.map(function(p){return e.trak(p)});return this.create.apply(this,Fr(Fr(["moov",this.mvhd(t)],r,!1),[this.mvex(t)],!1))},mt.prototype.mp4a=function(t){var e=new ArrayBuffer(28),r=new n(e);return r.write(4,0),r.write(2,0),r.write(2,1),r.write(4,0),r.write(4,0),r.write(2,t.channelCount),r.write(2,t.sampleSize),r.write(4,0),r.write(4,t.sampleRate<<16),this.create("mp4a",e,this.esds(t))},mt.prototype.mvex=function(t){var e=this;return this.create.apply(this,Fr(["mvex"],t.tracks.map(function(r){return e.trex(r)}),!1))},mt.prototype.mvhd=function(t){var e=new ArrayBuffer(100),r=new n(e);return r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,t.timescale),r.write(4,t.duration),r.write(2,1),r.skip(2),r.write(1,1),r.skip(1),r.skip(10),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach(function(p){return r.write(1,p)}),r.skip(24),r.write(4,4294967295),this.create("mvhd",e)},mt.prototype.sdtp=function(t){var e=t.length,r=new ArrayBuffer(4+e),p=new n(r);p.write(4,0);for(var S=0;S<e;S++){var M=t[S];p.write(1,M.flag)}return this.create("sdtp",r)},mt.prototype.smhd=function(){var t=new ArrayBuffer(8),e=new n(t);return e.write(4,0),e.write(4,0),this.create("smhd",t)},mt.prototype.stbl=function(t){return this.create("stbl",this.stsd(t),this.stts(),this.stsc(),this.stsz(),this.stco())},mt.prototype.stco=function(){var t=new ArrayBuffer(8),e=new n(t);return e.write(4,0),e.write(4,0),this.create("stco",t)},mt.prototype.stsc=function(){var t=new ArrayBuffer(8),e=new n(t);return e.write(4,0),e.write(4,0),this.create("stsc",t)},mt.prototype.stsd=function(t){var e=new ArrayBuffer(8),r=new n(e);return r.write(4,0),r.write(4,1),t.type===ee.VIDEO?this.create("stsd",e,this.avc1(t)):t.type===ee.AUDIO?this.create("stsd",e,this.mp4a(t)):this.create("stsd",e)},mt.prototype.stsz=function(){var t=new ArrayBuffer(12),e=new n(t);return e.write(4,0),e.write(4,0),e.write(4,0),this.create("stsz",t)},mt.prototype.stts=function(){var t=new ArrayBuffer(8),e=new n(t);return e.write(4,0),e.write(4,0),this.create("stts",t)},mt.prototype.tkhd=function(t){var e=new ArrayBuffer(84),r=new n(e);return r.write(4,7),r.write(4,0),r.write(4,0),r.write(4,t.id),r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,0),r.write(1,0),r.write(1,0),r.write(2,0),[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach(function(p){return r.write(1,p)}),r.write(2,t.width||0),r.write(2,0),r.write(2,t.height||0),r.write(2,0),this.create("tkhd",e)},mt.prototype.tfdt=function(t){var e=new ArrayBuffer(8),r=new n(e);return r.write(4,0),r.write(4,t),this.create("tfdt",e)},mt.prototype.tfhd=function(t){var e=new ArrayBuffer(8),r=new n(e);return r.write(4,0),r.write(4,t.id),this.create("tfhd",e)},mt.prototype.traf=function(t,e,r){r===void 0&&(r=0);var p=e.length?e[0].dts:0;return this.create("traf",this.tfhd(t),this.tfdt(p),this.trun(e,r))},mt.prototype.trak=function(t){return this.create("trak",this.tkhd(t),this.mdia(t))},mt.prototype.trex=function(t){var e=new ArrayBuffer(24),r=new n(e);return r.write(4,0),r.write(4,t.id),r.write(4,1),r.write(4,0),r.write(4,0),r.write(4,65537),this.create("trex",e)},mt.prototype.trun=function(t,e){var r=t.length,p=new ArrayBuffer(12+16*r),S=new n(p);S.write(4,3841),S.write(4,t.length),S.write(4,e);for(var M=0;M<r;M++){var X=t[M];S.write(4,X.duration),S.write(4,X.size),S.write(4,X.flag),S.write(4,X.cts)}return this.create("trun",p)},mt.prototype.vmhd=function(){var t=new ArrayBuffer(12),e=new n(t);return e.write(4,1),e.write(2,0),e.write(2,0),e.write(2,0),e.write(2,0),this.create("vmhd",t)},mt.prototype.url=function(){var t=new ArrayBuffer(4);return new n(t).write(4,1),this.create("url ",t)};var Ba=mt;function mt(){}Qi.createSilentFrame=function(t,e){if(t==="mp4a.40.2"){if(e===1)return new Uint8Array([0,200,0,128,35,128]);if(e===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(e===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(e===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(e===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(e===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(e===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(e===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(e===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return new Uint8Array},Qi.FRAME_DURATION=1024;var Fo=Qi;function Qi(){}pr.prototype.updateConfig=function(t){Object.assign(this.config,t)},pr.prototype.createInitSegment=function(){var t=n.concatUint8(this.generator.ftyp(),this.generator.moov(this.config));return this.offset=t.byteLength,t},pr.prototype.createSegment=function(t){var e,r,p=this;return t.length?(e=[],this.config.tracks.forEach(function(S){var M,X=t.filter(function(oe){return oe.trackType===S.type});X.length&&(M=null,S.type===ee.VIDEO?M=p.recaculateVideoSamples(X,S):S.type===ee.AUDIO&&(M=p.recaculateAudioSamples(X,S)),M)&&(e.push(p.generator.moof(p.config,++p.sequenceNumber,M)),e.push(p.generator.mdat(n.concatUint8s(M.map(function(oe){return oe.data})))))}),r=n.concatUint8s(e),this.offset+=r.byteLength,r):new Uint8Array},pr.prototype.createSlientFrames=function(t,e,r,p){var S=[];if(1.5*p<r){this.logger.warn("remux audio found pts hole at pts:",t,"timestamp:",(t-this.config.basePTS)/e.timescale,"gap duration:",r,"sample duration:",p);for(var M=Fo.createSilentFrame(e.codec,e.channelCount),X=Math.ceil(r/p),oe=0;oe<X;oe++)S.push({flag:Y.DEPENDS_NO,trackType:ee.AUDIO,dts:t+p*oe,cts:0,duration:p,size:M.byteLength,data:M,isSync:!0});S.length&&(S[S.length-1].duration=r-(X-1)*p)}return S},pr.prototype.recaculateAudioSamples=function(t,e){var r=[];this.prevAudioPacket&&(t.unshift(this.prevAudioPacket),this.prevAudioPacket=void 0);var p,S,M=Math.round(Fo.FRAME_DURATION/e.sampleRate*e.timescale);!this.audioInited&&t.length&&(this.audioInited=!0,S=t[0].pts-this.config.basePTS,this.createSlientFrames(this.config.basePTS,e,S,M).forEach(function(Ne){r.push(Ne)}));for(var X,oe,we=0,ke=0,Ce=t.length;we<Ce;we++){if(p=t[we],X=t[we+1]){if((ke=X.dts-p.dts)<0){if(!((X=t.findIndex(function(Ne){return p.dts<Ne.dts}))>we+1))break;ke=t[X].dts-p.dts,we=X-1,this.logger.warn("remux audio found pts overlap at pts:",p.pts,"timestamp:",(p.pts-(this.config.basePTS||0))/e.timescale,"gap duration:",ke,"sample duration:",M)}}else{if(!p.isLast||!r.length){this.prevAudioPacket=p;break}ke=r[r.length-1].duration}0<ke&&((X=this.createSlientFrames(p.pts+M,e,ke-M,M)).length&&(ke=M),oe=n.concatUint8s(p.data),r.push({flag:Y.DEPENDS_NO,trackType:ee.AUDIO,size:oe.byteLength,dts:p.dts,cts:p.pts-p.dts,duration:ke,data:oe,isSync:!0}),X.forEach(function(Ne){r.push(Ne)}))}return r.length&&this.recaculateSample(r[0],this.config.baseDTS),r},pr.prototype.recaculateVideoSamples=function(t,e){var r;this.prevVideoPacket&&(t.unshift(this.prevVideoPacket),this.prevVideoPacket=void 0),this.videoInited||(this.videoInited=!0,r=Math.min.apply(Math,t.map(function(Qe){return Qe.pts})),t.find(function(Qe){return Qe.pts===r}).pts=this.config.basePTS);for(var p,S,M,X,oe=[],we=this,ke=0,Ce=0,Ne=0,Ye=t.length;ke<Ye;ke++){var _t=function(tt,We,ht,wt){if(p=t[tt],S=t[tt+1]){if((ht=S.dts-p.dts)<0){for(S.dts=p.dts,We=tt+1;We<wt-1;We++)t[We].dts>t[We+1].dts&&(t[We+1].dts=t[We].dts);we.logger.warn("remux video found pts overlap at pts:",p.pts,"timestamp:",(p.pts-we.config.basePTS)/e.timescale,"gap packet number:",We-tt,"gap duration:",ht),ht=0}}else{if(!p.isLast||!oe.length)return we.prevVideoPacket=p,M=We,X=ht,"break";ht=oe[oe.length-1].duration}var Ct;0<=ht&&(Ct=[],p.data.forEach(function(ut){Ct.push(B.createAVCCStartCode(ut.length),ut)}),tt=n.concatUint8s(Ct),oe.push({flag:p.isSync?Y.DEPENDS_NO:Y.IS_NON_SYNC|Y.DEPENDS_YES,trackType:ee.VIDEO,size:tt.byteLength,dts:p.dts,cts:p.pts-p.dts,duration:ht,data:tt,isSync:p.isSync})),M=We,X=ht}(ke,Ce,Ne,Ye),Ce=M,Ne=X;if(_t==="break")break}return oe.length&&this.recaculateSample(oe[0],this.config.baseDTS),oe},pr.prototype.recaculateSample=function(t,e){return e=t.dts-e,t.dts=e,t},pr.prototype.flush=function(){this.prevAudioPacket=void 0,this.prevVideoPacket=void 0};var Ji=pr;rn=function(t,e){return(rn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}rn(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(Vr,tn=Z),Vr.prototype.end=function(){this.emit("end",void 0)},Vr.prototype.pipe=function(t,e){return e?this.on("data",function(r){return t.write(e(r))}):this.on("data",function(r){return t.write(r)}),this.on("end",function(){return t.end()}),t},W=Vr,en=function(t,e){return(en=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,p){r.__proto__=p}:function(r,p){for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(r[S]=p[S])}))(t,e)};var Zi,en,tn,rn,nn=function(){return(nn=Object.assign||function(t){for(var e,r=1,p=arguments.length;r<p;r++)for(var S in e=arguments[r])Object.prototype.hasOwnProperty.call(e,S)&&(t[S]=e[S]);return t}).apply(this,arguments)},ja=(function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}en(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(dr,Zi=W),dr.prototype.remux=function(t,e){var r=this.remuxerMap.get(t);r&&e.length&&this.emit("data",{type:t,buffer:r.createSegment(e).buffer,eos:!!e[e.length-1].isLast})},dr.prototype.eos=function(){var t=this;this.pendingPacketsMap.forEach(function(e,r){t.pendingPacketsMap.delete(r),t.remux(r,e)})},dr.prototype.writeMetadata=function(t){var e=this;(this.metadata=t).tracks.forEach(function(r){return e.writeTrackMetadata(r)})},dr.prototype.writeTrackMetadata=function(t){this.eos();var e=this.remuxerMap.get(t.type);e&&(e.updateConfig(nn(nn({},this.metadata),{tracks:[t]})),this.emit("data",{type:t.type,buffer:e.createInitSegment().buffer,eos:!1}))},dr.prototype.write=function(r){var e=this,r=r.packets,p=this.pendingPacketsMap;r.forEach(function(S){var M=p.get(S.trackType);M?(M.push(S),10<=M.length&&(p.set(S.trackType,[]),e.remux(S.trackType,M))):p.set(S.trackType,[S])})},dr.prototype.flush=function(){this.remuxerMap.forEach(function(t){return t.flush()}),this.pendingPacketsMap.clear()},dr.prototype.end=function(){this.eos(),Zi.prototype.end.call(this)},dr);function dr(){var t=Zi.call(this)||this;return t.remuxerMap=new Map,t.pendingPacketsMap=new Map,t.metadata={},t.remuxerMap.set(ee.VIDEO,new Ji),t.remuxerMap.set(ee.AUDIO,new Ji),t}function Vr(){return tn!==null&&tn.apply(this,arguments)||this}function pr(){this.logger=new Pt("remux"),this.generator=new Ba,this.config={formatType:re.MP4,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]},this.sequenceNumber=0,this.offset=0,this.videoInited=!1,this.audioInited=!1,this.lastPacketMap=new Map}}(),s;function g(o){var a=f[o];return a!==void 0||(a=f[o]={id:o,loaded:!1,exports:{}},d[o](a,a.exports,g),a.loaded=!0),a.exports}var d,f,s},typeof ne=="object"&&typeof E=="object"?E.exports=x():typeof ne=="object"?ne.VideoxMuxer=x():k.VideoxMuxer=x()},{"es6-promise":9}],55:[function(k,E,ne){function x(g){for(var d=5381,f=g.length;f;)d=33*d^g.charCodeAt(--f);return(d>>>0).toString()}var b=k("./vttparse");E.exports={parse:function(o,d,f){var s,o=o.trim().replace(/\r\n|\n\r|\n|\r/g,`
`).split(`
`),a=[],n=new b;n.oncue=function(u){u.id=x(u.startTime)+x(u.endTime)+x(u.text),u.text=decodeURIComponent(escape(u.text)),u.isBig=!1;var v=u.text.split("#xywh=");v.length==2&&(v=v[1].split(","),u.x=v[0],u.y=v[1],u.w=v[2],u.h=v[3],u.isBig=!0),0<u.endTime&&a.push(u)},n.onparsingerror=function(u){s=u},n.onflush=function(){s&&f?(f(s),console.log(s)):d(a)},o.forEach(function(u){n.parse(u+`
`)}),n.flush()}}},{"./vttparse":57}],56:[function(k,E,ne){function x(s){return typeof s=="string"&&!!f[s.toLowerCase()]&&s.toLowerCase()}function b(s){for(var o=1;o<arguments.length;o++){var a,n=arguments[o];for(a in n)s[a]=n[a]}return s}function g(s,o,a){var n=this,u=function(){if(typeof navigator<"u")return/MSIE\s8\.0/.test(navigator.userAgent)}(),v={},h=(u?n=document.createElement("custom"):v.enumerable=!0,n.hasBeenReset=!1,""),c=!1,_=s,m=o,T=a,l=null,y="",w=!0,P="auto",C="start",R=50,A="middle",I=50,D="middle";if(Object.defineProperty(n,"id",b({},v,{get:function(){return h},set:function(B){h=""+B}})),Object.defineProperty(n,"pauseOnExit",b({},v,{get:function(){return c},set:function(B){c=!!B}})),Object.defineProperty(n,"startTime",b({},v,{get:function(){return _},set:function(B){if(typeof B!="number")throw new TypeError("Start time must be set to a number.");_=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",b({},v,{get:function(){return m},set:function(B){if(typeof B!="number")throw new TypeError("End time must be set to a number.");m=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",b({},v,{get:function(){return T},set:function(B){T=""+B,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",b({},v,{get:function(){return l},set:function(B){l=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",b({},v,{get:function(){return y},set:function(B){if(B=typeof(B=B)=="string"&&!!d[B.toLowerCase()]&&B.toLowerCase(),B===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",b({},v,{get:function(){return w},set:function(B){w=!!B,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",b({},v,{get:function(){return P},set:function(B){if(typeof B!="number"&&B!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");P=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",b({},v,{get:function(){return C},set:function(B){if(B=x(B),!B)throw new SyntaxError("An invalid or illegal string was specified.");C=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",b({},v,{get:function(){return R},set:function(B){if(B<0||100<B)throw new Error("Position must be between 0 and 100.");R=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",b({},v,{get:function(){return A},set:function(B){if(B=x(B),!B)throw new SyntaxError("An invalid or illegal string was specified.");A=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",b({},v,{get:function(){return I},set:function(B){if(B<0||100<B)throw new Error("Size must be between 0 and 100.");I=B,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",b({},v,{get:function(){return D},set:function(B){if(B=x(B),!B)throw new SyntaxError("An invalid or illegal string was specified.");D=B,this.hasBeenReset=!0}})),n.displayState=void 0,u)return n}var d,f;E.exports=typeof window<"u"&&window.VTTCue?window.VTTCue:(d={"":!0,lr:!0,rl:!0},f={start:!0,middle:!0,end:!0,left:!0,right:!0},g.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},g)},{}],57:[function(k,E,ne){function x(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}}var b=k("./vttcue");function g(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new x,this.regionList=[]}function d(){this.values=Object.create(null)}function f(n,u,v,h){var c,_,m=h?n.split(h):[n];for(c in m)typeof m[c]=="string"&&(_=m[c].split(v)).length===2&&u(_[0],_[1])}d.prototype={set:function(n,u){this.get(n)||u===""||(this.values[n]=u)},get:function(n,u,v){return v?this.has(n)?this.values[n]:u[v]:this.has(n)?this.values[n]:u},has:function(n){return n in this.values},alt:function(n,u,v){for(var h=0;h<v.length;++h)if(u===v[h]){this.set(n,u);break}},integer:function(n,u){/^-?\d+$/.test(u)&&this.set(n,parseInt(u,10))},percent:function(n,u){return!!(u.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(u=parseFloat(u))&&u<=100)&&(this.set(n,u),!0)}};var s=new b(0,0,0),o=s.align==="middle"?"middle":"center";function a(n,u,v){var h,c,_=n;function m(){var l,y=(y=(y=n).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(l=(l=y[4])&&l.replace(".",""),y[3]?w(y[1],y[2],y[3].replace(":",""),l):59<y[1]?w(y[1],y[2],0,l):w(0,y[1],y[2],l)):null;function w(P,C,R,A){return 3600*(0|P)+60*(0|C)+(0|R)+(0|A)/1e3}if(y===null)throw new Error("Malformed timestamp: "+_);return n=n.replace(/^[^\sa-zA-Z-]+/,""),y}function T(){n=n.replace(/^\s+/,"")}if(T(),u.startTime=m(),T(),n.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+_);n=n.substr(3),T(),u.endTime=m(),T(),h=n,u=u,c=new d,f(h,function(l,y){switch(l){case"region":for(var w=v.length-1;0<=w;w--)if(v[w].id===y){c.set(l,v[w].region);break}break;case"vertical":c.alt(l,y,["rl","lr"]);break;case"line":var P=y.split(","),C=P[0];c.integer(l,C),c.percent(l,C)&&c.set("snapToLines",!1),c.alt(l,C,["auto"]),P.length===2&&c.alt("lineAlign",P[1],["start",o,"end"]);break;case"position":P=y.split(","),c.percent(l,P[0]),P.length===2&&c.alt("positionAlign",P[1],["start",o,"end","line-left","line-right","auto"]);break;case"size":c.percent(l,y);break;case"align":c.alt(l,y,["start",o,"end","left","right"])}},/:/,/\s/),u.region=c.get("region",null),u.vertical=c.get("vertical",""),(h=c.get("line","auto"))==="auto"&&s.line===-1&&(h=-1),u.line=h,u.lineAlign=c.get("lineAlign","start"),u.snapToLines=c.get("snapToLines",!0),u.size=c.get("size",100),u.align=c.get("align",o),(h=c.get("position","auto"))==="auto"&&s.position===50&&(h=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=h}g.prototype={parse:function(n){var u=this;function v(){for(var T=0,l=(l=u.buffer).replace(/<br(?: \/)?>/gi,`
`);T<l.length&&l[T]!=="\r"&&l[T]!==`
`;)++T;var y=l.substr(0,T);return l[T]==="\r"&&++T,l[T]===`
`&&++T,u.buffer=l.substr(T),y}n&&(u.buffer+=u.decoder.decode(n,{stream:!0}));try{if(u.state==="INITIAL"){if(!/\r\n|\n/.test(u.buffer))return this;var h,c=(h=v()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new Error("Malformed WebVTT signature.");u.state="HEADER"}for(var _=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(_?_=!1:h=v(),u.state){case"HEADER":/:/.test(h)?f(h,function(T,l){T==="Region"&&console.log("parse region",l)},/:/):h||(u.state="ID");continue;case"NOTE":h||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(h)){u.state="NOTE";break}if(!h)continue;if(u.cue=new b(0,0,""),u.state="CUE",h.indexOf("-->")===-1){u.cue.id=h;continue}case"CUE":try{a(h,u.cue,u.regionList)}catch{u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var m=h.indexOf("-->")!==-1;if(!h||m&&(_=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+=`
`),u.cue.text+=h;continue;case"BADCUE":h||(u.state="ID");continue}}}catch{u.state==="CUETEXT"&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state=u.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&this.state!=="HEADER"||(this.buffer+=`

`,this.parse()),this.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(n){throw n}return this.onflush&&this.onflush(),this}},E.exports=g},{"./vttcue":56}],58:[function(v,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(c){for(var _=1;_<arguments.length;_++){var m,T=arguments[_];for(m in T)Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}return c}).apply(this,arguments)}function b(c,_){for(var m=0;m<_.length;m++){var T=_[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,T.key,T)}}function g(c,_,m){_&&b(c.prototype,_),Object.defineProperty(c,"prototype",{writable:!1})}var d=v("./vtt-parser"),f=v("./vtt-renderer"),s=v("./vtt-loader"),o=v("../../player/base/event/eventtype"),a=v("../../lib/ua"),n=v("../../lib/event"),u=v("../../ui/component/util"),v=function(){function c(m){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new h,this.player=(m=m||{}).player,this.loader=new s,this.parser=new d,this.createRendererInstance(),this.bindEvents()}var _=c.prototype;return _.bindEvents=function(){function m(C){C.paramData.splayer&&l.switchRenderer(f.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var T,l=this,y=this,w=this.player,P=(w.on(o.Private.TextTrackFounded,function(C){if(C.paramData.from==="user")l.hasUserTracks=!0;else if(l.hasUserTracks)return;C=C.paramData.textTracks,C&&C.length&&(l.enabled=!0,l.trackConfigs=C.map(function(R){return x({},R,{label:R.label||R.srclang,language:R.srclang})}),l.trackConfigs.forEach(function(R){l.activeRenderer.addTrack(R),w.getOptions().controlBarVisibility==="always"&&l.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},l.parser.cues)}))}),w.on(o.Private.UserTrackReset,function(){l.hasUserTracks=!1}),w.on(o.Player.H265PlayInfo,m),w.on(o.Player.H266PlayInfo,m),a.IS_IOS?(T=!1,w.on(o.Player.RequestFullScreen,function(){T=!0}),n.on(w.tag,"webkitendfullscreen",function(){T=!1}),n.on(w.tag.textTracks,"change",function(){var C;l.sleeper.isSleep||(l.sleeper.sleep(1e3),l.isCustomRenderer)||T&&(C=w.tag.textTracks,(C=Array.from(C).find(function(R){return R.mode==="showing"}))?l.activeTrackConfig&&l.activeTrackConfig.language===C.language||(l.switchTrack(C.language),w.trigger(o.Private.SelectorValueChange,{type:"cc",text:C.label})):w.trigger(o.Private.CCStateChanged,{value:"off",lang:""}))})):(w.on(o.Player.RequestFullScreen,this.adjustLayout.bind(this)),w.on(o.Player.CancelFullScreen,this.adjustLayout.bind(this)),P=u.debounce(function(){y.isCustomRenderer&&y.activeRenderer.resetCuesStyle(l.parser.cues)},100),n.on(window,"resize",P)),u.throttle(function(){y.isShow&&(y.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},y.parser.cues),y.player.paused())&&(y.activeRenderer.hide(),y.activeRenderer.restore())},100)),P=(w.on(o.Private.ShowBar,P),u.throttle(function(){y.isShow&&(y.activeRenderer.forceUpdateCuesStyle({transform:"none"},y.parser.cues),y.player.paused())&&(y.activeRenderer.hide(),y.activeRenderer.restore())},100));w.on(o.Private.HideBar,P),w.on(o.Private.VttHide,function(){l.hide()}),w.on(o.Private.VttSwitchTrack,function(C){l.switchTrack(C.paramData)}),w.on(o.Private.VttClearTracks,function(){l.reset()})},_.createRendererInstance=function(m){this.activeRenderer&&this.activeRenderer.dispose();var T=this.player.getOptions(),l={player:this.player};this.adaptPlatform(),m?m===f.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new f.NativeRenderer(l):(l.overlayId=this.getOverlayId(),this.activeRenderer=new f.CustomRenderer(l)):T.useNativeTextRenderer?this.activeRenderer=new f.NativeRenderer(l):(l.overlayId=this.getOverlayId(),this.activeRenderer=new f.CustomRenderer(l))},_.switchTrack=function(m){var T,l=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new d,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=m,T=this.trackConfigs.find(function(y){return y.language===m}))&&(T=T._loaded?"":(T||{}).src,this.loadVtt(T,function(){l.parseVtt(),l.activeRenderer.addCues(l.parser.cues,l.activeTrackConfig.language),l.show()}))},_.adaptPlatform=function(){var m=this.player.getOptions();a.IS_IOS&&(m.useNativeTextRenderer=!0)},_.loadVtt=function(m,T){var l=this;m?this.loader.loadFromUrl(m,function(y){l.activeTrackConfig._loaded=!0,l.vttText[l.activeTrackConfig.language]=y,T&&T()}):T&&T()},_.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var m=this.player.el().getElementsByClassName("prism-controlbar")[0];m&&((m=m.style)==null?void 0:m.display)==="block"&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},this.parser.cues)},_.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},_.switchRenderer=function(m){var T=this,l=f.VttBasicRenderer.RENDER_TYPE_NATIVE,y=f.VttBasicRenderer.RENDER_TYPE_CUSTOM;(m===l&&this.activeRenderer.type!==l||m===y&&this.activeRenderer.type!==y)&&(this.createRendererInstance(m),this.trackConfigs.forEach(function(w){return T.activeRenderer.addTrack(w)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},_.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},_.adjustLayout=function(){var m=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){m.activeRenderer.restore()},300))},_.startTickTimeListener=function(){var m=this;this.clearTicker(),this.tick(function(){var T=m.player.getCurrentTime();isNaN(T)||m.activeRenderer.renderCues(m.findTargetCues(T))})},_.tick=function(m){var T=this;this.tickTimer=requestAnimationFrame(function(){try{m()}catch(l){console.log("e",l)}T.tick(m)})},_.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},_.getOverlayId=function(){var m=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(m)return m.id},_.findTargetCues=function(m){if(this.parser&&m!==this.prevPosition){this.prevPosition=m;for(var T=[],l=0;l<this.parser.cues.length;l++){var y=this.parser.cues[l];if(m>=y.startTime&&m<=y.endTime)T.push(y);else if(m<y.startTime)break}return T}},_.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},_.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},g(c,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(m){this._enabled=m}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===f.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var m;return(m=this.trackConfigs)==null?void 0:m.find(function(T){return T._isActive})},set:function(m){this.trackConfigs.forEach(function(T){return T._isActive=T.language===m})}}]),c}(),h=function(){function c(){this.value=!1,this.timer=null}return c.prototype.sleep=function(_){var m=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){m.value=!1},_)},g(c,[{key:"isSleep",get:function(){return this.value}}]),c}();E.exports=v},{"../../lib/event":36,"../../lib/ua":51,"../../player/base/event/eventtype":71,"../../ui/component/util":165,"./vtt-loader":60,"./vtt-parser":61,"./vtt-renderer":62}],59:[function(n,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(v){for(var h=1;h<arguments.length;h++){var c,_=arguments[h];for(c in _)Object.prototype.hasOwnProperty.call(_,c)&&(v[c]=_[c])}return v}).apply(this,arguments)}function b(v,h){v.prototype=Object.create(h.prototype),g(v.prototype.constructor=v,h)}function g(v,h){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,_){return c.__proto__=_,c})(v,h)}function d(v,h){for(var c=0;c<h.length;c++){var _=h[c];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(v,_.key,_)}}function f(v,h,c){h&&d(v.prototype,h),Object.defineProperty(v,"prototype",{writable:!1})}var s=n("../../lib/data"),o={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},a={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},n=function(v){function h(m){var m=x({},m=m===void 0?{}:m,{kind:m.kind||a.SUBTITLES,language:m.language||m.srclang||""}),T=m.mode||o.DISABLED;return m.default,-1<[a.METADATA,a.CHAPTERS].indexOf(m.kind)&&(T=o.HIDDEN),m.mode=T,(T=v.call(this,m)||this)._cues=[],T._activeCues=[],T._settings={},T._nativeTrack=null,T._extData={},T._settings=m,T}b(h,v);var c=h.prototype;return c.setExtData=function(_){this._extData=x({},this._extData,_=_===void 0?{}:_)},c.addCue=function(_){this._cues.push(_),this.nativeTrack&&this.nativeTrack.addCue(_)},c.removeCue=function(_){this._cues=this._cues.filter(function(m){return m!==_}),this.nativeTrack&&this.nativeTrack.removeCue(_)},f(h,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(_){this._settings.mode=_,this.nativeTrack&&(this.nativeTrack.mode=_)}},{key:"language",get:function(){return this._settings.language},set:function(_){this._settings.language=_,this.nativeTrack&&(this.nativeTrack.language=_)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(_){this._nativeTrack=_}}]),h}(function(){function v(h){this._id=(h=h===void 0?{}:h).id||"prism-track-"+s.guid(),this._kind=h.kind||"",this._language=h.language||"",this._label=h.label||""}return f(v,[{key:"label",get:function(){return this._label},set:function(h){this._label=h}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]),v}()),u=function(v){function h(){return v.call(this)||this}return b(h,v),h}(function(){function v(){this._trackList=[]}return v.prototype.addTrack=function(h){var c=this.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this._trackList[c]}}),this._trackList.indexOf(h)===-1&&this._trackList.push(h)},f(v,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}]),v}());E.exports.TextTrack=n,E.exports.TextTrackList=u,E.exports.TRACK_MODE=o,E.exports.TRACK_KIND=a},{"../../lib/data":33}],60:[function(k,E,ne){var x=k("../io");E.exports=function(){function b(){}return b.prototype.loadFromUrl=function(g,d){x.get(g,function(f){d(f)},function(f,s){console.log("ERR",f,s)})},b}()},{"../io":43}],61:[function(g,E,ne){function x(d,f){for(var s=0;s<f.length;s++){var o=f[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(d,o.key,o)}}var b=g("./vttjs").WebVTT,g=function(){function d(){var o=this;this._cues=[],this._regions=[],this.parser=new b.Parser(window,b.StringDecoder()),this.parser.onregion=function(a){o._regions.push(a)},this.parser.oncue=function(a){o._cues.push(a)},this.parser.onflush=function(){},this.parser.onparsingerror=function(a){}}var f,s=d.prototype;return s.parse=function(o){this.parser.parse(o),this.parser.flush()},s.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},s.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},s=d,(f=[{key:"cues",get:function(){return this._cues}}])&&x(s.prototype,f),Object.defineProperty(s,"prototype",{writable:!1}),d}();E.exports=g},{"./vttjs":63}],62:[function(v,E,ne){function x(c,_){for(var m=0;m<_.length;m++){var T=_[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,T.key,T)}}function b(){return(b=Object.assign?Object.assign.bind():function(c){for(var _=1;_<arguments.length;_++){var m,T=arguments[_];for(m in T)Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}return c}).apply(this,arguments)}function g(c,_){c.prototype=Object.create(_.prototype),d(c.prototype.constructor=c,_)}function d(c,_){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,T){return m.__proto__=T,m})(c,_)}v("../../player/base/event/eventtype");var h=v("./text-track"),f=v("./vttjs").WebVTT,s=v("../../lib/dom"),o=h.TextTrack,a=h.TextTrackList,n=h.TRACK_MODE,u=(h.TRACK_KIND,function(){function c(m){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(m=m||{}).player,this.defineTextTrackGetter(),this.trackList=new a}var _=c.prototype;return _.log=function(){for(var m,T=arguments.length,l=new Array(T),y=0;y<T;y++)l[y]=arguments[y];(m=console).log.apply(m,["[LOG:"+this.type+"]"].concat(l))},_.defineTextTrackGetter=function(){var m=this;this.player.getTextTracks=function(){return m.trackList||[]}},_.show=function(m){m=this.findTrackByLanguage(m),m&&(m.mode=n.SHOWING)},_.findTrackByLanguage=function(m){return this.trackList.list.find(function(T){return T.language===m})},_.clearCurrentCues=function(m){if(m){var T=m.mode;if(T===n.DISABLED&&(m.mode=n.HIDDEN),m.cues)for(var l=m.cues.length;l--;)m.removeCue(m.cues[l]);T===n.DISABLED&&(m.mode=T)}},_.addTrack=function(){},_.addCues=function(){},_.restore=function(){},_.renderCues=function(){},_.updateCuesStyle=function(){},_.clearTrack=function(m){this.clearCurrentCues(this.findTrackByLanguage(m))},_.clearAllTracks=function(){var m=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(T){T.mode=n.DISABLED,m.clearCurrentCues(T)}),this.trackList=new a},_.reset=function(){this.hide(),this.clearAllTracks()},_.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},c}()),v=(u.RENDER_TYPE_CUSTOM="CUSTOM",u.RENDER_TYPE_NATIVE="NATIVE",function(c){function _(T){var l=c.call(this,T)||this;return l.overlayId=null,l.currentCues=null,T=T||{},l.type=u.RENDER_TYPE_CUSTOM,l.overlayId=T.overlayId,l}g(_,c);var m=_.prototype;return m.addTrack=function(T){var l=new o({kind:T.kind,label:T.label,language:T.language,default:T.default});l.mode=T.default?n.SHOWING:n.DISABLED,this.trackList.addTrack(l)},m.hide=function(){return f.processCues(window,[],document.getElementById(this.overlayId))},m.restore=function(){this.currentCues&&(this.currentCues.forEach(function(T){return T.displayState=null}),f.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},m.renderCues=function(T){T&&(this.currentCues=T,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),f.processCues(window,T,this.overlayEl),this.updateCuesStyle(T))},m.updateCuesStyle=function(T){var l=this;T.forEach(function(y){var w,P=y.displayState;P._styleSetDone||P&&(P.setAttribute("class","prism-cue"),l.overlayEl||(l.overlayEl=document.getElementById(l.overlayId)),y=l.overlayEl.offsetWidth,w=l.overlayEl.offsetHeight,(y=Math.min(y,w))&&(P.style.fontSize=.05*y+"px",P.style.height="auto",P.style.top="auto"),Object.keys(l.overrideStyle).forEach(function(C){l.tryUpdateStyle(P,C,l.overrideStyle[C])}),P._styleSetDone=!0)})},m.updateOverrideStyle=function(T){this.overrideStyle=b({},this.overrideStyle,T=T===void 0?{}:T)},m.forceUpdateCuesStyle=function(T,l){l===void 0&&(l=[]),this.updateOverrideStyle(T=T===void 0?{}:T),this.resetCuesStyle(l)},m.tryUpdateStyle=function(T,l,y){try{T.style[l]=y}catch{}},m.resetCuesStyle=function(T){T&&T.length&&T.forEach(function(l){l.displayState&&(l.displayState=null)})},m.dispose=function(){c.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},_}(u)),h=function(c){function _(l){return(l=c.call(this,l=l===void 0?{}:l)||this).type=u.RENDER_TYPE_NATIVE,l}g(_,c);var m,T=_.prototype;return T.addTrack=function(l){var y=this.player.tag,w=Array.from(y.textTracks)||[],P=w.find(function(C){return C.language===l.language}),w=P?(this.log("sameLangTrack",P,w),this.clearCurrentCues(P),P.kind=l.kind,P.label=l.label,P):y.addTextTrack(l.kind,l.label,l.language),P=(w.mode=l.default?n.SHOWING:n.DISABLED,new o(l));P.nativeTrack=w,this.trackList.addTrack(P)},T.addCues=function(l,y){var w;l&&l.length&&(w=this.trackList.list.find(function(P){return P.language===y}))&&l.forEach(function(P){w.addCue(P)})},T.hide=function(){this.trackList.list.forEach(function(l){l.mode=l.mode===n.SHOWING?n.HIDDEN:l.mode})},T.invalidAllTracks=function(){},T.forceUpdateCuesStyle=function(l,y){s.addCssByStyle("video::-webkit-media-text-track-container{transform: "+l.transform+";}")},T.dispose=function(){c.prototype.dispose.call(this)},T=_,(m=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(l){return l.mode===n.SHOWING})}}])&&x(T.prototype,m),Object.defineProperty(T,"prototype",{writable:!1}),_}(u);E.exports.VttBasicRenderer=u,E.exports.CustomRenderer=v,E.exports.NativeRenderer=h},{"../../lib/dom":35,"../../player/base/event/eventtype":71,"./text-track":59,"./vttjs":63}],63:[function(k,E,ne){E.exports={WebVTT:k("./vtt.js").WebVTT}},{"./vtt.js":64}],64:[function(k,E,ne){var x=this;function b(I,D){return D===void 0&&(D=1),"rgba("+[parseInt(I.substring(0,2),16),parseInt(I.substring(2,4),16),parseInt(I.substring(4,6),16),D].join(",")+")"}var g,d=1;function f(I,D,B){switch(B){case"webvtt.font.color":case"webvtt.font.opacity":var N=Services.prefs.getCharPref("webvtt.font.color"),U=Services.prefs.getIntPref("webvtt.font.opacity")/100;g.fontSet=b(N,U);break;case"webvtt.font.scale":d=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":N=Services.prefs.getCharPref("webvtt.bg.color"),U=Services.prefs.getIntPref("webvtt.bg.opacity")/100,g.backgroundSet=b(N,U);break;case"webvtt.edge.color":case"webvtt.edge.type":N=Services.prefs.getIntPref("webvtt.edge.type"),U=Services.prefs.getCharPref("webvtt.edge.color"),g.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][N]+b(U)}}typeof Services<"u"&&(g={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(I){f(0,0,I),Services.prefs.addObserver(I,f,!1)}));var s=Object.create||function(I){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return o.prototype=I,new o};function o(){}function a(I,D){this.name="ParsingError",this.code=I.code,this.message=D||I.message}function n(I){function D(B,N,U,J){return 3600*(0|B)+60*(0|N)+(0|U)+(0|J)/1e3}return I=I.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/),I?I[3]?D(I[1],I[2],I[3].replace(":",""),I[4]):59<I[1]?D(I[1],I[2],0,I[4]):D(0,I[1],I[2],I[4]):null}function u(){this.values=s(null)}function v(I,D,B,N){var U,J,q=N?I.split(N):[I];for(U in q)typeof q[U]=="string"&&(J=q[U].split(B)).length===2&&D(J[0],J[1])}((a.prototype=s(Error.prototype)).constructor=a).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},u.prototype={set:function(I,D){this.get(I)||D===""||(this.values[I]=D)},get:function(I,D,B){return B?this.has(I)?this.values[I]:D[B]:this.has(I)?this.values[I]:D},has:function(I){return I in this.values},alt:function(I,D,B){for(var N=0;N<B.length;++N)if(D===B[N]){this.set(I,D);break}},integer:function(I,D){/^-?\d+$/.test(D)&&this.set(I,parseInt(D,10))},percent:function(I,D){return!!(D.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(D=parseFloat(D))&&D<=100)&&(this.set(I,D),!0)}};var h={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_={v:"title",lang:"lang"},m={rt:"ruby"};function T(I,D){function B(H){return h[H]}for(var N,U,J,q,j,F,z,K=I.document.createElement("div"),L=K,O=[];z=void 0,(z=D?(z=(z=D.match(/^([^<]*)(<[^>]*>?)?/))[1]||z[2],D=D.substr(z.length),z):null)!==null;)z[0]==="<"?z[1]==="/"?O.length&&O[O.length-1]===z.substr(2).replace(">","")&&(O.pop(),L=L.parentNode):(J=n(z.substr(1,z.length-2)))?(N=I.document.createProcessingInstruction("timestamp",J),L.appendChild(N)):(U=z.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(J=U[1],q=U[3],F=j=void 0,F=c[J],N=F?((j=I.document.createElement(F)).localName=F,(F=_[J])&&q&&(j[F]=q.trim()),j):null)&&(J=L,m[(F=N).localName]&&m[F.localName]!==J.localName||(U[2]&&(N.className=U[2].substr(1).replace("."," ")),O.push(U[1]),L.appendChild(N),L=N)):L.appendChild(I.document.createTextNode(function(H){for(;U=H.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)H=H.replace(U[0],B);return H}(z)));return K}var l=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(I){var D=[],B="";if(I&&I.childNodes){for(U(D,I);B=function J(q){var j,F,z;return q&&q.length?(F=(j=q.pop()).textContent||j.innerText)?(z=F.match(/^.*(\n|\r)/))?z[q.length=0]:F:j.tagName==="ruby"?J(q):j.childNodes?(U(q,j),J(q)):void 0:null}(D);)for(var N=0;N<B.length;N++)if(function(J){for(var q=0;q<l.length;q++){var j=l[q];if(J>=j[0]&&J<=j[1])return 1}}(B.charCodeAt(N)))return"rtl"}return"ltr";function U(J,q){for(var j=q.childNodes.length-1;0<=j;j--)J.push(q.childNodes[j])}}function w(){}function P(I,D,B){var N=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent),q="rgba(255, 255, 255, 1)",U="rgba(0, 0, 0, 0.8)",J="",q=(g!==void 0&&(q=g.fontSet,U=g.backgroundSet,J=g.edgeSet),N&&(q="rgb(255, 255, 255)",U="rgb(0, 0, 0)"),w.call(this),this.cue=D,this.cueDiv=T(I,D.text),{color:q,backgroundColor:U,textShadow:J,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),j=(N||(q.writingMode=D.vertical===""?"horizontal-tb":D.vertical==="lr"?"vertical-lr":"vertical-rl",q.unicodeBidi="plaintext"),this.applyStyles(q,this.cueDiv),this.div=I.document.createElement("div"),q={textAlign:D.align==="middle"?"center":D.align,font:B.font,whiteSpace:"pre-line",position:"absolute"},N||(q.direction=y(this.cueDiv),q.writingMode=D.vertical===""?"horizontal-tb":D.vertical==="lr"?"vertical-lr":"plaintext"),this.applyStyles(q),this.div.appendChild(this.cueDiv),0);switch(D.positionAlign){case"start":j=D.position;break;case"middle":j=D.position-D.size/2;break;case"end":j=D.position-D.size}D.vertical===""?this.applyStyles({left:this.formatStyle(j,"%"),width:this.formatStyle(D.size,"%")}):this.applyStyles({top:this.formatStyle(j,"%"),height:this.formatStyle(D.size,"%")}),this.move=function(F){this.applyStyles({top:this.formatStyle(F.top,"px"),bottom:this.formatStyle(F.bottom,"px"),left:this.formatStyle(F.left,"px"),right:this.formatStyle(F.right,"px"),height:this.formatStyle(F.height,"px"),width:this.formatStyle(F.width,"px")})}}function C(I){var D,B,N,U,J=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent);I.div&&(D=I.div.offsetHeight,B=I.div.offsetWidth,N=I.div.offsetTop,U=(U=(U=I.div.childNodes)&&U[0])&&U.getClientRects&&U.getClientRects(),I=I.div.getBoundingClientRect(),U=U?Math.max(U[0]&&U[0].height||0,I.height/U.length):0),this.left=I.left,this.right=I.right,this.top=I.top||N,this.height=I.height||D,this.bottom=I.bottom||N+(I.height||D),this.width=I.width||B,this.lineHeight=U!==void 0?U:I.lineHeight,J&&!this.lineHeight&&(this.lineHeight=13)}function R(I,D,B,N){var U,J=new C(D),q=D.cue,j=function(te){if(typeof te.line=="number"&&(te.snapToLines||0<=te.line&&te.line<=100))return te.line;if(!te.track||!te.track.textTrackList||!te.track.textTrackList.mediaElement)return-1;for(var le=te.track,me=le.textTrackList,Pe=0,xe=0;xe<me.length&&me[xe]!==le;xe++)me[xe].mode==="showing"&&Pe++;return-1*++Pe}(q),F=[];if(q.snapToLines){switch(q.vertical){case"":F=["+y","-y"],U="height";break;case"rl":F=["+x","-x"],U="width";break;case"lr":F=["-x","+x"],U="width"}var z=J.lineHeight,K=z*Math.round(j),L=B[U]+z,O=F[0];Math.abs(K)>L&&(K=K<0?-1:1,K*=Math.ceil(L/z)*z),j<0&&(K+=q.vertical===""?B.height:B.width,F=F.reverse()),J.move(O,K)}else{var H=J.lineHeight/B.height*100;switch(q.lineAlign){case"middle":j-=H/2;break;case"end":j-=H}switch(q.vertical){case"":D.applyStyles({top:D.formatStyle(j,"%")});break;case"rl":D.applyStyles({left:D.formatStyle(j,"%")});break;case"lr":D.applyStyles({right:D.formatStyle(j,"%")})}F=["+y","-x","+x","-y"],J=new C(D)}L=function(te,le){for(var me,Pe=new C(te),xe=1,be=0;be<le.length;be++){for(;te.overlapsOppositeAxis(B,le[be])||te.within(B)&&te.overlapsAny(N);)te.move(le[be]);if(te.within(B))return te;var Oe=te.intersectPercentage(B);Oe<xe&&(me=new C(te),xe=Oe),te=new C(Pe)}return me||Pe}(J,F),D.move(L.toCSSCompatValues(B))}function A(){}w.prototype.applyStyles=function(I,D){for(var B in D=D||this.div,I)I.hasOwnProperty(B)&&(D.style[B]=I[B])},w.prototype.formatStyle=function(I,D){return I===0?0:I+D},(P.prototype=s(w.prototype)).constructor=P,C.prototype.move=function(I,D){switch(D=D!==void 0?D:this.lineHeight,I){case"+x":this.left+=D,this.right+=D;break;case"-x":this.left-=D,this.right-=D;break;case"+y":this.top+=D,this.bottom+=D;break;case"-y":this.top-=D,this.bottom-=D}},C.prototype.overlaps=function(I){return this.left<I.right&&this.right>I.left&&this.top<I.bottom&&this.bottom>I.top},C.prototype.overlapsAny=function(I){for(var D=0;D<I.length;D++)if(this.overlaps(I[D]))return!0;return!1},C.prototype.within=function(I){return this.top>=I.top&&this.bottom<=I.bottom&&this.left>=I.left&&this.right<=I.right},C.prototype.overlapsOppositeAxis=function(I,D){switch(D){case"+x":return this.left<I.left;case"-x":return this.right>I.right;case"+y":return this.top<I.top;case"-y":return this.bottom>I.bottom}},C.prototype.intersectPercentage=function(I){return Math.max(0,Math.min(this.right,I.right)-Math.max(this.left,I.left))*Math.max(0,Math.min(this.bottom,I.bottom)-Math.max(this.top,I.top))/(this.height*this.width)},C.prototype.toCSSCompatValues=function(I){return{top:this.top-I.top,bottom:I.bottom-this.bottom,left:this.left-I.left,right:I.right-this.right,height:this.height,width:this.width}},C.getSimpleBoxPosition=function(I){var D=I.div?I.div.offsetHeight:I.tagName?I.offsetHeight:0,B=I.div?I.div.offsetWidth:I.tagName?I.offsetWidth:0,N=I.div?I.div.offsetTop:I.tagName?I.offsetTop:0;return{left:(I=I.div?I.div.getBoundingClientRect():I.tagName?I.getBoundingClientRect():I).left,right:I.right,top:I.top||N,height:I.height||D,bottom:I.bottom||N+(I.height||D),width:I.width||B}},A.StringDecoder=function(){return{decode:function(I){if(!I)return"";if(typeof I!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(I))}}},A.convertCueToDOMTree=function(I,D){return I&&D?T(I,D):null},A.processCues=function(I,D,B){if(!I||!D||!B)return null;for(;B.firstChild;)B.removeChild(B.firstChild);var N=I.document.createElement("div");if(N.style.position="absolute",N.style.left="0",N.style.right="0",N.style.top="0",N.style.bottom="0",N.style.margin="1.5%",B.appendChild(N),function(L){for(var O=0;O<L.length;O++)if(L[O].hasBeenReset||!L[O].displayState)return 1}(D))for(var U,J,q=[],j=C.getSimpleBoxPosition(N),F={font:Math.round(.05*j.height*100)/100*d+"px sans-serif"},z=0;z<D.length;z++)J=D[z],U=new P(I,J,F),N.appendChild(U.div),R(0,U,j,q),J.displayState=U.div,q.push(C.getSimpleBoxPosition(U));else for(var K=0;K<D.length;K++)N.appendChild(D[K].displayState)},(A.Parser=function(I,D){this.window=I,this.state="INITIAL",this.buffer="",this.decoder=D||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(I){if(!(I instanceof a))throw I;this.onparsingerror&&this.onparsingerror(I)},parse:function(I){var D=this;function B(){for(var F=D.buffer,z=0;z<F.length&&F[z]!=="\r"&&F[z]!==`
`;)++z;var K=F.substr(0,z);return F[z]==="\r"&&++z,F[z]===`
`&&++z,D.buffer=F.substr(z),K}function N(F){v(F,function(z,K){var L;z==="Region"&&(z=K,L=new u,v(z,function(O,H){switch(O){case"id":L.set(O,H);break;case"width":L.percent(O,H);break;case"lines":L.integer(O,H);break;case"regionanchor":case"viewportanchor":var te,le=H.split(",");le.length===2&&((te=new u).percent("x",le[0]),te.percent("y",le[1]),te.has("x")&&te.has("y"))&&(L.set(O+"X",te.get("x")),L.set(O+"Y",te.get("y")));break;case"scroll":L.alt(O,H,["up"])}},/=/,/\s/),L.has("id"))&&((z=new D.window.VTTRegion).width=L.get("width",100),z.lines=L.get("lines",3),z.regionAnchorX=L.get("regionanchorX",0),z.regionAnchorY=L.get("regionanchorY",100),z.viewportAnchorX=L.get("viewportanchorX",0),z.viewportAnchorY=L.get("viewportanchorY",100),z.scroll=L.get("scroll",""),D.onregion&&D.onregion(z),D.regionList.push({id:L.get("id"),region:z}))},/:/)}I&&(D.buffer+=D.decoder.decode(I,{stream:!0}));try{if(D.state==="INITIAL"){if(!/\r\n|\n/.test(D.buffer))return this;var U,J=(U=B()).match(/^WEBVTT([ \t].*)?$/);if(!J||!J[0])throw new a(a.Errors.BadSignature);D.state="HEADER"}for(var q=!1;D.buffer;){if(!/\r\n|\n/.test(D.buffer))return this;switch(q?q=!1:U=B(),D.state){case"HEADER":/:/.test(U)?N(U):U||(D.state="ID");continue;case"NOTE":U||(D.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(U)){D.state="NOTE";break}if(!U)continue;if(D.cue=new D.window.VTTCue(0,0,""),D.state="CUE",U.indexOf("-->")===-1){D.cue.id=U;continue}case"CUE":try{(function(F,z,K){var L=F;function O(){var me=n(F);if(me===null)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+L);return F=F.replace(/^[^\sa-zA-Z-]+/,""),me}function H(){F=F.replace(/^\s+/,"")}if(H(),z.startTime=O(),H(),F.substr(0,3)!=="-->")throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+L);F=F.substr(3),H(),z.endTime=O(),H();var te=F,le=new u;v(te,function(me,Pe){switch(me){case"region":for(var xe=K.length-1;0<=xe;xe--)if(K[xe].id===Pe){le.set(me,K[xe].region);break}break;case"vertical":le.alt(me,Pe,["rl","lr"]);break;case"line":var be=Pe.split(","),Oe=be[0];le.integer(me,Oe),le.percent(me,Oe)&&le.set("snapToLines",!1),le.alt(me,Oe,["auto"]),be.length===2&&le.alt("lineAlign",be[1],["start","middle","end"]);break;case"position":be=Pe.split(","),le.percent(me,be[0]),be.length===2&&le.alt("positionAlign",be[1],["start","middle","end"]);break;case"size":le.percent(me,Pe);break;case"align":le.alt(me,Pe,["start","middle","end","left","right"])}},/:/,/\s/),z.region=le.get("region",null),z.vertical=le.get("vertical","");try{z.line=le.get("line","auto")}catch{}z.lineAlign=le.get("lineAlign","start"),z.snapToLines=le.get("snapToLines",!0),z.size=le.get("size",100);try{z.align=le.get("align","center")}catch{z.align=le.get("align","middle")}try{z.position=le.get("position","auto")}catch{z.position=le.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},z.align)}z.positionAlign=le.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},z.align)})(U,D.cue,D.regionList)}catch(F){D.reportOrThrowError(F),D.cue=null,D.state="BADCUE";continue}D.state="CUETEXT";continue;case"CUETEXT":var j=U.indexOf("-->")!==-1;if(!U||j&&(q=!0)){D.oncue&&D.oncue(D.cue),D.cue=null,D.state="ID";continue}D.cue.text&&(D.cue.text+=`
`),D.cue.text+=U;continue;case"BADCUE":U||(D.state="ID");continue}}}catch(F){D.reportOrThrowError(F),D.state==="CUETEXT"&&D.cue&&D.oncue&&D.oncue(D.cue),D.cue=null,D.state=D.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var I=this;try{if(I.buffer+=I.decoder.decode(),!I.cue&&I.state!=="HEADER"||(I.buffer+=`

`,I.parse()),I.state==="INITIAL")throw new a(a.Errors.BadSignature)}catch(D){I.reportOrThrowError(D)}return I.onflush&&I.onflush(),this}},x.WebVTT=A},{}],65:[function(k,E,ne){var x=k("../lib/io");k("../lib/storage");function b(g){this._uploadDuration=g.logDuration||5,this._uploadCount=g.logCount||10,this._logReportTo=g.logReportTo,this._dumpLogReportTo=g.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var d,f=this;window&&(window.onbeforeunload=function(s){if(0<f._logs.length)if(f._supportLocalStorage)localStorage.setItem("__aliplayer_log_data",JSON.stringify(f._logs));else{f._report();for(var o=500,a=new Date().getTime(),n=a;n<a+o;)n=new Date().getTime()}});try{localStorage?(d=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),d&&(this._logs=JSON.parse(d))):this._supportLocalStorage=!1}catch{this._supportLocalStorage=!1}this._start()}b.prototype.add=function(g){var d=this._logs.length;if(g.__time__=Math.round(new Date/1e3),0<d&&g.e=="4001"){var d=this._logs[d-1];if(d.e=="4001"&&d.__time__-g.__time__<5)return}this._logs.push(g),(this._logs.length>this._uploadCount||g.e=="4001"||g.e=="2002"||g.e=="9002"&&(d=g.args)!=null&&d.includes("dump::"))&&this._report()},b.prototype.dispose=function(){this._report(),this._disposed=!0},b.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},b.prototype._report=function(g){var d,f,s;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(g=g||this._logs.splice(0,this._uploadCount)).length?(s={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(d=JSON.stringify({__logs__:g,__source__:""})).length},x.postWithHeader((f=this)._logReportTo,d,s,function(o){f._tick()},function(o){f._retry==0?(f._retry=1,f._report(g)):f._tick()})):this._tick()},b.prototype.reportDump=function(g){var d;g&&(d={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(g=JSON.stringify({__logs__:[g],__source__:""})).length},x.postWithHeader(this._dumpLogReportTo,g,d,function(f){},function(f){}))},b.prototype._tick=function(){var g;this._disposed||(this._retry=0,(g=this)._logs.length>this._uploadCount?g._report():this._tickHandler=setTimeout(function(){g._report()},1e3*this._uploadDuration))},E.exports=b},{"../lib/io":43,"../lib/storage":50}],66:[function(T,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(l){for(var y=1;y<arguments.length;y++){var w,P=arguments[y];for(w in P)Object.prototype.hasOwnProperty.call(P,w)&&(l[w]=P[w])}return l}).apply(this,arguments)}var b,g=T("../lib/oo"),d=T("../lib/object"),f=T("../lib/data"),s=T("../lib/io"),o=T("../lib/ua"),a=T("../lib/event"),n=T("../config"),u=T("../player/base/event/eventtype"),v=T("./util"),h=T("./log"),c=T("../lib/playerutil"),_=0,m={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},T=g.extend({init:function(C,R,P){this.trackLog=P=P===void 0?!0:P,this.player=C,this.requestId="",this.sessionId=f.guid(),this.playId=0,this.firstPlay=!0,this.osName=o.os.name,this.osVersion=o.os.version||"",this.exName=o.browser.name,this.exVersion=o.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],n.logReportTo=R.logReportTo||n.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),R.logBatched&&(this._logService=new h(n));var P=this.player.getOptions(),C=R.from||"",R=(P.isLive,P.isLive?"live":"vod"),A="pc",I=(o.IS_IPAD?A="pad":o.os.phone&&(A="phone"),this.encodeURL(o.getReferer())),N=o.getHref(),D=this.encodeURL(N),B="",N=(N&&(B=o.getHost(N)),n.h5Version),U=v.getUuid(),J=P.source?this.encodeURL(P.source):"",q=o.getHost(P.source),j=P.userId?P.userId+"":"0",F=this.sessionId,z=new Date().getTime(),K=P.traceId||"";this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:z,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:o.USER_AGENT,hn:"0.0.0.0",bi:C,ri:F,e:"0",args:"0",li_ki:P.license.key||"",vt:R,tt:A,dm:"h5",av:N,uuid:U,vu:J,vd:q,ua:j,dn:"custom",cdn_ip:"0.0.0.0",app_n:B,r:I,pu:D,ti:K},this.bindEvent()},updateVideoInfo:function(l){l=l.from||"",this.opt.bi=l+"",this.updateSourceInfo()},updateSourceInfo:function(){var l,y=this.player.getOptions();y&&(l=y.source?this.encodeURL(y.source):"",y=o.getHost(y.source),this.opt.vu=l,this.opt.vd=y)},updateTraceId:function(l){this.opt.ti=l},updateLightSaasVideoId:function(l){this.lightSaasVideoId=l},replay:function(){this.reset(),this.player.trigger(u.Video.LoadStart),this.player.trigger(u.Video.LoadedMetadata),this.player.trigger(u.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var l=this;this.player.on(u.Private.Create,function(y){l._onCreate(y)}),this.player.on(u.Player.Init,function(){l._onPlayerInit()}),this.player.on(u.Video.LoadStart,function(){l._onPlayerloadstart()}),this.player.on(u.Video.LoadedMetadata,function(){l._onPlayerLoadMetadata()}),this.player.on(u.Video.LoadedData,function(){l._onPlayerLoaddata()}),this.player.on(u.Player.H265PlayInfo,function(y){l._onH265PlayInfo(y),l._onPlayerH265PlayInfo(y)}),this.player.on(u.Player.H266PlayInfo,function(y){l._onH265PlayInfo(y),l._onPlayerH265PlayInfo(y)}),this.player.on(u.Video.Play,function(){l._onPlayerPlay()}),this.player.on(u.Video.Playing,function(){l._onPlayerReady()}),this.player.on(u.Video.Ended,function(){l._onPlayerFinish()}),this.player.on(u.Video.Pause,function(){l._onPlayerPause()}),this.player.on("seeking",function(){l._onPlayerSeeking()}),this.player.on("seeked",function(){l._onPlayerSeeked()}),this.player.on(u.Private.LicenseHasResult,function(y){l._onLicenseHasResult(y)}),this.player.on(u.Private.SeekStart,function(y){l._onPlayerSeekStart(y)}),this.player.on(u.Private.EndStart,function(y){l._seekEndData=y.paramData}),this.player.on(u.Player.Waiting,function(){l._onPlayerLoaded()}),this.player.on(u.Video.CanPlayThrough,function(){}),this.player.on(u.Video.CanPlay,function(){l._waitingDelayLoadingShowHandle&&(clearTimeout(l._waitingDelayLoadingShowHandle),l._waitingDelayLoadingShowHandle=null),l._onPlayerUnderload(),l._onPlayerCanplay()}),this.player.on(u.Video.TimeUpdate,function(){l._waitingDelayLoadingShowHandle&&(clearTimeout(l._waitingDelayLoadingShowHandle),l._waitingDelayLoadingShowHandle=null),l._seekEndData&&l.player._seeking&&l._onPlayerSeekEnd()}),this.player.on(u.Player.Error,function(y){l._onPlayerError(y)}),this.player.on(u.Player.RequestFullScreen,function(){l._onFullscreenChange(1)}),this.player.on(u.Player.CancelFullScreen,function(){l._onFullscreenChange(0)}),this.player.on(u.Private.PREPARE,function(y){l._prepareTime=performance.now(),l._log("PREPARE",{dn:y.paramData}),l.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(u.Private.ManualPlay,function(){l.loadedDataReported||(l._prepareTime=performance.now(),l.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(u.Player.Snapshoted,function(){l._log("SNAPSHOT")}),this.player.on(u.Private.Retry,function(y){y=y.paramData||{},l._log("RETRY",{type:y.type,source:y.source})}),this.player.on(u.Player.RtsFallback,function(P){var w,P=P.paramData||{};l._log("RTSFALLBACK",{reason:(w=P.reason)==null?void 0:w.error_msg,url:P.fallbackUrl})}),this.player.on(u.Private.VodRequestException,function(y){y=y.paramData||{},l.reportVodException(y)}),this.player.on(u.Private.VodRequestExceptionResume,function(y){y=y.paramData||{},l.reportVodExceptionResume(y)}),this.player.on(u.Private.TraceLog,function(y){y=y.paramData||{},l._reportTrace(y)}),this.player.on(u.Private.DumpBuffer,function(y){y=y.paramData||{},l._reportDump(y)}),this.player.on(u.Private.StatisticsInfo,function(y){y=y.paramData||{},l._onStatisticsHistoryUpdate(y)}),this.player.on(u.Private.Timeline,function(y){y=y.paramData||{},l._onTimeline(y)}),a.on(this.player.tag,u.Video.Playing,function(){l.reportPlaying()}),a.on(this.player.tag,u.Video.TimeUpdate,function(){l.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var l=this;this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){l.player.trigger(u.Private.TraceLog,"[statistics_history]"+JSON.stringify(l.statisticsHistory)),l.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var l;this.doPlayReported||this.player.paused()||this.player.readyState()===0||(this.doPlayReported=!0,this.first_play_time=performance.now(),l={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",l))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(u.Private.PREPARE),this.player.offAll(u.Player.RtsFallback),a.off(this.player.tag,u.Video.Playing),a.off(this.player.tag,u.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(b),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},_=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),b&&(clearInterval(b),b=null)},encodeURL:function(l){var y;return l?(y=this.player.getOptions())&&!y.logBatched?encodeURIComponent(l):l:""},startHeartBeat:function(){var l=this;b&&clearInterval(b),b=setInterval(function(){var y;l.player.getCurrentTime()&&(y=Math.floor(1e3*l.player.getCurrentTime()),l.player.paused()&&(l.prevStats.timestamp=0),++_>=l.player._options.heartHeatInterval)&&l.updateStats.call(l,function(w){var C=l._imageInfo()||{},R=l.player.tag.playbackRate,P=l.player.getVolume(),C={vt:y,interval:1e3*_,imgLength:C.imgLength,playbackRate:R,volume:P,bw:l._getbwEstimator()+"KB"},R=((C=w?x({},C,{dls:Math.floor(w.downloadSpeedPerSec),dfps:Math.floor(w.decodedFramesPerSec),pkl:Number((w.packageLossRate||0).toFixed(2)),rtt:1e3*w.rtt}):C).player_status=x({},l.heartBeatStatusData),l.player);C.time={play_time:parseFloat((R._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(R._stuckCount.toFixed(2)),stuck_time:parseFloat((R._stuckTime/1e3).toFixed(2))},l._log("HEARTBEAT",C),_=0})},1e3)},updateStats:function(l){l=l||function(){};var y=this;this.player.getStats().then(function(w){var P,C,R,A;w?(A=y.prevStats,w.bytesReceived=w.bytesReceived||0,w.framesDecoded=w.framesDecoded||0,w.packetsLost=w.packetsLost||0,w.packetsReceived=w.packetsReceived||0,P=((y.prevStats=w).timestamp-A.timestamp)/1e3,C=(w.bytesReceived-A.bytesReceived)/P,R=(w.framesDecoded-A.framesDecoded)/P,A=(w.packetsLost-A.packetsLost)/(w.packetsLost-A.packetsLost+(w.packetsReceived-A.packetsReceived)),w=w.rtt,l({downloadSpeedPerSec:C,decodedFramesPerSec:R,packageLossRate:A,rtt:w,timeGap:P})):l()}).catch(function(w){console.log("error in monitor getStats: ",w),l()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),this.canplayReported=!0)},reportPlayAbort:function(l){this._log("PLAYABORT",{vt:new Date().getTime(),from:l})},reportVodException:function(l){console.log("VOD_REQUEST_FATAL_ERROR",l),this._log("VOD_REQUEST_FATAL_ERROR",l)},reportVodExceptionResume:function(l){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",l),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",l)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=f.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var l=performance.now();this._createTime=l,this.timeline=[{name:"init",ts:l}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(l){this._h265ProbeInfo=l||{}},_onFullscreenChange:function(l){l?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(l){var y=["frag_s","frag_f","frag_parsed"].includes(l.name);this.timeline.some(function(w){return y&&w.name===l.name})||this.timeline.push(l)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=f.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var l,y,w,P,C=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(P=w=0,this.player.tag&&(w=this.player.tag.videoWidth,P=this.player.tag.videoHeight),l={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:w+"*"+P})},this.timeline.forEach(function(R,A){try{var I=A?R.ts-C.timeline[A-1].ts:0;l["tl_"+R.name]=A+"#"+parseInt(I)}catch{}}),(w=this.player.tag)!=null&&w.duration&&(l.vdur=1e3*((P=this.player.tag)==null?void 0:P.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(w=Math.floor(this._h265ProbeInfo.codecCost)||0,P=Math.floor(this._h265ProbeInfo.decoderCost)||0,l.tc+=y=w+P,l.cc+=y,l.pcc=w,l.pdc=P),y=[{type:"audio"}],w={type:"video",codecType:null,isHardwareDecode:null},P=this._h265ProbeInfo.codecTag,c.isH265Codec(P)?w.codecType="h265":c.isH266Codec(P)?w.codecType="h266":c.isH264Codec(P)&&(w.codecType="h264"),y.push(w),l.decode_info=y,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=l,this.h265RenderTypeTimer=setTimeout(function(){C._log("PREPAREEND",l),C.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",l)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(l){this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistory.speed.push(parseInt(l.speed)),this.statisticsHistory.framesDropped.push(l.droppedFrames),l=navigator.connection)&&(this.statisticsHistory.downlink.push(l.downlink),this.statisticsHistory.type.push(l.effectiveType),this.statisticsHistory.rtt.push(l.rtt))},_onH265PlayInfo:function(l){var y,w;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(l=l.paramData,y=this.pendingPrepareEndData,this.pendingPrepareEndData=null,w=y.decode_info[1],l.renderType==="wasm"&&(w.isHardwareDecode=!1),this._log("PREPAREEND",y))},_onPlayerH265PlayInfo:function(l){l=l.paramData||{},this._log("HEVCINFO",{cd:l.codecTag,rd:l.renderType,si:l.simd,sio:l.simdOption,wt:l.wasmThreads,wto:l.wasmThreadsOption,sp:l.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(l){l=l.paramData||{},l.hasPa=!!l.playauth,delete l.playauth,l.hasSk=!!l.accessKeySecret,delete l.accessKeySecret,l.hasSt=!!l.securityToken,delete l.securityToken,this._log("CREATE",l),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var l;this.playstartTime=new Date().getTime(),this.playId==0&&(this.playId=f.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=new Date().getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,l=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:l,pass:l,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=new Date().getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(l){l=l.paramData||{},this._log("LICENSE_RESULT",{li_ri:l.result+" "+(l.errorCode||""),li_ti:l.featureId||"sdk"})},_onPlayerSeekStart:function(l){this.seekStartTime=l.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=new Date().getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=new Date().getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var l,y=this;this.doPlayReported&&!this.stucking&&document.visibilityState!=="hidden"&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),setTimeout(function(){var w=y.player.readyState()<4;y.player.readyState()||(w=!0),y.player.getCurrentTime()===y.seekingStartTime&&w&&(w=y._getbwEstimator(),y._log("UNDERLOAD",{vt:Math.floor(1e3*y.player.getCurrentTime()),bw:w,cbs:y._getCbs()}),y.stucking=!0,y.stuckStartTime=new Date().getTime(),y._getCbs()===0)&&(y.heartBeatStatusData.t_last_load_start=y.stuckStartTime,y.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=new Date().getTime(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,l=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:l,cbs:this._getCbs()}),this.stuckStartTime=new Date().getTime())))},_onPlayerUnderload:function(){var l,y,w,P;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(l=Math.floor(1e3*this.player.getCurrentTime()),y=this.stuckStartTime||new Date().getTime(),0<(w=Math.floor(new Date().getTime()-y))&&w<(1e3*this.player._options.waitingTimeout||6e4)&&(P=this._getbwEstimator(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_end=new Date().getTime()),this._log("LOADED",{vt:l,cost:w,bw:P,cbs:this._getCbs(),t_last_load_start:y})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var l=this;this.player._splayer?this.player.one("canplay",function(){l._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var l=performance.now(),l=Math.floor(l-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:l})},_reportTrace:function(l){this._log("TRACE",{log:l})},_reportDump:function(l){this._log("DUMP",l)},_onPlayerError:function(l){this._reportTrace(l.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData())},_getbwEstimator:function(){var l=NaN;try{l=((l=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch{}return l},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(l,y){if(this.trackLog){this.updateSourceInfo();var w=d.copy(this.opt),P=(this.requestId=f.guid(),n.logReportTo),l=(w.e=m[l]+"",w.en=l,w.ri=this.sessionId,w.bi=w.bi&&String(w.bi),w.t=new Date().getTime()+"",w.cdn_ip=this._userNetInfo.cdnIp,w.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),C=(l!=""&&(w.definition=l.definition),[]),l=(d.each(y,function(D,B){if(typeof B!="string")try{B=JSON.stringify(B)}catch{}C.push(D+"="+B)}),""),y=this.player.getOptions(),l=((l=y&&y.vid||this.lightSaasVideoId?y.vid||this.lightSaasVideoId:l)&&C.push("vid="+l),"");(l=y&&y.mediaAuth?y.mediaAuth:l)&&C.push("pauth="+l);try{Aliplayer&&Aliplayer.__logCallback__&&(w.args=C,Aliplayer.__logCallback__(w))}catch(D){console.log(D)}if((C=C.join("&"))==""&&(C="0"),w.args=this.encodeURL(C),this._logService){if(w.e===String(m.DUMP))return void this._logService.reportDump(w);this._logService.add(w)}else{var R=[];d.each(w,function(D,B){R.push(D+"="+B)}),R=R.join("&"),s.jsonp(P+"?"+R,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var l,y,w,P,C,R,A;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(l=this.player.tag)?(y=document.createElement("canvas"),w=l.videoWidth,P=l.videoHeight,y.width=w,y.height=P,(C=y.getContext("2d")).save(),C.drawImage(l,0,0,w,P),C.restore(),R=y.toDataURL("image/jpeg",1),A="",{imgLength:(A=R?(A=R.substr(R.indexOf(",")+1))||"":A).length}):{}}catch{return{}}}});E.exports=T},{"../config":15,"../lib/data":33,"../lib/event":36,"../lib/io":43,"../lib/object":45,"../lib/oo":46,"../lib/playerutil":48,"../lib/ua":51,"../player/base/event/eventtype":71,"./log":65,"./util":67}],67:[function(k,E,ne){var x=k("../lib/cookie"),b=k("../lib/data"),g=k("../lib/ua");E.exports.getUuid=function(){var d=x.get("p_h5_u");return d||(d=b.guid(),x.set("p_h5_u",d,730)),d},E.exports.getTerminalType=function(){var d="pc";return g.IS_IPAD?d="pad":g.IS_ANDROID?d="android":g.IS_IOS&&(d="iphone"),d},E.exports.returnUTCDate=function(v){var f=v.getUTCFullYear(),s=v.getUTCMonth(),o=v.getUTCDate(),a=v.getUTCHours(),n=v.getUTCMinutes(),u=v.getUTCSeconds(),v=v.getUTCMilliseconds();return Date.UTC(f,s,o,a,n,u,v)},E.exports.getRfc822=function(d){return d.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":32,"../lib/data":33,"../lib/ua":51}],68:[function(k,E,ne){var x=k("./base/player"),b=(k("./flash/flashplayer"),k("./saas/mtsplayer")),g=k("./saas/vodplayer"),d=k("./saas/lightPlayer"),f=k("./audio/audioplayer"),s=k("./hls/hlsplayer"),o=k("./flv/flvplayer"),a=k("./dash/dashplayer"),n=k("./rts/rtsplayer"),u=k("./drm/drmplayer"),v=k("./splayer/splayer"),h=k("../lib/ua"),c=k("../lib/playerutil"),_=(k("../lib/dom"),k("../lib/io"),k("../lang/index")),m=k("../lib/constants"),T=k("./base/event/eventtype");E.exports.create=function(P,w){P._userOptions||(P._userOptions=Object.assign({},P)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(P.useNativeControls=!0),P.readyCallback=w=typeof w!="function"?function(){}:w,_.setCurrentLanguage(P.language,"h5",P.languageTexts,P.extLanguageTexts);var w=c.handleOption(P),P=w.source,C=w.format;if(C&&P)try{C=C.toLowerCase()}catch(D){console.log("Aliplayer - parsing format failed",D),C=""}else C="";c.isSupportedFormat(C)||(C=""),w.optionFormat=C;var R,A=c.isAudio(P,C),I=(A&&(w.mediaType="audio"),c.createWrapper(w));if(I.player)return I.player;if(A)R=new f(I,w);else if(c.isRts(P))R=new n(I,w);else if((w.forceH265||w.enableH265)&&(c.isMp4(P,C)||c.isFlv(P,C)||c.isHls(P,C)))R=new v(I,w);else if((w.forceH266||w.enableH266)&&(c.isMp4(P,C)||w.isLive&&(c.isFlv(P,C)||c.isHls(P,C))))R=new v(I,w);else if(!w.useFlashPrism&&c.isFlv(P,C)&&c.isSupportFlv())R=new o(I,w);else if([null,void 0].indexOf(w.mediaAuth)!==-1||w.source)if(w.vid&&!w.source)if(w.authInfo)R=new b(I,w);else{if(!(w.playauth||w.accessKeyId&&w.accessKeySecret))throw A="vid="+w.vid+" playauth='', playauth property is required by VOD() as new Aliplayer.",new Error(A);R=new g(I,w)}else c.isHls(P,C)?c.canPlayHls()?R=new(c.isSupportHls()&&(c.isUsedHlsPluginOnMobile()||c.isSafariUsedHlsPlugin(w.useHlsPluginForSafari))?w.isDrm?u:s:w.isDrm?u:x)(I,w):c.isSupportHls()?R=new(w.isDrm?u:s)(I,w):h.os.pc||(R=new x(I,w)):c.isDash(P,C)&&c.isSupportMSE()?R=new a(I,w):(R=new x(I,w),w.source||(A={error_code:m.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:_.get("Error_Empty_Source")},R.trigger(T.Player.Error,A)));else R=new d(I,w);return R}},{"../lang/index":26,"../lib/constants":31,"../lib/dom":35,"../lib/io":43,"../lib/playerutil":48,"../lib/ua":51,"./audio/audioplayer":69,"./base/event/eventtype":71,"./base/player":94,"./dash/dashplayer":101,"./drm/drmplayer":103,"./flash/flashplayer":104,"./flv/flvplayer":106,"./hls/hlsplayer":108,"./rts/rtsplayer":110,"./saas/lightPlayer":114,"./saas/mtsplayer":116,"./saas/vodplayer":122,"./splayer/splayer":131}],69:[function(s,E,ne){var x=s("../base/player"),b=s("../../ui/component"),g=s("../../lib/dom"),d=s("../../lib/object"),f=s("../../lib/playerutil"),s=x.extend({init:function(o,a){this._isAudio=!0,a.skinLayout===void 0&&(a.skinLayout=f.getDefaultAudioLayout()),x.call(this,o,a)}});s.prototype.createEl=function(){this.tag.tagName!=="AUDIO"&&(this._el=this.tag,this.tag=b.prototype.createEl.call(this,"audio"));var o=this._el,a=this.tag,n=(a.player=this,g.getElementAttributes(a));return d.each(n,function(u){o.setAttribute(u,n[u])}),this.setVideoAttrs(),a.parentNode&&a.parentNode.insertBefore(o,a),g.insertFirst(a,o),o},E.exports=s},{"../../lib/dom":35,"../../lib/object":45,"../../lib/playerutil":48,"../../ui/component":136,"../base/player":94}],70:[function(k,E,ne){var x=k("../../../lib/event"),b=k("./eventtype"),g=k("../eventHandler/video/index"),d=k("../eventHandler/player/index");E.exports.offAll=function(f){var s,o,a,n=f.tag,u=f._el;for(s in b.Video)x.off(n,b.Video[s]);for(o in b.Player)x.off(u,b.Player[o]);for(a in b.Private)x.off(u,b.Private[a])},E.exports.offVideoAll=function(f){var s,o=f.tag;for(s in b.Video)x.off(o,b.Video[s])},E.exports.onAll=function(f){g.bind(f),d.bind(f)}},{"../../../lib/event":36,"../eventHandler/player/index":75,"../eventHandler/video/index":85,"./eventtype":71}],71:[function(k,E,ne){E.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",LicenseTipShow:"licenseTipShow",LicenseTipHide:"licenseTipHide",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",Timeline:"timeline",ManualPlay:"manualPlay",UpdateWatchTime:"updateWatchTime"}}},{}],72:[function(k,E,ne){k("../../event/eventtype");var x=k("../../../../lib/dom"),b=k("../../../../lib/ua");E.exports.handle=function(){(!b.IS_IOS||b.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&x.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":35,"../../../../lib/ua":51,"../../event/eventtype":71}],73:[function(k,E,ne){var x=k("../../event/eventtype");E.exports.handle=function(b){var g=this;g.trigger(x.Player.CompleteSeek,b.paramData.toTime),g.one(x.Player.CanPlay,function(){g._enteredProgressMarker&&g.pause()})}},{"../../event/eventtype":71}],74:[function(k,E,ne){var x=k("../../event/eventtype"),b=(k("../../../../lib/constants"),k("../../../../lang/index"),k("../../../../monitor/util"));E.exports.handle=function(f){var d=this,f=f.paramData;d.trigger(x.Private.H5_Loading_Hide),d.trigger(x.Private.Cover_Hide),d.trigger(x.Private.Play_Btn_Hide),d.trigger(x.Private.SettingListHide),d.trigger(x.Private.SelectorHide),d.trigger(x.Private.VolumeVisibilityChange,""),f=f||{},d._monitor&&(f.uuid=b.getUuid(),f.serverRequestId=d._serverRequestId,f.requestId=d._monitor.sessionId,f.cdnIp=d._monitor._userNetInfo.cdnIp,f.localIp=d._monitor._userNetInfo.localIp),d._isError=!0,d.trigger(x.Private.Error_Show,f),d.trigger(x.Private.LifeCycleChanged,{type:x.Player.Error,data:f})}},{"../../../../lang/index":26,"../../../../lib/constants":31,"../../../../monitor/util":67,"../../event/eventtype":71}],75:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../lib/event"),g=k("./lifecyclecommon"),d={endStart:k("./endstart"),seekStart:k("./seekstart"),requestFullScreen:k("./requestfullscreen"),cancelFullScreen:k("./cancelfullscreen"),error:k("./error"),privateSeiFrame:k("./seiframe"),patchWaiting:k("../video/waiting")},f=[x.Private.EndStart,x.Private.SeekStart,x.Player.RequestFullScreen,x.Player.CancelFullScreen,x.Player.Error,x.Player.Ready,x.Private.Dispose,x.Private.Created,x.Private.SeiFrame,x.Private.PatchWaiting];E.exports.bind=function(s){s.el();for(var o=0;o<f.length;o++){var a=f[o];d[a]!="undefined"&&function(n,u,v){var h=n.el();b.on(h,u,function(c){var _=(v&&v.handle?v:g).handle;_.call(n,c,u)})}(s,a,d[a])}}},{"../../../../lib/event":36,"../../event/eventtype":71,"../video/waiting":93,"./cancelfullscreen":72,"./endstart":73,"./error":74,"./lifecyclecommon":76,"./requestfullscreen":77,"./seekstart":78,"./seiframe":79}],76:[function(k,E,ne){var x=k("../../event/eventtype");E.exports.handle=function(b,g){this.trigger(x.Private.LifeCycleChanged,{type:g,data:b})}},{"../../event/eventtype":71}],77:[function(k,E,ne){k("../../event/eventtype");var x=k("../../../../lib/dom"),b=k("../../../../lib/ua");E.exports.handle=function(){(!b.IS_IOS||b.IS_IOS&&this._splayer&&this._splayer.renderType===2)&&x.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":35,"../../../../lib/ua":51,"../../event/eventtype":71}],78:[function(k,E,ne){var x=k("../../event/eventtype");E.exports.handle=function(b){this._seeking=!0,this.trigger(x.Player.StartSeek,b.paramData.fromTime)}},{"../../event/eventtype":71}],79:[function(k,E,ne){k("../../event/eventtype"),E.exports.handle=function(d){var b,g,d=d.paramData,f=d.pts;this._hls2?f=parseInt(1e3*f):this._hls&&(b=d.pts,g=this._initPTS,f=parseInt((b-g)/90,10)),this._seis[f]=this._seis[f]||[],this._seis[f].push(d.dataContent)}},{"../../event/eventtype":71}],80:[function(k,E,ne){var x=k("../../event/eventtype");E.exports.handle=function(b){var g=this,d=(g._retrySwitchUrlCount=0,g._liveRetryCount=0,g._clearLiveErrorHandle(),g._dumpBuffer="ABORTED",new Date().getTime()-g.readyTime);g._options.autoplay||g._options._autoplay||!g.paused()||(g.trigger(x.Private.H5_Loading_Hide),g.trigger(x.Private.Play_Btn_Show)),g.trigger(x.Player.CanPlay,{loadtime:d})}},{"../../event/eventtype":71}],81:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../lib/dom"),g=k("../../../../lib/ua");E.exports.handle=function(d){this._seeking=!1;var f=this.tag;f.style.display==="none"&&g.IS_IOS&&setTimeout(function(){b.css(f,"display","block")},100),this.trigger(x.Video.CanPlayThrough)}},{"../../../../lib/dom":35,"../../../../lib/ua":51,"../../event/eventtype":71}],82:[function(k,E,ne){E.exports.handle=function(x,b){var g="";x&&x.paramData&&(g=x.paramData),this.trigger(b,g)}},{}],83:[function(k,E,ne){var x=k("../../event/eventtype");k("../../../../lang/index"),k("../../../../lib/event"),E.exports.handle=function(b){var g=this;g.waiting=!1,g._ended=!0,g._currentTimeForDisableSeek=0,g.traceLog("video/ended.js","event::ended"),g.trigger(x.Private.Play_Btn_Show),g.trigger(x.Player.Ended,{playTime:g.getPlayTime()}),g.__disposed||(g._monitor&&g._monitor._onPlayerInit(),g._options.rePlay?(g._monitor&&g._monitor.startHeartBeat(),this._splayer||(g.seek(g._getPlayStartTime()),g.tag.play())):g._options.isLive&&g.trigger(x.Private.H5_Loading_Hide))}},{"../../../../lang/index":26,"../../../../lib/event":36,"../../event/eventtype":71}],84:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../lib/constants"),g=k("../../../../lang/index"),d=(k("../../../../lib/event"),k("../../../../lib/ua")),f=(k("../../../../lib/io"),k("../../../../lib/playerutil")),s="video/error.js";function o(a,n,u){var v=a._options,h=v.source||"";(n=n!==4&&d.IS_IOS&&/qqbrowser/i.test(d.USER_AGENT)?4:n)===4&&f.isHls(h)?f.detectRegionBlock(h,function(c){c?(c={mediaId:v.isLive?"ISLIVE":v.vid||"",error_code:b.ErrorCode.RegionBlock,error_msg:g.get("Error_Region_Block_Text"),diagnosis_info:g.get("Tip_Err_Blocked")},a.logError(c),a.trigger("error",c)):u()}):u()}E.exports.handle=function(a){if((a.target||a.srcElement).error){var n=this;if(n.waiting=!1,n._clearTimeout(),n.checkOnline()&&!n._splayer){var u,c="",v=a.target||a.srcElement,h=v.error&&v.error.message||"",c="";if(v.error&&v.error.code&&(u=v.error.code,c=b.VideoErrorCode[v.error.code],h=u+" || "+h),n.traceLog(s,"event::error#"+u+"#"+h),n._reportDumpBuffer&&n._reportDumpBuffer(),n._options.isLive)o(n,u,function(){n._options.liveRetry>n._liveRetryCount?n._reloadAndPlayForM3u8():(n._liveRetryCount=0,n.trigger(x.Player.LiveStreamStop),n._liveErrorHandle=setTimeout(function(){var m={mediaId:"ISLIVE",error_code:c,error_msg:h||g.get("Error_Play_Text")+""+g.get("Error_Retry_Text")};n.logError(m),m.display_msg=b.VideoErrorCodeText[u]||m.error_msg,n.trigger("error",m)}),d.IS_UC&&(n._liveErrorHandle=null))});else if(u==3){if(v="",-1<h.indexOf("no decoder found"))v=g.get("Error_No_Decoder_Text");else if(n._nudgeCount=n._nudgeCount||0,n._nudgeCount<5){n._nudgeCount++;var _=+n._nudgeCount,_=n.getCurrentTime()+_;if(n.traceLog(s,"decode error, try to nudge("+n._nudgeCount+"/5) from "+n.getCurrentTime()+" to "+_+"s, duration: "+n.getDuration()),_<n.getDuration())return void n._loadByUrlInner(n._options.source,_,!0)}else if((function(){var m=!1,T=this.getOptions();{var l;this._fallback||!f.isHls(T.source)||this._options._native||!f.canPlayHls()||this.swPlayer||(m=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(s,"fallback to native player"),l=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(y){y._fallback=!0,T.isLive||y.seek(l)},this))}return m}).call(n)||(function(){var m=!1,T=this.getOptions();{var l;!this._fallback&&f.isHls(T.source)&&this._options._native&&f.isSupportHls()&&(m=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(s,"fallback to MSE player"),l=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(y){y._fallback=!0,T.isLive||y.seek(l)},this)}return m}).call(n))return;_={mediaId:n._options.vid||"",error_code:c,error_msg:h},n.logError(_),_.display_msg=b.VideoErrorCodeText[u]+(v?""+v:""),_.diagnosis_info=g.get("Tip_Err_Decode")+"<br />"+g.get("Tip_Err_Common_Short")+h,n.trigger(x.Player.Error,_)}else n._reloadForVod()||o(n,u,function(){var m,T,l;m=g.get("Error_Play_Text"),T=!1,u<3?m=b.VideoErrorCodeText[u]:n._eventState==b.SUSPEND?(m=g.get("Error_Load_Abort_Text"),c=b.ErrorCode.RequestDataError):n._eventState==b.LOAD_START?(m=g.get("Error_Network_Text"),0<n._options.source.indexOf("auth_key")&&(m=m+""+g.get("Error_AuthKey_Text")),c=b.ErrorCode.StartLoadData):n._eventState==b.LOADED_METADATA&&(m=g.get("Error_Play_Text"),c=b.ErrorCode.PlayingError),m=m+""+g.get("Error_Retry_Text"),1<n._urls.length&&n._retrySwitchUrlCount<3&&n._options.source.indexOf(".mpd")==-1&&(n.switchUrl(),T=!0),l={mediaId:n._options.vid||"",error_code:c,error_msg:h},T||(n.logError(l),l.display_msg=m,n.trigger(x.Player.Error,l))})}}else this.traceLog(s,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(a.target||a.srcElement).poster+")")}},{"../../../../lang/index":26,"../../../../lib/constants":31,"../../../../lib/event":36,"../../../../lib/io":43,"../../../../lib/playerutil":48,"../../../../lib/ua":51,"../../event/eventtype":71}],85:[function(k,E,ne){var x=k("../../../../lib/event"),b=k("../../event/eventtype"),g={canplay:k("./canplay"),canplaythrough:k("./canplaythrough"),common:k("./common"),ended:k("./ended"),error:k("./error"),pause:k("./pause"),play:k("./play"),playing:k("./playing"),waiting:k("./waiting"),timeupdate:k("./timeupdate"),manualended:k("./ended"),loadedmetadata:k("./loadedmetadata"),seeking:k("./seeking"),resize:k("./resize")};E.exports.bind=function(d){d.tag;for(var f in b.Video)f=b.Video[f],function(s,o,a){var n=s.tag;x.on(n,o,function(u){a.handle.call(s,u,o),o!=b.Video.Error&&(o==b.Video.ManualEnded&&(o=b.Video.Ended),s.trigger(b.Private.LifeCycleChanged,{type:o,data:u}))})}(d,f,g[f]!==void 0?g[f]:g.common)}},{"../../../../lib/event":36,"../../event/eventtype":71,"./canplay":80,"./canplaythrough":81,"./common":82,"./ended":83,"./error":84,"./loadedmetadata":86,"./pause":87,"./play":88,"./playing":89,"./resize":90,"./seeking":91,"./timeupdate":92,"./waiting":93}],86:[function(k,E,ne){var x=k("../../event/eventtype");k("../../../../lib/playerutil"),E.exports.handle=function(b){var g=this.tag,d=g.duration<1?0:g.duration;this._getSubVideoConfig().start>d-1&&(console.warn("Params.start ["+this._getSubVideoConfig().start+"] is greater than video.duration ["+d+"] - 1, seeking to 0"),this.setStartEnd(0,this._getSubVideoConfig().end)),this._getWatchTimeConfig().watchStartTime>d-1&&(console.warn("Params.watchStartTime ["+this._getWatchTimeConfig().watchStartTime+"] is greater than video.duration ["+d+"] - 1, seeking to 0"),this.setWatchTime(0,this._getWatchTimeConfig().watchEndTime)),this.trigger(x.Private.ReadyState),this._splayer&&this.trigger(x.Video.DurationChange),this.trigger(x.Video.LoadedMetadata),g.videoWidth&&g.videoHeight||this.trigger(x.Player.VideoUnavailable)}},{"../../../../lib/playerutil":48,"../../event/eventtype":71}],87:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../lib/ua");E.exports.handle=function(g){var d=this;d._seeking&&d._splayer||(d._hls&&d._options&&d._options.isLive&&b.IS_FIREFOX&&d.trigger(x.Private.Play_Btn_Show),d._clearTimeout(),d.trigger(x.Private.AutoStreamHide),d.trigger(x.Player.Pause),d._isManualPause&&(d.trigger(x.Private.Play_Btn_Show),d.trigger(x.Private.H5_Loading_Hide)),d.waiting=!1)}},{"../../../../lib/ua":51,"../../event/eventtype":71}],88:[function(k,E,ne){var x=k("../../event/eventtype");E.exports.handle=function(b){this.trigger(x.Private.Error_Hide),this.trigger(x.Private.Cover_Hide),this.trigger(x.Private.AutoStreamHide),this.waiting=!1,this.trigger(x.Player.Play)}},{"../../event/eventtype":71}],89:[function(k,E,ne){var x=k("../../event/eventtype");E.exports.handle=function(b){var g,d=this;this.tag.paused||(d.trigger(x.Private.H5_Loading_Hide),d.trigger(x.Private.Cover_Hide),d.trigger(x.Private.Info_Hide),d.waiting=!1,d._ended=!1,d._liveRetryCount=0,d._vodRetryCount=0,d._seeking=!1,g=d.getCurrentTime(),d._waitingReloadTime!=g&&(d._waitingTimeoutCount=0),d._checkTimeoutHandle&&(clearTimeout(d._checkTimeoutHandle),d._checkTimeoutHandle=null),d._waitingLoadedHandle&&(clearTimeout(d._waitingLoadedHandle),d._waitingLoadedHandle=null),d._ucSourceHandle&&(clearTimeout(d._ucSourceHandle),d._ucSourceHandle=null),d._waitingDelayLoadingShowHandle&&(clearTimeout(d._waitingDelayLoadingShowHandle),d._waitingDelayLoadingShowHandle=null),d._waitingTimeoutHandle&&(clearTimeout(d._waitingTimeoutHandle),d._waitingTimeoutHandle=null,d._ccService)&&d._options.isLive&&(g=d._ccService.getCurrentSubtitle(),d._setDefaultCC=!0,g)&&d._ccService.switch(g),d.trigger(x.Private.AutoStreamHide),d.trigger(x.Player.Playing),d.trigger(x.Private.Error_Hide),d.trigger(x.Private.Play_Btn_Hide))}},{"../../event/eventtype":71}],90:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../feature/ratioAdapter");E.exports.handle=function(g){this.trigger(x.Video.Resize);var d=this.getOptions();if(d.autoSize){if(!this._ratioAdapter){if(d.autoSize!==!0&&d.autoSize!=="width"&&d.autoSize!=="height")return void console.warn("Unknown parameter [autoSize]: "+d.autoSize+", only true/height/width are supported");d.autoSize===!0&&(d.autoSize="height"),this._ratioAdapter=new b}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,d.autoSize)}}},{"../../../../feature/ratioAdapter":22,"../../event/eventtype":71}],91:[function(k,E,ne){var x=k("../../event/eventtype");k("../../../../lib/playerutil"),E.exports.handle=function(b){var g,d,f,s=this.tag,o=(this.getOptions().disableSeek&&(o=s.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(o))&&(s.currentTime=this._currentTimeForDisableSeek),s.currentTime);this._canSeek(o)||(g=this._getWatchTimeConfig(),f=0,(d=this._getSubVideoConfig()).start||d.end?f=o>d.end?d.end:d.start:(g.watchStartTime||g.watchEndTime)&&(f=o>g.watchEndTime?g.watchEndTime:g.watchStartTime),s.currentTime=f),this.trigger(x.Video.Seeking)}},{"../../../../lib/playerutil":48,"../../event/eventtype":71}],92:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../lib/ua"),g=k("../../../../lib/event"),d=k("../../plugin/status");function f(s){var o=this;s!=null&&s.length&&s.forEach(function(a){o.trigger(x.Player.SeiFrame,a)})}E.exports.handle=function(h){var o,a,n,u=this,v=(u._isError||u.trigger(x.Player.TimeUpdate,h.timeStamp),u._decodeErrorNudgeTimer||(u._decodeErrorNudgeTimer=setTimeout(function(){u._nudgeCount=0},3e3)),(b.IS_IOS||b.IS_MAC_SAFARI)&&(clearTimeout(u._waitingPatchTimer),u._waitingPatchTimer=setTimeout(function(){u.waiting||u._isError||u.paused()||u._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),u.trigger(x.Private.PatchWaiting))},3e3)),u.getCurrentTime()),h=(u.tag.seeking||(u._currentTimeForDisableSeek=v),u.waiting&&!u._TimeUpdateStamp&&(u._TimeUpdateStamp=v),u.waiting!=0&&u._TimeUpdateStamp==v||(u.trigger(x.Private.H5_Loading_Hide),u.trigger(x.Private.AutoStreamHide),u._checkTimeoutHandle&&clearTimeout(u._checkTimeoutHandle),u._waitingTimeoutHandle&&clearTimeout(u._waitingTimeoutHandle),u._waitingLoadedHandle&&clearTimeout(u._waitingLoadedHandle),u._ucSourceHandle&&(clearTimeout(u._ucSourceHandle),u._ucSourceHandle=null),u.waiting=!1),b.IS_ANDROID&&b.IS_UC&&(u._timeNotUpdateCount=u._timeNotUpdateCount||0,u.waiting||v!==u._TimeUpdateStamp||(u._timeNotUpdateCount++,2<=u._timeNotUpdateCount&&(u._timeNotUpdateCount=0,u.trigger(x.Private.PatchWaiting)))),u._TimeUpdateStamp=v,u._options.isLive||(o=u.getDuration(),h=!1,a=0,o<v&&!u.paused()?(a=1,h=!0):o-v<.2&&0<=b.browser.version.indexOf("49.")&&!u.paused()?(a=2,h=!0):u.exceedPreviewTime(v)?(a=3,h=!0):v>=u._getWatchTimeConfig().watchEndTime&&(a=4,h=!0,u.pause()),h&&setTimeout(function(){u._ended||(u._splayer||u.paused()||u.pause(),g.trigger(u.tag,x.Video.ManualEnded),u.traceLog&&u.traceLog("video/timeupdate.js","ManualEnded#"+a+"#"+v+"#"+o))},100)),u._player.tag),c=(h&&u._options.isLive&&(u._player.resolution&&0<h.videoWidth&&0<h.videoHeight&&(0<u._player.resolution.width||0<u._player.resolution.height)&&(u._player.resolution.width!==h.videoWidth||u._player.resolution.height!==h.videoHeight)&&(n={oldResolution:{width:u._player.resolution.width,height:u._player.resolution.height},newResolution:{width:h.videoWidth,height:h.videoHeight}},u.trigger(x.Player.ResolutionChange,n)),u._player.resolution.width=h.videoWidth==0?u._player.resolution.width:h.videoWidth,u._player.resolution.height=h.videoHeight==0?u._player.resolution.height:h.videoHeight),b.IS_CHROME&&Number(b.CHROME_VERSION)<50&&(u._playingSlientPause&&(clearTimeout(u._playingSlientPause),u._playingSlientPause=null),u._playingSlientPause=setTimeout(function(){var y,w;u._status!=d.playing||u.paused()||u._drm||u._urls.length||(y=u.getCurrentTime(),w=u._options.isLive?0:y,u._loadByUrlInner(u._options.source,w,y))},3e3)),u._seis||{}),_=Object.keys(c);if(_.length!==0)for(var m=parseInt(1e3*v,10)+300,T=0;T<_.length;T++){var l=_[T];if(!(l<=m))break;f.call(u,c[l]),delete c[l]}}},{"../../../../lib/event":36,"../../../../lib/ua":51,"../../event/eventtype":71,"../../plugin/status":98}],93:[function(k,E,ne){var x=k("../../event/eventtype"),b=k("../../../../lib/constants"),g=k("../../../../lib/event"),d=k("../../../../lang/index"),f=k("../../../../lib/ua"),s=k("../../../../lib/playerutil"),o="video/waiting.js";E.exports.handle=function(a){var n=this;if(!n._options.isLive){var u=this.getCurrentTime(),v=this.getDuration();if(!n._ended&&0<v&&(v-u<.5||v<u))return n.pause(),n._ended=!0,g.trigger(this.tag,x.Video.ManualEnded),void(n.traceLog&&n.traceLog(o,"ManualEnded#"+u+"#"+v))}n.waiting=!0;function h(){n._checkTimeoutHandle&&(clearTimeout(n._checkTimeoutHandle),n._checkTimeoutHandle=null),n._waitingTimeoutHandle&&(clearTimeout(n._waitingTimeoutHandle),n._waitingTimeoutHandle=null),n._waitingLoadedHandle&&(clearTimeout(n._waitingLoadedHandle),n._waitingLoadedHandle=null),n._waitingDelayLoadingShowHandle&&(clearTimeout(n._waitingDelayLoadingShowHandle),n._waitingDelayLoadingShowHandle=null),n._ucSourceHandle&&(clearTimeout(n._ucSourceHandle),n._ucSourceHandle=null)}h(),n._waitingDelayLoadingShowHandle=setTimeout(function(){f.IS_IOS&&n.paused()||n.trigger(x.Private.H5_Loading_Show)},1e3*n._options.delayLoadingShow),n._TimeUpdateStamp=null,n._checkTimeoutHandle=setTimeout(function(){n.trigger(x.Private.AutoStreamShow)},1e3*n._options.loadDataTimeout),n.trigger(x.Player.Waiting),n._waitingTimeoutHandle=setTimeout(function(){var c;n.tag&&n._options&&(n.pause(),c={mediaId:n._options.vid||"",error_code:b.ErrorCode.LoadingTimeout,error_msg:d.get("Error_Waiting_Timeout_Text")},n.logError(c),n.trigger("error",c))},1e3*n._options.waitingTimeout),u=n._options,u.disableLiveHalfRetry&&u.isLive||u.disableVodHalfRetry&&!u.isLive||(n._waitingLoadedHandle=setTimeout(function(){var c=n.getCurrentTime();n._waitingTimeoutCount==0&&c!=n._waitingReloadTime&&(n.traceLog(o,"half-retry::"+n._options.waitingTimeout/2),n._waitingTimeoutCount=1,n._waitingReloadTime=c,c=n._options.isLive?0:c,n._loadByUrlInner(n._options.source,c,!0))},n._options.waitingTimeout/2*1e3)),f.IS_ANDROID&&f.IS_DINGTALK&&(n._ucSourceHandle=setTimeout(function(){s.detectRegionBlock(n._options.source,function(c){c&&(c={mediaId:n._options.vid,error_code:b.ErrorCode.RegionBlock,error_msg:d.get("Error_Region_Block_Text"),diagnosis_info:d.get("Tip_Err_Blocked")},n.logError(c),n.trigger("error",c))})},5e3)),n.on("error",function(){h()})}},{"../../../../lang/index":26,"../../../../lib/constants":31,"../../../../lib/event":36,"../../../../lib/playerutil":48,"../../../../lib/ua":51,"../../event/eventtype":71}],94:[function(L,E,ne){var x=typeof Promise>"u"?L("es6-promise").Promise:Promise,b=L("../../ui/component"),g=L("../../lib/object"),d=L("../../lib/dom"),f=L("../../lib/event"),s=L("../../ui/exports"),o=L("../../monitor/monitor"),a=L("../../lib/ua"),n=L("../../lib/constants"),u=L("../../lib/playerutil"),v=L("../../lib/util"),h=L("./x5play"),c=L("../../lib/cookie"),_=L("../../lang/index"),m=L("../../feature/autoplaydelay"),T=L("./event/eventmanager"),l=L("../../ui/component/cover"),y=L("../../ui/component/license-watermark"),w=L("../../feature/license"),P=L("../../ui/component/text-track-display"),C=L("../../commonui/autostreamselector"),R=L("./event/eventtype"),A=L("./plugin/lifecyclemanager"),I=L("../service/export"),D=L("../../ui/component/progressmarker"),B=L("../../feature/keyboardControl"),N=L("../../feature/AntiRecord"),U=(L("./eventHandler/video/index"),L("../../lib/vttnext/index")),J=L("../../lib/codec-probe"),q=L("../splayer/splayerinjector"),j=L("../../ui/component/util").throttle,F=L("../../feature/ratioAdapter"),z=L("../../feature/logoManager"),K="base/player.js",L=b.extend({init:function(O,H){var te,le,me=this,Pe=(this.tag=O,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._loadByUrlStartTime=0,this._posOffset=0,this._onceLogged=!1,this._licenseHasResult=!1,this.__disposed=!1,this.resolution={width:0,height:0},H.skinLayout===void 0&&(H.skinLayout=u.getDefaultH5Layout()),(O=H.skinLayoutIgnore)!=null&&O.length&&(H.skinLayout=u.ignoreSkinLayouts(H.skinLayout,H.skinLayoutIgnore)),u.isRts(H.source)&&!H.autoplay&&(H.preload=!1),H.env==="SEA"&&(H.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",H.disableDumpBuffer=!0),b.call(this,this,H),this.addClass("prism-player"),H.plugins&&g.each(H.plugins,function(be,Oe){this[be](Oe)},this),this._createService(),this.UI={},H.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=s,H.errorDisplay==0&&(this.UI.errorDisplay=void 0)),H.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),null);function xe(be){var Oe,re=this;window.location.protocol==="file:"||this._licenseHasResult||(this._licenseHasResult=!0,H.license&&H.license.key&&H.license.domain?(be.paramData.renderType!=="native"&&(be=be.paramData.codecTag,u.isH265Codec(be)?Oe=n.FEATURE_ID_H265:u.isH266Codec(be)&&(Oe=n.FEATURE_ID_H266)),w.getLicense(H.license.domain,H.license.key,H.env==="SEA"?"ap-southeast-1":"cn-shanghai").then(function(ee){if(ee=ee.validate(n.PLAYER_SDK_CODE,Oe),ee===0)re.trigger(R.Private.LicenseHasResult,{result:n.LicenseResultCode.Success,featureId:Oe});else{if(ee===1)return x.reject(n.LicenseResultCode.NotFound);{if(ee===2)return x.reject(n.LicenseResultCode.Expired);console.error("license validate unknown error")}}}).catch(function(ee){var Me=String(ee).split("#"),Me=(ee=Number(Me[0]),Me[1]);re.trigger(R.Private.LicenseHasResult,{result:ee,errorCode:Me,featureId:Oe}),w.logError(ee)})):(console.warn(_.get("Tip_License_Required")+(H.isLive?"":": https://help.aliyun.com/zh/vod/developer-reference/license-authorization-and-management#13133fa053843")),console.warn(_.get("Tip_License_Params")+": https://help.aliyun.com/zh/vod/developer-reference/integration"),this.trigger(R.Private.LicenseHasResult,{result:n.LicenseResultCode.LicenseKeyInvalid})))}!H.isLive&&H.clickPause&&(this._clickPauseEnabled=!0,f.on(this.tag,"click",function(){me._clickPauseEnabled&&(H.dbClickFullscreen?(Pe&&clearTimeout(Pe),Pe=setTimeout(function(){me.paused()?me.play(!0):me.pause(!0),Pe=null},H.clickPauseDelay)):me.paused()?me.play(!0):me.pause(!0))})),H.dbClickFullscreen&&(te=this.fullscreenService,f.on(this.tag,"dblclick",function(){Pe&&(clearTimeout(Pe),Pe=null),te.getIsFullScreen()?te.cancelFullScreen():te.requestFullScreen(),me.trigger(R.Private.MarkerTextHide)})),this.initChildren(),this._options.trackLog&&(this._monitor=new o(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),T.onAll(this),this.trigger(R.Private.Create,H._userOptions),this._options.preventRecord&&(this._antiRecord=new N({player:this}),this._antiRecord.start()),this._lifeCycleManager=new A(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(O={mediaId:this._options.vid||"",error_code:n.ErrorCode.InvalidParameter,error_msg:_.get("ShiftLiveTime_Error")},this.trigger(R.Player.Error,O)):(this._posOffset=this._getSubVideoConfig().start||0,this._options.extraInfo&&(O=this._options.extraInfo).liveRetry&&(this._options.liveRetry=O.liveRetry),this.on(R.Private.ReadyState,function(){this.trigger(R.Player.Ready)}),this.on(R.Player.H265PlayInfo,xe),this.on(R.Player.H266PlayInfo,xe),this.one(R.Player.CanPlay,xe),this.on(R.Private.LicenseHasResult,function(Me){var Me=Me.paramData||{},Oe=Me.result,re=Me.errorCode,ee=Me.featureId,Me=n.LicenseResultCode;switch(Oe){case Me.LicenseKeyInvalid:case Me.DomainInvalid:this.trigger(R.Private.LicenseTipShow,{message:_.get(n.LicenseErrorKey.Empty)});break;case Me.NotFound:this.trigger(R.Private.LicenseTipShow,{message:_.get(n.LicenseErrorKey.Unauthorized)});var qe="";ee===n.FEATURE_ID_H265&&(qe="H265"),ee===n.FEATURE_ID_H266&&(qe="H266"),console.error(_.get("Tip_License_Feature"),qe);break;case Me.Expired:this.trigger(R.Private.LicenseTipShow,{message:_.get(n.LicenseErrorKey.Expired)});break;case Me.CertInvalid:-1<["E003","E005","E006"].indexOf(re)?(this.trigger(R.Private.LicenseTipShow,{message:_.get(n.LicenseErrorKey.LicenseKeyInvalid)+"("+re+")"}),console.error(_.get("Tip_License_Check"))):re==="E008"?(this.trigger(R.Private.LicenseTipShow,{message:_.get(n.LicenseErrorKey.DomainInvalid)+"("+re+")"}),console.error(_.get("Tip_License_Domain"))):re==="E010"&&(this.trigger(R.Private.LicenseTipShow,{message:_.get(n.LicenseErrorKey.NotFound)+"("+re+")"}),console.error(_.get("Tip_License_Check")))}}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(R.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(R.Private.H5_Loading_Show):this.trigger(R.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(R.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new m(this),(le=this)._autoPlayDelay.handle(function(){le.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new F,this._ratioAdapter.autoResize(this._options.ratio,this))),B.init.call(this),(O=this._options.logo)!=null&&O.length&&(this._logoManager=new z({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new U({player:this}),this._getUserTextTracks())}});L.prototype.isSupportMSE=function(){return u.isSupportMSE()},L.prototype.initPlay=function(O){this._initPlayBehavior(O,this._options.source)},L.prototype.initChildren=function(){var O=this.options(),H=O.skinLayout;if(H!==!1&&!g.isArray(H))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");H!==!1&&H.length!==0&&(this.options({children:H}),b.prototype.initChildren.call(this)),this.UI.cover=l,O.className="",this.addChild("cover",O),this.UI.autoStreamSelector=C,this.addChild("autoStreamSelector",O),this.UI.progressMarker=D,this.addChild("progressMarker",O),this.UI.textTrackDisplay=P,this.addChild("textTrackDisplay",O),this.UI.licenseWatermark=y,this.addChild("licenseWatermark",O),this.trigger(R.Private.UiH5Ready)},L.prototype.createEl=function(){var O=!1,H=(this.tag.tagName!=="VIDEO"?(this._el=this.tag,this.tag=b.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(O=!0,this._el=this.tag.parentNode),this._el),te=this.tag,le=(this._options.enableSystemMenu||(te.addEventListener?te.addEventListener("contextmenu",function(me){me.preventDefault()},!1):te.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),te.player=this,d.getElementAttributes(te));return g.each(le,function(me){H.setAttribute(me,le[me])}),this.setVideoAttrs(),O||(te.parentNode&&te.parentNode.insertBefore(H,te),d.insertFirst(te,H)),H},L.prototype.setVideoAttrs=function(){var O=this._options.preload,H=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",O&&this.tag.setAttribute("preload","preload"),H&&a.IOS_VERSION!=="15"&&this.tag.setAttribute("autoplay","autoplay"),a.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(a.IS_UC||a.dingTalk())&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var te in this._options.extraInfo)a.IS_OPPO&&te==="crossOrigin"||this.tag.setAttribute(te,this._options.extraInfo[te]);h.adaptX5Play(this)},L.prototype.checkOnline=function(){var O;return!(this._options&&!this._options.debug&&navigator.onLine==0&&((O={mediaId:this._options.vid||"",error_code:n.ErrorCode.NetworkUnavaiable,error_msg:_.get("Error_Offline_Text")}).display_msg=_.get("Error_Offline_Text"),this.trigger(R.Player.Error,O),1))},L.prototype.id=function(){return this.el().id},L.prototype.renderUI=function(){},L.prototype.switchUrl=function(){var O,H;this.traceLog(K,"switchUrl"),this._urls.length!=0&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),O=this._urls[this._currentPlayIndex],c.set(n.SelectedStreamLevel,O.definition,365),this.trigger(R.Private.QualityChange,_.get("Quality_Change_Fail_Switch_Text")),H=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(O.Url,H,!0))},L.prototype.setControls=function(){var O=this.options();O.useNativeControls?this.tag.setAttribute("controls","controls"):typeof O.controls=="object"&&(O=this._initControlBar(O.controls),this.addChild(O))},L.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},L.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},L.prototype._initControlBar=function(O){return new ControlBar(this,O)},L.prototype.getMetaData=function(){},L.prototype.getReadyTime=function(){return this.readyTime},L.prototype.readyState=function(){return this.tag.readyState},L.prototype.getError=function(){return this.tag.error},L.prototype.getRecentOccuredEvent=function(){return this._eventState},L.prototype.getSourceUrl=function(){return this._options?this._options.source:""},L.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},L.prototype.getCurrentQuality=function(){var O;return 0<this._urls.length?{width:(O=this._urls[this._currentPlayIndex]).width,url:O.Url,definition:O.definition}:""},L.prototype.getCurrentPDT=function(){var O;if((a.IS_SAFARI||a.IS_IOS)&&this.tag)return O=Date.parse(this.tag.getStartDate()),isNaN(O)?0:O+1e3*this.getCurrentTime()},L.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},L.prototype.startPlayTimeMonitor=function(){var O=this,H=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),te=0,le=0,me=!1,Pe=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var xe=O.paused()?me=!0:!O.tag,be=1e3*O.getCurrentTime(),Oe=performance.now(),re=Oe-H,ee=(H=Oe,(be-te)/O.tag.playbackRate);te=be,ee<0&&(xe=!0),(be=O._monitor)!=null&&be.canplayReported||(xe=!0),(xe=document.visibilityState==="hidden"?!0:xe)||(me?me=!1:ee<.8*re?(re<Oe-le&&(O._stuckCount++,Pe=Oe),Oe-Pe>=1e3*O.getOptions().waitingTimeout?O.stopPlayTimeMonitor():(le=Oe,O._playingTime+=ee,O._stuckTime+=re-ee)):O._playingTime+=re)},1e3)},L.prototype.setSpeed=function(O,H){H===void 0&&(H=!0),this.tag&&(this._originalPlaybackRate=O,this.tag.playbackRate=O,H)&&this.trigger(R.Private.PlaybackRateChanged,O)},L.prototype.play=function(O){return this.traceLog(K,"play::"+O),O&&this.trigger(R.Private.ManualPlay),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(R.Private.Cover_Hide),this.tag.play())),this._isManualPlay=O||!1,this},L.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(this._getPlayStartTime()),this.tag.play(),this},L.prototype._getPlayStartTime=function(){return Math.max(0,this._getWatchTimeConfig().watchStartTime||0,this._loadByUrlStartTime||0)},L.prototype._getWatchTimeConfig=function(){var le=this.getOptions(),O=le.start,H=le.end,te=le.watchStartTime,le=le.watchEndTime,te=Number(te),le=Number(le);return(te||le)&&(u.hasValue(O)||u.hasValue(H))?(this._logOnce("Params.watchStartTime and Params.watchEndTime will be ignored when Params.start or Params.end is set","warn"),{watchStartTime:void 0,watchEndTime:void 0}):(le=le||void 0,(te=te||void 0)<0&&(this._logOnce("Params.watchStartTime is less than 0 ["+te+"], setting to undefined","warn"),te=void 0),le<0&&(this._logOnce("Params.watchEndTime is less than 0 ["+le+"], setting to undefined","warn"),le=void 0),le<=te&&(this._logOnce("Params.watchEndTime("+le+") is less than Params.watchStartTime("+te+"), setting to [undefined, "+le+"]","warn"),te=void 0),{watchStartTime:te,watchEndTime:le})},L.prototype._getSubVideoConfig=function(){var O=this.getOptions(),H=O.start,O=O.end,H=Number(H);return O=(O=Number(O))||void 0,(H=H||void 0)<0&&(this._logOnce("Params.start is less than 0 ["+H+"], setting to undefined","warn"),H=void 0),O<0&&(this._logOnce("Params.end is less than 0 ["+O+"], setting to undefined","warn"),O=void 0),O<=H&&(this._logOnce("Params.start("+H+") is greater than Params.end("+O+"), setting to [undefined, "+O+"]","warn"),H=void 0),{start:H,end:O}},L.prototype.pause=function(O){return this.tag&&this.tag.pause(),this._isManualPause=O||!1,this},L.prototype.stop=function(){return this.traceLog(K,"stop"),this.tag.setAttribute("src",null),this},L.prototype.paused=function(){if(this.tag)return this.tag.paused!==!1},L.prototype.getDuration=function(){var O=0,te=(this.tag&&(O=this.isPreview()&&this._vodDuration||this.tag.duration),this._getSubVideoConfig()),H=te.start,te=te.end;return O=H||te?Math.min(this.tag.duration,te||this.tag.duration)-Math.max(0,H||0):O},L.prototype.getDisplayDuration=function(){var O=0,te=(this.tag&&(O=this._vodDuration||this.getDuration()),this._getSubVideoConfig()),H=te.start,te=te.end;return O=H||te?Math.min(this.tag.duration,te||this.tag.duration)-Math.max(0,H||0):O},L.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime-this._posOffset:0},L.prototype.seek=function(O){var H;if(!Number.isNaN(O)&&(O=Number(O),O+=this._posOffset,this._canSeek(O)))return this._ended=!1,H=this.tag.duration,this._doSeek(this,O=H<=O?H:O),this},L.prototype._doSeek=j(function(te){var H=te[0],te=te[1];try{var le=H._originalPlaybackRate||H.tag.playbackRate;["16"].indexOf(a.IOS_VERSION)!==-1&&!H.oncePlayed||(H.tag.currentTime=te),H._seeking=!0,H.traceLog(K,"doSeek::"+te),a.IS_IE11&&setTimeout(function(){H.tag&&(H.tag.playbackRate=le)})}catch(me){console.log(me)}},100),L.prototype.traceLog=function(O,H){this.trigger(R.Private.TraceLog,"["+O+"]"+H)},L.prototype._loadByUrlInner=function(O,H,te){this.loadByUrl(O,H,te,!0)},L.prototype.loadByUrl=function(O,H,te,le){var me=this,Pe=(this.traceLog(K,"loadByUrl::"+O+"#"+H+"#"+te+"#"+le),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!le&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),xe=((this._options.source||"").match(Pe)||[])[0]!==((O||"").match(Pe)||[])[0];if(this._options.liveShiftSource&&(xe=!1),this._options.enableH266&&(xe=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!xe&&(u.isMp4(O)||u.isFlv(O)||u.isHls(O)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||a.IS_ANDROID&&a.dingTalk()&&!u.isFlv(O)?void be.call(this):void J(O,function(re){var re=u.getVideoTrack(re.tracks),ee=(re||{}).codecTag||((ee=(re||{}).codec)==null?void 0:ee.split(".")[0]);me._probeInfo.codecTag=ee,re&&u.isH265Codec(ee)?u.isFlv(O)||u.isHls(O)?(me._splayer||(xe=!0),be.call(me)):u.shouldUseBasePlayer({codecTag:ee,url:O},function(Me){Me?(me._splayer&&(xe=!0),me._probeInfo.codecTag&&q.reportH265PlayInfo.call(me,{renderType:"native",codecTag:me._probeInfo.codecTag})):me._splayer||(xe=!0),be.call(me)}):(re&&u.isH266Codec(ee)?me._splayer||(xe=!0):me._splayer&&(xe=!0),be.call(me))},function(Oe){be.call(me)});function be(){var Oe,re=this;xe&&this._splayer&&this.removeChild(this._licenseWatermark),xe&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(K,"reloadInstance::"+O),this._options.source=O,window.Aliplayer.reloadInstance(this._options,function(){},this)):(le||(this._urls=[]),this._monitor&&!le&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._clearTimeout(),this.trigger(R.Private.Error_Hide),this._options.source=O,this._posOffset=this._getSubVideoConfig().start||0,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:O,from:this._options.from}),le||(this.trigger(R.Private.ChangeURL),this._vodRetryCount=0),H&&this._canSeek(H)?this._loadByUrlStartTime=H-this._posOffset:this._loadByUrlStartTime=0,this._options._autoplay=te,this.initPlay(te),(Oe=this._options.autoplay||te)&&this.trigger(R.Private.Cover_Hide),Oe?this.trigger(R.Player.Play):this.trigger(R.Player.Pause),this._options.isLive||!H&&H!=0||isNaN(H)||f.one(this.tag,R.Video.CanPlay,function(ee){Oe&&(a.IS_IOS||a.IS_MAC_SAFARI)&&re._splayer&&re.play()}))}be.call(this)},L.prototype.setLogo=function(O){this._logoManager&&this._logoManager.dispose(),this._logoManager=new z({container:this.el(),video:this.tag,logo:O})},L.prototype.dispose=function(){this.__disposed=!0,this.trigger(R.Private.Dispose),this.tag.pause(),T.offAll(this),B.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._posOffset=0,this._onceLogged=!1},L.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},L.prototype.mute=function(O){return this._muteInner(),this._originalVolumn=this.tag.volume,O||(O=_.get("Volume_Mute"),this._player.trigger(R.Private.Info_Show,{text:O,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},L.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(R.Private.VolumnChanged,-1)},L.prototype.unMute=function(O){return this._unMuteInner(),O||(O=_.get("Volume_UnMute"),this._player.trigger(R.Private.Info_Show,{text:O,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},L.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(R.Private.VolumnChanged,-2)},L.prototype.muted=function(){return this.tag&&this.tag.muted},L.prototype.getVolume=function(){return this.tag&&this.tag.volume},L.prototype.getOptions=function(){return this._options},L.prototype.setVolume=function(O,H){(O=Math.min(1,Math.max(0,O)))!=0?this._unMuteInner():O==0&&this._muteInner(),this._setInnerVolume(O),O=_.get("Curent_Volume")+"<span>"+(100*O).toFixed()+"%</span>",this._player.trigger(R.Private.Info_Show,{text:O,duration:1e3,align:"lb"})},L.prototype._setInnerVolume=function(O){this.tag.volume=O,this.trigger(R.Private.VolumnChanged,O)},L.prototype.hideProgress=function(){this.trigger(R.Private.HideProgress)},L.prototype.cancelHideProgress=function(){this.trigger(R.Private.CancelHideProgress)},L.prototype.setPlayerSize=function(O,H){this._el&&(this._el.style.width=O,this._el.style.height=H)},L.prototype.getBuffered=function(){return this.tag.buffered},L.prototype.setRotate=function(O){this.tag&&(this._rotate=O,this._setTransform(),this.log("ROTATE",{rotation:O}))},L.prototype.getRotate=function(O){return this._rotate===void 0?0:this._rotate},L.prototype.setImage=function(O){this.tag&&(this._image=O,this._setTransform(),this.log("IMAGE",{mirror:O=="horizon"?2:1,text:O}))},L.prototype.getImage=function(){return this._image},L.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},L.prototype.setCover=function(O){var H=document.querySelector("#"+this.id()+" .prism-cover");H&&O&&(H.style.backgroundImage="url("+O+")",this._options.cover=O,this._options.autoplay||this.trigger(R.Private.Cover_Show))},L.prototype.setTextTracks=function(O){this._options.textTracks=O,O=u.unqiueTextTracks(O||[]),this.trigger(R.Private.VttClearTracks),O&&O.length&&this.trigger(R.Private.TextTrackFounded,{from:"user",textTracks:O}),this.trigger(R.Private.CCReset)},L.prototype._setTransform=function(){this._transformProp||(this._transformProp=d.getTransformName(this.tag));var O=" translate(-50%, -50%)";this._rotate&&(O+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?O+=" scaleY(-1)":this._image=="horizon"&&(O+=" scaleX(-1)")),this.tag.style[this._transformProp]=O},L.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},L.prototype._initPlayBehavior=function(O,H){var te=this;return!this._checkSupportVideoType()&&(u.validateSource(H)?(O===void 0&&(O=!1),this._created||(this._created=!0,this.trigger(R.Private.Created)),this.loaded||this.trigger(R.Player.Init),this._options.mute&&this.mute(!0),this.one(R.Video.CanPlay,function(){var le=te._getPlayStartTime();te.getCurrentTime()<le&&te.seek(le),te._loadByUrlStartTime=0,te.tag.playbackRate!==1&&te.setSpeed(te.tag.playbackRate)}),this._options.autoplay||this._options._autoplay||this._options.preload||O?(this._options._preload=!0,this._initLoad(H),(this._options.autoplay||this._options._autoplay)&&this._startPlay()):this.trigger(R.Private.Play_Btn_Show),!0):((O={mediaId:this._options.vid||"",error_code:n.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=_.get("Error_Invalidate_Source"),this.trigger(R.Player.Error,O),!1))},L.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},L.prototype._initLoad=function(O){O&&(this._isPreload()&&!a.IS_MOBILE?this.trigger(R.Private.H5_Loading_Show):(this.trigger(R.Private.H5_Loading_Hide),this.trigger(R.Private.Play_Btn_Show)),this.tag.setAttribute("src",O),this.oncePlayed=!1,this.loaded=!0)},L.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},L.prototype._reloadAndPlayForM3u8=function(){this._liveRetryCount==0&&this.trigger(R.Player.OnM3u8Retry);var O=this._options,H=O.liveRetryInterval+O.liveRetryStep*this._liveRetryCount,te=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(K,"reloadAndPlayForM3u8::#"+te._options.source+"#"+1e3*H),this._liveRetryTimer=setTimeout(function(){te._liveRetryCount++,te._loadByUrlInner(te._options.source,void 0,O.autoplay)},1e3*H)},L.prototype._checkSupportVideoType=function(){var O,H=this,te=this._options.source,le="";if(u.isRTMP(te)&&!this._options.useFlashPrism)le=_.get("Error_Not_Support_RTMP");else if(u.isDash(te)&&!u.isSupportMSE())le=_.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!a.IS_MOBILE)return"";return 0<te.indexOf("m3u8")?this.tag.canPlayType("application/x-mpegURL")!=""||u.isSupportHls()||(le=_.get("Error_Not_Support_M3U8_Text")):0<te.indexOf("mp4")?this.tag.canPlayType("video/mp4")==""&&(le=_.get("Error_Not_Support_MP4_Text")):(u.isRTMP(te)||u.isFlv(te))&&a.IS_MOBILE&&(this._options.useFlvPlugOnMobile?u.isSupportFlv()||(le=_.get("Error_Not_Support_Mse_Flv")):le=_.get("Error_Not_Support_Format_On_Mobile")),le&&(te=u.getFormat(te),O={mediaId:this._options.vid||"",error_code:n.ErrorCode.FormatNotSupport,error_msg:le+(te?"(format:"+te+")":"")},this.logError(O),O.display_msg=le,setTimeout(function(){H.trigger(R.Player.Error,O)})),le},L.prototype.getComponent=function(O){return this._lifeCycleManager.getComponent(O)},L.prototype.logError=function(O,H){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(O=O||{}).vt=this.getCurrentTime(),this.log(H?"ERRORRETRY":"ERROR",O)},L.prototype.log=function(O,H){var te=0,le=0;if(this._monitor)return this._options&&(te=this._options.vid||"0",le=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:te,album_id:0,source:this._options.source,from:le}),this._monitor._log(O,H)},L.prototype.setSanpshotProperties=function(O,H,te){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=O,this._snapshotMatric.height=H,1<te)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=te},L.prototype.setSnapshotProperties=function(O,H,te){this.setSanpshotProperties(O,H,te)},L.prototype.takeSnapshot=function(){var O=document.createElement("canvas"),xe=this.tag,H=xe.videoWidth,te=xe.videoHeight,le=this._getSanpshotMatric(),me=(O.width=le.width||H,O.height=le.height||te,this.getCurrentTime()),Pe=O.getContext("2d"),be=(Pe.save(),this.getImage()),be=(be=="vertical"?(Pe.translate(0,O.height),Pe.scale(1,-1)):be=="horizon"&&(Pe.translate(O.width,0),Pe.scale(-1,1)),xe),xe=(this._splayer&&(be=this._splayer.renderType===2?this._el.querySelector("canvas"):this._el.querySelector("video")),Pe.drawImage(be,0,0,H,te),Pe.restore(),u.drawSnapshotText(Pe,this.getOptions()),""),be="";try{xe=O.toDataURL("image/jpeg",le.rate||1)}catch(Oe){(be=Oe)&&be.message&&-1<be.message.indexOf("Tainted canvases")&&(be=new Error(' extraInfo: { crossOrigin:"anonymous" }'))}return H="",te="",xe&&(Pe=(H=xe).substr(H.indexOf(",")+1),te=v.toBinary(Pe)),{time:me,base64:H,binary:te,error:be}},L.prototype.getStatus=function(){return this._status||"init"},L.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},L.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},L.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},L.prototype.setProgressMarkers=function(O){this.trigger(R.Private.ProgressMarkerChanged,O=O||[])},L.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},L.prototype.setPreviewTime=function(O){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=O},L.prototype.getPreviewTime=function(){var O=0;return O=this._options.playConfig?this._options.playConfig.PreviewTime:O},L.prototype.exceedPreviewTime=function(O){return this.isPreview()&&O>=this._options.playConfig.PreviewTime},L.prototype.isPreview=function(){var O=this._options.playConfig.PreviewTime,H=this._vodDuration||this.tag.duration;return 0<O&&O<H},L.prototype.getStats=function(){return new x(function(O){O()})},L.prototype.setTraceId=function(O){this._monitor&&this._monitor.updateTraceId(O)},L.prototype._canSeek=function(O){var te=this._getSubVideoConfig(),H=te.start,te=te.end;return H||te?!(O<H||te<O):!(!(H=this._getWatchTimeConfig()).watchStartTime||H.watchEndTime)||!(O<H.watchStartTime||O>H.watchEndTime)},L.prototype.setWatchTime=function(O,H){this._options.watchStartTime=O,this._options.watchEndTime=H,this.trigger(R.Private.UpdateWatchTime),O=this.getCurrentTime(),H=this._getWatchTimeConfig(),O<H.watchStartTime?this.seek(H.watchStartTime):O>H.watchEndTime&&this.seek(H.watchEndTime)},L.prototype.setNextWatchTime=function(O,H){this._options.watchStartTime=O,this._options.watchEndTime=H},L.prototype.setStartEnd=function(O,H){this._options.start=O,this._options.end=H,O=this._getSubVideoConfig(),this._posOffset=O.start||0,this.trigger(R.Player.DurationChange),H=this.getCurrentTime()+this._posOffset,H<O.start?this.seek(0):H>O.end&&this.seek(O.end-this._posOffset)},L.prototype.setNextStartEnd=function(O,H){this._options.start=O,this._options.end=H},L.prototype.getPlayTime=function(){return Math.round(this._playingTime/1e3)},L.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},L.prototype._autoplayFailedHandler=function(){var O,H=this;(O=this.getOptions().autoplayPolicy)!=null&&O.fallbackToMute&&!this.muted()?(this.mute(!0),(O=this.tag.play())?O.then(function(){H.trigger(R.Private.MutedAutoplay)}).catch(function(te){H.tag.paused?(console.warn("Muted autoplay failed",te),H.unMute(!0)):H.one("canplay",function(){H.trigger(R.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(R.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(R.Private.Play_Btn_Show),this.trigger(R.Private.H5_Loading_Hide),this.trigger(R.Player.AutoPlayPrevented),this.trigger(R.Player.AutoPlay,!1),this._options.cover&&this.trigger(R.Private.Cover_Show))},L.prototype._overrideNativePlay=function(){var O=this.tag.play,H=this;this.tag.play=function(){if(H._monitor&&H._monitor.reportStartPlay(),!H._options.source)return te={mediaId:H._options.vid||"",error_code:n.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},H._options.vid||H._options.mediaAuth?void 0:(te.display_msg=_.get("Error_Empty_Source"),void H.trigger(R.Player.Error,te));H.readyTime=new Date().getTime();var te=O.apply(H.tag),le=(H.oncePlayed=!0,te!==void 0&&te.then(function(){H.trigger(R.Player.AutoPlay,!0)}).catch(function(me){!H.tag||!H.tag.paused||H._isError||H._options._autoplay||H._switchedLevel||H._autoplayFailedHandler()}),H._originalPlaybackRate||H.tag.playbackRate);return setTimeout(function(){H.tag&&(H.tag.playbackRate=le)}),te}},L.prototype._extraMultiSources=function(){var O=this._options.source;if(O&&-1<O.indexOf("{")&&-1<O.indexOf("}")){var H="";try{H=JSON.parse(O)}catch(Pe){console.error(Pe),console.error("json")}var te,le=[];for(te in H){var me=n.QualityLevels[te];le.push({definition:te,Url:H[te],desc:me||te})}this._setupSourceList(le)}return le},L.prototype._setupSourceList=function(O){var H;(O=O===void 0?[]:O).length&&(this._currentPlayIndex=u.findSelectedStreamLevel(O,this._options.defaultDefinition),H=O[this._currentPlayIndex],this._urls=O,this._options.source=H.Url,this.trigger(R.Private.SourceLoaded,H))},L.prototype._createService=function(){if(I)for(var O=I.length,H=0;H<O;H++){var te=I[H],le=te.condition;le===void 0?le=!0:typeof le=="function"&&(le=le.call(this)),le&&(this[te.name]=new te.service(this))}},L.prototype._disposeService=function(){if(I)for(var O=I.length,H=0;H<O;H++){var te=this[I[H].name];te!==void 0&&te.dispose&&te.dispose()}},L.prototype._executeReadyCallback=function(){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(R.Private.H5_Loading_Hide),this.trigger(R.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(O){console.log(O)}},L.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},L.prototype._reloadForVod=function(){var O,H,te;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(O=this.getCurrentTime(),(H=this._originalSource).indexOf("auth_key=")<0&&(H=H&&0<H.indexOf("?")?H+"&_t="+new Date().valueOf():H+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(te=this).traceLog(K,"reloadForVod::#"+H+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){te._loadByUrlInner(H,O,te.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},L.prototype._getUserTextTracks=function(){var O=this._options.textTracks||[];(O=u.unqiueTextTracks(O)).length&&this.trigger(R.Private.TextTrackFounded,{from:"user",textTracks:O})},L.prototype._logOnce=function(O,H){this._onceLogged||(console[H||"log"](O),this._onceLogged=!0)},E.exports=L},{"../../commonui/autostreamselector":12,"../../feature/AntiRecord":17,"../../feature/autoplaydelay":18,"../../feature/keyboardControl":19,"../../feature/license":20,"../../feature/logoManager":21,"../../feature/ratioAdapter":22,"../../lang/index":26,"../../lib/codec-probe":29,"../../lib/constants":31,"../../lib/cookie":32,"../../lib/dom":35,"../../lib/event":36,"../../lib/object":45,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../../lib/vttnext/index":58,"../../monitor/monitor":66,"../../ui/component":136,"../../ui/component/cover":140,"../../ui/component/license-watermark":145,"../../ui/component/progressmarker":149,"../../ui/component/text-track-display":160,"../../ui/component/util":165,"../../ui/exports":168,"../service/export":125,"../splayer/splayerinjector":132,"./event/eventmanager":70,"./event/eventtype":71,"./eventHandler/video/index":85,"./plugin/lifecyclemanager":97,"./x5play":99,"es6-promise":9}],95:[function(k,E,ne){k=k("../../../lib/oo").extend({}),E.exports=k},{"../../../lib/oo":46}],96:[function(k,E,ne){E.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],97:[function(k,E,ne){function x(a){(this._player=a)._status="init",this.components=[];var n=a.getOptions().components;if(n&&b.isArray(n)&&0<n.length)for(var u=0;u<n.length;u++){var c=n[u];if(!c)return void console.log("The "+u+" custome component is "+c);var v=c.type===void 0?c:c.type,h=c.args===void 0?[]:c.args,c=c.name===void 0?"":c.name;if(!v)return void console.log(c+" compenent is "+v);h=h&&0<h.length?[].concat.call([v],h):[],v=new(Function.prototype.bind.apply(v,h)),h=v[d.createEl],h&&typeof h=="function"&&h.call(v,a.el(),a),this.components.push({name:c,obj:v})}var _=this;a.on(g.Private.LifeCycleChanged,function(m){var l=m.paramData,T=l.type,l=l.data;T===g.Video.CanPlayThrough&&_._player.trigger(g.Player.TimeUpdate,l.target.currentTime),T===g.Video.Ended&&_._player.trigger(g.Player.TimeUpdate,_._player.getDuration()),_.components.length!=0&&s.call(_,a,m)})}var b=k("../../../lib/object"),g=k("../event/eventtype"),d=k("./lifecycle"),f=k("./status"),s=(x.prototype.getComponent=function(a){var n=null,u=this.components.length;if(a){for(var v=0;v<u;v++)if(this.components[v].name==a){n=this.components[v].obj;break}}return n},function(a,n){if(n){for(var n=n.paramData,u=n.type,v=n.data,h=((n=u)!=g.Video.LoadStart&&n!=g.Video.LoadedData&&n!=g.Video.LoadedMetadata||(u=d.loading),o(a,u),this.components.length),c=0;c<h;c++){var _=this.components[c].obj,m=_[u];m&&typeof m=="function"&&m.call(_,a,v)}u==g.Private.Dispose&&(this.components=[])}}),o=function(a,n){f[n]===void 0||n==f.pause&&(a._status==f.error||a._status==f.ended)||n==f.ready&&a._status==f.playing||(a._status=n)};E.exports=x},{"../../../lib/object":45,"../event/eventtype":71,"./lifecycle":96,"./status":98}],98:[function(k,E,ne){E.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],99:[function(k,E,ne){function x(d,f){var s=d.el().style.height,o=d.el().style.width,a=(d.originalLayout={container:{height:s,width:o},video:{width:d.tag.style.width,height:d.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),n=document.body.clientWidth+"px";width=f?(height=a,n):(height=s.indexOf("%")?s:s+"px",o.indexOf("%")?o:o+"px"),d.tag.style.width=n,d.tag.style.height=a,d.el().style.height=f?a:height}var b=k("../../lib/ua"),g=k("../../lib/dom");E.exports.isAndroidX5=function(){return b.os.android&&b.is_X5||b.dingTalk()},E.exports.adaptX5Play=function(d){b.os.android&&b.is_X5&&(d._options.x5_type=="h5"&&(d.tag.setAttribute("x5-video-player-type",d._options.x5_type),window.onresize=function(){var f,s;x(d,d._options.x5_fullscreen||d._options.x5_video_position=="center"),(f=d)._x5VideoOrientation=="landscape"&&(f._originalTagWidth=f.tag.style.width,f._originalTagHeight=f.tag.style.height,(s=document.querySelector("#"+f.id()+" .prism-controlbar"))&&parseFloat(s.offsetHeight),f.tag.style.height="100%",f.tag.style.width=window.screen.width+"px")},d.tag.addEventListener("x5videoenterfullscreen",function(){x(d,d._options.x5_fullscreen||d._options.x5_video_position=="center"),d.trigger("x5requestFullScreen")}),d.tag.addEventListener("x5videoexitfullscreen",function(){var f,s;(f=d).originalLayout&&(s=f.originalLayout,f.el().style.height=s.container.height,f.el().style.width=s.container.width,f.tag.style.width=s.video.width,f.tag.style.height=s.video.height),d.trigger("x5cancelFullScreen"),d.fullscreenService.getIsFullScreen()&&d.fullscreenService.cancelFullScreen()}),d.on("requestFullScreen",function(){d._options.x5_video_position=="top"&&g.removeClass(d.tag,"x5-top-left"),b.os.android&&b.is_X5&&d._options.x5LandscapeAsFullScreen&&(d.tag.setAttribute("x5-video-orientation","landscape"),d._x5VideoOrientation="landscape")}),d.on("cancelFullScreen",function(){d._options.x5_video_position=="top"&&g.addClass(d.tag,"x5-top-left"),b.os.android&&b.is_X5&&d._options.x5LandscapeAsFullScreen&&(d.tag.setAttribute("x5-video-orientation","portrait"),x(d,d._options.x5_fullscreen||d._options.x5_video_position=="center"),d._x5VideoOrientation="portrait")})),d._options.x5_fullscreen!==void 0&&d._options.x5_fullscreen&&(d.tag.setAttribute("x5-video-player-fullscreen",d._options.x5_fullscreen),g.addClass(d.tag,"x5-full-screen")),d._options.x5_video_position=="top"&&g.addClass(d.tag,"x5-top-left"),d._options.x5_orientation!==void 0)&&d.tag.setAttribute("x5-video-orientation",d._options.x5_orientation)}},{"../../lib/dom":35,"../../lib/ua":51}],100:[function(k,E,ne){var x=k("../../lib/object"),b=k("../../lib/io"),g=k("../../config"),d=k("../../lang/index"),f=k("../../lib/constants"),s=k("../../lib/playerutil"),o=k("../base/event/eventtype"),a="dashinjector.js";E.exports.inject=function(n,u,v,h){var c=h.source;if(!(function(m){return!this._dash&&s.isDash(m)&&s.isSupportMSE()}).call(n,c))return console.warn("Should not inject dash player");function _(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),u.prototype.play=this._superPt.play,u.prototype.pause=this._superPt.pause,u.prototype.initPlay=this._superPt.initPlay,u.prototype.seek=this._superPt.seek,u.prototype.canSeekable=this._superPt.canSeekable))}n._Type=u,n._superType=v,n._superPt=v.prototype,n._disposed=!1,n._dash=null,u.prototype.initPlay=function(){var m=this,T=(this.trigger(o.Private.H5_Loading_Show),performance.now());(function(l,y){var P="aliplayer-dash-min.js",w=this.getOptions(),P=w.dashjsUrl||"https://"+g.domain+g.path+g.h5Version+"/dash/"+P;w.assetPrefix&&(w.assetPrefix,function(C){throw new TypeError('"'+C+'" is read-only')}("url")),b.loadJS(P,l,y)}).call(this,function(){m.traceLog(a,"got js#"+parseInt(performance.now()-T)+"ms"),(function(){var l,y,w,P=!this._dash;this._disposed||(this._destroyDash(),(l=this.getOptions()).vid||(l.isVBR=!0),y={streaming:{retryAttempts:{MPD:l.isLive?l.liveRetry:l.vodRetry}}},y=x.deepMerge(y,l.dashOption),w=dashjs.MediaPlayer().create(),this._dash=w,(function(){var C=this,R=this._dash,A=this.getOptions(),I=!1;R.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(D){var B,N;I||(I=!0,N=(N=R.getBitrateInfoListFor("video"))==null?void 0:N.map(function(U){return{url:""+f.DASH_QUALITY_PROTOCOL+U.qualityIndex,width:U.width,height:U.height,bitrate:U.bitrate,attrs:{BANDWIDTH:U.bitrate,RESOLUTION:U.width+"x"+U.height}}}),C.trigger(o.Player.LevelsLoaded,{levels:N}),B=R.getCurrentTrackFor("audio"),N=R.getTracksFor("audio").map(function(U){return{id:U.index,language:U.lang,enabled:(B==null?void 0:B.index)===U.index}}),C.trigger(o.Player.AudioTrackUpdated,{audioTracks:N}))}),R.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(D){var B,N;D.mediaType==="video"&&(B=C._qualityService.levels||[],N=""+f.DASH_QUALITY_PROTOCOL+D.newQuality,D=B.find(function(U){return U.Url===N}),C.trigger(o.Private.QualityChange,{levelSwitch:!0,url:N,desc:D==null?void 0:D.desc}))}),R.on("bytesAppendedEndFragment",function(D){try{var B,N;D.mediaType==="video"&&(B=D.bufferedRanges.length)&&(N=D.bufferedRanges.end(B-1),D.startTime>N)&&(R.refreshManifest(),C.traceLog(a,"PTS rollback, refresh manifest, expectedStart: "+D.startTime+", resultBufferEnd: "+N),console.warn("PTS rollback, refresh manifest"))}catch(U){console.log("exception",U)}}),R.on(dashjs.MediaPlayer.events.ERROR,function(D){var B=D.error,N=dashjs.MediaPlayer.errors,U=function(L){var O,H={};for(O in L){var te;L.hasOwnProperty(O)&&(te=L[O],H[te]=O)}return H}(N)[B.code],J=[N.TIME_SYNC_FAILED_ERROR_CODE,N.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",D,"code:",U),C.traceLog(a,"dashjs-error::"+U+"#"+B.message+"#"+((D=B.data)==null||(D=D.response)==null?void 0:D.status)),!J.includes(B.code)){C._clearTimeout();var q,j,F,z=B.code;switch(z){case N.DOWNLOAD_ERROR_ID_CONTENT_CODE:case N.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case N.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case N.DOWNLOAD_ERROR_ID_SIDX_CODE:case N.DOWNLOAD_ERROR_ID_XLINK_CODE:case N.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case N.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var K=(K=B.data)==null||(K=K.response)==null?void 0:K.status;if(K===404){if(R.isDynamic()&&z===N.DOWNLOAD_ERROR_ID_CONTENT_CODE)return C.traceLog(a,"dashjs::reload mpd because seg 404"),void R.attachSource(A.source);q=f.ErrorCode.NotFoundSourceURL,j=d.get("Error_Not_Found"),F=d.get("Tip_Err_Not_found")}else j=K===403?(q=f.ErrorCode.AuthKeyExpired,d.get("Error_AuthKey_Text")):K===0?(q=f.ErrorCode.RequestDataError,d.get("Error_Play_Text")+","+d.get("Maybe_Cors_Error")):(q=f.ErrorCode.RequestDataError,d.get("Error_Network_Text")+"("+U+"|"+K+")");break;case N.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case N.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case N.MANIFEST_ERROR_ID_PARSE_CODE:case N.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case N.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:q=f.ErrorCode.LoadedMetadata,j=d.get("Error_Manifest_Decode_Text")+"("+U+")";break;default:q=f.ErrorCode.OtherError,j=d.get("Error_Play_Text")+"("+U+")"}j+="<br>"+B.message,D={mediaId:A.vid||"",mediaAuth:A.mediaAuth||"",error_code:q,error_msg:j,diagnosis_info:F},C.logError(D),C.trigger(o.Player.Error,D),C._dash.reset()}})}).call(this),w.initialize(),w.updateSettings(y),w.setAutoPlay(l.autoplay),w.attachView(this.tag),w.attachSource(l.source),this._initPlayBehavior(),P&&this._executeReadyCallback())}).call(m)},function(){var l={mediaId:h.vid||"",mediaAuth:h.mediaAuth||"",error_code:f.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};m.trigger(o.Player.Error,l)})},Object.defineProperty(u.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return _},set:function(){return _}}),u.prototype._switchLevel=function(m){this.traceLog(a,"switchLevel::"+m);var T=this._dash;m?(m=Number(m.replace(f.DASH_QUALITY_PROTOCOL,"")),T.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),T.setQualityFor("video",m)):T.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},u.prototype._switchAudioTrack=function(m){var T=this._dash,l=T.getTracksFor("audio").find(function(y){return y.index===m});l&&T.setCurrentTrack(l)},u.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../../lib/object":45,"../../lib/playerutil":48,"../base/event/eventtype":71}],101:[function(k,E,ne){var x=k("../base/player"),b=k("./dashinjector"),g=x.extend({init:function(d,f){f._native=!1,b.inject(this,g,x,f),x.call(this,d,f)}});E.exports=g},{"../base/player":94,"./dashinjector":100}],102:[function(k,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(c){for(var _=1;_<arguments.length;_++){var m,T=arguments[_];for(m in T)Object.prototype.hasOwnProperty.call(T,m)&&(c[m]=T[m])}return c}).apply(this,arguments)}var b=k("../../lib/io"),g=k("../../config"),d=k("../../lib/constants"),f=k("../../lib/util"),s=k("../../lib/playerutil"),o=(k("../../lib/dom"),k("../../lang/index")),a=k("../base/event/eventtype"),n=k("../saas/drm"),u=k("../../lib/ua"),v="drminjector.js",h=function(){function c(){}var _=c.prototype;return _.destroy=function(){},_.append=function(m){},_.remove=function(m,T){},_.isTextVisible=function(){},_.setTextVisibility=function(m){},c}();E.exports.inject=function(c,_,m,T,l,y,w){var P,C=T.source;function R(J){var q=shaka.util.Error.Code,j="",F=J.data||[];switch(J.code){case q.BAD_HTTP_STATUS:case q.HTTP_ERROR:case q.TIMEOUT:case q.LICENSE_REQUEST_FAILED:j=o.get("Tip_Drm_Request_Err")+A(F);break;case q.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case q.SESSION_TIMEOUT:window.isSecureContext?(j=o.get("Tip_Drm_Key_System_Unavailable"),F.length&&(j+="<br />"+o.get("Tip_Err_Common_Short")+F)):j=o.get("Tip_Drm_Secure_Context");break;case q.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(j=o.get("Tip_Drm_File_Not_Allowed"));break;case q.HLS_INVALID_PLAYLIST_HIERARCHY:j=o.get("Tip_Drm_Playlist_Hierarchy")}return J=A(F),j||J}function A(J){return o.get("Tip_Err_Common")+J}function I(J){var q=this;this._drm.load(this._options.source,J.startTime).then(function(){if(q.trigger(a.Private.H5_Loading_Hide),J.continuePlay&&(q.play(),J.prevVariant)&&J.prevVariant!==0){for(var j,F=q._drm.getVariantTracks(),z=0;z<F.length;z++)if(F[z].id===J.prevVariant){j=F[z];break}j&&q._drm.selectVariantTrack(j,!0)}}).catch(function(j){B.call(q,j)})}function D(){N();var q=d.ErrorCode.DrmNotSupported,J=o.get("Error_Drm_Not_Supported"),q={mediaId:this._options.vid||"",error_code:q,error_msg:J,diagnosis_info:o.get("Tip_Drm_Unsupported")};this.logError(q),this.trigger(a.Player.Error,q)}function B(J){N();var j=d.ErrorCode.DrmLoadError,q=o.get("Error_Drm_Load"),j={mediaId:this._options.vid||"",error_code:j,error_msg:q+" | "+this._shakaCodeMap[J.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(j),j.diagnosis_info=R.call(this,J),this.trigger(a.Player.Error,j)}function N(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function U(J,q){q=q.getVariantTracks().find(function(j){return j.active}),console.log("activeTrack",q),J.trigger(a.Private.QualityChange,{levelSwitch:!0,bitrate:q.bandwidth,desc:q.height})}!y&&(T=C,c._drm||!s.isDash(T)&&!s.isHls(T))||(c._isDrm=!0,c._drm=null,c._isLoadedDrm=!1,c._sessionTimer=null,c._isFairPlay=u.IS_MAC_SAFARI||u.IS_IOS,c._fairPlayHandlers={},c._shakaCodeMap={},c._cdmData="",c._licenseData="",console.log("use FairPlay",c._isFairPlay),_.prototype._checkDrmReady=function(){if(this._drm==null&&!this._isFairPlay)throw new Error("please invoke this method after ready event")},_.prototype.play=function(J){return this.traceLog(v,"play::"+J),this._checkDrmReady(),this._isManualPlay=J||!1,this.trigger(a.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},_.prototype.initPlay=function(J){var q,j,F;function z(K,L){var O,H,te,le;K._antiRecord&&(console.log("Manual check before load source"),K._antiRecord.check())||(!shaka.Player.isBrowserSupported()||function(){if(u.IS_ANDROID)return!(!u.IS_UC&&!u.IS_FIREFOX)}()?D.call(K):(O=null,shaka.Player.probeSupport().then(function(me){O&&(clearTimeout(O),O=null),me&&me.drm&&me.drm["com.widevine.alpha"]?K.destroy(le):D.call(K)}),O=setTimeout(function(){D.call(K)},5e3),H=!K._drm,te=function(){var me,Pe,xe;K._drm=new shaka.Player(K.tag),P(K,K._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",K._shakaCodeMap=(me=shaka.util.Error.Code,Pe={},Object.keys(me).forEach(function(be){Pe[me[be]]=be}),Pe),xe=K._options.isLive?"https://"+s.getLiveHostByRegion(K._options.region):"https://vod."+K._options.region+".aliyuncs.com",K._drm.configure(x({drm:{servers:{"com.widevine.alpha":xe,"com.microsoft.playready":xe},retryParameters:{maxAttempts:1}}},K._options.drmOption||{},{textDisplayFactory:function(){return new h}})),K._drm.getNetworkingEngine().registerRequestFilter(function(be,Oe){shaka.util.StringUtils;var re=shaka.util.Uint8ArrayUtils;be==shaka.net.NetworkingEngine.RequestType.LICENSE&&(be=re.toBase64(new Uint8Array(Oe.body)),re=K._options.isLive?n.getRequestUrl(be,K):n.postData(be,K),K._cdmData=be,Oe.uris[0]=re.url,Oe.headers["content-type"]="application/x-www-form-urlencoded",Oe.body=re.data)}),K._drm.getNetworkingEngine().registerResponseFilter(function(be,Oe){var re=shaka.util.StringUtils,ee=shaka.util.Uint8ArrayUtils;be==shaka.net.NetworkingEngine.RequestType.LICENSE&&(be=re.fromUTF8(Oe.data),re=JSON.parse(be),be=K._options.isLive?re.Response.B64License:JSON.parse(re.License).b64License,K._licenseData=be,Oe.data=ee.fromBase64(be))}),K._drm.addEventListener("error",function(be){console.log("errorMessage"),console.log(be.detail.code),console.log(be.detail)}),K._drm.load(K._options.source).then(function(){K._initPlayBehavior(L)}).catch(function(be){B.call(K,be)}),N.call(K),K.one(a.Video.CanPlay,function(){N.call(K)}),K._sessionTimer=setTimeout(function(){K._isError||(B.call(K,{code:"SESSION_TIMEOUT"}),K._drm&&K._drm.destroy())},K._player.getOptions().drmSessionTimeout||5e3),l&&l(K._drm),H&&(K._executeReadyCallback(),K._urls)&&0<K._urls.length&&(K._currentPlayIndex=s.findSelectedStreamLevel(K._urls,K._options.defaultDefinition),xe=K._urls[K._currentPlayIndex],K.trigger(a.Private.SourceLoaded,xe))},le=function(me){try{te()}catch(Pe){console.log(Pe)}}))}f.contentProtocolMixed(C)?(N(),(q={mediaId:this._options.vid||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=o.get("Request_Block_Text"),this.trigger(a.Player.Error,q)):this._options.accessKeyId&&this._options.accessKeySecret?((j=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(a.Private.H5_Loading_Show),(function(K,L){var O;this._isFairPlay&&(function(){if(u.IS_IOS)return H=parseInt(u.os.version),console.log("osVersion",H),12<=H;{var H;if(u.IS_MAC_SAFARI)return H=parseInt(u.browser.version),console.log("browserVersion",H),12<=H}}()?((O=this).destroy(),n.loadCertificate(this,function(){K&&K(),O._initPlayBehavior(L,O._options.source),O._executeReadyCallback()})):D.call(this))}).call(this,l,J)):this._isLoadedDrm&&typeof shaka<"u"?z(this,J):(this.trigger(a.Private.H5_Loading_Show),F=performance.now(),(function(K,L){var O="aliplayer-drm-min.js",H="",H=g.domain?"https://"+g.domain+g.path+g.h5Version+"/drm/"+O:"/build/drm/"+O,te=(this._options.shakaUrl&&(H=this._options.shakaUrl),this);b.loadJS(H,function(){shaka.polyfill.installAll(),K.apply(te)},function(le){L&&L(le)})}).call(j,function(){this.traceLog(v,"got js#"+parseInt(performance.now()-F)),this._isLoadedDrm=!0,z(this,J)},function(K){K={mediaId:j._options.vid||"",mediaAuth:j._options.mediaAuth||"",error_code:d.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(K?K.message:"")},j.trigger(a.Player.Error,K)}))):(N(),(q={mediaId:this._options.vid||"",error_code:d.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=o.get("Error_Drm_No_Sts"),this.trigger(a.Player.Error,q))},_.prototype.destroy=function(J){var q;this._drm?(N.call(q=this),this._drm.destroy().then(function(){q._drm=null,typeof J=="function"&&J(q)})):(this._isFairPlay&&this._destroyFairPlay(),typeof J=="function"&&J(this))},_.prototype._destroyFairPlay=function(){n.destroyFairPlay.call(this)},_.prototype.dispose=function(){m.dispose.call(this),this.destroy()},_.prototype._switchLevel=function(J,q){if(q=q||{isAuto:!0},this.trigger(a.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!q.isAuto;var j=this.autoplay||this._status!="pause";this._loadByUrlInner(J,this.getCurrentTime(),j)}else if(q.isAuto)this._drm.configure({abr:{enabled:!0}}),U(this._player,this._drm);else{for(var F,z=this._drm.getVariantTracks(),K=0;K<z.length;K++){var L=z[K];if(Number(L.bandwidth)===Number(q.bitrate)&&Number(L.height)===Number(q.resolution.split("x")[1])){F=L;break}}F||console.warn("cannot find target track",q),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(F,!this._options.seamlessHandover)}var O=this;setTimeout(function(){O.trigger(a.Player.LevelSwitched),this._switchedLevel=!1},1e3)},_.prototype._getDRMEncryptItem=function(){var J=this._urls;if(J&&0<J.length)for(var q=J.length,j=0;j<q;j++){var F=J[j];if(F.Url==this._options.source&&+F.encryption)return F}return""},_.prototype._getItemBySource=function(){var J=this._urls;if(J&&0<J.length)for(var q=J.length,j=0;j<q;j++){var F=J[j];if(F.Url==this._options.source)return F}return""},P=function(J,q){q.addEventListener("error",function(K){var F,z=J,K=K.detail,O="Error code:"+K.code+"message:"+K.message,L=(z.traceLog(v,O),console.log(O),d.ErrorCode.OtherError),O=o.get("Error_Play_Text");K.code==shaka.util.Error.Code.EXPIRED?(function(){var H=this,te=(this.trigger(a.Private.H5_Loading_Show),null);this._options.isLive||(te=this.getCurrentTime());var le,me=!this.paused(),Pe=this._drm.getConfiguration().abr.enabled;if(!Pe){for(var xe=this._drm.getVariantTracks(),be=0;be<xe.length;be++)if(xe[be].active){le=xe[be].id;break}}var Oe={startTime:te,continuePlay:me,prevVariant:le,isAdaptive:Pe};typeof this._options.refreshAccessInfo=="function"?this._options.refreshAccessInfo().then(function(re){(re=re||{}).accessKeyId&&(H._options.accessKeyId=re.accessKeyId),re.securityToken&&(H._options.securityToken=re.securityToken),re.accessKeySecret&&(H._options.accessKeySecret=re.accessKeySecret),I.call(H,Oe)}):I.call(H,Oe)}).call(z):(K.code==shaka.util.Error.Code.HTTP_ERROR?(L=d.ErrorCode.NetworkError,O=o.get("Http_Error")):K.code==shaka.util.Error.Code.TIMEOUT?(L=d.ErrorCode.LoadingTimeout,O=o.get("Error_Waiting_Timeout_Text")):K.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(L=d.ErrorCode.DrmLicenseRequestFailed,O=o.get("Error_Drm_License_Request_Failed")):K.Category==shaka.util.Error.NETWORK&&(L=d.ErrorCode.NetworkError,O=o.get("Error_Network_Text")),N.call(z),setTimeout(function(){z.trigger(a.Private.Play_Btn_Hide)}),z.checkOnline()&&(F=z._drm.drmInfo()||{},F={keyIds:Array.from(F.keyIds||[]),initData:String(((F=(F.initData||[])[0])==null?void 0:F.initData)||[]),cdmData:z._cdmData,licenseData:z._licenseData},F={mediaId:z._options.vid||"",error_code:L,error_msg:K.message,shaka_error:JSON.stringify(K.data||[]),drm_info:JSON.stringify(F)},z.logError(F),F.display_msg=O+" | "+z._shakaCodeMap[K.code],F.diagnosis_info=R.call(z,K),z.trigger(a.Player.Error,F)))}),q.addEventListener("variantchanged",function(j){console.log("DRM Event: variantchanged",j)}),q.addEventListener("abrstatuschanged",function(j){console.log("DRM Event: abrstatuschanged",j)}),q.addEventListener("drmsessionupdate",function(j){console.log("DRM Event: drmsessionupdate",j),N.call(J)}),q.addEventListener("expirationupdated",function(j){console.log("DRM Event: expirationupdated",j),console.log("Exp:",this.getExpiration())}),q.addEventListener("adaptation",function(j){console.log("adaptation",j),U(J,q)}),q.addEventListener("trackschanged",function(j){console.log("DRM EVENT: trackschanged",q.getTextLanguages(),q.getTextTracks());var F=q.getTextLanguages();F&&F.length&&(F=function(z){var K={subtitle:"subtitles",caption:"captions"},L=(console.log("Building track config"),z.getManifest().textStreams||[]),O=(console.log("textStreams",L),z.getTextLanguages()),H=(console.log("languageList",O),[]);try{L.forEach(function(te){O.includes(te.language)&&H.push({kind:K[te.kind]||te.kind,label:te.label,srclang:te.language,src:Array.from(te.segmentIndex)[0].getUris()[0]})})}catch(te){console.log("error in retrieving text track url: ",te)}return H}(q),J.trigger(a.Private.TextTrackFounded,{from:"drm",textTracks:F}),J.trigger(a.Private.CCReset))})})}},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/dom":35,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../base/event/eventtype":71,"../saas/drm":112}],103:[function(k,E,ne){var x=k("../base/player"),b=k("./drminjector"),g=x.extend({init:function(d,f){b.inject(this,g,x.prototype,f,function(s){}),f._native=!1,x.call(this,d,f)}});E.exports=g},{"../base/player":94,"./drminjector":102}],104:[function(l,E,ne){var x=l("../../ui/component"),b=l("../../lib/data"),g=l("../../lib/ua"),d=l("../../lib/constants"),f=l("../../lib/dom"),s=l("../../lib/object"),o=l("../../config"),a=l("../../lang/index"),n=l("../../lib/playerutil"),u=l("../../lib/util"),v=l("../../ui/component/info-display"),h=l("../../ui/component/error-display"),c=l("../../feature/autoplaydelay"),_=l("../../commonui/autostreamselector"),m=l("../base/event/eventtype"),T=l("../saas/ststoken"),l=x.extend({init:function(y,w){var P;w.skinLayout===void 0&&(w.skinLayout=n.getDefaultFlashLayout()),x.call(this,this,w),this._id="prism-player-"+b.guid(),this.tag=y,this._el=this.tag,this._childrenUI=[h],this.initChildren(),this.id=this._id,window[this.id]=this,a.setCurrentLanguage(this._options.language,"flash",this._options.languageTexts),u.openInFile()?(w={mediaId:this._options.vid||"",error_code:d.ErrorCode.FormatNotSupport,error_msg:a.get("Open_Html_By_File","flash")},this.trigger(m.Private.Error_Show,w)):g.IS_MOBILE?this.trigger(m.Private.Error_Show,{mediaId:this._options.vid||"",error_code:d.ErrorCode.FormatNotSupport,error_msg:a.get("Cant_Use_Flash_On_Mobile","flash")}):(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?T.getPlayAuth((P=this)._options,function(C){P._options.playauth=C,P._createPlayer()},function(C){var R={mediaId:P._options.vid,error_code:C.Code,error_msg:C.Message};C.sri&&(R.sri=C.sri),R.display_msg=C.display_msg,P.trigger(m.Private.Error_Show,R)},"flash"):this._createPlayer(),this._status="init")},_createPlayer:function(){var y,w;this._options.autoPlayDelay?(w=new c(this),y=this,w.handle(function(){y._options.autoplay=!0,y._initPlayer(),y._childrenUI=[v,_],y.initChildren()})):(this._initPlayer(),this._childrenUI=[v,_],this.initChildren()),g.HAS_FLASH||(w=a.get("Flash_Not_Ready","flash"),this.trigger(m.Private.Info_Show,{text:w,align:"tc",isBlack:!1}))},_initPlayer:function(){var y="//"+o.domain+"/de/prismplayer-flash/"+o.flashVersion+"/PrismPlayer.swf",w=(this._options.playerSwfPath?y=this._options.playerSwfPath:o.domain?-1<o.domain.indexOf("localhost")&&(y="//"+o.domain+"/build/flash//PrismPlayer.swf"):y="de/prismplayer-flash/"+o.flashVersion+"/PrismPlayer.swf",this._comboFlashVars()),P=this._options.wmode||"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+y+'"><param name=quality value=High><param name="FlashVars" value="'+w+'"><param name="WMode" value="'+P+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+y+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+P+'" FlashVars="'+w+'"></embed></object>'},_getPlayer:function(y){return navigator.appName.indexOf("Microsoft")!=-1?document.getElementById(y):document[y]},_getLowerQualityLevel:function(){var y,w=this._getVideoUrls();return w&&(y=w.Urls,w=w.index,!(y&&y.length==0||w==-1))&&0<w?{item:y[w-1],index:w-1}:""},_comboFlashVars:function(){var C=encodeURIComponent(g.getReferer()),P=g.getHref(),y=encodeURIComponent(P),w="",P=(P&&(w=g.getHost(P)),this._options),C={autoPlay:P.autoplay?1:0,isInner:0,actRequest:1,vid:P.vid,diagnosisButtonVisible:P.diagnosisButtonVisible?1:0,domain:P.domain||"//tv.taobao.com",statisticService:P.statisticService||o.logReportTo,videoInfoService:P.videoInfoService||"/player/json/getBaseVideoInfo.do",disablePing:P.trackLog?0:1,namespace:this.id,barMode:P.barMode!=0?1:0,isLive:P.isLive?1:0,waterMark:P.waterMark,environment:P.environment,vurl:P.source?encodeURIComponent(P.source):"",plugins:P.plugins||"",snapShotShow:P.snapshot?1:0,accessId:P.accId||"",accessKey:P.accSecret||"",apiKey:P.apiKey||"",flashApiKey:P.flashApiKey||"",disableSeek:P.disableSeek?1:0,disableFullScreen:P.disableFullScreen?1:0,stsToken:P.stsToken||"",domainRegion:P.domainRegion||"",authInfo:P.authInfo?encodeURIComponent(P.authInfo):"",playDomain:P.playDomain||"",stretcherZoomType:P.stretcherZoomType||"",playauth:P.playauth?P.playauth.replace(/\+/g,"%2B"):"",prismType:P.prismType||0,formats:P.formats||"",notShowTips:P.notShowTips?1:0,showBarTime:P.showBarTime||0,showBuffer:P.showBuffer==0?0:1,rePlay:P.rePlay?1:0,encryp:P.encryp||"",secret:P.secret||"",mediaType:"video",logInfo:{ud:g.getHost(P.source),os:g.os.name,ov:g.os.version||"",et:g.browser.name,ev:g.browser.version||"",uat:g.USER_AGENT,r:C,pu:y,app_n:w}},R=[];return P.rtmpBufferTime!==void 0&&(C.rtmpBufferTime=P.rtmpBufferTime),P.cover&&(C.cover=P.cover),P.extraInfo&&(C.extraInfo=encodeURIComponent(JSON.stringify(P.extraInfo))),C.logInfo&&(C.logInfo=encodeURIComponent(JSON.stringify(C.logInfo))),C.languageData=encodeURIComponent(JSON.stringify(a.getLanguageData("flash"))),C.language=a.getCurrentLanguage(),s.each(C,function(A,I){R.push(A+"="+I)}),R.join("&")},initChildren:function(){for(var y=this._childrenUI.length,w=0;w<y;w++){var P=new this._childrenUI[w](this,this._options),C=P.el();C.id=P.id(),this.contentEl().appendChild(C),P.bindEvent()}var R=document.querySelector("#"+this._options.id+" .prism-info-display");f.css(R,"display","none")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var y=this._options.skinRes,w=this._options.skinLayout;if(w!==!1&&!s.isArray(w))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if(typeof y!="string")throw new Error("PrismPlayer Error: skinRes should be string!");y=w!=0&&w.length!==0&&{skinRes:y,skinLayout:w},this.flashPlayer.setPlayerSkin(y),this.trigger("ready");var P=this;window.addEventListener("beforeunload",function(){try{P.flashPlayer.setPlayerCloseStatus()}catch{}})},jsReady:function(){return!0},snapshoted:function(P){var w=u.toBinary(P),P="data:image/jpeg;base64,"+P;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:P,binary:w})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){this._status!="ended"&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(m.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(m.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(y){this.trigger("bSSendMsg",y)},onVideoRender:function(y){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:y})},onVideoError:function(y){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:y})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){var y;this._status!="pause"&&(this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle(),(y=this)._checkTimeoutHandle=setTimeout(function(){y.trigger(m.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout),this._checkVideoStatus())},startSeek:function(y){this.trigger("startSeek",y)},completeSeek:function(y){this.trigger("completeSeek",y)},_invoke:function(){var y=arguments[0],w=arguments;if(Array.prototype.shift.call(w),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not readyplease use api after ready event occured!");if(typeof this.flashPlayer[y]!="function")throw new Error("PrismPlayer Error: function "+y+" is not found!");return this.flashPlayer[y].apply(this.flashPlayer,w)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(y){this._invoke("seekVideo",y)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var y=this._invoke("getVideoUrls"),w=[];if(y&&y.Urls)for(var P=0;P<y.Urls.length;P++){var C=y.Urls[P].value,R=C.desc.indexOf("_"),A=a.get(C.definition,"flash");C.desc=0<R?A+"_"+C.height:A,w.push(C)}return{Urls:w,index:y.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){var y;this.flashPlayer&&!this._checkVideoStatusHandler&&(y=this,function w(){y._checkVideoStatusHandler=setTimeout(function(){var P=y._getVideoStatus();P.videoStatus=="playing"&&P.bufferStatus=="bufferFull"?(y._status="playing",y._clearTimeoutHandle()):P.videoStatus=="videoPlayOver"&&(y._status="ended",y._clearTimeoutHandle()),w()},500)}())},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(y){return this._invoke("changeStream",y)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(y){this._invoke("setVolume",y)},loadByVid:function(y){this._invoke("loadByVid",y,!1)},loadByUrl:function(y,w){this._invoke("loadByUrl",y,w)},dispose:function(){this._clearTimeoutHandle(),this._checkVideoStatusHandler&&(clearTimeout(this._checkVideoStatusHandler),this._checkVideoStatusHandler=null),this._invoke("pauseVideo");var y=this;setTimeout(function(){y.offAll("completeSeek"),y.offAll("startSeek"),y.offAll("stsTokenExpired"),y.offAll("liveStreamStop"),y.offAll("showBar"),y.offAll("hideBar"),y.offAll("m3u8Retry"),y.offAll("error"),y.offAll("canplay"),y.offAll("pause"),y.offAll("ended"),y.offAll("play"),y.offAll("loadedmetadata"),y.offAll("snapshoted"),y.offAll("uiReady"),y.offAll("ready"),y.flashPlayer=null,y._el&&(y._el.innerHTML="")})},showBSMsg:function(y){this._invoke("showBSMsg",y)},setToastEnabled:function(y){this._invoke("setToastEnabled",y)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(y,w){this._el.style.width=y,this._el.style.height=w}});E.exports=l},{"../../commonui/autostreamselector":12,"../../config":15,"../../feature/autoplaydelay":18,"../../lang/index":26,"../../lib/constants":31,"../../lib/data":33,"../../lib/dom":35,"../../lib/object":45,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../../ui/component":136,"../../ui/component/error-display":141,"../../ui/component/info-display":144,"../base/event/eventtype":71,"../saas/ststoken":119}],105:[function(k,E,ne){(function(x){(function(){var b=k("../../lib/io"),g=k("../../config"),d=k("../../lib/constants"),f=k("../../lib/util"),s=k("../../lib/playerutil"),o=k("../../lib/ua"),a=k("../../lib/data"),n=k("../../lang/index"),u=k("../base/event/eventtype"),v="flvinjector.js";E.exports.inject=function(h,c,_,m,T,l){var y,w=m.source,P=m.optionFormat;function C(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(c.prototype.play=this._superPt.play,c.prototype.pause=this._superPt.pause,c.prototype.initPlay=this._superPt.initPlay,c.prototype.seek=this._superPt.seek,c.prototype.canSeekable=this._superPt.canSeekable))}function R(A){try{for(var I=A.buffered.length,D="Len:"+I+";",B=0;B<I;B++)D+="["+(B+1)+"]"+A.buffered.start(B)+"~"+A.buffered.end(B);return D}catch{}}(l||(m=w,l=P,!h._flv&&s.isFlv(m,l)&&s.isSupportFlv()))&&(h._Type=c,h._superType=_,h._superPt=_.prototype,h._disposed=!1,c.prototype._checkFlvReady=function(){if(this._flv==null)throw new Error("please invoke this method after ready event")},h._isFlv=!0,h._flv=null,h._isLoadedFlv=!1,h._dumpBuffer=null,c.prototype.play=function(A){return this.traceLog(v,"play::"+A),A&&this.trigger(u.Private.ManualPlay),this._checkFlvReady(),this._isManualPlay=A||!1,this.trigger(u.Private.Cover_Hide),this._options.isLive&&A?this._loadByUrlInner(this._options.source,0,A):this.tag.ended||this._ended?this.replay():(this._seeking==0&&(A=0,this.tag.ended||this._ended||(A=this.getCurrentTime())==0&&(A=-1),A!=-1)&&this.seek(A),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},c.prototype.seek=function(A){this._checkFlvReady(),this._seeking=!0;var I=this.getDuration();I<=(A=Math.floor(A))&&(A=I);try{this._flv.currentTime=A}catch(D){console.log(D)}return this},c.prototype.pause=function(A){return this._checkFlvReady(),this._isManualPause=A||!1,this._flv.pause(),this},c.prototype.getProgramDateTime=function(){var A;return this._checkFlvReady(),this._metadata?(A=(A=this._flv.getFirstSample())&&A.pts?A.pts:0,console.log(""+this._metadata.NtpTime),console.log("PTS"+A),this._metadata.NtpTime+A):""},c.prototype.initPlay=function(A){var I,D,B;function N(U,J){if(!U._disposed){var q=!U._flv,j=(U._destroyFlv(),U._options.isLive);if(j&&!flvjs.getFeatureList().networkStreamIO)return(L={error_code:d.ErrorCode.FormatNotSupport,error_msg:n.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=L.error_msg,void U.trigger(u.Player.Error,L);var F,z={isLive:j,enableWorker:U._options.enableWorker,accurateSeek:!0},K=(o.IS_IE11&&(z.enableWorker=!1),{type:"flv",isLive:j,url:U._options.source});for(F in j?(z.enableStashBuffer=U._options.enableStashBufferForFlv,z.stashInitialSize=U._options.stashInitialSizeForFlv,z.autoCleanupSourceBuffer=!1):z.lazyLoadMaxDuration=600,z.statisticsInfoReportInterval=1e3,U._options.isLive&&(U._options.flvFrameChasing&&(z.flvFrameChasing=U._options.flvFrameChasing),U._options.chasingFirstParagraph&&(z.chasingFirstParagraph=U._options.chasingFirstParagraph),U._options.chasingSecondParagraph&&(z.chasingSecondParagraph=U._options.chasingSecondParagraph),U._options.chasingFirstSpeed&&(z.chasingFirstSpeed=U._options.chasingFirstSpeed),U._options.chasingSecondSpeed)&&(z.chasingSecondSpeed=U._options.chasingSecondSpeed),U._options.flvOption)F=="cors"||F=="hasAudio"||F=="withCredentials"||F=="hasVideo"||F=="type"?K[F]=U._options.flvOption[F]:z[F]=U._options.flvOption[F];flvjs.LoggingControl.enableAll=U._options.debug,U._flv=flvjs.createPlayer(K,z),y(U,U._flv),U._flv.on(flvjs.Events.DUMP_BUFFER,function(H){var te,le,me;U._options.disableDumpBuffer||U._liveRetryCount===0&&U._vodRetryCount===0&&U._nudgeCount===0&&typeof U._dumpBuffer!="string"&&(U._flvDumpTimer||(U._flvDumpTimer=setTimeout(function(){U._reportDumpBuffer&&U._reportDumpBuffer()},5e3)),H=new Uint8Array(H),U._dumpBuffer?U._dumpBuffer=(te=U._dumpBuffer,le=H,(me=new Uint8Array(te.length+le.length)).set(te),me.set(le,te.length),me):U._dumpBuffer=H)});var L,O=f.throttle(function(H){U.traceLog(v,"dts_adjustment::"+H.from+"->"+H.to)},1e3);U._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(H){O(H)}),U._flv.on(flvjs.Events.MEDIA_INFO,function(H){U._metadata=H.metadata}),U._flv.on(flvjs.Events.METADATA_ARRIVED,function(H){H&&H.dataContent&&H.dataContent.length&&U.trigger(u.Private.SeiFrame,{dataContent:H.dataContent,pts:H.pts})}),U._flv.on(flvjs.Events.STATISTICS_INFO,function(H){U.trigger(u.Private.StatisticsInfo,H)}),U._flv.attachMediaElement(U.tag),U._initPlayBehavior(J)&&((U._options.preload||U._options.autoplay)&&(U._hasLoaded=!0,U._flv.load()),U._options.autoplay&&!U.tag.paused&&U._flv.play(),T&&T(U._flv),q)&&(U._executeReadyCallback(),U._urls)&&0<U._urls.length&&(U._currentPlayIndex=s.findSelectedStreamLevel(U._urls,U._options.defaultDefinition),L=U._urls[U._currentPlayIndex],U._options.source=L.Url,U.trigger(u.Private.SourceLoaded,L))}}o.browser.safari&&this.trigger(u.Private.Snapshot_Hide),f.contentProtocolMixed(w,"",P)?((I={mediaId:this._options.vid||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=n.get("Request_Block_Text"),this.trigger(u.Player.Error,I)):(D=this)._isLoadedFlv&&typeof Hls<"u"?setTimeout(function(){N(D,A)},1e3):(this.trigger(u.Private.H5_Loading_Show),B=performance.now(),(function(U,J,q){var j="aliplayer-flv-min.js",F="",F=g.domain?"https://"+g.domain+g.path+g.h5Version+"/flv/"+j:"/build/flv/"+j,z=(this._options.assetPrefix&&(F=this._options.assetPrefix+"/flv/"+j),JSON.parse(x)&&(F="http://localhost:8000/dist/aliplayer-flv.js"),this);b.loadJS(F,function(){U.apply(z)},function(){q&&q()})}).call(D,function(){this.traceLog(v,"got js#"+parseInt(performance.now()-B)),this._isLoadedFlv=!0,N(this,A)},this._options.debug,function(){var U={mediaId:D._options.vid||"",mediaAuth:D._options.mediaAuth||"",error_code:d.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};D.trigger(u.Player.Error,U)}))},c.prototype._reportDumpBuffer=function(){var A,I;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&typeof this._dumpBuffer!="string"&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),A=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),A=f.arrayBufferToB64(A),I=a.guid(),this.traceLog(v,"dump::"+I),this.trigger(u.Private.DumpBuffer,{id:I,data:A}))},c.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(A){console.log(A)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},Object.defineProperty(c.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return C},set:function(){return C}}),c.prototype.canSeekable=function(A){var I=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(A)&&I&&!I.hasKeyframesIndex)},c.prototype._getbwEstimator=function(){var A;return 1024*((A=this._flv)==null||(A=A.statisticsInfo)==null?void 0:A.speed)*8},y=function(A,I){var D=!1;I.on(flvjs.Events.ERROR,function(B,N,U){var J,q,j,F,z="flvjs-error::"+B+"#"+N+"#"+U.code+"#"+U.msg,K=U.msg==="BodyStreamBuffer was aborted"&&I._config.lazyLoad;if(K){z+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var L=I._msectl._sourceBuffers.video,O=I._msectl._sourceBuffers.audio;z+="#Video buffer:"+R(L)+"#Audio buffer:"+R(O)}catch{}}A.traceLog(v,z),A._reportDumpBuffer&&A._reportDumpBuffer(),B===flvjs.ErrorTypes.BUFFER_FULL||(A._flv.unload(),K)||A._isError||(J=d.ErrorCode.OtherError,q=n.get("Error_Play_Text"),j=null,N==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(L=A.getOptions().source)||L.toLowerCase().indexOf("http://")!=0&&L.toLowerCase().indexOf("https://")!=0?(J=d.ErrorCode.InvalidSourceURL,q=n.get("Error_Invalidate_Source_Widthout_Protocal"),D=!0):q=navigator.onLine?(J=d.ErrorCode.RequestDataError,n.get("Maybe_Cors_Error")):(J=d.ErrorCode.NetworkError,n.get("Error_Network_Text")):N==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?U.code=="404"?(J=d.ErrorCode.NotFoundSourceURL,q=n.get("Error_Not_Found"),j=n.get("Tip_Err_Not_found")):U.code=="403"?(J=d.ErrorCode.AuthKeyExpired,q=n.get("Error_AuthKey_Text"),D=!0):(J=d.ErrorCode.NetworkError,q=n.get("Error_Network_Text")):N==flvjs.ErrorDetails.NETWORK_TIMEOUT?(J=d.ErrorCode.LoadingTimeout,q=n.get("Error_Waiting_Timeout_Text")):N==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||N==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(J=d.ErrorCode.FormatNotSupport,q=n.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",D=!0):N===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(O=A.tag.error)&&(J=d.VideoErrorCode[O.code],q=O.code+" || "+O.message),z=function(){var H;setTimeout(function(){A.trigger(u.Private.Play_Btn_Hide)}),A.checkOnline()&&(H={mediaId:A._options&&A._options.vid?A._options.vid:"",error_code:J,error_msg:q,diagnosis_info:j},A.logError(H),H.display_msg=q,g.cityBrain&&(A.flv=null),A.trigger(u.Player.Error,H))},A._options&&A._options.isLive&&!D?(F=A._options).liveRetry>A._liveRetryCount?(A._liveRetryCount==0&&A.trigger(u.Player.OnM3u8Retry),B=F.liveRetryInterval+F.liveRetryStep*A._liveRetryCount,A._liveRetryCount++,setTimeout(function(){A._isError||A._liveRetryTimer||A._loadByUrlInner(F.source)},1e3*B)):(A.trigger(u.Player.LiveStreamStop),z()):N===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&U.code===11&&A.getCurrentTime()<A.getDuration()?(A._flv.unload(),A._flv.load(),A._flv.detachMediaElement(),A._flv.attachMediaElement(A.tag)):D?(A._flv.unload(),z()):A._reloadForVod()||z())})})}}).call(this)}).call(this,"false")},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/data":33,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../base/event/eventtype":71}],106:[function(k,E,ne){var x=k("../base/player"),b=k("./flvinjector"),g=x.extend({init:function(d,f){b.inject(this,g,x,f,function(s){}),f._native=!1,x.call(this,d,f)}});E.exports=g},{"../base/player":94,"./flvinjector":105}],107:[function(k,E,ne){(function(x){(function(){function b(){return(b=Object.assign?Object.assign.bind():function(l){for(var y=1;y<arguments.length;y++){var w,P=arguments[y];for(w in P)Object.prototype.hasOwnProperty.call(P,w)&&(l[w]=P[w])}return l}).apply(this,arguments)}var g,d=k("../../lib/object"),f=k("../../lib/io"),s=k("../../config"),o=k("../../lib/constants"),a=k("../../lib/util"),n=k("../../lib/playerutil"),u=k("../../lib/ua"),v=k("../../lang/index"),h=k("../base/event/eventtype"),c="hlsinjector.js";function _(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function m(l){this.trigger(h.Private.Timeline,{name:l,ts:performance.now()})}function T(l,y){return y<l.maxNumRetry}E.exports.inject=function(l,y,w,P,C,R){l._hls2=!1;var A,I=P.source,D=P.useHlsPluginForSafari,B=P.useHlsPlugOnMobile,N=P.optionFormat;function U(j){this._checkHlsReady();try{this._superPt.seek.call(this,j),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(j)}catch(F){console.log(F)}return this}function J(j,F){F.frag.level===this.currentLevel&&(this.off(g.Events.FRAG_BUFFERED,J),this.media.currentTime=this.media.currentTime+.01)}function q(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyHls(),this._superPt&&(y.prototype.play=this._superPt.play,y.prototype.pause=this._superPt.pause,y.prototype.initPlay=this._superPt.initPlay,y.prototype.replay=this._superPt.replay,y.prototype.stop=this._superPt.stop,y.prototype.seek=this._superPt.seek))}((C||"").length||R||(P=I,R=D,D=B,B=N,!l._hls&&n.isHls(P,B)&&(!n.canPlayHls()||n.isSafariUsedHlsPlugin(R)||D&&n.isUsedHlsPluginOnMobile())))&&(l._Type=y,l._superType=w,l._superPt=w.prototype,l._disposed=!1,y.prototype._checkHlsReady=function(){if(this._hls==null)throw new Error("please invoke this method after ready event")},l._isHls=!0,l._hls=null,l._isLoadedHls=!1,l._stopLoadAsPaused=!0,l._yekced_saved=C,y.prototype.play=function(j){return this.traceLog(c,"play::"+j),j&&this.trigger(h.Private.ManualPlay),this._checkHlsReady(),this._isManualPlay=j||!1,this.trigger(h.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._options._autoplay=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(j=this.getCurrentTime(),this._hls.startLoad(j)),this},y.prototype.pause=function(j){return this.tag&&(this._checkHlsReady(),this.tag.pause(),this._stopLoadAsPaused)&&this._hls.stopLoad(),this._isManualPause=j||!1,this},y.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},Object.defineProperty(y.prototype,"seek",{enumerable:!0,configurable:!0,get:function(){return U},set:function(){return U}}),y.prototype.getProgramDateTime=function(){if(this._checkHlsReady(),this._hls.currentLevel==-1)return"";var j=this._hls.currentLevel,j=this._hls.levels[j].details;return j&&(j=j.programDateTime,console.log("ProgramDateTime="+j),j)?new Date(j).valueOf():0},y.prototype.getCurrentPDT=function(){var j,F;return this._checkHlsReady(),this._hls.currentLevel==-1?"":this._hls.playingDate?this._hls.playingDate.getTime():(j=(F=this._hls.streamController.fragPlaying||{}).pdt)?(F=1e3*F.startPTS,j+(1e3*this.getCurrentTime()-F)):0},y.prototype._switchLevel=function(j){this.traceLog(c,"switchLevel::"+j),this.trigger(h.Player.LevelSwitch);for(var F=this._hls.levels,z=!0,K=0;K<F.length;K++)if(F[K].url==j||F[K].url[0]==j){z=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=K,console.log("Seamlessly set nextLevel to",K)):(this._hls.on(g.Events.FRAG_BUFFERED,J),this._hls.currentLevel=K,console.log("Immediately set currentLevel to",K));break}z&&(this._hls.on(g.Events.FRAG_BUFFERED,J),this._hls.currentLevel=-1),this._switchedLevel=!0;var L=this;setTimeout(function(){L.trigger(h.Player.LevelSwitched),this._switchedLevel=!1},1e3)},y.prototype._getHlsVersion=function(j){this._options.useHls2===!0?(this._hls2=!0,j()):this._options.useHls2===!1&&j()},y.prototype.initPlay=function(j){var F,z;function K(L,O){if(!L._disposed){if(L._antiRecord&&(console.log("Manual check before load source"),L._antiRecord.check()))return;var H,te=!L._hls,le=(L._destroyHls(),{xhrSetup:function(Pe,xe){Pe.withCredentials=L._options.withCredentials||!1}}),me=(L._hls2||(me=L._options.loadingTimeOut||L._options.hlsLoadingTimeOut)&&(le.manifestLoadingTimeOut=me,le.levelLoadingTimeOut=me,le.fragLoadingTimeOut=me),L._hls2&&(le.manifestLoadPolicy=b({},g.DefaultConfig.manifestLoadPolicy),le.playlistLoadPolicy=b({},g.DefaultConfig.playlistLoadPolicy),le.fragLoadPolicy=b({},g.DefaultConfig.fragLoadPolicy),me=L._options.isLive?L._options.liveRetry:L._options.vodRetry,le.manifestLoadPolicy.default.errorRetry.maxNumRetry=me,L._options.isLive&&(le.manifestLoadPolicy.default.errorRetry.shouldRetry=T),le.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=me,le.playlistLoadPolicy.default.errorRetry.maxNumRetry=me,L._options.isLive&&(le.playlistLoadPolicy.default.errorRetry.shouldRetry=T),le.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=me,le.fragLoadPolicy.default.maxLoadTimeMs=2e4,le.fragLoadPolicy.default.errorRetry.shouldRetry=T,(me=L._options.hlsOption||{}).manifestLoadPolicy&&(le.manifestLoadPolicy=d.deepMerge(le.manifestLoadPolicy,me.manifestLoadPolicy),delete me.manifestLoadPolicy),me.playlistLoadPolicy&&(le.playlistLoadPolicy=d.deepMerge(le.playlistLoadPolicy,me.playlistLoadPolicy),delete me.playlistLoadPolicy),me.fragLoadPolicy&&(le.fragLoadPolicy=d.deepMerge(le.fragLoadPolicy,me.fragLoadPolicy),delete me.fragLoadPolicy),L._options.isLive)&&!u.IS_IE11&&(le.backBufferLength=12,le.liveDurationInfinity=!0),L._options.isLive&&(L._options.hlsFrameChasing&&(le.hlsFrameChasing=L._options.hlsFrameChasing),L._options.chasingFirstParagraph&&(le.chasingFirstParagraph=L._options.chasingFirstParagraph),L._options.chasingSecondParagraph&&(le.chasingSecondParagraph=L._options.chasingSecondParagraph),L._options.chasingFirstSpeed&&(le.chasingFirstSpeed=L._options.chasingFirstSpeed),L._options.chasingSecondSpeed)&&(le.chasingSecondSpeed=L._options.chasingSecondSpeed),L._options.defaultBandwidth&&(le.defaultBandwidth=L._options.defaultBandwidth),L._options.hlsBandWidthUpCacheTime&&(le.abrBandWidthUpCacheTime=L._options.hlsBandWidthUpCacheTime),L._options.seamlessHandover&&(le.seamlessHandover=L._options.seamlessHandover),L._options.liveSyncDurationCount&&(le.liveSyncDurationCount=L._options.liveSyncDurationCount),L._options.nudgeMaxRetry&&(le.nudgeMaxRetry=L._options.nudgeMaxRetry),L._options.maxMaxBufferLength&&(le.maxMaxBufferLength=L._options.maxMaxBufferLength),L._options.maxBufferSize&&(le.maxBufferSize=L._options.maxBufferSize),L._options.fragLoadingRetryDelay&&(le.fragLoadingRetryDelay=L._options.fragLoadingRetryDelay),L._options.maxBufferLength&&(le.maxBufferLength=L._options.maxBufferLength),L._options.accessKeyId&&(le.accessKeyId=L._options.accessKeyId),L._options.accessKeySecret&&(le.accessKeySecret=L._options.accessKeySecret),L._options.securityToken&&(le.securityToken=L._options.securityToken),L._options.app&&(le.app=L._options.app),L._options.stream&&(le.stream=L._options.stream),L._options.domain&&(le.domain=L._options.domain),L._options.regionId&&(le.regionId=L._options.regionId),L._yekced_saved&&(le._yekcedxx=L._yekced_saved,le._vpk=L._yekced_saved),le.enableWorker=L._options.enableWorker,le.debug=L._options.debug,L._stopLoadAsPaused=L._options.hlsOption.stopLoadAsPaused,L._getPlayStartTime()+L._posOffset);for(H in me&&(le.startPosition=me,console.log("hls.js startPosition => ",me)),L._options.hlsOption)le[H]=L._options.hlsOption[H];u.IS_IE11&&(le.enableWorker=!1),L._hls=new g(le),A(L,L._hls),L._loadSourced=!1,L._hls.attachMedia(L.tag),L._hls.on(g.Events.INIT_PTS_FOUND,function(Pe,xe){L._initPTS=xe.initPTS}),L._hls.on(g.Events.FRAG_LOADING,function(){m.call(L,"frag_s")}),L._hls.on(g.Events.FRAG_LOADED,function(){m.call(L,"frag_f")}),L._hls.on(g.Events.FRAG_PARSED,function(){m.call(L,"frag_parsed")}),L._hls.on(g.Events.FRAG_PARSED,function(Pe,Oe){var be,Oe=(Oe==null?void 0:Oe.frag)||{},re=Oe.elementaryStreams||{},re="Frag(sn"+Oe.sn+"): "+((be=Oe.startPTS)==null?void 0:be.toFixed(3))+" -> "+((be=Oe.endPTS)==null?void 0:be.toFixed(3))+"(v:"+((be=re.video)==null||(be=be.startPTS)==null?void 0:be.toFixed(3))+"/"+((be=re.video)==null||(be=be.endPTS)==null?void 0:be.toFixed(3))+";a:"+((be=re.audio)==null||(be=be.startPTS)==null?void 0:be.toFixed(3))+"/"+((be=re.audio)==null||(re=be.endPTS)==null?void 0:re.toFixed(3))+"); Duration: "+((be=Oe.duration)==null?void 0:be.toFixed(3));L.trackLogFragBuffer&&(L.trackLogFragBuffer.push(re),10<L.trackLogFragBuffer.length)&&L.trackLogFragBuffer.shift()}),L._hls.on(g.Events.FRAG_PARSING_USERDATA,function(Pe,xe){xe&&xe.dataContent&&xe.dataContent.length?L.trigger(h.Private.SeiFrame,{dataContent:xe.dataContent,pts:xe.pts}):xe.samples.forEach(function(be){L.trigger(h.Private.SeiFrame,{dataContent:be.userDataBytes,dataContentString:be.userData,pts:be.pts,uuid:be.uuid})})}),L._hls.on(g.Events.MEDIA_ATTACHED,function(){var Pe;L._hls.on(g.Events.MANIFEST_PARSED,function(){L._initPlayBehavior(O||L._loadSourced)}),L._hls.on(g.Events.AUDIO_TRACKS_UPDATED,function(xe,be){L.trigger(h.Player.AudioTrackUpdated,be)}),L._hls.on(g.Events.MANIFEST_LOADED,function(xe,be){L.trigger(h.Player.LevelsLoaded,be)}),L._hls.on(g.Events.LEVEL_SWITCHED,function(xe,be){if(L._qualityService){for(var Oe=L._hls.levels[be.level].url,re=L._qualityService.levels,ee="",Me="",qe=0;qe<re.length;qe++)if(re[qe].Url==Oe){Me=re[qe].desc,ee=re[qe].bitrate;break}(Me||ee)&&L.trigger(h.Private.QualityChange,{levelSwitch:!0,url:Oe,bitrate:ee,desc:Me})}}),L._hls.on(g.Events.AUDIO_TRACK_SWITCH,function(xe,be){L.trigger(h.Player.AudioTrackSwitch,be),setTimeout(function(){L.trigger(h.Player.AudioTrackSwitched,be)},1e3)}),(L._options.autoplay||L._options.preload||O)&&(L._loadSourced=!0,L._levels&&1<L._levels.length?(L._hls.trigger(g.Events.MANIFEST_LOADING,{}),L._hls.trigger(g.Events.MANIFEST_LOADED,{levels:L._levels})):L._hls.loadSource(L._options.source||"__INVALID__")),te?(L._executeReadyCallback(),L._urls&&0<L._urls.length&&(L._currentPlayIndex=n.findSelectedStreamLevel(L._urls,L._options.defaultDefinition),Pe=L._urls[L._currentPlayIndex],L._options.source=Pe.Url,L.trigger(h.Private.SourceLoaded,Pe))):L.trigger(h.Private.H5_Loading_Show)})}}this.trigger(h.Private.H5_Loading_Show),a.contentProtocolMixed(I,"",N)?((F={mediaId:(F=this.getOptions()||{}).vid||"",mediaAuth:F.mediaAuth||"",error_code:o.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=v.get("Request_Block_Text"),this.trigger(h.Player.Error,F)):(z=this)._isLoadedHls&&g!==void 0?K(this,j):(this.trigger(h.Private.H5_Loading_Show),this._getHlsVersion(function(L){var O=performance.now();(function(H,te,le){var me="aliplayer-hls-min.js",Pe=((te=te||{}).hls2&&(me="aliplayer-hls2-min.js"),te.enableHlsH265&&(me="aliplayer-hls2-hevc-min.js"),""),Pe=s.domain?"https://"+s.domain+s.path+s.h5Version+"/hls/"+me:"/build/hls/"+me,xe=(te.assetPrefix&&(Pe=te.assetPrefix+"/hls/"+me),JSON.parse(x)&&(Pe="http://localhost:8080/dist/aliplayer-hls2.js"),m.call(this,"mod_hls_s"),this);f.loadJS(Pe,function(){m.call(xe,"mod_hls_f"),g=window.AliHls||window.Hls,H.apply(xe)},function(){le&&le()})}).call(z,function(){z.traceLog(c,"got js#"+parseInt(performance.now()-O)),z._isLoadedHls=!0,K(z,j)},{debug:z._options.debug,hls2:z._hls2,assetPrefix:z._options.assetPrefix,enableHlsH265:z._options.enableHlsH265},function(){var H={mediaId:z._options.vid||"",mediaAuth:z._options.mediaAuth||"",error_code:o.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};z.trigger(h.Player.Error,H)})}),this.on("error",_))},y.prototype._getbwEstimator=function(){var j,F=NaN;return F=this._hls?(j=this._hls.abrController._bwEstimator)?j.getEstimate():this._hls.bandwidthEstimate:F},y.prototype._destroyHls=function(){this._hls&&this._hls.destroy(),this._hls=null,this.trackLogFragBuffer=[]},Object.defineProperty(y.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return q},set:function(){return q}}),A=function(j,F){F.on(g.Events.MANIFEST_LOADING,function(){m.call(j,"mani_s")}),F.on(g.Events.MANIFEST_LOADED,function(){m.call(j,"mani_f")}),F.on(g.Events.DEFAULT_BANDWIDTH,function(z,K){j.trigger(h.Player.DefaultBandWidth,{width:K.width,height:K.height,bitrate:K.bitrate})}),F.on(g.Events.ERROR,function(z,K){var L="hlsjs-error::"+K.type+"#"+K.details+"#"+((L=K.networkDetails)==null?void 0:L.status)+"#"+K.reason+"#bw:"+(j._getbwEstimator()/8/1024).toFixed(2)+"KB";if(K.details==="manifestParsingError")try{L+="#"+K.networkDetails.getResponseHeader("Content-Type")+"#"+K.networkDetails.getResponseHeader("Content-Length")}catch{}else if(K.details==="fragLoadError"||K.details==="fragLoadTimeOut")L+="#"+K.frag.url+"#retry:"+((Oe=K.errorAction)==null?void 0:Oe.retryCount);else if(K.details==="internalException")try{L+="#"+K.event+"#"+((O=K.error)==null?void 0:O.message)+"#"+((te=K.error)==null?void 0:te.stack)}catch{}K.details!=="internalException"&&(L+="#"+K.error);try{L+="#"+(j==null||(le=j.trackLogFragBuffer)==null?void 0:le.toString())}catch{}if(j.traceLog(c,L),j._options&&K.details!=g.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&j._seeking!=1&&K.fatal!=0){let Me=function(){j._liveErrorHandle&&clearTimeout(j._liveErrorHandle),F.stopLoad(),j.trigger(h.Player.LiveStreamStop),j._liveErrorHandle=setTimeout(re,500)};j._clearTimeout();var O,H,te,le,me=o.ErrorCode.LoadedMetadata,Pe=v.get("Error_Play_Text"),xe=!1,be=null,Oe=!1,re=(K.details==g.ErrorDetails.MANIFEST_LOAD_ERROR||K.details==g.ErrorDetails.LEVEL_LOAD_ERROR?(xe=!0,O=K.networkDetails,H=Number(O.status),j.liveShiftSerivce&&j.liveShiftSerivce.isLiveShiftPlaying()&&H===404?(me=o.ErrorCode.NotFoundSourceURL,Pe=v.get("Error_Liveshift_M3U8_Not_Found_Text"),Oe=!0):H===404?(me=o.ErrorCode.NotFoundSourceURL,Pe=v.get("Error_Not_Found"),be=v.get("Tip_Err_Not_found")):H===403?(te=n.parseHttpHeaders(O)["x-tengine-error"])&&-1<o.RegionBlockMessages.indexOf(te)?(me=o.ErrorCode.RegionBlock,Pe=v.get("Error_Region_Block_Text"),be=v.get("Tip_Err_Blocked")):(me=o.ErrorCode.AuthKeyExpired,Pe=v.get("Error_AuthKey_Text")):Pe=H===0&&navigator.onLine?(me=o.ErrorCode.RequestDataError,Pe+""+v.get("Maybe_Cors_Error")):v.get("Error_Load_M3U8_Failed_Text")):K.details==g.ErrorDetails.MANIFEST_LOAD_TIMEOUT||K.details==g.ErrorDetails.LEVEL_LOAD_TIMEOUT?(xe=!0,Pe=v.get("Error_Load_M3U8_Timeout_Text")):K.details==g.ErrorDetails.MANIFEST_PARSING_ERROR||K.details==g.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(xe=!0,Pe=v.get("Error_M3U8_Decode_Text")):K.type==g.ErrorTypes.NETWORK_ERROR?(me=o.ErrorCode.NetworkError,Pe=v.get("Error_Network_Text")):K.type!=g.ErrorTypes.MUX_ERROR&&K.type!=g.ErrorTypes.MEDIA_ERROR||(me=o.ErrorCode.PlayDataDecode,Pe=v.get("Error_TX_Decode_Text")),Pe=Pe+"("+K.details+")",function(){var qe;setTimeout(function(){j.trigger(h.Private.Play_Btn_Hide)}),j.checkOnline()&&(qe={mediaId:(qe=j.getOptions()||{}).vid||"",mediaAuth:qe.mediaAuth||"",error_code:me,error_msg:K.details,diagnosis_info:be},j.logError(qe),qe.display_msg=Pe,j.trigger(h.Player.Error,qe))}),ee=j._options;if(ee.isLive&&Oe)Me();else if(j._hls2){if(xe&&ee.isLive)if(ee.hlsOption.progressive){if(ee.liveRetry>j._liveRetryCount)return j._liveRetryCount==0&&j.trigger(h.Player.OnM3u8Retry),j.trigger(h.Private.H5_Loading_Show),j._hls.stopLoad(),j._liveRetryCount++,void setTimeout(function(){j.traceLog(c,"retry when live error in progressive mode#"+j._liveRetryCount),j._hls.loadSource(ee.source)},1e3*j._liveRetryCount)}else((le=K.errorAction)==null?void 0:le.retryCount)===0&&j.trigger(h.Player.OnM3u8Retry);K.fatal&&Me()}else ee.isLive?ee.liveRetry>j._liveRetryCount?(j._liveRetryCount==0&&j.trigger(h.Player.OnM3u8Retry),L=ee.liveRetryInterval+ee.liveRetryStep*j._liveRetryCount,j._liveRetryCount++,j.trigger(h.Private.H5_Loading_Show),setTimeout(function(){xe&&j._loadByUrlInner(j._options.source,0,!0)},1e3*L)):Me():(xe&&-1<[403,404].indexOf(H)||!j._reloadForVod())&&re()}})})}}).call(this)}).call(this,"false")},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../../lib/object":45,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../base/event/eventtype":71}],108:[function(k,E,ne){var x=k("../base/player"),b=k("./hlsinjector"),g=x.extend({init:function(d,f){f._native=!1,b.inject(this,g,x,f),x.call(this,d,f)}});E.exports=g},{"../base/player":94,"./hlsinjector":107}],109:[function(k,E,ne){var x=["extraInfo"];function b(){return(b=Object.assign?Object.assign.bind():function(T){for(var l=1;l<arguments.length;l++){var y,w=arguments[l];for(y in w)Object.prototype.hasOwnProperty.call(w,y)&&(T[y]=w[y])}return T}).apply(this,arguments)}var g=typeof Promise>"u"?k("es6-promise").Promise:Promise,d=k("../../lib/io"),f=k("../../config"),s=k("../../lib/constants"),o=k("../../lang/index"),a=k("../base/event/eventtype"),n=k("../../lib/ua"),u=k("../base/event/eventtype"),v=k("../../lib/playerutil"),h="rtsinjector.js";function c(T){var l,y,w,P,C=this._options;C.rtsFallback&&window.Aliplayer?((l=C.rtsFallbackSource)||((y=String(C.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(y)&&(console.warn("invalid rtsFallbackType:",C.rtsFallbackType,", will use flv -> hls as fallback"),y=""),y=y||(v.isSupportFlv()?"FLV":"HLS"),w=C.source,P=!w.includes("@subvideo=no"),w=!w.includes("@subaudio=no"),w=(P={enableVideo:P,enableAudio:w}).enableVideo,P=P.enableAudio,y==="FLV"?(C.flvOption=C.flvOption||{},P||(C.flvOption.hasAudio=!1),w||(C.flvOption.hasVideo=!1)):y!=="HLS"||P||(C.mute=!0),l=function(B,I){var I=I==="FLV"?"flv":"m3u8",D=window.location.protocol,D=(-1<["http:","https:"].indexOf(D)?D:"https:")+"//",B=B.replace("artc://",D).replace("?","."+I+"?").replace("@subvideo=no","").replace("@subaudio=no","");return B.includes("?")||(B+="."+I),B.includes("auth_key")&&(B+="&rts_degrade=on"),B}(C.source,y)),this.trigger(a.Player.RtsFallback,{reason:T,fallbackUrl:l}),this.loadByUrl(l)):(this.trigger(a.Player.Error,T),this.logError(T))}function _(T){var l=this,y=(this.trigger(a.Private.H5_Loading_Show),this.trigger(a.Private.Play_Btn_Hide),this._options),w=new m(l,T);return l._rts.subscribe(y.source,b({retryTimes:y.rtsFallback?1:void 0,mediaTimeout:y.rtsLoadDataTimeout},y.rtsOption||{})).then(function(P){return w.preProcess(),l.tag.srcObject=null,P.play(l.tag),!0}).catch(function(P){return l.traceLog(h,"subError::"+JSON.stringify(P)),!1})}E.exports.inject=function(T,l,y,w,P,C){function R(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts())}T._Type=l,T._superType=y,T._superPt=y.prototype,T._disposed=!1,l.prototype._checkRtsReady=function(){if(this._rts==null)throw new Error("please invoke this method after ready event")},T._isRts=!0,T._rts=null,T._isLoadedRts=!1,T.bind_rtsErrorEventHandler=null,T.bind_rtsReconnectEventHandler=null,l.prototype.play=function(A){this.traceLog(h,"play::"+A),A&&this.trigger(a.Private.ManualPlay),this._checkRtsReady(),this._isManualPlay=A||!1;var I=this;if(this.paused())return I.trigger(a.Private.Cover_Hide),I.trigger(a.Private.Play_Btn_Hide),_.call(I).then(function(D){D&&I._startPlay()}),this},l.prototype.seek=function(A){},l.prototype.setSpeed=function(A){},l.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},Object.defineProperty(l.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return R},set:function(){return R}}),l.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},l.prototype.initPlay=function(A){var I,D=this;function B(N,U){var J;N._disposed||(J=!N._rts,N._destroyRts(),N._rts=new AliRTS.createClient({customReporter:function(q){if(Number(q.msgid)===126){var j={};try{j=JSON.parse(q.args)}catch{j={}}j.tcid&&N._rts&&(N._rts.traceid=j.tcid,N.traceLog(h,"tcid::"+j.tcid),N.trigger(a.Player.RtsTraceId,{traceId:j.tcid,source:N._options.source}))}}}),N._checkRtsSupport(function(q){(function(j){var F=this._rtsErrorEventHandler.bind(this),F=(this.bind_rtsErrorEventHandler=F,j.on("onError",F),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=F,j.on("reconnect",F)}).call(N,N._rts),N._options.autoplay?_.call(N).then(function(j){j&&N._initPlayBehavior(U)}):N._initPlayBehavior(U),J&&N._executeReadyCallback()},function(q){console.log("[RTS isSupport error]",q);var j=null,F=null;switch(Number(q.errorCode)){case 10110:j=s.ErrorCode.RtsNotSupportWebRtc,F=o.get("Rts_Err_Not_Support_Webrtc");break;case 10111:j=s.ErrorCode.RtsBrowserNotSupport,F=o.get("Rts_Err_Browser_Not_Support");break;case 10112:j=s.ErrorCode.RtsBrowserVersionTooLow,F=o.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:j=s.ErrorCode.RtsNotSupportH264,F=o.get("Rts_Err_Not_Support_H264");break;case 10114:j=s.ErrorCode.RtsCreateOfferError,F=o.get("Rts_Err_Create_Offer_Error")}return c.call(N,{error_code:j,error_msg:F}),!1}))}this._isLoadedRts?B(this,A):(this.trigger(a.Private.H5_Loading_Show),I=performance.now(),(function(N,U,J){var j="",q=this._options,j="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(q.rtsVersion||f.rtsVersion)+"/aliyun-rts-sdk.js",F=(q.assetPrefix&&(j=q.assetPrefix+"/rts/aliyun-rts-sdk.js"),q.rtsSdkUrl&&(j=q.rtsSdkUrl),this);d.loadJS(j,function(){N.apply(F)},function(){J&&J()})}).call(D,function(){this.traceLog(h,"got js#"+parseInt(performance.now()-I)),this._isLoadedRts=!0,B(this,A)},this._options.debug,function(){var N={error_code:s.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};D.trigger(a.Player.Error,N)}))},l.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?g.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(B){var I=B[0],D=B[1],B=B[2];return{rtt:I.rtt,bytesReceived:I.bytesReceived,framesDecoded:D.framesDecoded,packetsLost:(D.packetsLost||0)+(B.packetsLost||0),packetsReceived:(D.packetsReceived||0)+(B.packetsReceived||0),timestamp:I.timestamp||Date.now()}}).catch(function(A){return console.log("ERR in RTS getstats: ",A),{}}):g.resolve()},l.prototype._checkRtsSupport=function(A,I){this._options.skipRtsSupportCheck?A():this._rts.isSupport({isReceiveVideo:!0}).then(A).catch(I)},l.prototype._rtsErrorEventHandler=function(A){console.log("RTS Error:",A),A.extraInfo;var I=function(F,z){if(F==null)return{};for(var K,L={},O=Object.keys(F),H=0;H<O.length;H++)K=O[H],0<=z.indexOf(K)||(L[K]=F[K]);return L}(A,x),D=(this.traceLog(h,"rtsError::"+JSON.stringify(I)),null),B=null,N=null;switch(Number(A.errorCode)){case 10201:return;case 10101:D=s.ErrorCode.RtsSignalError,B=o.get("Rts_Err_Http_Signal_Error");break;case 10114:D=s.ErrorCode.RtsCreateOfferError,B=o.get("Rts_Err_Create_Offer_Error");break;case 10202:D=s.ErrorCode.RtsPlayUrlError,B=o.get("Rts_Err_Play_Url_Error");break;case 10203:D=s.ErrorCode.RtsSubscribeNonthing,B=o.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var U=(U=A.extraInfo)==null?void 0:U.response;if((U==null?void 0:U.status)===403){var J=U.headers["x-tengine-error"];if(J&&-1<s.RegionBlockMessages.indexOf(J)){D=s.ErrorCode.RegionBlock,B=o.get("Error_Region_Block_Text"),N=o.get("Tip_Err_Blocked");break}D=s.ErrorCode.AuthKeyExpired,B=o.get("Error_AuthKey_Text")}else N=(U==null?void 0:U.status)===404?(D=s.ErrorCode.NotFoundSourceURL,B=o.get("Error_Not_Found"),o.get("Tip_Err_Not_found")):(D=s.ErrorCode.RtsHttpRequestFaild,B=o.get("Rts_Err_Http_Request_Failed"),o.get("Tip_Err_Rts_Http_Failed"));break;case 10206:D=s.ErrorCode.RtsHttpAnswerFaild,B=o.get("Rts_Err_Http_Answer_Failed");break;case 10207:D=s.ErrorCode.RtsPlayFailedError;try{var q,j=(q=A.message.match(/after (\d+) ms/))==null?void 0:q[1]}catch{}B=o.get("Rts_Err_Play_Failed")+", "+(j?j*A.extraInfo.retryTimes/1e3+o.get("Rts_Err_No_Data_For"):A.message);break;case 12e3:D=s.ErrorCode.RtsPeerConnectionUnknown,B=o.get("Rts_Err_PeerConnection_Unknown")}I={error_code:D,error_msg:B,diagnosis_info:N,tcid:this._rts.traceid},(function(F){var z=this;z.pause(),setTimeout(function(){z.trigger(a.Private.Play_Btn_Hide)}),z.checkOnline()&&c.call(this,F)}).call(this,I)},l.prototype._rtsReconnectEventHandler=function(A){var I=this;this.traceLog(h,"rts auto reconnect::"+A.retryTimes+"#"+JSON.stringify(A.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(a.Private.H5_Loading_Show),this.trigger(a.Private.Play_Btn_Hide),this._options.autoplay&&this.one(u.Player.AutoPlayPrevented,function(){I.trigger(a.Private.Play_Btn_Hide),I.trigger(a.Private.H5_Loading_Show)}),A.retryTimes===1&&this.trigger(a.Player.OnM3u8Retry),this.trigger(a.Private.Retry,{type:"rts",source:this._options.source})}};var m=function(){function T(l,y){(this.isRetry=y)&&(this.isApple=n.IS_IOS||n.IS_SAFARI,this.player=l)}return T.prototype.preProcess=function(){var l,y,w;this.isRetry&&this.isApple&&(l=this.player.getVolume(),y=this.player.muted(),l)&&!y&&((w=this.player.tag).volume=0,this.player.one("canplay",function(){w.volume=l}))},T}()},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/ua":51,"../base/event/eventtype":71,"es6-promise":9}],110:[function(k,E,ne){var x=k("../base/player"),b=k("./rtsinjector"),g=x.extend({init:function(d,f){f.isLive&&(f._native=!1,b.inject(this,g,x,f),x.call(this,d,f))}});E.exports=g},{"../base/player":94,"./rtsinjector":109}],111:[function(b,E,ne){var x=b("../../lib/constants"),b=b("../../lib/oo").extend({init:function(g){this.player=g,this.tickhandle=null}});b.prototype.tick=function(g,d){var f=this;this.tickhandle=setTimeout(function(){f.player&&f.player.trigger(x.AuthKeyExpiredEvent),d&&d()},1e3*g)},b.prototype.clearTick=function(g){this.tickhandle&&clearTimeout(this.tickhandle)},E.exports=b},{"../../lib/constants":31,"../../lib/oo":46}],112:[function(k,E,ne){function x(m,T,l){var w=f.randomUUID(),y="https://mts."+m.domainRegion+".aliyuncs.com/?",w={AccessKeyId:m.accessId,Action:"GetLicense",MediaId:m.vid,LicenseUrl:y,data:m.data,SecurityToken:m.stsToken,Format:"JSON",Type:m.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:w};m.header&&(w.Header=m.header),y+="Signature="+f.AliyunEncodeURI(f.makeChangeSiga(w,m.accessSecret,"POST")),m=f.makeUTF8sort(w,"=","&"),b.post(y,m,function(P){P?(P=JSON.parse(P),T&&(P=P.License,T(P))):l&&l(s.createError("MPSLicense"))},function(P){if(l){var C={Code:"",Message:n.get("Error_MTS_Fetch_Urls_Text")};try{C=JSON.parse(P)}catch{}l({Code:d.ErrorCode.ServerAPIError,Message:C.Code+"|"+C.Message,sri:C.RequestId||""})}})}var b=k("../../lib/io"),g=(k("../../lib/ua"),k("../../lib/bufferbase64")),d=k("../../lib/constants"),f=k("./signature"),s=k("./util"),o=k("../../lib/url"),a=k("../../lib/playerutil"),n=k("../../lang/index"),u=k("../base/event/eventtype");function v(m){window.console.error("The license request failed.")}function h(m){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",m)}function c(m){window.console.log("Decryption key was added to session.")}function _(m,T,l){l.addEventListener(m,function(){T(arguments[0])},!1)}E.exports.requestLicenseKey=function(m){var T=m;return T._options.vid&&(T.__vid=T._options.vid),function(l,y){var w,P,C=T._options,R=T._getDRMEncryptItem();R&&(w={vid:T.__vid,accessId:C.accId,accessSecret:C.accSecret,stsToken:C.stsToken,domainRegion:C.domainRegion,authInfo:C.authInfo,encryptionType:R.encryptionType},R.encryptionType==d.EncryptionType.Widevine?w.data=g.encode(l.message):R.encryptionType==d.EncryptionType.PlayReady&&(C=g.unpackPlayReady(l.message),w.data=C.changange,C.header)&&(w.header=JSON.stringify(C.header)),console.log(w.data),l=T.__licenseKeys,P=T.__vid+R.Url,l&&l[P],x(w,function(A){T.__licenseKeys||(T.__licenseKeys={}),10<w.data.length&&(T.__licenseKeys[P]=A),A=g.decode(A),y(A)},function(A){A={mediaId:T.__vid,error_code:A.Code,error_msg:A.Message},T.logError(A),T.trigger("error",A)}))}},E.exports.loadCertificate=function(A,R){var l,y,w,P=new XMLHttpRequest,C=(P.addEventListener("load",(function(I,N){var B,N=N.target;if(N.status!==200){var J=d.ErrorCode.DrmLicenseRequestFailed,U=n.get("Error_Drm_License_Request_Failed"),J={mediaId:this._options.vid||"",error_code:J,error_msg:N.response};player.logError(J),J.display_msg=U,player.trigger(u.Player.Error,J)}else{try{B=this._options.isLive?JSON.parse(N.response).Response.B64ServCert:JSON.parse(JSON.parse(N.response).DRMCertInfo).b64ServCert}catch(q){console.log(q)}U=f.base64DecodeUint8Array(B),J=(function(q,z){var F=z.target,z=z.initData,K=f.arrayToString(z).split("skd://")[1].split("?")[0],L=f.stringToArray(K);if(z=function(xe,H,te){typeof H=="string"&&(H=stringToArray(H));var le=0,me=new ArrayBuffer(xe.byteLength+4+H.byteLength+4+te.byteLength),Pe=new DataView(me),xe=(new Uint8Array(me,0,xe.byteLength).set(xe),le+=xe.byteLength,Pe.setUint32(le,H.byteLength,!0),le+=4,new Uint16Array(me,le,H.length));return xe.set(H),le+=xe.byteLength,Pe.setUint32(le,te.byteLength,!0),le+=4,new Uint8Array(me,le,te.byteLength).set(te),new Uint8Array(me,0,me.byteLength)}(z,L,q),F.webkitKeys||(function(){{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"}}(),F.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!F.webkitKeys)throw"Could not create MediaKeys";if(L=F.webkitKeys.createSession("video/mp4",z),!L)throw"Could not create key session";L.contentId=K,_("webkitkeymessage",(function(me){var H=this,te=me.target,Oe=me.message,le=new XMLHttpRequest,me=(me.sessionId,le.responseType="text",le.session=te,le.addEventListener("load",(function(ee){ee=ee.target,Me=this._options.isLive?JSON.parse(ee.response).Response.B64License:JSON.parse(JSON.parse(ee.response).License).b64License;var Me=f.base64DecodeUint8Array(Me),Me=f.Uint8ArrayToString(Me);Me.substr(0,5)==="<ckc>"&&Me.substr(-6)==="</ckc>"&&(Me=Me.slice(5,-6)),Me=f.base64DecodeUint8Array(Me),ee.session.update(Me)}).bind(this),!1),le.addEventListener("error",v,!1),btoa("spc="+f.base64EncodeUint8Array(Oe)+"&assetId="+encodeURIComponent(te.contentId))),Pe={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:f.ISODateString(new Date),SignatureNonce:f.randomUUID(),AccessKeyId:H._options.accessKeyId,SecurityToken:H._options.securityToken,CertId:H._options.certId};H._options.isLive?(Pe.RegionId=H._options.region,Pe.Action="DescribeDRMLicense",Pe.Version="2016-11-01",Pe.CdmData=me,Pe.Type="fairplay",Pe.Domain=o.parseUrl(H._options.source).hostname):(Pe.region=H._options.region,Pe.Action="GetDRMLicense",Pe.Version="2017-03-21",Pe.VideoId=H._options.vid,Pe.CDMData=me,Pe.DRMType="FairPlay");var xe,be,Oe="Signature="+f.AliyunEncodeURI(f.makeChangeSiga(Pe,H._options.accessKeySecret,"POST"));te=H._options.isLive?"https://"+a.getLiveHostByRegion(H._options.region)+"/?"+Oe:"https://vod."+H._options.region+".aliyuncs.com/?"+Oe;for(be in le.open("POST",te,!0),le.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Pe){var re;Pe.hasOwnProperty(be)&&(re=Pe[be],xe=xe?xe+"&"+f.AliyunEncodeURI(be)+"="+f.AliyunEncodeURI(re):f.AliyunEncodeURI(be)+"="+f.AliyunEncodeURI(re))}le.send(xe)}).bind(this),L),_("webkitkeyadded",c,L),_("webkitkeyerror",h,L)}).bind(this,U),N=(this._fairPlayHandlers.onNeedKey=J,(function(q){window.console.error("A video playback error occurred")}).bind(this)),this._fairPlayHandlers.onError=N,this.tag.addEventListener("webkitneedkey",J,!1),this.tag.addEventListener("error",N,!1),this.tag.src=this._options.source}I&&I()}).bind(A,R),!1),P.addEventListener("error",(function(I){window.console.error("Failed to retrieve the server certificate.")}).bind(A),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:f.ISODateString(new Date),SignatureNonce:f.randomUUID(),AccessKeyId:A._options.accessKeyId,SecurityToken:A._options.securityToken,CertId:A._options.certId}),R=(A._options.isLive?(C.RegionId=A._options.region,C.Action="DescribeDRMCertificate",C.Version="2016-11-01"):(C.region=A._options.region,C.Action="GetDRMCertInfo",C.Version="2017-03-21",C.VideoId=A._options.vid),"Signature="+f.AliyunEncodeURI(f.makeChangeSiga(C,A._options.accessKeySecret,"POST"))),A=A._options.isLive?"https://"+a.getLiveHostByRegion(A._options.region)+"/?"+R:"https://vod."+A._options.region+".aliyuncs.com/?"+R;for(l in P.open("POST",A,!0),P.setRequestHeader("Content-type","application/x-www-form-urlencoded"),C)C.hasOwnProperty(l)&&(y=C[l],w=w?w+"&"+f.AliyunEncodeURI(l)+"="+f.AliyunEncodeURI(y):f.AliyunEncodeURI(l)+"="+f.AliyunEncodeURI(y),console.log(y));P.send(w)},E.exports.getRequestUrl=function(l,T){var l={AccessKeyId:T._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:f.ISODateString(new Date),SignatureNonce:f.randomUUID(),SecurityToken:T._options.securityToken,RegionId:T._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:l,Domain:o.parseUrl(T._options.source).hostname},y=(T._options.widevineCertId&&(l.CertId=T._options.widevineCertId),"Signature="+f.AliyunEncodeURI(f.makeChangeSiga(l,T._options.accessKeySecret,"POST")));return{url:"https://"+a.getLiveHostByRegion(T._options.region)+"/?"+y,data:f.makeUTF8sort(l,"=","&"),jsonData:f.makeUTF8sort(l,"=","&","json")}},E.exports.postData=function(y,T){var l=f.randomUUID(),l={AccessKeyId:T._options.accessKeyId,VideoId:T._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:l,SecurityToken:T._options.securityToken,region:T._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:y},y=(T._options.widevineCertId&&(l.CertId=T._options.widevineCertId),"Signature="+f.AliyunEncodeURI(f.makeChangeSiga(l,T._options.accessKeySecret,"POST")));return{url:"https://vod."+T._options.region+".aliyuncs.com/?"+y,data:f.makeUTF8sort(l,"=","&"),jsonData:f.makeUTF8sort(l,"=","&","json")}},E.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":26,"../../lib/bufferbase64":28,"../../lib/constants":31,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/url":52,"../base/event/eventtype":71,"./signature":118,"./util":120}],113:[function(k,E,ne){var x=k("../../lib/io"),b=k("../../lib/constants"),g=k("../../lib/data"),d=k("./util");E.exports.getDataByAuthInfo=function(f,s,o,a){f={playAuth:f.playAuth,requestId:f.requestId},x.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+function(n){return n.requestId=g.guid(),Object.keys(n).reduce(function(u,v){return u+(u?"&":"?")+v+"="+encodeURIComponent(n[v])},"")}(f),function(n){if(n)if(n=JSON.parse(n),n.httpStatusCode!==200)a&&a({Code:b.ErrorCode.ServerAPIError,Message:n.httpStatusCode+"|"+n.code,sri:n.requestId});else{for(var u=n.data.PlayInfoList,v=[],h=u.length-1;0<=h;--h)u[h].Definition==="AUTO"&&(v=[u.splice(h,1)[0]]);var c,_=null;(_=(_=v.length===0?d.objectPlayerMessageSort(u,s):d.objectPlayerMessageSort(v)).map(function(m){return m.format==="m3u8"&&(m.Url=m.Url+"&_ext=.m3u8"),m}))&&o&&(c=n.data.VideoBase||{},o({videoId:c.VideoId,userId:c.UserId,requestId:n.requestId,urls:_,encryptUrlArr:[],thumbnailUrl:"",coverUrl:c.CoverURL,playInfoAry:u,textTracks:n.data.SubtitlesList}))}else a&&a(d.createError("SaaS"))},function(n){n&&typeof n=="string"&&-1<n.indexOf("Invalid CORS request")?a&&a({Code:b.ErrorCode.ServerAPIError,Message:n}):a&&a(d.createError("SaaS"))})}},{"../../lib/constants":31,"../../lib/data":33,"../../lib/io":43,"./util":120}],114:[function(d,E,ne){var x=d("./saasplayer"),b=d("./light"),g=d("../base/event/eventtype"),d=x.extend({init:function(f,s){x.call(this,f,s),this.service=b,this.loadByLightSaas()}});d.prototype.loadByLightSaas=function(f){var s=this._options,o={playAuth:s.mediaAuth,defaultDefinition:s.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:s.mediaAuth}}),this.loadData(o,f)},d.prototype.replayByMediaAuth=function(f){this.trigger(g.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(g.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=f,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},E.exports=d},{"../base/event/eventtype":71,"./light":113,"./saasplayer":117}],115:[function(k,E,ne){var x=k("../../lib/io"),b=k("../../lib/constants"),g=k("./signature"),d=k("./util"),f=k("../../lang/index"),s=k("../../lib/ua"),o=function(n,u){for(var v="",h=(n.sort(function(l,y){return l=parseInt(l.bitrate),y=parseInt(y.bitrate),u=="desc"?y<l?-1:l<y?1:void 0:l<y?-1:y<l?1:void 0}),n.length),c=0;c<h;c++){var _=n[c],m=b.QualityLevels[_.definition],T="",T=m===void 0?_.bitrate:v==m?m+_.bitrate:m;_.desc=T,v=m}},a=function(n,u){for(var v="",h=(n.sort(function(l,y){return l=parseInt(l.width),y=parseInt(y.width),u=="desc"?y<l?-1:l<y?1:void 0:l<y?-1:y<l?1:void 0}),n.length),c=0;c<h;c++){var _=n[c],m=b.QualityLevels[_.definition],T="",T=m===void 0?"":v==m?m+_.height:m;_.desc=T,v=m}};E.exports.getDataByAuthInfo=function(_,u,v,h){g.returnUTCDate(),g.randomUUID();var c=g.randomUUID(),c={AccessKeyId:_.accessId,Action:"PlayInfo",MediaId:_.vid,Formats:_.format,AuthInfo:_.authInfo,AuthTimeout:_.authTimeout||b.AuthKeyExpired,IncludeSnapshotList:_.includeSnapshotList,Rand:_.rand,SecurityToken:_.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:s.IS_CHROME?"Chrome":s.IS_EDGE?"Edge":s.IS_IE11?"IE":s.IS_SAFARI?"Safari":s.IS_FIREFOX?"Firefox":"",SignatureNonce:c},c=(_.hlsUriToken&&(_.MtsHlsUriToken=_.hlsUriToken),_.playConfig&&(c.PlayConfig=JSON.stringify(_.playConfig)),g.makeUTF8sort(c,"=","&")+"&Signature="+g.AliyunEncodeURI(g.makeChangeSiga(c,_.accessSecret))),_="https://mts."+_.domainRegion+".aliyuncs.com/?"+c;x.get(_,function(m){var T,l,y;m?(T=(m=JSON.parse(m)).PlayInfoList.PlayInfo,l="",(y=m.SnapshotList?m.SnapshotList.Snapshot:[])&&0<y.length&&(l=y[0].Url),y=function(w,P){for(var C=[],R=[],A=[],I=[],D=w.length-1;0<=D;D--){var B=w[D];(B.format=="mp4"?R:B.format=="mp3"?A:B.format=="m3u8"?C:I).push(B)}return 0<A.length?(o(A,P),A):0<R.length?(a(R,P),R):0<C.length?(a(C,P),C):(a(I,P),I)}(T,u),v&&v({requestId:m.RequestId,urls:y,thumbnailUrl:l})):h&&h(d.createError("MPS"))},function(m){if(h){var T={Code:"",Message:f.get("Error_MTS_Fetch_Urls_Text")};try{T=JSON.parse(m)}catch{}h({Code:b.ErrorCode.ServerAPIError,Message:T.Code+"|"+T.Message,sri:T.RequestId||""})}})}},{"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../../lib/ua":51,"./signature":118,"./util":120}],116:[function(g,E,ne){var x=g("./saasplayer"),b=(g("../../lib/constants"),g("./mts")),g=x.extend({init:function(d,f){x.call(this,d,f),this.service=b,this.loadByMts()}});g.prototype.loadByMts=function(d){var f={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(f,d)},g.prototype.replayByVidAndAuthInfo=function(d,f,s,o,a,n){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(d,f,s,o,a,n)},g.prototype.reloadNewVideoInfo=function(d,f,s,o,a,n){if(this.trigger("error_hide"),this._options.source="",d&&(this._options.vid=d,this._options.accId=f,this._options.accessSecret=s,this._options.stsToken=o,this._options.domainRegion=n,this._options.authInfo=a),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("vidaccIdaccessSecretstsTokendomainRegionauthInfo");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:d}}),this.loadByMts(!0)},E.exports=g},{"../../lib/constants":31,"./mts":115,"./saasplayer":117}],117:[function(k,E,ne){var x=k("../base/player"),b=k("../audio/audioplayer"),g=(k("../../lib/event"),k("../../lib/io")),d=k("../../lib/constants"),f=k("./signature"),s=k("./authkeyexpiredhandle"),o=k("../hls/hlsinjector"),a=k("../flv/flvinjector"),n=k("../drm/drminjector"),u=k("../sw/swinjector"),v=(k("../../lib/cookie"),k("../../lang/index")),h=k("../../lib/ua"),c=k("../../config"),_=k("../../lib/playerutil"),m=k("../base/event/eventtype"),T=k("../../protected/anti-injector-protected"),l=x.extend({init:function(P,C){h.IS_PC&&T(C,this),this._authKeyExpiredHandle=new s(this),x.prototype._videoCreateEl||(x.prototype._videoCreateEl=x.prototype.createEl),C.format=="mp3"?(C.height="auto",C.mediaType="audio",x.prototype.createEl=b.prototype.createEl,b.call(this,P,C),l.prototype.play=x.prototype.play,l.prototype.pause=x.prototype.pause,l.prototype.initPlay=x.prototype.initPlay,l.prototype.replay=x.prototype.replay,l.prototype.stop=x.prototype.stop,l.prototype.seek=x.prototype.seek):(x.prototype.createEl=x.prototype._videoCreateEl,C._native=!1,x.call(this,P,C))}});function y(){var P,C=!1;return Number(this._options.encryptType)!==1?(P={error_code:d.ErrorCode.InvalidParameter,error_msg:v.get("Error_Not_Support_encrypt_Text")},this.logError(P),this.trigger("error",P),!0):C}function w(){var P=_.checkSecuritSupport();if(P)return this._mtsError_message(this,{Code:d.ErrorCode.EncrptyVideoNotSupport,Message:P,display_msg:P},""),!0}l.prototype.loadData=function(P,C){var R,A,I;this._options.encryptType!=1?this._loadData(P,C):(R="aliplayer-vod-min.js",A="",A=c.domain?"https://"+c.domain+c.path+c.h5Version+"/hls/"+R:"/build/hls/"+R,this.trigger(m.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),I=this,g.loadJS(A,function(){I.trigger(m.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),I._loadData(P,C)}))},l.prototype._loadData=function(P,C){var R,A=new Date().getTime(),I=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),P.format!=""&&P.format!="m3u8"||this._options.encryptType!=1?P.rand=f.randomUUID():(R=_rtsneg(I._vdnct6f===3?P.vid:void 0),P.rand=_dnaRekam(R,I._vdnct6f)),this._options.thumbnailUrl&&(P.thumbnailUrl=this._options.thumbnailUrl),this.trigger(m.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,P,this._options.qualitySort,function(D){if(I.trigger(m.Private.PlayInfoLoaded,D),D.userId&&(I._options.from=D.userId),D.videoId&&I._monitor&&I._monitor.updateLightSaasVideoId(D.videoId),D.textTracks&&D.textTracks.length&&(B=_.unqiueTextTracks(D.textTracks),I.trigger(m.Private.TextTrackFounded,{from:"saas",textTracks:B})),D.urls&&D.urls.length==0)I._mtsError_message(I,{Code:d.ErrorCode.URLsIsEmpty,Message:v.get("Error_Vod_URL_Is_Empty_Text")+(P.format?"(format:"+P.format+")":"")},"");else{I.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-A,mi:JSON.stringify(function(z){for(var K=[],L=0;L<z.length;L++)K.push({width:z[L].width,height:z[L].height,definition:z[L].definition,format:z[L].format,encryptionType:z[L].encryptionType,duration:z[L].duration});return K}(D.urls))}),I._urls=D.urls,I._currentPlayIndex=_.findSelectedStreamLevel(I._urls,P.defaultDefinition);var B=(N=D.urls[I._currentPlayIndex]).Url;if(I._vodDuration=N.duration||0,I._options.source=B,I.encType="",I.trigger(m.Private.PREPARE,N.definition),I.UI.cover&&D.coverUrl&&!I._options.cover&&I.setCover(D.coverUrl),_.isHls(B))if(D&&D.playInfoAry&&0<D.playInfoAry.length&&D.playInfoAry[0].EncryptType=="Widevine-FairPlay")n.inject(I,l,x.prototype,I._options);else{if(D.encryptUrlArr&&0<D.encryptUrlArr.length){for(var N,U=[],J=!1,q=0;q<D.encryptUrlArr.length;++q)if((N=D.encryptUrlArr[q]).encryptionType===d.EncryptionType.Private){if(y.call(I))return;if(J||w.call(I))return void(J=!0);var j=_yekced(R,N.rand,N.plaintext);U.push({url:N.Url,secData:j})}}else if(U="",N.encryptionType==d.EncryptionType.Private){if(y.call(I)||w.call(I))return;I.encType=N.encryptionType,U=_yekced(R,N.rand,N.plaintext)}var F=h.IS_IOS&&parseFloat(h.IOS_FULL_VERSION)<17.1;(U&&(I._options.useSW||F)?u:(I._hls&&(I._hls.destroy(),I._hls=null),o)).inject(I,l,x,I._options,U)}else _.isFlv(B)?a.inject(I,l,x,I._options):_.isDash(B)?(console.log("isDash"),n.inject(I,l,x,I._options)):I._player._executeReadyCallback();I._authKeyExpiredHandle.tick(d.AuthKeyRefreshExpired),I.trigger(m.Private.SourceLoaded,N),I.initPlay(C),I.trigger(m.Private.ChangeURL,{from:"saas"}),D.thumbnailUrl&&I._thumbnailService.get(D.thumbnailUrl),F=I._player._isFlv,B=-1<I._player.getOptions().source.indexOf("mp4"),I._player.encType==1||F||B||(h.IS_IOS||h.IS_MAC_SAFARI||h.IS_X5||h.IS_EDGE)&&(I._player._executeReadyCallback(),I._urls.length)&&I.trigger(m.Private.SourceLoaded,N)}},function(D){var B;-1<((B=D.Message)==null?void 0:B.indexOf('The specified parameter "Rand" is not valid'))&&y.call(I)||I._mtsError_message(I,D,"")})},l.prototype._changeStream=function(P,C){this._urls.length>P&&(this._loadByUrlInner(this._urls[P].Url,this.getCurrentTime(),!0),this._currentPlayIndex=P,this.trigger(m.Private.QualityChange,C||v.get("Quality_Change_Fail_Switch_Text")))},l.prototype._getLowerQualityLevel=function(){if(this._urls.length!=0&&this._currentPlayIndex!=-1){if(this.options().qualitySort=="asc"){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1}}return""},l.prototype._mtsError_message=function(P,C,R){P._serverRequestId=C.sri,P.trigger(m.Private.H5_Loading_Hide),C.Code=C.Code||C.code,C.Message=C.Message||C.message;var A=C.Code||"OTHER_ERR_CODE",I=C.Message||"OTHER_ERR_MSG",D=(d.ErrorCode.ServerAPIError,C.display_msg||""),B=(-1<I.indexOf("InvalidParameter.Rand")||-1<I.indexOf('"Rand" is not valid.')?(d.ErrorCode.EncrptyVideoNotSupport,D=v.get("Error_Encrypt_Fetch_Failed_Text")):-1<I.indexOf("SecurityToken.Expired")?(d.ErrorCode.AuthKeyExpired,D=v.get("Error_Playauth_Expired_Text")):-1<I.indexOf("InvalidVideo.NoneStream")?(d.ErrorCode.URLsIsEmpty,D=v.get("Error_Fetch_NotStream")+"("+P._options.format+"|"+P._options.definition+")"):-1<I.indexOf("DataNotFound")&&(d.ErrorCode.MediaNotFound,D=v.get("Error_Fetch_Media_Not_Found")),P._options.vid||""),B=(P._options.from,{mediaId:B,mediaAuth:P._options.mediaAuth||"",error_code:A,error_msg:I});C.sri&&(B.sri=C.sri),P.logError(B),B.display_msg=D&&D===I?D:(D||v.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+I,P.trigger("error",B),console.log("PrismPlayer Error: "+R+"! error_msg :"+I+";")},E.exports=l},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/cookie":32,"../../lib/event":36,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/ua":51,"../../protected/anti-injector-protected":135,"../audio/audioplayer":69,"../base/event/eventtype":71,"../base/player":94,"../drm/drminjector":102,"../flv/flvinjector":105,"../hls/hlsinjector":107,"../sw/swinjector":133,"./authkeyexpiredhandle":111,"./signature":118}],118:[function(k,E,ne){var x=k("crypto-js/hmac-sha1"),b=k("crypto-js/enc-base64"),g=k("crypto-js/enc-utf8");E.exports.randomUUID=function(){for(var d=[],f="0123456789abcdef",s=0;s<36;s++)d[s]=f.substr(Math.floor(16*Math.random()),1);return d[14]="4",d[19]=f.substr(3&d[19]|8,1),d[8]=d[13]=d[18]=d[23]="-",d.join("")},E.exports.returnUTCDate=function(){var u=new Date,d=u.getUTCFullYear(),f=u.getUTCMonth(),s=u.getUTCDate(),o=u.getUTCHours(),a=u.getUTCMinutes(),n=u.getUTCSeconds(),u=u.getUTCMilliseconds();return Date.UTC(d,f,s,o,a,n,u)},E.exports.AliyunEncodeURI=function(d){return d=encodeURIComponent(d),d=(d=(d=d.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},E.exports.makesort=function(d,f,s){if(!d)throw new Error("PrismPlayer Error: vid should not be null!");var o=[];for(v in d)o.push(v);for(var a=o.sort(),n="",u=a.length,v=0;v<u;v++)n==""?n=a[v]+f+d[a[v]]:n+=s+a[v]+f+d[a[v]];return n},E.exports.makeUTF8sort=function(d,f,s){if(!d)throw new Error("PrismPlayer Error: vid should not be null!");var o=[];for(v in d)o.push(v);for(var a=o.sort(),n="",u=a.length,v=0;v<u;v++){var h=E.exports.AliyunEncodeURI(a[v]),c=E.exports.AliyunEncodeURI(d[a[v]]);n==""?n=h+f+c:n+=s+h+f+c}return n},E.exports.makeChangeSiga=function(d,f,s){if(d)return b.stringify(x((s=s||"GET")+"&"+E.exports.AliyunEncodeURI("/")+"&"+E.exports.AliyunEncodeURI(E.exports.makeUTF8sort(d,"=","&")),f+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},E.exports.ISODateString=function(d){function f(s){return s<10?"0"+s:s}return d.getUTCFullYear()+"-"+f(d.getUTCMonth()+1)+"-"+f(d.getUTCDate())+"T"+f(d.getUTCHours())+":"+f(d.getUTCMinutes())+":"+f(d.getUTCSeconds())+"Z"},E.exports.encPlayAuth=function(d){if(d=g.stringify(b.parse(d)))return JSON.parse(d);throw new Error("playuth")},E.exports.encRsa=function(){},E.exports.stringToArray=function(d){for(var f=new ArrayBuffer(2*d.length),s=new Uint16Array(f),o=0,a=d.length;o<a;o++)s[o]=d.charCodeAt(o);return s},E.exports.Uint8ArrayToString=function(d){for(var f="",s=0;s<d.length;s++)f+=String.fromCharCode(d[s]);return f},E.exports.arrayToString=function(d){return d=new Uint16Array(d.buffer),String.fromCharCode.apply(null,d)},E.exports.base64DecodeUint8Array=function(d){var f=window.atob(d),s=f.length,o=new Uint8Array(new ArrayBuffer(s));for(i=0;i<s;i++)o[i]=f.charCodeAt(i);return o},E.exports.base64EncodeUint8Array=function(d){for(var f,s,o,a,n,u,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;c<d.length;)o=(f=d[c++])>>2,a=(3&f)<<4|(f=c<d.length?d[c++]:Number.NaN)>>4,n=(15&f)<<2|(s=c<d.length?d[c++]:Number.NaN)>>6,u=63&s,isNaN(f)?n=u=64:isNaN(s)&&(u=64),h+=v.charAt(o)+v.charAt(a)+v.charAt(n)+v.charAt(u);return h}},{"crypto-js/enc-base64":4,"crypto-js/enc-utf8":5,"crypto-js/hmac-sha1":6}],119:[function(k,E,ne){var x=k("../../lib/io"),b=k("../../lib/constants"),g=k("./signature"),d=k("./util"),f=k("../../lang/index");E.exports.getPlayAuth=function(v,o,a,n){g.randomUUID();var u=g.randomUUID(),u={AccessKeyId:v.accessKeyId,Action:"GetVideoPlayAuth",VideoId:v.vid,AuthTimeout:b.AuthInfoExpired,SecurityToken:v.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:u},u=g.makeUTF8sort(u,"=","&")+"&Signature="+g.AliyunEncodeURI(g.makeChangeSiga(u,v.accessKeySecret)),v="https://vod."+v.region+".aliyuncs.com/?"+u;x.get(v,function(h){h?(h=JSON.parse(h),o&&o(h.PlayAuth)):a&&a(d.createError(""))},function(h){if(a){var c={Code:"",Message:f.get("Fetch_Playauth_Error")};try{(c=JSON.parse(h)).Code}catch{}a({Code:b.ErrorCode.ServerAPIError,Message:c.Code+"|"+c.Message,sri:c.RequestId,display_msg:f.get("Fetch_Playauth_Error",n)})}})}},{"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"./signature":118,"./util":120}],120:[function(k,E,ne){var x=k("../../lib/constants");E.exports.createError=function(b,g){return{requestId:"",code:g||"",message:b}},E.exports.getItem=function(b){var g={};return g.width=b.Width,g.height=b.Height,g.definition=b.Definition,g.Url=b.PlayURL,g.format=b.Format,g.desc=x.QualityLevels[g.definition],g.encryptionType=x.VodEncryptionType[b.EncryptType],g.plaintext=b.Plaintext,g.rand=b.Rand,g.encrypt=b.Encrypt,g.duration=b.Duration,g.bitrate=b.Bitrate,g},E.exports.objectPlayerMessageSort=function(b,g){for(var d=[],f=[],s=[],o=[],a=b.length-1;0<=a;a--){var n=b[a],n=E.exports.getItem(n);(n.format=="mp4"?f:n.format=="mp3"?s:n.format=="m3u8"?d:o).push(n)}var u=[],u=0<s.length?s:0<f.length?f:0<d.length?d:o;return g=="asc"&&u.reverse(),u}},{"../../lib/constants":31}],121:[function(k,E,ne){var x=k("../../lib/io"),b=k("../../lib/constants"),g=k("./signature"),d=k("./util"),f=k("../../config"),s=k("../../lang/index"),o=k("../base/event/eventtype"),a="saas/vod.js";E.exports.getDataByAuthInfo=function(n,u,v,h){g.randomUUID();var c=g.randomUUID(),c={AccessKeyId:n.accessId,Action:"GetPlayInfo",VideoId:n.vid,Formats:n.format,AuthTimeout:n.authTimeout||b.AuthKeyExpired,Rand:n.rand,SecurityToken:n.stsToken,StreamType:n.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:c,PlayerVersion:f.h5Version,Channel:"HTML5"},c=(n.definition==="AUTO"?c.ResultType="Multiple":n.definition&&(c.Definition=n.definition),n.authInfo&&(c.AuthInfo=n.authInfo),n.outputType&&(c.OutputType=n.outputType),n.playConfig&&(c.PlayConfig=JSON.stringify(n.playConfig)),n.reAuthInfo&&(c.ReAuthInfo=JSON.stringify(n.reAuthInfo)),g.makeUTF8sort(c,"=","&")+"&Signature="+g.AliyunEncodeURI(g.makeChangeSiga(c,n.accessSecret))),c="https://vod."+n.domainRegion+".aliyuncs.com/?"+c,_=(this.trigger(o.Private.Timeline,{name:"vod_s",ts:performance.now()}),this);x.get.call(this,c,function(m){if(_.trigger(o.Private.Timeline,{name:"vod_f",ts:performance.now()}),_.traceLog(a,"Vod request ok."+m),m){for(var m=JSON.parse(m),T="",l=m.VideoBase.ThumbnailList,y=(l&&l.Thumbnail&&0<l.Thumbnail.length?T=l.Thumbnail[0].URL:n.thumbnailUrl&&(T=String(n.thumbnailUrl)),m.PlayInfoList.PlayInfo),w=[],P=[],C=y.length-1;0<=C;--C)y[C].Definition==="AUTO"?(_.getOptions().isVBR=!0,w=[y.splice(C,1)[0]]):y[C].Encrypt===1&&P.push(y[C]);l=null,P=w.length===0?(l=d.objectPlayerMessageSort(y,u),[]):(l=d.objectPlayerMessageSort(w),d.objectPlayerMessageSort(P)),l&&v&&v({requestId:m.RequestId,urls:l,encryptUrlArr:P,thumbnailUrl:T,coverUrl:m.VideoBase.CoverURL,playInfoAry:y})}else h&&h(d.createError(""))},function(m){if(_.traceLog(a,"Vod request error::"+m),h){var T={Code:"",Message:s.get("Error_Vod_Fetch_Urls_Text")};try{T=JSON.parse(m)}catch{}h({Code:b.ErrorCode.ServerAPIError,Message:T.Code+"|"+T.Message,sri:T.RequestId||""})}})}},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../base/event/eventtype":71,"./signature":118,"./util":120}],122:[function(a,E,ne){var x=a("./saasplayer"),b=a("../../lib/constants"),g=a("./vod"),d=a("./signature"),f=(a("./authkeyexpiredhandle"),a("./ststoken"),a("../../lib/io")),s=a("../../config"),o=(a("../../lib/playerutil"),a("../base/event/eventtype")),a=x.extend({init:function(n,u){x.call(this,n,u),this.service=g,this.loadByVod()}});a.prototype.loadByVod=function(n){var u,v,h;typeof _apesrap<"u"?this._loadByVod(n):(typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),u="aliplayer-vod-p-min.js",v="",v=s.domain?"https://"+s.domain+s.path+s.h5Version+"/hls/"+u:"/build/hls/"+u,this.trigger(o.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),h=this,f.loadJS(v,function(){h.trigger(o.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),h._loadByVod(n)}))},a.prototype._loadByVod=function(n){var u="",v="",h="",c="",_="";if(this._options.accessKeyId&&this._options.accessKeySecret)u=this._options.accessKeyId,v=this._options.accessKeySecret,h=this._options.securityToken,c=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var m=_apesrap(this._options.playauth,this._options.vid),T=(this._vdnct6f=m.v,m.value),l=d.encPlayAuth(T),u=l.AccessKeyId,v=l.AccessKeySecret,h=l.SecurityToken,c=l.Region,_=l.AuthInfo}catch(y){return console.log("e",y),m={Code:b.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth"},void this._mtsError_message(this,m,T)}this._options.from=l.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(u,v,h,c,_,n)},a.prototype.replayByVidAndPlayAuth=function(n,u){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(o.Private.UserTrackReset),this._options.source="",this._options.vid=n,this._options.playauth=u,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._posOffset=this._getSubVideoConfig().start||0,this._clearTimeout(),this.loadByVod(!0)},a.prototype.updateSourcesByVidAndPlayAuth=function(n,u){var v,h,c;typeof _apesrap<"u"?this._updateSourcesByVidAndPlayAuth(n,u):(v="aliplayer-vod-p-min.js",h="",h=s.domain?"https://"+s.domain+s.path+s.h5Version+"/hls/"+v:"/build/hls/"+v,c=this,f.loadJS(h,function(){c._updateSourcesByVidAndPlayAuth(n,u)}))},a.prototype._updateSourcesByVidAndPlayAuth=function(n,u){if(n!=this._options.vid)console.log("vid");else{this._options.vid=n,this._options.playauth=u;try{var v=_apesrap(this._options.playauth,this._options.vid),h=(this._vdnct6f=v.v,v.value),c=d.encPlayAuth(h)}catch{return void console.log("playauth")}var u={vid:n,accessId:c.AccessKeyId,accessSecret:c.AccessKeySecret,stsToken:c.SecurityToken,domainRegion:c.Region,authInfo:c.AuthInfo,playDomain:c.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},_=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(u,this._options.qualitySort,function(T){_._serverRequestId=T.requestId,T.urls.length!=0&&(_._urls=T.urls),_._authKeyExpiredHandle.tick(b.AuthKeyRefreshExpired)},function(T){console.log(T)})}},a.prototype.reloaduserPlayInfoAndVidRequestMts=function(n,u){this.replayByVidAndPlayAuth(n,u,accessSecret)},a.prototype._loadByVodBySTS=function(n,u,v,h,c,_){n={vid:this._options.vid,accessId:n,accessSecret:u,stsToken:v,authInfo:c,domainRegion:h,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(n,_)},E.exports=a},{"../../config":15,"../../lib/constants":31,"../../lib/io":43,"../../lib/playerutil":48,"../base/event/eventtype":71,"./authkeyexpiredhandle":111,"./saasplayer":117,"./signature":118,"./ststoken":119,"./vod":121}],123:[function(k,E,ne){function x(g){this._player=g,this._video=g.tag;var d=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",g.on(b.Private.ChangeURL,function(){d._isCreated=!1,d._canPlayTriggered=!1,d._defaultTrack=""}),g.on(b.Player.CanPlay,function(){var f;d._player._drm||d._canPlayTriggered||((f=d._getTracks())&&(d._isCreated=!0,d._player._options.isVBR||d._hls||(g.trigger(b.Player.AudioTrackReady,f),d._notifyDefaultValue(f))),d._canPlayTriggered=!0)}),g.on(b.Player.AudioTrackUpdated,function(f){d._isCreated||(f=d._getTracks(f.paramData.audioTracks))&&(d._isCreated=!0,g.trigger(b.Player.AudioTrackReady,f),d._notifyDefaultValue(f))})}var b=k("../base/event/eventtype");x.prototype._notifyDefaultValue=function(g){!this._defaultTrack&&0<g.length&&(this._defaultTrack=g[0]),this._defaultTrack&&this._player.trigger(b.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},x.prototype.support=function(){return!!this._video.audioTracks},x.prototype._getTracks=function(g){if(!this.support()&&!g)return null;for(var d=[],f=(g=!this._video||!this._video.audioTracks||g&&g.length!=0?g:this._video.audioTracks)?g.length:0,s=0;s<f;s++){var o=g[s],a={value:o.id,text:o.label||o.name||o.language};(o.default||o.enabled)&&(this._defaultTrack=a),d.push(a)}return d},x.prototype.switch=function(g){if(this._player._hls)this._player._hls.audioTrack=+g;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(g);else for(var d=this._video.audioTracks?this._video.audioTracks.length:0,f=0;f<d;f++){var s=this._video.audioTracks[f];s.id==g?s.enabled=!0:s.enabled=!1}},x.prototype.dispose=function(){this._player=null},E.exports=x},{"../base/event/eventtype":71}],124:[function(k,E,ne){function x(a){this._video=a.tag,this._player=a,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var n=this,u=(a.on(b.Player.LevelsLoaded,function(v){(d.IS_MAC_SAFARI||d.IS_IOS)&&(v&&v.paramData&&v.paramData.subtitles&&v.paramData.subtitles.length?n._storedTracks=v.paramData.subtitles||[]:n._resotreTracks())}),a.on(b.Private.SafariDrmLevelSwitch,function(){n._resotreTracks()}),a.on(b.Private.ChangeURL,function(v){v&&v.paramData&&v.paramData.from==="saas"||(n._disabledTracks(),n._isCreated=!1,n._defaultTrack="",n._backupCC="")}),a.on(b.Private.VttClearTracks,function(){n.switch("off"),n._disabledTracks(),n._isCreated=!1,n._defaultTrack={value:"off",text:"Off"},n.tracks=[n._defaultTrack],a.trigger(b.Private.SelectorGenerateList,{type:"cc"}),a.trigger(b.Private.CCStateChanged,{value:"off",lang:""})}),a.on(b.Player.CanPlay,function(){n._isCreated||(n.tracks=n._getTracks(),a.trigger(b.Player.TextTrackReady,n.tracks),a.trigger(b.Private.CCReset)),n._isCreated&&!n._player._setDefaultCC||!n._defaultTrack||(a.trigger(b.Private.SelectorUpdateList,{type:"cc",text:n._defaultTrack.text}),n.switch(n._defaultTrack.value),n._player._setDefaultCC=!1,n._isCreated=!0)}),d.os.ios&&parseFloat(d.os.version)<=15.1&&g.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),a.getOptions().controlBarVisibility==="always"&&g.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),o.throttle(function(){a._vttBroker&&a._vttBroker.enabled||g.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),u=(a.on(b.Private.ShowBar,u),o.throttle(function(){a._vttBroker&&a._vttBroker.enabled||g.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));a.on(b.Private.HideBar,u),a.on(b.Private.CCReset,function(){n._updateSelectorList()})}var b=k("../base/event/eventtype"),g=(k("../../lib/event"),k("../../lib/dom")),d=k("../../lib/ua"),f=k("../../lib/cookie"),s=k("../../lib/constants"),o=k("../../ui/component/util");x.prototype._adaptiveCueStype=function(){var a,n=-10;d.IS_SAFARI?(n=-65,(a=this._player.fullscreenService)&&a.getIsFullScreen()&&(n=-95)):d.IS_MOBILE&&(n=-30),g.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+n+"px) !important;}")},x.prototype.close=function(){for(var a=this.getTextTracks(),n=a.length,u=0;u<n;u++){var v=a[u];v.mode!="expired"&&(v.mode=="showing"&&(this._backupCC=v),v.mode="disabled")}this._player.trigger(b.Private.VttHide)},x.prototype.open=function(){var a,n,u;return!this.tracks||this.tracks.length<2||(n=this._backupCC?this._backupCC.language:"",u=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(v){n===v.value&&(a=!0)}),(n=a?n:u="")||(n=this.tracks[1].value,u=this.tracks[1].text),this.switch(n)),{label:u,language:n}},x.prototype.getCurrentSubtitle=function(){return this._currentValue},x.prototype._getTracks=function(){for(var a=this.getTextTracks(),n=a.length,u=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),v=f.get(s.SelectedCC),h="",c=!1,_=0;_<n;_++){var m,T=a[_];T.mode=="expired"||T.kind!="subtitles"&&T.kind!="captions"||(m={value:T.language,text:T.label},T.default&&(this._defaultTrack=m,c=!0),m.value==v&&(h=m),u.push(m))}return!c&&h&&(this._defaultTrack=h),u},x.prototype._disabledTracks=function(){for(var a=this.getTextTracks(),n=a.length,u=0;u<n;u++)a[u].mode="expired"},x.prototype.switch=function(a){var n=this._player;if(this.close(),a!="off")for(var u=this.getTextTracks(),v=u.length,h=0;h<v;h++){var c=u[h];c.language===a&&c.mode!="expired"&&(u[h].mode="showing",n.trigger(b.Private.VttSwitchTrack,c.language))}else this.close();this._currentValue=a,n.trigger(b.Private.CCChanged,a)},x.prototype.updateUI=function(a){var n="on",u="";u=a?(this.tracks.find(function(v){return v.value===a})||{}).text||"":(n="off","Off"),player.trigger(b.Private.CCChanged,n),player.trigger(b.Private.CCStateChanged,{value:n,lang:u})},x.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},x.prototype._patchSafariTracks=function(){var a=this;if(d.IS_MAC_SAFARI||d.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var n=!1;if(n=this._video.textTracks&&this._video.textTracks.length?!0:n)return;for(var u=0;u<this._storedTracks.length;u++){var v=this._storedTracks[u],h=v.vttUrl,c=document.createElement("track");c.src=h,c.kind="subtitles",c.label=v.name,c.srclang=v.lang,this._video.appendChild(c)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var _=a.getCurrentSubtitle();_&&_!=="off"&&a.switch(_)},1e3)}},x.prototype.getTextTracks=function(){var a=this._player,n=a.tag;return a._vttBroker&&a._vttBroker.enabled&&a.getTextTracks?a.getTextTracks()||[]:n&&n.textTracks||[]},x.prototype._updateSelectorList=function(){var a=this._player;this.tracks=this._getTracks(),a.trigger(b.Private.SelectorGenerateList,{type:"cc",value:"Off"})},x.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(b.Player.TextTrackReady,this.tracks)},E.exports=x},{"../../lib/constants":31,"../../lib/cookie":32,"../../lib/dom":35,"../../lib/event":36,"../../lib/ua":51,"../../ui/component/util":165,"../base/event/eventtype":71}],125:[function(k,E,ne){var x=k("../../lib/playerutil");E.exports=[{service:k("./ccservice"),name:"_ccService",condition:!0},{service:k("./audiotrackservice"),name:"_audioTrackService"},{service:k("./qualityservice"),name:"_qualityService"},{service:k("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:k("./liveshiftservice"),name:"_liveshiftService",condition:function(){var b=this.options();return x.isLiveShift(b)}},{service:k("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:k("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":48,"./audiotrackservice":123,"./ccservice":124,"./fullscreenservice":126,"./liveshiftservice":127,"./progressmarkerservice":128,"./qualityservice":129,"./thumbnailservice":130}],126:[function(k,E,ne){function x(n){var u=this,v=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=n,this),h=s;this._fullscreenChanged=function(c){var _;v._player!=null&&(c.target||c.srcElement)===(c=v._player.el())&&(_=document[h.fullscreenElement],v.isFullScreen=_===c,(v.isFullScreenChanged=!0)===v.isFullScreen?v._player.trigger(f.Player.RequestFullScreen):v._player.trigger(f.Player.CancelFullScreen))},h&&d.on(document,h.eventName,this._fullscreenChanged),d.on(n.tag,"webkitendfullscreen",function(c){c=c.target||c.srcElement,n&&n.tag===c&&(u.isFullScreenChanged=!0,u.isFullScreen=!1,u._player.trigger(f.Player.CancelFullScreen),u._player.trigger(f.Private.Play_Btn_Show))})}var b=k("../../lib/ua"),g=k("../../lib/dom"),d=k("../../lib/event"),f=k("../base/event/eventtype"),s=(k("../base/x5play"),k("../../lang/index"),function(){g.createEl("div");var n={},u=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],v=!1;if(!(v=b.IS_IOS&&(n.requestFn="webkitEnterFullscreen",n.cancelFn="webkitExitFullscreen",n.fullscreenElement="webkitFullscreenElement",n.eventName="webkitfullscreenchange",n.isFullScreen="webkitDisplayingFullscreen",document[n.requestFn])?!0:v)){for(var h=0;h<5;h++)if(u[h][1]in document){n.requestFn=u[h][0],n.cancelFn=u[h][1],n.fullscreenElement=u[h][2],n.eventName=u[h][4],n.isFullScreen=u[h][6];break}"requestFullscreen"in document?n.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?n.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?n.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?n.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?n.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(n.requestFn="msRequestFullscreen"),"fullscreenchange"in document?n.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?n.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?n.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(n.eventName="MSFullscreenChange"),"fullScreen"in document?n.isFullScreen="fullScreen":"webkitfullScreen"in document?n.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?n.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?n.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?n.isFullScreen="mozFullScreen":"mozfullScreen"in document?n.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(n.isFullScreen="MSFullScreen"),"fullscreenElement"in document?n.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?n.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?n.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?n.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?n.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(n.fullscreenElement="MSFullscreenElement")}return n.requestFn?n:null}()),o=(x.prototype.requestFullScreen=function(){var n=s,u=this._player.el(),v=this;if(b.IS_IOS){var h=this._player._splayer;if(!h||h.renderType!==2){u=this._player.tag,h&&h.renderType!==2&&(u=this._player.el().querySelector("video"));try{var c=u[n.requestFn]();c&&typeof c.catch=="function"&&c.catch(function(m){console.log(m)}),v._player.trigger(f.Player.RequestFullScreen)}catch(m){console.log(m)}return this}this._player._options.enableMockFullscreen=!0}if(this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),v=this,n&&!this._player._options.enableMockFullscreen)try{var _=u[n.requestFn]();_&&typeof _.catch=="function"&&_.catch(function(m){console.log(m)}),this._requestFullScreenTimer=setTimeout(function(){v.isFullScreenChanged||(o.apply(v),v._player.trigger(f.Player.RequestFullScreen)),v._requestFullScreenTimer=null},1e3)}catch(m){console.log(m)}else o.apply(v),this._player.trigger(f.Player.RequestFullScreen);return this._player},x.prototype.cancelFullScreen=function(){var n=s,u=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(n&&!this._player._options.enableMockFullscreen){try{var v=document[n.cancelFn]();v&&typeof v.catch=="function"&&v.catch(function(h){console.log(h)})}catch(h){console.log(h)}u._cancelFullScreenTimer=setTimeout(function(){u.isFullScreenChanged||(a.apply(u),u._player.trigger(f.Player.CancelFullScreen)),u._cancelFullScreenTimer=null},500)}else a.apply(u),this._player.trigger(f.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(f.Player.Play),this._player},x.prototype.getIsFullScreen=function(){return this.isFullScreen},x.prototype.dispose=function(){this._player=null,s&&d.off(document,s.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",g.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),a=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,g.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};E.exports=x},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../lib/ua":51,"../base/event/eventtype":71,"../base/x5play":99}],127:[function(k,E,ne){function x(h,c){var _;if(h)return h=new Date(h),_=(c=new Date(c)).valueOf()/1e3-h.valueOf()/1e3,{start:h,end:c,endDisplay:f.extractTime(c),totalTime:_}}function b(h,c){c&&(h.currentTimestamp=c,h.currentTime=f.convertToDate(c),h.currentTimeDisplay=f.extractTime(h.currentTime),h.liveShiftStart=h.liveTimeRange.start,h.liveShiftEnd=h.liveTimeRange.end,h.liveShiftStartDisplay=f.extractTime(h.liveShiftStart),h.liveShiftEndDisplay=f.extractTime(h.liveShiftEnd),h.availableLiveShiftTime=c-h.liveShiftStart.valueOf()/1e3,h.timestampStart=f.convertToTimestamp(h.liveShiftStart),h.timestampEnd,f.convertToTimestamp(h.liveShiftEnd))}function g(h){function c(){var m=h._options.source;this._originalPlayUrl=m,this._liveShiftUrl=h._options.liveTimeShiftUrl,this.liveTimeRange=x(h._options.liveStartTime,h._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=h,this._isLiveShiftPlaying=!1;var _=this;c.call(this),h.liveShiftSerivce={setLiveTimeRange:function(m,T){_.setLiveTimeRange(m,T)},queryLiveShift:function(m,T,l){_.queryLiveShift(m,T,l)},isLiveShiftPlaying:function(){return _._isLiveShiftPlaying}},h.on(v.Private.ChangeURL,function(){c.call(_)})}var d=k("../../lib/io"),f=k("../../lib/util"),s=k("../../lib/playerutil"),o=k("../../lang/index"),a=k("../flv/flvinjector"),n=k("../hls/hlsinjector"),u=k("../../lib/constants"),v=k("../base/event/eventtype");k("../../lib/url"),g.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},g.prototype.switchToLive=function(){this.seekTime=-1;var h=this._originalPlayUrl,c=this._player._options.liveShiftSource,_=this._player._options.source;s.isHls(_)&&s.isFlv(h)&&c&&s.isHls(c)&&(this._player._hls&&this._player._destroyHls(),_=this._player._superType,c=this._player._Type,this._player._options._autoplay=!0,a.inject(this._player,c,_,this._player._options,"",!0)),this._player._loadByUrlInner(h,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(v.Private.LiveShiftSwitchToLive)},g.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,this.seekTime==-1?f.parseTime(this.currentTimeDisplay):f.parseTime(this.liveShiftStartDisplay)+this.seekTime},g.prototype.getSourceUrl=function(h,c){var _=this._originalPlayUrl;return this.availableLiveShiftTime<h||(this._isLiveShiftPlaying=!0,h=parseInt(h),_=(_=this._switchLiveShiftPlayer(c))&&this._cleanUrl(_),c=parseInt(this.currentTimestamp)-h,(_=_.indexOf("?")==-1?_+"?lhs_start_unix_s_0="+c:_+"&lhs_start_unix_s_0="+c).indexOf("aliyunols=on")===-1&&(_+="&aliyunols=on"),_.indexOf("continue=on")===-1&&(_+="&continue=on")),_},g.prototype._cleanUrl=function(h){var c;return h.indexOf("?")===-1?h:(h=(h=(c=h.split("?"))[1])&&((h=h.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")===0?h.replace("&",""):h))?c[0]+"?"+h:c[0]},g.prototype._switchLiveShiftPlayer=function(h){var c,_=this._originalPlayUrl,m=this._player._options.liveShiftSource,T=this._player._options.source;if(s.isHls(T))_=T;else if(s.isFlv(_)&&m&&s.isHls(m))return this._player._flv&&this._player._destroyFlv(),T=this._player._superType,c=this._player._Type,this._player._options._autoplay=!0,n.inject(this._player,c,T,this._player._options,"",!0),m;return _},g.prototype.getTimeline=function(h,c){var _;this._player.trigger(v.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(_=this).queryLiveShift(this._liveShiftUrl,function(m){m?(m=m).retCode==0?(b(_,m.content.current),h&&h()):c({Code:u.ErrorCode.ServerAPIError,Message:m.retCode+"|"+m.description+"|"+m.content}):console.log("")},function(m){if(c&&m){var T={};if(m){if(typeof m=="string"&&-1<m.indexOf("403 Forbidden"))T.Code=u.ErrorCode.AuthKeyExpired,T.Message="Query liveshift failed:"+o.get("Error_AuthKey_Text");else{var l,T=m;try{l=JSON.parse(m)}catch{}l&&(T.Code=u.ErrorCode.ServerAPIError,T.Message=l.retCode+"|"+l.description+"|"+l.content)}c(T)}}}):(b(this,new Date().valueOf()/1e3),h&&h())},g.prototype.start=function(h,c){function _(){m._loopHandler&&clearTimeout(m._loopHandler),m._loopHandler=setTimeout(function(){m.getTimeline(function(){},c),_()},h)}var m=this;m.getTimeline(function(T){m._localLiveTimeHandler||m.tickLocalLiveTime()},c),_()},g.prototype.tickLocalLiveTime=function(){var h=this;(function c(){h._localLiveTimeHandler=setTimeout(function(){h.currentTimestamp++,b(h,h.currentTimestamp),h._player.trigger(v.Private.LiveShiftQueryCompleted),c()},1e3)})()},g.prototype.setLiveTimeRange=function(h,c){h=h||this._player._options.liveStartTime,c=c||this._player._options.liveOverTime,this.liveTimeRange=x(h,c),b(this,this.currentTimestamp),this._player.trigger(v.Private.LiveShiftQueryCompleted)},g.prototype.queryLiveShift=function(h,c,_){d.get(h,function(m){var T;m?(T=JSON.parse(m)).retCode==0?c&&c(T):_&&_(T):_&&_(m)},function(m){_&&_(m)})},g.prototype.stop=function(h){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},g.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},E.exports=g},{"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/url":52,"../../lib/util":53,"../base/event/eventtype":71,"../flv/flvinjector":105,"../hls/hlsinjector":107}],128:[function(k,E,ne){function x(f){function s(){var a=document.querySelector("#"+f.id()+" .prism-progress-marker");if(a){a.innerHTML="";var n=o._player.getDuration();if(0<n){for(var u=0;u<o.progressMarkers.length;u++){var v,h=o.progressMarkers[u];h.offset!==void 0&&h.offset!==""&&(h=document.createElement("div"),g.addClass(h,"prism-marker-dot"),v=o.progressMarkers[u].offset/n,h.style.left=100*v+"%",a.appendChild(h),v=function(_,m){return function(){o._player.trigger(b.Private.MarkerTextShow,{left:_,progressMarker:m})}}(v,o.progressMarkers[u]),d.on(h,"mouseover",v),d.on(h,"mouseout",function(_){o._player.trigger(b.Private.MarkerTextHide)}),d.on(h,"touchstart",v),d.on(h,"mousemove",function(_){_.preventDefault()}),d.on(h,"touchmove",function(_){_.preventDefault()}))}var c=document.querySelector("#"+o._player.id()+" .prism-progress-cursor");o._player.on(c,"click",function(_){for(var m=o._player.getCurrentTime(),T=0;T<o.progressMarkers.length;T++){var l,y=o.progressMarkers[T];y&&m-1<y.offset&&y.offset<m+1&&(l=y.offset/n*100+"%",o._player.trigger(b.Private.MarkerTextShow,{left:l,progressMarker:y}))}})}}}this.progressMarkers=[],this._player=f;var o=this;f.on(b.Private.ProgressMarkerLoaded,function(a){a=a.paramData,a&&0<a.length&&(o.progressMarkers=a)}),f.on(b.Private.ProgressMarkerChanged,function(a){a=a.paramData,a&&0<a.length&&(o.progressMarkers=a,s())}),f.on(b.Video.LoadedMetadata,s)}var b=k("../base/event/eventtype"),g=(k("../../lang/index"),k("../../lib/hls/hlsparse"),k("../../lib/object"),k("../../lib/dom")),d=k("../../lib/event");k("../../lib/playerutil"),x.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},E.exports=x},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../lib/hls/hlsparse":41,"../../lib/object":45,"../../lib/playerutil":48,"../base/event/eventtype":71}],129:[function(k,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(u){for(var v=1;v<arguments.length;v++){var h,c=arguments[v];for(h in c)Object.prototype.hasOwnProperty.call(c,h)&&(u[h]=c[h])}return u}).apply(this,arguments)}function b(u){this.levels=[],this.drmUrl={},this._player=u;var v=this;u.on(g.Private.PlayInfoLoaded,function(h){for(var c=h.paramData.encryptUrlArr||[],_=[],m=0;m<c.length;m++){var T=c[m];T.encryptionType===a.VodEncryptionType["Widevine-FairPlay"]&&_.push(T)}v.drmUrl=_}),u.on(g.Player.LevelsLoaded,function(h){if(0<v.levels.length&&(v.levels=[]),(h=h.paramData)&&h.levels){for(var c,_=h.levels.length-1;-1<_;_--){var m,T=h.levels[_];T.url&&0<T.url.length&&T.attrs&&T.attrs.BANDWIDTH&&(m=T.url,s.isArray(m)&&(m=m[0]),m={Url:m=!u._hls&&u._options.isVBR&&u._options.isDrm?n.call(v,T):m,desc:Math.min(T.width,T.height),bitrate:T.bitrate,resolution:T.attrs.RESOLUTION,bandwidth:T.attrs.BANDWIDTH},v.levels.push(m))}u._options.definition==="AUTO"&&(u._urls=[],Object.assign(u._urls,this.levels)),v.levels.sort(function(l,y){return(l.bitrate||l.desc)-(y.bitrate||y.desc)}),v.levels=v.levels.map(function(l){return x({},l,{desc:l.desc+"p@"+parseInt(l.bitrate/1e3)+"k"})}),0<v.levels.length&&(c="",this._player._options.isVBR&&(c=d.get("Auto")),v.levels.push({Url:h.url,desc:c}),u.trigger(g.Private.SelectorUpdateList,{type:"quality",text:c}))}}),u.on(g.Video.LoadStart,function(){var h,c;u._options&&(h=u._options.source,c=u._options.isVBR,!u._hls)&&h&&o.isHls(h)&&(u._manuallySwitchDrmLevel?(u._manuallySwitchDrmLevel=!1,u.trigger(g.Private.SafariDrmLevelSwitch)):c&&v.loadLevels(h))})}var g=k("../base/event/eventtype"),d=k("../../lang/index"),f=k("../../lib/hls/hlsparse"),s=k("../../lib/object"),o=k("../../lib/playerutil"),a=k("../../lib/constants");function n(u){for(var v,h=this.drmUrl,c=0;c<this.drmUrl.length;c++)if(Number(u.height)===Number(h[c].height)){v=h[c].Url;break}return v}(b.prototype={loadLevels:function(u){var v=new f,h=this;v.load(u,function(c){var _;(_=c.subtitles)!=null&&_.forEach(function(m){v.loadMediaPlaylist({url:m.url},function(T){T=T.fragments[0],T&&(m.vttUrl=v.resolve(T.relurl,T.baseurl))},function(T){console.log("parse vtt url error: ",T)})}),h._player._created?h._player.trigger(g.Player.LevelsLoaded,c):h._player.one(g.Private.Created,function(){h._player.trigger(g.Player.LevelsLoaded,c)})})}}).dispose=function(){this._player=null},E.exports=b},{"../../lang/index":26,"../../lib/constants":31,"../../lib/hls/hlsparse":41,"../../lib/object":45,"../../lib/playerutil":48,"../base/event/eventtype":71}],130:[function(k,E,ne){function x(s){this._player=s,this.cues=[],this.baseUrl="";var o=this;s.on(f.Private.ChangeURL,function(){o.cues=[],o.baseUrl=""})}var b=k("../../lib/io"),g=k("../../lib/url"),d=k("../../lib/vtt/thumbnailvtt"),f=k("../base/event/eventtype");(x.prototype={get:function(s){var o,a,n=this;this.baseUrl=(o=s,(a=g.parseUrl(o))&&(a=a.segments)&&0<a.length&&(a=a[a.length-1],baseUrl=o.replace(a,"")),baseUrl),b.get(s,function(u){u&&d.parse(u,function(v){n.cues=v,n._player.trigger(f.Private.ThumbnailLoaded,v)})},function(u){console.log(u)})},findAvailableCue:function(s){for(var o=this.cues.length,a=0;a<o;a++){var n=this.cues[a];if(n.startTime<=s&&s<n.endTime)return n}return null},makeUrl:function(s){return s=s.indexOf("://")==-1?this.baseUrl+s:s}}).dispose=function(){this._player=null},E.exports=x},{"../../lib/io":43,"../../lib/url":52,"../../lib/vtt/thumbnailvtt":55,"../base/event/eventtype":71}],131:[function(k,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var P,C=arguments[w];for(P in C)Object.prototype.hasOwnProperty.call(C,P)&&(y[P]=C[P])}return y}).apply(this,arguments)}var b=k("../base/player"),g=k("./splayerinjector"),d=k("../flv/flvinjector"),f=k("../hls/hlsinjector"),s=k("../../lib/playerutil"),o=k("../base/event/eventtype"),a=k("../../lib/constants"),n=k("../../lib/codec-probe"),u=k("../../lib/ua"),v=a.USER_EVENT_NAME,h=s.isH265Codec,c=s.isH266Codec,_=s.getVideoTrack,m={},T={codecCost:0,decoderCost:0},l=b.extend({init:function(y,w){var P,C=this,R=(this._options=w,s.isFlv(w.source,w.format)),A=s.isHls(w.source,w.format),I=this._extraMultiSources(),D={};function B(){R?(d.inject(this,l,b,w),w._native=!1):A&&!s.canPlayHls()&&(f.inject(this,l,b,w),w._native=!1),b.call(this,y,w),this._monitor&&this._monitor.updateH265ProbeInfo(x({},T,m)),U.call(this),m.codecTag&&g.reportH265PlayInfo.call(this,{renderType:"native",codecTag:m.codecTag})}function N(){w._native=!1,g.inject(this,l,b,w,m),b.call(this,y,w),this._monitor&&this._monitor.updateH265ProbeInfo(x({},T,m,{waitRenderType:!0})),U.call(this)}function U(){var J,q,j=this,F=D,z=this[v];z&&(F=Object.assign({},D,z),J=Object.keys(D),q=Object.keys(z),J.forEach(function(K){-1<q.indexOf(K)&&(F[K]=D[K].concat(z[K]))})),Object.keys(F).forEach(function(K){F[K].forEach(function(L){L.binded||b.prototype.on.call(j,K,L)})})}D[o.Player.Ready]=[function(){C._setupSourceList(I),C.trigger(o.Private.SelectorGenerateList,{type:"quality"})}],w.from==="zhihu"||w.forceH265||w.forceH266?N.call(this):u.IS_ANDROID&&u.dingTalk()&&!R?B.call(this):(P=performance.now(),n(w.source,function(j){T.codecCost+=performance.now()-P;var q,j=_(j.tracks),F=(j||{}).codecTag||((F=(j||{}).codec)==null?void 0:F.split(".")[0]);m.codecTag=F,j&&h(F)?(q=performance.now(),R||A&&!s.canPlayHls()?(T.decoderCost+=performance.now()-q,N.call(C)):s.shouldUseBasePlayer({codecTag:F,url:w.source},function(z){T.decoderCost+=performance.now()-q,(z?B:N).call(C)})):(j&&c(F)?N:B).call(C)},function(J){console.log("error in demuxer, fallback to basePlayer",J),T.codecCost+=performance.now()-P,B.call(C),g.checkProtocol.call(C,w.source)}))}});E.exports=l},{"../../lib/codec-probe":29,"../../lib/constants":31,"../../lib/playerutil":48,"../../lib/ua":51,"../base/event/eventtype":71,"../base/player":94,"../flv/flvinjector":105,"../hls/hlsinjector":107,"./splayerinjector":132}],132:[function(k,E,ne){function x(){return(x=Object.assign?Object.assign.bind():function(T){for(var l=1;l<arguments.length;l++){var y,w=arguments[l];for(y in w)Object.prototype.hasOwnProperty.call(w,y)&&(T[y]=w[y])}return T}).apply(this,arguments)}var b=k("../../lib/io"),g=k("../base/event/eventtype"),d=k("../base/event/eventmanager"),f=(k("../../lib/event"),k("../../lib/util")),s=k("../../lib/dom"),o=k("../../lib/playerutil"),a=k("../../lib/constants"),n=k("../../lang/index"),u="splayerinjector.js";function v(T){var l=this._options,y=(_.call(this),(function(){o.isVideoTag(this.tag)&&(d.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}).call(this),Videox.Videox),w=l.splayerWasmDomain,w=(!w&&l.assetPrefix&&(w=l.assetPrefix+"/splayer"),new y(x({container:this._el,wasmDomain:w,progressive:!0,skipFrame:y.DiscardType.NONE,loop:l.rePlay,controls:!1,muted:!1,threads:l.h265Threads,simd:l.h265Simd,autoplay:l.autoplay||l._autoplay,live:l.isLive,poster:l.cover||void 0,src:l.source,trackOptions:{disable:!0},preload:l.preload?"auto":"none",timeout:1e3*l.waitingTimeout},l.splayerOptions||{}))),P=(l.debug&&(w.setLogLevel(y.LogLevel.LOG),w.setLogPrintLevel(y.LogLevel.LOG)),this._splayer=w,(this.tag=w).play),C=this;this.tag.play=function(){C._monitor&&C._monitor.reportStartPlay(),P.call(this)},(function(){var R,A=this,I=document.createElement("video");for(R in I)(function(D){A.tag[D]||D.indexOf("on")===0||typeof I[D]!="function"||(A.tag[D]=function(){console.warn("Function ["+D+"] is called on splayer, which should be a mistake."),I[D].apply(I,arguments)})})(R)}).call(this),(function(R){var A=this,I=(d.onAll(this),this._splayer);I.addEventListener("error",(function(D){var B,N,U,j=Videox.Videox,J=(D||{}).detail,q=Number((J||{}).code),j=j.ErrorCode;switch(this.traceLog(u,"splayer-error::"+q),q){case j.WASM_NOT_SUPPORTED:case j.CANVAS_NOT_SUPPORTED:case j.AUDIOCONTEXT_NOT_SUPPORTED:case j.WORKER_NOT_SUPPORTED:case j.WEBGL_NOT_SUPPORTED:B=a.ErrorCode.SplayerEnvCheckError,N=n.get("Splayer_Err_Env_Check")+" | "+h(J);break;case j.DECODE:B=a.ErrorCode.SplayerDecodeError,N=n.get("Splayer_Err_Decode")+" | "+h(J);break;case j.NETWORK:B=a.ErrorCode.NetworkError,N=n.get("Error_Network_Text")+" | "+h(J);var F=(J.origin||{}).response;F?(F=F.status)===404?(B=a.ErrorCode.NotFoundSourceURL,N=n.get("Error_Not_Found")+" | "+h(J),U=n.get("Tip_Err_Not_found")):F===403&&(B=a.ErrorCode.AuthKeyExpired,N=n.get("Error_AuthKey_Text")+" | "+h(J)):navigator.onLine&&(B=a.ErrorCode.RequestDataError,N=N+""+n.get("Maybe_Cors_Error"));break;case j.PARSER:B=a.ErrorCode.SplayerParserNotFound,N=n.get("Splayer_Err_Parser_Not_Found")+" | "+h(J);break;default:B=a.ErrorCode.OtherError,N="(SP)"+n.get("Error_Play_Text")+" | "+h(J)}if(U=U||n.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+n.get("Tip_Err_Splayer_Doc")+"</a>",!(B===a.ErrorCode.NetworkError&&this._reloadForVod())){try{this.pause()}catch{}q={error_code:B,error_msg:N,diagnosis_info:U},q.error_code!==null&&q.error_msg!==null&&(this.logError(q),this.trigger(g.Player.Error,q)),m.call(this,{splayer:!0})}}).bind(this)),I.addEventListener("decoderoverload",function(D){D=D.detail,delete D.shouldWarn,A.trigger(g.Player.H265DecoderOverload,D)}),I.addEventListener("loadedsupportinfo",function(B){var B=B.detail||{},N=B.detail||{},U=I.controller.options||{};I.renderType=B.renderer,m.call(A,{renderer:B.renderer,wasmThreads:N.wasmThreads&&U.threads,wasmThreadsOption:U.threads,simd:N.simd&&U.simd,simdOption:U.simd,codecTag:I.controller.videoTrack&&I.controller.videoTrack.codecTag||I.controller.videoTrack&&((B=I.controller.videoTrack.codec)==null?void 0:B.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(I.once("canplay",function(){I.paused&&A._autoplayFailedHandler()}),I.once("timeupdate",function(){A.trigger(g.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay(),I.on("playing",function(){A._monitor&&A._monitor.reportPlaying()}),I.on("timeupdate",function(){A._monitor&&A._monitor.reportPlaying()})}).call(this,T)}function h(y){var y=y=y===void 0?{}:y,l=y.code,y=y.message,w=Videox.Videox.ErrorCode,P="";return P=l?P+l+(": "+(y||w[l])):P}function c(T){return!f.contentProtocolMixed(T,"alwaysCheck")||((T={mediaId:this._options.vid||"",error_code:a.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=n.get("Request_Block_Text"),this.logError(T),this.trigger(g.Player.Error,T),!1)}function _(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function m(T){var l;T===void 0&&(T={}),!this._h265InfoReported&&(this._h265InfoReported=!0,l={0:"native",1:"mse",2:"wasm"},delete(T=x({codecTag:(this._probeInfo||{}).codecTag||T.codecTag,renderType:T.renderType||l[T.renderer]},T)).renderer,T.renderType!==l[2]&&(delete T.simd,delete T.simdOption,delete T.wasmThreads,delete T.wasmThreadsOption),this._splayerRenderType=T.renderType,l=T.codecTag)&&(o.isH265Codec(l)?this.trigger(g.Player.H265PlayInfo,T):o.isH266Codec(l)&&this.trigger(g.Player.H266PlayInfo,T))}E.exports.checkProtocol=c,E.exports.reportH265PlayInfo=m,E.exports.inject=function(T,l,y,w,P){function C(A,I){this._superPt.setPlayerSize.call(this,A,I),A=this._el.querySelector("canvas"),A&&(I=this._el.offsetWidth/this._el.offsetHeight,A.offsetWidth/A.offsetHeight<I?(A.style.height="100%",A.style.width="initial"):(A.style.width="100%",A.style.height="initial"))}function R(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),l.prototype.replay=this._superPt.replay,l.prototype.setPlayerSize=this._superPt.setPlayerSize,l.prototype._setTransform=this._superPt._setTransform,l.prototype.initPlay=this._superPt.initPlay),_.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}T._Type=l,T._superType=y,T._superPt=y.prototype,T._disposed=!1,T._splayer=null,T._splayerLoaded=!1,T._probeInfo=P,T._splayerRenderType=null,l.prototype.initPlay=function(A){var I=this;this.trigger(g.Private.H5_Loading_Show),c.call(this,this._options.source)&&(this._splayerLoaded?v.call(this,A):(function(D,B){var N=this._options,U=N.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.8/dist/index.js";!N.splayerUrl&&N.assetPrefix&&(U=N.assetPrefix+"/splayer/index.js"),b.loadJS(U,D.bind(this),function(){B&&B()})}).call(this,function(){this._splayerLoaded=!0,v.call(this,A),I._executeReadyCallback()},function(){var D={mediaId:I._options.vid||"",mediaAuth:I._options.mediaAuth||"",error_code:a.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};I.trigger(g.Player.Error,D)}))},l.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},Object.defineProperty(l.prototype,"setPlayerSize",{enumerable:!0,configurable:!0,get:function(){return C},set:function(){return C}}),l.prototype._setTransform=function(){var A=this._player.el(),I=this._splayerRenderType==="wasm",A=I?A.querySelector("canvas"):A.querySelector("video"),I=(this._transformProp||(this._transformProp=s.getTransformName(A)),I?"":" translate(-50%, -50%)");this._rotate&&(I+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?I+=" scaleY(-1)":this._image=="horizon"&&(I+=" scaleX(-1)")),A.style[this._transformProp]=I},Object.defineProperty(l.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return R},set:function(){return R}})}},{"../../lang/index":26,"../../lib/constants":31,"../../lib/dom":35,"../../lib/event":36,"../../lib/io":43,"../../lib/playerutil":48,"../../lib/util":53,"../base/event/eventmanager":70,"../base/event/eventtype":71}],133:[function(k,E,ne){function x(y,w){var P,C=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(C)return(C=C.call(y)).next.bind(C);if(Array.isArray(y)||(C=function(R,A){var I;if(R)return typeof R=="string"?b(R,A):(I=(I=Object.prototype.toString.call(R).slice(8,-1))==="Object"&&R.constructor?R.constructor.name:I)==="Map"||I==="Set"?Array.from(R):I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I)?b(R,A):void 0}(y))||w)return C&&(y=C),P=0,function(){return P>=y.length?{done:!0}:{done:!1,value:y[P++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(y,w){(w==null||w>y.length)&&(w=y.length);for(var P=0,C=new Array(w);P<w;P++)C[P]=y[P];return C}var g=typeof Promise>"u"?k("es6-promise").Promise:Promise,d=k("../../lib/io"),f=k("../../config"),s=k("../../lang/index"),o=k("../../lib/ua"),a=k("../base/event/eventtype"),n=k("../../lib/constants"),u=n.PLAYER_SCOPE,v=n.SW_MSG_EVT,h=n.DM_MSG_EVT,c=n.ErrorCode,_=k("./tsremuxer").TSRemuxer,m="swinjector.js";function T(y){y={mediaId:this._options.vid||"",error_code:y.code,error_msg:y.msg,diagnosis_info:y.info},this.trigger(a.Player.Error,y)}function l(y){return y.split("?")[0].split("#")[0]}E.exports.inject=function(y,w,P,C,R){y.swPlayer=!0,y.firstBuild=!0,y.sw=null,y.tsDemuxerWorker=null,y.tsRemuxer=null,y.preloadError=!1,y.fetchHasResult=!1,y._initServiceWorker=new g(function(U){setTimeout(U,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(J){if(!J.length)return console.log("No serviceWorker registrations found."),U();for(var q,j=[],F=x(J);!(q=F()).done;)(function(){var z=q.value,K=z.unregister().then(function(L){console.log(L?"Successfully unregistered":"Failed to unregister",`ServiceWorkerRegistration
`+(z.installing?"  .installing.scriptURL = "+z.installing.scriptURL+`
`:"")+(z.waiting?"  .waiting.scriptURL = "+z.waiting.scriptURL+`
`:"")+(z.active?"  .active.scriptURL = "+z.active.scriptURL+`
`:"")+"  .scope: "+z.scope+`
`)});j.push(K)})();g.all(j).then(U).catch(U)}).catch(function(J){console.log("clear sw error",J),U()}):U()}).then((function(U){var J=this;return new g(function(q){var j=function(z){if(!z)return s.get("Error_SW_ScriptURL_Empty");if((z=String(z)).indexOf("https")!==0&&z.indexOf("localhost")===-1&&z.indexOf("127.0.0.1")===-1)return s.get("Error_SW_ScriptURL_Https");try{K=new URL(z)}catch(L){return s.get("Error_SW_ScriptURL_ILlegal","",{detail:L})}var z=l(location.href).split("/"),z=(z.pop(),z.join("/")),K=l(K.href).split("/"),K=(K.pop(),K.join("/"));if(z!==K)return s.get("Error_SW_ScriptURL_Scope","",{scope1:K,scope2:z})}(U.swScriptURL);if(j)return J.preloadError=!0,T.call(J,{code:c.ModuleLoadError,msg:j});"serviceWorker"in navigator?(navigator.serviceWorker.register(U.swScriptURL,{scope:"./"}).then(function(F){J.traceLog(m,"sw registered"),F=F.active||F.waiting||F.installing,F.postMessage({scope:u,name:v.SETUP}),J.sw=F}).catch(function(F){J.preloadError=!0,T.call(J,{code:c.ModuleLoadError,msg:s.get("Error_SW_Register_Failed")+"("+F+")",info:s.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(F){F.target.controller.scriptURL!==U.swScriptURL&&T.call(J,{code:c.ModuleLoadError,msg:s.get("Error_SW_Conflict"),info:"controlled by "+F.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(F){var z;if((K=F.data)&&K.scope===u){var K=F.data.name;switch(console.log("[MESSAGE FROM SW]["+K+"]",function(H){var te;try{te=/[0-9]+\.ts/.exec(H)[0]}catch{}return te}((z=F.data.payload)==null?void 0:z.url),F.data.payload),K){case v.SETUP_ACK:q(),J.traceLog(m,"sw ack");var L=(L=F.data.payload)==null?void 0:L.version;L!==f.h5Version&&(J.preloadError=!0,T.call(J,{code:c.ModuleLoadError,msg:s.get("Error_SW_Version_Not_Match","",{swVersion:L,playerVersion:f.h5Version})}));break;case v.ENC_SEGMENT:var O=F.data.payload;J._getDemuxer.then(function(){J.tsDemuxerWorker&&J.tsDemuxerWorker.postMessage({name:h.DEMUX,payload:{buffer:O.buffer,url:O.url,playlistUrl:O.playlistUrl}})});break;case v.ABORT_SEGMENT:J.tsDemuxerWorker&&J.tsDemuxerWorker.postMessage({name:h.FLUSH}),J.tsRemuxer&&J.tsRemuxer.flush()}}})):(J.preloadError=!0,j=location.protocol==="http:"?s.get("Error_SW_Https_required"):s.get("UseChromeForVodEncription")+"(SW not found)",T.call(J,{code:c.EncrptyVideoNotSupport,msg:j}))})}).call(y,C));var A,I,D=performance.now(),B=(y._getDemuxer=(A=C,new g(function(U,J){var q="aliplayer-hls2-demuxer-min.js",j="https://"+f.domain+f.path+f.h5Version+"/hls/"+q;A.assetPrefix&&(j=A.assetPrefix+"/hls/"+q),d.loadJS(j,U,J)}).then(function(){y.traceLog(m,"got demuxer#"+parseInt(performance.now()-D)),window.AliDemuxerWorker&&(y.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,y.tsDemuxerWorker.postMessage({name:h.SETUP,payload:{key:R,debug:C.debug}}),y.tsDemuxerWorker.addEventListener("message",function(U){var J=U.data;switch(J.name){case h.RESULT:if(y.tsRemuxer)try{y.tsRemuxer.remux(J.payload.demuxResult)}catch(q){y.traceLog(m,"remux error: "+q.message+", "+q.stack+"}")}break;case h.DISPOSED:y.tsDemuxerWorker&&(y.tsDemuxerWorker.terminate(),y.tsDemuxerWorker=null);break;case h.ERROR:y.traceLog(m,"demuxer error:  "+J.payload.reason)}}),y.tsDemuxerWorker.addEventListener("error",function(U){y.traceLog(m,"demuxer uncaught error: "+U.message)}))}).catch(function(U){y.preloadError=!0,T.call(y,{code:c.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());function N(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:h.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var U=P.prototype;U&&(U.dispose.call(this),w.prototype.initPlay=U.initPlay),this.sw&&(this.sw.postMessage({scope:u,name:v.DISPOSE}),this.sw=null)}y._getRemuxer=(I=C,new g(function(U,J){var q,j="aliplayer-remuxer-min.js",F="https://"+f.domain+f.path+f.h5Version+"/hls/"+j;I.assetPrefix&&(F=I.assetPrefix+"/hls/"+j),o.IS_IOS&&Number(o.IOS_VERSION)<=14?(q="https://"+f.domain+f.path+f.h5Version+"/hls/aliplayer-remuxer-polyfill.js",I.assetPrefix&&(F=I.assetPrefix+"/hls/"+j),d.loadJS(q,function(){d.loadJS(F,U,J)},J)):d.loadJS(F,U,J)}).then(function(){y.traceLog(m,"got remuxer#"+parseInt(performance.now()-B)),window.LibMux&&(y.tsRemuxer=new _({onResult:function(U){y.sw.postMessage({scope:u,name:v.DEC_SEGMENT,payload:{buffer:U.data.buffer,url:U.id}},[U.data.buffer])}}))}).catch(function(){y.preloadError=!0,T.call(y,{code:c.ModuleLoadError,msg:"ts-remuxer module load error"})})),w.prototype.initPlay=function(){var U=this;g.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){U.trigger(a.Private.H5_Loading_Show),d.get(C.source,function(J){var q;y.fetchHasResult=!0,U.preloadError||(J=function(L,F){var z,K=-1<F.indexOf("EXT-X-STREAM-INF"),L=(F=F.replace(/#EXT-X-KEY:.*\n?/g,""),L.match(/^(.*)\/[^\/]*$/));if(L)return z=L[1],L=K?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,F=F.replace(L,function(O,H,te){return""+H+z+"/"+te+(-1<te.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")}(C.source,J),q="",q=o.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(J):(J=new Blob([J],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(J)),U.tag.src=q,U._initPlayBehavior(),U.firstBuild&&(U.firstBuild=!1,U._executeReadyCallback()))},function(J,q){if(console.log("fetch m3u8 error",J,q),U.traceLog(m,"fetch m3u8 error "+q+"-"+J),!y.fetchHasResult&&(y.fetchHasResult=!0,!U.preloadError)){var j,F;switch(q){case 403:j=c.AuthKeyExpired,F=s.get("Error_AuthKey_Text");break;case 404:j=c.NotFoundSourceURL,F=s.get("Error_Not_Found");break;default:j=c.RequestDataError,F=s.get("Error_Load_M3U8_Failed_Text")}T.call(U,{code:j,msg:F})}})})},Object.defineProperty(w.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return N},set:function(){return N}})}},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/io":43,"../../lib/ua":51,"../base/event/eventtype":71,"./tsremuxer":134,"es6-promise":9}],134:[function(k,E,ne){E.exports.TSRemuxer=function(){function x(g){this.mux=null;var d=window.LibMux;console.log("LibMux ->",d),this.mux=new d({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(f){console.log("remux result -> ",f),g.onResult(f)}})}var b=x.prototype;return b.remux=function(g){this.mux.remuxTS({id:g.id,videoTrack:g.videoTrack,audioTrack:g.audioTrack})},b.flush=function(){this.mux.flush()},b.destroy=function(){this.mux.destroy()},x}()},{}],135:[function(require,module,exports){(function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function k(v){var h=window[$jsskein_array_102[10]];return $jsskein_array_103[2],$jsskein_array_104[0],h[v]=function(){}}for(var E=1;E!==void 0;){var ne=3&E>>2;switch(3&E){case 0:switch(ne){case 0:E=u?5:9;continue;case 1:u++,E=8;continue;case 2:E=u<a[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(ne){case 0:$jsskein_array_103[2],E=window?10:6;continue;case 1:var x=a[$jsskein_array_102[7]](u),b=~(~(x&~g)&~(~x&g)),g=x;n+=$jsskein_array_104[10][$jsskein_array_103[9]](b),E=4;continue;case 2:x=$jsskein_array_103[8],g=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+x,E=5;continue}continue;case 2:switch(ne){case 0:d[f]($jsskein_array_102[8],$jsskein_array_102[9],s,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],o,n),d[$jsskein_array_102[11]](k),E=6;continue;case 1:E=void 0;continue;case 2:var d=[],f=$jsskein_array_103[3];f+=$jsskein_array_103[4];var s=(s=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),o=$jsskein_array_102[4],a=(o=(o+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),n=$jsskein_array_103[6],g=$jsskein_array_103[2],u=$jsskein_array_104[0];E=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;NEXTBB24!==void 0;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;NEXTBB34!==void 0;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;NEXTBB32!==void 0;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;NEXTBB29!==void 0;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(k,E){for(var ne=27;ne!==void 0;){var x=7&ne>>3;switch(7&ne){case 0:switch(x){case 0:n5fg6f(E),ne=28;continue;case 1:h++,ne=2;continue;case 2:var b=$jsskein_array_104[38],g=$jsskein_array_102[26],d=$jsskein_array_103[2],f=$jsskein_array_102[12],ne=18;continue;case 3:var s=$jsskein_array_103[28],o=$jsskein_array_104[1],a=$jsskein_array_103[2],n=$jsskein_array_103[2];ne=33;continue;case 4:console[$jsskein_array_102[36]](g),ne=28;continue}continue;case 1:switch(x){case 0:f++,ne=18;continue;case 1:var c=$jsskein_array_102[32],u=(c=(c=(c=(c=(c+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34])+$jsskein_array_103[30],l=Aliplayer[c],$jsskein_array_103[31]),v=$jsskein_array_102[26],h=$jsskein_array_103[2];ne=2;continue;case 2:var c=s[$jsskein_array_102[7]](n),_=~(~(c&~a)&~(~c&a)),a=c;o+=$jsskein_array_103[29][$jsskein_array_103[9]](_),ne=10;continue;case 3:d=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39],ne=26;continue;case 4:ne=n<s[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(x){case 0:ne=h<u[$jsskein_array_104[25]]?36:34;continue;case 1:n++,ne=33;continue;case 2:ne=f<b[$jsskein_array_104[25]]?12:32;continue;case 3:var m=b[$jsskein_array_103[21]](f),T=~(~(m&~d)&~(~m&d));d=m,g+=$jsskein_array_104[10][$jsskein_array_102[2]](T),ne=1;continue;case 4:ne=(l=v!==l)?0:16;continue}continue;case 3:switch(x){case 0:var y=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);a=$jsskein_array_104[35]+y,ne=17;continue;case 1:ne=n?17:3;continue;case 2:return;case 3:var l=k[$jsskein_array_104[31]];ne=(l=$jsskein_array_102[29]==l)?35:28;continue;case 4:var y=$jsskein_array_104[32],w=(y=(y=(y=(y+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),l=window[y],$jsskein_array_104[33]),P=l[(w+=$jsskein_array_103[25])+$jsskein_array_103[26]],C=$jsskein_array_103[27]===P;ne=C?20:24;continue}continue;case 4:switch(x){case 0:C=o===P,ne=20;continue;case 1:ne=f?26:25;continue;case 2:ne=(l=C)?19:9;continue;case 3:ne=void 0;continue;case 4:var R=~(~(u[$jsskein_array_102[7]](h)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(u[$jsskein_array_103[21]](h)&u[$jsskein_array_103[21]](h))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));v+=$jsskein_array_104[10][$jsskein_array_102[2]](R),ne=8;continue}continue}}}for(var NEXTBB0=0;NEXTBB0!==void 0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:$jsskein_indexLevel111_1===0&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}).call(this,["",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","",14,"fromCharCode","warn","error","dir",!0,"u","nab","",2,"st","",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","\uD855",65])},{"../lib/devtools-detector":34}],136:[function(a,E,ne){var n=a("../lib/oo"),x=a("../lib/data"),b=a("../lib/object"),g=a("../lib/dom"),d=a("../lib/event"),f=a("../lib/function"),s=a("../lib/layout"),o=(a("../lib/constants"),a("../lib/util"),a("../player/base/event/eventtype")),a=a("./component/util"),n=n.extend({init:function(u,v){var h=this,c=(this._player=u,this._eventState="",this._options=b.copy(v),this._el=this.createEl(),u.id);typeof u.id=="function"&&(c=u.id()),this._id=c+"_component_"+x.guid(),this._children=[],this._childIndex={},v.className&&this.addClass(v.className),this._player.on(o.Private.UiH5Ready,function(){h.renderUI(),h.syncUI(),h.bindEvent()})}});n.prototype.renderUI=function(){s.render(this.el(),this.options()),this.el().id=this.id()},n.prototype.syncUI=function(){},n.prototype.bindEvent=function(){},n.prototype.createEl=function(u,v){return g.createEl(u,v)},n.prototype.options=function(u){return u===void 0?this._options:this._options=b.merge(this._options,u)},n.prototype.el=function(){return this._el},n.prototype._contentEl,n.prototype.player=function(){return this._player},n.prototype.contentEl=function(){return this._contentEl||this._el},n.prototype._id,n.prototype.id=function(){return this._id},n.prototype.getId=function(){return this._id},n.prototype.addChild=function(u,v){var h;if(typeof u=="string"){if(!this._player.UI[u])return;h=new this._player.UI[u](this._player,v)}else h=u;return this._children.push(h),typeof h.id=="function"&&(this._childIndex[h.id()]=h),typeof h.el=="function"&&h.el()&&((v=h.el()).id=h.id(),this.contentEl().appendChild(v)),h},n.prototype.removeChild=function(u){if(u&&this._children){for(var v,h=!1,c=this._children.length-1;0<=c;c--)if(this._children[c]===u){h=!0,this._children.splice(c,1);break}h&&(this._childIndex[u.id]=null,v=u.el())&&v.parentNode===this.contentEl()&&this.contentEl().removeChild(u.el())}},n.prototype.initChildren=function(){var u,v,h=this,c=this.options().children;if(c)if(b.isArray(c))for(var _=0;_<c.length;_++)v=typeof(v=c[_])=="string"?(u=v,{}):(u=v.name,v),h.addChild(u,v);else b.each(c,function(m,T){T!==!1&&h.addChild(m,T)})},n.prototype.on=function(u,v){return d.on(this._el,u,f.bind(this,v)),this},n.prototype.off=function(u,v){return d.off(this._el,u,v),this},n.prototype.one=function(u,v){return d.one(this._el,u,f.bind(this,v)),this},n.prototype.trigger=function(u,v){if(this._el)return!v&&v!=0||(this._el.paramData=v),this._eventState=u,d.trigger(this._el,u),this},n.prototype.offAll=function(u){return d.off(this._el,u),this},n.prototype.addClass=function(u){return g.addClass(this._el,u),this},n.prototype.removeClass=function(u){return g.removeClass(this._el,u),this},n.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},n.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},n.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var u=this._children.length-1;0<=u;u--)this._children[u].destroy&&this._children[u].destroy();typeof this.disposeUI=="function"&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),x.removeData(this._el),this._el=null},n.prototype.registerControlBarTooltip=a.registerTooltipEvent,E.exports=n},{"../lib/constants":31,"../lib/data":33,"../lib/dom":35,"../lib/event":36,"../lib/function":38,"../lib/layout":44,"../lib/object":45,"../lib/oo":46,"../lib/util":53,"../player/base/event/eventtype":71,"./component/util":165}],137:[function(s,E,ne){var x=s("../component"),b=s("../../lib/dom"),g=s("../../lib/event"),d=s("../../player/base/event/eventtype"),f=s("../../player/base/plugin/status"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass("prism-big-play-btn")},createEl:function(){var o=x.prototype.createEl.call(this,"div");return o.innerHTML='<div class="outter"></div>',o},bindEvent:function(){var o=this,a=(this._player.on(d.Player.Play,function(){o.addClass("playing"),o.removeClass("pause"),o._hide()}),this._player.on(d.Player.Pause,function(){var n,u;o._player._switchSourcing||(o.removeClass("playing"),o.addClass("pause"),n=o._player._status,u=o._player._seeking,n==f.ended)||n==f.error||n==f.playing||u||o._show()}),document.querySelector("#"+o.id()+" .outter"));g.on(this.el(),"mouseover",function(){b.addClass(a,"big-playbtn-hover-animation")}),g.on(this.el(),"mouseout",function(){b.removeClass(a,"big-playbtn-hover-animation")}),this.on(d.Private.PlayClick,function(){o._player.paused()?o._player.play(!0):o._player.pause(!0)}),this._player.on(d.Private.Play_Btn_Show,function(){o._show()}),this._player.on(d.Private.Play_Btn_Hide,function(){o._hide()})},_show:function(){b.css(this.el(),"display","block")},_hide:function(){b.css(this.el(),"display","none")}});E.exports=s},{"../../lib/dom":35,"../../lib/event":36,"../../player/base/event/eventtype":71,"../../player/base/plugin/status":98,"../component":136}],138:[function(s,E,ne){var x=s("../component"),b=s("../../lib/dom"),g=s("./util"),d=s("../../lang/index"),f=s("../../player/base/event/eventtype"),s=x.extend({init:function(o,a){this.isOpened=!1,x.call(this,o,a),this.addClass("prism-cc-btn")},createEl:function(){return x.prototype.createEl.call(this,"div")},bindEvent:function(){var o=this;this.on("click",function(){b.addClass(o._el,"disabled");var a="on",n="";o.isOpened?(o._player._ccService.close(),a="off"):n=o._player._ccService.open().label,o._player.trigger(f.Private.CCChanged,a),o._player.trigger(f.Private.CCStateChanged,{value:a,lang:n}),o.disabledHandler&&clearTimeout(o.disabledHandler),o.disabledHandler=setTimeout(function(){b.removeClass(o._el,"disabled")},1e3),o._player.trigger(f.Private.MarkerTextHide)}),this._player.on(f.Private.CCChanged,function(a){a=a.paramData,o.isOpened=a!="off"}),g.registerTooltipEvent.call(this,this.el(),function(){return o.isOpened?d.get("CloseSubtitle"):d.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});E.exports=s},{"../../lang/index":26,"../../lib/dom":35,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],139:[function(s,E,ne){var x=s("../component"),b=s("../../player/base/event/eventtype"),g=s("../../lib/event"),d=s("../../lib/dom"),f=s("../../lib/ua"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var o=x.prototype.createEl.call(this);return o.innerHTML='<div class="prism-controlbar-bg"></div>',o},onEvent:function(){var o,a=this.player(),n=a.options(),u=this,v=(g.on(this._el,"mouseover",function(){var h=document.querySelector("#"+u.id()+" .prism-progress-cursor");d.css(h,"display","block")}),g.on(this._el,"mouseout",function(h){var c=document.querySelector("#"+u.id()+" .prism-progress-cursor");d.css(c,"display","none"),a.trigger(b.Private.ThumbnailHide)}),g.on(this._el,"click",function(h){a.trigger(b.Private.ControlBarClick,h)}),f.IS_IOS&&(g.on(this._el,"touchstart",function(){var h=document.querySelector("#"+u.id()+" .prism-progress-cursor");d.css(h,"display","block")}),g.on(this._player.tag,"touchstart",function(){var h=document.querySelector("#"+u.id()+" .prism-progress-cursor");d.css(h,"display","none"),a.trigger(b.Private.ThumbnailHide)})),this.timer=null,n.controlBarVisibility);(v=n.controlBarForOver==1?"hover":v)=="hover"?(u.hide(),o=function(){u._hideHandler&&clearTimeout(u._hideHandler),u._show(),a.fullscreenService.getIsFullScreen()&&u._hide()},a.on(b.Private.MouseOver,function(){o()}),g.on(this._player.tag,"click",function(h){h&&h.target==h.currentTarget&&o()}),g.on(this._player.tag,"touchstart",function(h){h&&h.target==h.currentTarget&&o()}),a.on(b.Private.MouseOut,function(){u._hideHandler=setTimeout(function(){u.hide(),a.trigger(b.Private.HideBar),a.trigger(b.Private.ThumbnailHide),a.trigger(b.Private.VolumeVisibilityChange,""),a.trigger(b.Private.SettingListHide)})})):v=="click"?(a.on(b.Private.Click,function(h){a._isError||(h.preventDefault(),h.stopPropagation(),u._show(),u._hide())}),a.on(b.Player.Ready,function(){u._hide()}),a.on(b.Private.TouchStart,function(){u._show()}),a.on(b.Private.TouchMove,function(){u._show()}),a.on(b.Private.TouchEnd,function(){u._hide()})):v=="never"?u._hide():u._show()},_show:function(){this.show(),this._player.trigger(b.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var o=this,a=this.player().options(),a=a.controlBarVisibility=="never"?0:a.showBarTime;this.timer=setTimeout(function(){o.hide(),o._player.trigger(b.Private.HideBar),o._player.trigger(b.Private.ThumbnailHide),o._player.trigger(b.Private.VolumeVisibilityChange,""),o._player.trigger(b.Private.SettingListHide)},a)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});E.exports=s},{"../../lib/dom":35,"../../lib/event":36,"../../lib/ua":51,"../../player/base/event/eventtype":71,"../component":136}],140:[function(d,E,ne){var x=d("../component"),b=d("../../lib/dom"),g=d("../../player/base/event/eventtype"),d=x.extend({init:function(f,s){x.call(this,f,s),this.addClass("prism-cover")},createEl:function(){var f=x.prototype.createEl.call(this,"div"),s=this.options().cover;return s?f.style.backgroundImage="url("+s+")":b.css(f,"display","none"),f},_hide:function(f){var s=document.querySelector("#"+this.id()+" .prism-cover");s&&b.css(s,"display","none")},_show:function(f){var s=document.querySelector("#"+this.id()+" .prism-cover");s&&b.css(s,"display","block")},bindEvent:function(){this._player.on(g.Private.Cover_Show,this._show),this._player.on(g.Private.Cover_Hide,this._hide)}});E.exports=d},{"../../lib/dom":35,"../../player/base/event/eventtype":71,"../component":136}],141:[function(a,E,ne){var x=a("../component"),b=a("../../lib/util"),g=a("../../lib/dom"),d=a("../../lib/event"),f=a("../../lib/ua"),s=a("../../lang/index"),o=a("../../player/base/event/eventtype"),a=(a("../../lib/playerutil"),x.extend({init:function(n,u){x.call(this,n,u),this.addClass("prism-ErrorMessage")},createEl:function(){var n=x.prototype.createEl.call(this,"div");return n.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+s.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+s.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+s.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",n},bindEvent:function(){var n=this,v=(n._player.on(o.Private.Error_Show,function(h){var c=null;n._player.getMonitorInfo&&(c=n._player.getMonitorInfo()),n._show(h,c)}),n._player.on(o.Private.Error_Hide,function(){n._hide()}),document.querySelector("#"+n.id()+" .prism-button-refresh")),u=(d.on(v,"click",function(){n._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),f.IS_MOBILE&&(v=document.querySelector("#"+n.id()+" .prism-detect-info"),g.addClass(v,"prism-width90")),document.querySelector("#"+n.id()+" .prism-error-detail")),v=document.querySelector("#"+this.id()+" .prism-button-orange");g.css(u,"display","none"),d.on(v,"click",function(){g.css(u,"display","block")})},_show:function(h,u){var h=h.paramData,v=(h.mediaId&&h.mediaId,h.mediaAuth&&h.mediaAuth,h.display_msg||h.error_msg),v=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=v,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=h.error_code,h.diagnosis_info),v=(v?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=v:(v=document.querySelector("#"+this.id()+" .prism-button-orange"),g.css(v,"display","none")),document.querySelector("#"+this.id()+" .vid")),v=(h.mediaId?(g.css(v,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=h.mediaId):g.css(v,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),h=(h.mediaAuth?(g.css(v,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=h.mediaAuth):g.css(v,"display","none"),h.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=h.uuid:(v=document.querySelector("#"+this.id()+" .uuid"),g.css(v,"display","none")),h.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=h.requestId:(v=document.querySelector("#"+this.id()+" .requestId"),g.css(v,"display","none")),h.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=h.serverRequestId:(v=document.querySelector("#"+this.id()+" .vodRequestId"),g.css(v,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=b.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),c=(g.css(h,"display","block"),this);c.playHideHandler&&clearTimeout(c.playHideHandler),c.playHideHandler=setTimeout(function(){c._player.trigger("play_btn_hide")})},_hide:function(){var n=document.querySelector("#"+this.id());g.css(n,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}));E.exports=a},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../../player/base/event/eventtype":71,"../component":136}],142:[function(s,E,ne){var x=s("../component"),b=s("../../player/base/event/eventtype"),g=(s("../../lib/event"),s("../../lib/ua")),d=s("../../lang/index"),f=s("./util"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var o=this;this._player.on(b.Player.RequestFullScreen,function(){g.IS_IOS||o.addClass("fullscreen")}),this._player.on(b.Player.CancelFullScreen,function(){o.removeClass("fullscreen")}),f.registerTooltipEvent.call(this,this.el(),function(){return o._player.fullscreenService.getIsFullScreen()?d.get("ExistFullScreen"):d.get("Fullscreen")}),this.on("click",function(){o._player.fullscreenService.getIsFullScreen()?o._player.fullscreenService.cancelFullScreen():o._player.fullscreenService.requestFullScreen(),o._player.trigger(b.Private.MarkerTextHide)})}});E.exports=s},{"../../lang/index":26,"../../lib/event":36,"../../lib/ua":51,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],143:[function(f,E,ne){var x=f("../component"),b=f("../../lib/dom"),g=f("../../player/base/event/eventtype"),d=f("../../lib/ua.js"),f=x.extend({init:function(s,o){x.call(this,s,o),this.addClass("prism-hide")},createEl:function(){var s=x.prototype.createEl.call(this,"div");return s.innerHTML=d.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',s},_loading_hide:function(s){var o=document.querySelector("#"+this.id()+" .prism-loading");o&&(b.removeClass(o,"prism-loading"),b.addClass(o,"prism-hide"))},_loading_show:function(s){var o=document.querySelector("#"+this.id()+" .prism-hide");o&&(b.removeClass(o,"prism-hide"),b.addClass(o,"prism-loading"))},bindEvent:function(){this._player.on(g.Private.H5_Loading_Show,this._loading_show),this._player.on(g.Private.H5_Loading_Hide,this._loading_hide)}});E.exports=f},{"../../lib/dom":35,"../../lib/ua.js":51,"../../player/base/event/eventtype":71,"../component":136}],144:[function(d,E,ne){var x=d("../component"),b=(d("../../lib/util"),d("../../lib/dom")),g=(d("../../lib/event"),d("../../lib/ua"),d("../../lang/index"),d("../../player/base/event/eventtype")),d=x.extend({init:function(f,s){x.call(this,f,s),this.addClass("prism-info-display")},createEl:function(){return x.prototype.createEl.call(this,"p")},bindEvent:function(){var f=this;f._player.on(g.Private.Info_Show,function(a){var o=document.querySelector("#"+f.id()),a=a.paramData;a&&(a.text!==void 0&&a.text?(o.innerHTML=a.text,a.duration!==void 0&&a.duration&&(f.handler&&clearTimeout(f.handler),f.handler=setTimeout(function(){b.css(o,"display","none")},a.duration)),a.align=="lb"?(b.addClass(o,"prism-info-left-bottom"),b.removeClass(o,"prism-info-top-center")):a.align=="tc"?(b.addClass(o,"prism-info-top-center"),b.removeClass(o,"prism-info-left-bottom")):(b.removeClass(o,"prism-info-left-bottom"),b.removeClass(o,"prism-info-top-center")),a.isBlack?b.addClass(o,"prism-info-black"):b.removeClass(o,"prism-info-black")):o.innerHTML=a,b.css(o,"display","block"))}),f._player.on(g.Private.Info_Hide,function(s){var o=document.querySelector("#"+f.id());b.css(o,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});E.exports=d},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../lib/ua":51,"../../lib/util":53,"../../player/base/event/eventtype":71,"../component":136}],145:[function(f,E,ne){var x=f("../component"),b=f("../../lang/index"),g=f("../../lib/dom"),d=f("../../player/base/event/eventtype"),f=x.extend({init:function(s,o){x.call(this,s,o),this.addClass("prism-license-watermark")},createEl:function(){var s=x.prototype.createEl.call(this,"div");return s.innerHTML=this.genContent(),s},bindEvent:function(){var s=this;this._player.on(d.Private.LicenseTipShow,function(o){s._show(o)}),this._player.on(d.Private.LicenseTipHide,function(){s._hide()})},_show:function(s){var o=document.querySelector("#"+this.id()+".prism-license-watermark");o.innerHTML=this.genContent(s.paramData.message),g.css(o,"display","flex")},_hide:function(){var s=document.querySelector("#"+this.id()+".prism-license-watermark");g.css(s,"display","none")},genContent:function(s){var o="";try{o=this._player._monitor.sessionId}catch{}return'<div class="no-authorization">'+(s||b.get("License_No_Authorization"))+'</div><div class="license-request-id">'+o+'</div><a class="apply-button" target="_blank" href="https://help.aliyun.com/document_detail/434250.html">'+b.get("License_Click_To_Apply")+"</a>"}});E.exports=f},{"../../lang/index":26,"../../lib/dom":35,"../../player/base/event/eventtype":71,"../component":136}],146:[function(o,E,ne){var x=o("../component"),b=o("./util"),g=(o("../../lib/util"),o("../../lib/dom")),d=o("../../lib/event"),f=o("../../lib/playerutil"),s=o("../../lang/index"),o=x.extend({init:function(a,n){x.call(this,a,n),this.addClass("prism-live-display")},createEl:function(){var a=x.prototype.createEl.call(this,"p");return a.innerText="LIVE",f.isLiveShift(this._player._options)&&g.addClass(a,"live-shift-display"),a},bindEvent:function(){var a=document.querySelector("#"+this.id()),n=this;f.isLiveShift(this._player._options)&&(d.on(a,"click",function(){n._player._liveshiftService.switchToLive()}),b.registerTooltipEvent.call(this,this.el(),s.get("SwitchToLive")))}});E.exports=o},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../lib/playerutil":48,"../../lib/util":53,"../component":136,"./util":165}],147:[function(f,E,ne){var x=f("../component"),b=f("../../player/base/event/eventtype"),g=f("./util"),d=f("../../lang/index"),f=x.extend({init:function(s,o){x.call(this,s,o),this.addClass("prism-play-btn")},bindEvent:function(){var s=this;this._player.on(b.Player.Play,function(){s.addClass("playing")}),this._player.on(b.Player.Pause,function(){s.removeClass("playing")}),this.on(b.Private.PlayClick,function(){var o;s._player.paused()?(o=s._player.getCurrentTime(),(s._player.getDuration()<=o||s._player._ended||s._player.exceedPreviewTime(o))&&!s._player._splayer&&s._player.seek(s._player._getPlayStartTime()),s._player.play(!0),s.addClass("playing")):(s._player.pause(!0),s.removeClass("playing")),s._player.trigger(b.Private.MarkerTextHide)}),g.registerTooltipEvent.call(this,this.el(),function(){return s._player.paused()?d.get("Play"):d.get("Pause")})}});E.exports=f},{"../../lang/index":26,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],148:[function(v,E,ne){var x=v("../component"),b=v("../../lib/dom"),g=(v("../../lib/constants"),v("../../lib/event")),d=v("../../lib/ua"),f=v("../../lib/function"),s=v("../../lang/index"),o=v("../../config"),a=v("../../lib/util"),n=(v("../../lib/playerutil"),v("../../player/base/event/eventtype")),u=v("./util").debounce,v=x.extend({init:function(h,c){x.call(this,h,c),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),h.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var h=x.prototype.createEl.call(this);return h.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-progress-mask-left"></div><div class="prism-progress-mask-right"></div>',h},bindEvent:function(){function h(y){_._progressDown=y}var c=this,_=this,m=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),T=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),l=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),this.maskNodeLeft=document.querySelector("#"+this.id()+" .prism-progress-mask-left"),this.maskNodeRight=document.querySelector("#"+this.id()+" .prism-progress-mask-right"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,l=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":o.domain?"https://"+o.domain+o.path+o.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",T.src=l,g.on(this.cursorNode,"mousedown",function(y){_._onMouseDown(y)}),g.on(this.cursorNode,"touchstart",function(y){_._onMouseDown(y)}),g.on(m,"mousemove",function(y){_._progressMove(y)}),g.on(m,"touchmove",function(y){_._progressMove(y)}),g.on(m,"mousedown",function(y){h(!0)}),g.on(m,"touchstart",function(y){h(!0)}),g.on(m,"mouseup",function(y){h(!1)}),g.on(m,"touchend",function(y){h(!1),_._moving&&d.IS_MOBILE&&(_._player.trigger(n.Private.EndStart,{toTime:_._lastSeekTime}),_._moving=!1)}),g.on(this._el,"click",function(y){_._onMouseClick(y)}),this._player.on(n.Private.HideProgress,function(y){_._hideProgress(y)}),this._player.on(n.Private.CancelHideProgress,function(y){_._cancelHideProgress(y)}),this._player.on(n.Private.HideBar,function(y){_._player._seeking=!1}),this._player.on(n.Video.LoadedMetadata,function(){c._updateMaskNode()}),this._player.on(n.Private.UpdateWatchTime,function(){c._updateMaskNode()}),g.on(m,n.Private.MouseOver,function(y){_._onMouseOver(y)}),g.on(m,n.Private.MouseOut,function(y){_._onMouseOut(y)}),g.on(this.controlNode,n.Private.MouseLeave,function(y){_._offMouseUp()}),g.on(this.maskNodeLeft,"mouseenter",function(){_._offMouseUp()}),g.on(this.maskNodeRight,"mouseenter",function(){_._offMouseUp()}),d.IS_PC?(T=u(function(){b.addClass(m,"prism-progress-hover"),b.addClass(_.cursorNode,"cursor-hover")},100),g.on(m,"mouseover",T),l=u(function(){b.removeClass(m,"prism-progress-hover"),b.removeClass(_.cursorNode,"cursor-hover"),_._progressDown=!1},100),g.on(m,"mouseout",l)):(b.addClass(m,"prism-progress-hover"),b.addClass(_.cursorNode,"cursor-hover")),this.bindTimeupdate=f.bind(this,this._onTimeupdate),this._player.on(n.Player.TimeUpdate,this.bindTimeupdate),d.IS_IPAD?this.interval=setInterval(function(){_._onProgress()},500):this._player.on(n.Video.Progress,function(){_._onProgress()}),this._player.on(n.Private.UpdateProgress,function(y){_._updateProgressBar(_.playedNode,y.paramData.targetTime)}),this._player.on(n.Private.UpdateCursorPosition,function(y){_._updateCursorPosition(y.paramData.targetTime)})},_progressMove:function(h){h.preventDefault();var c,_,m=this._getSeconds(h);m!=1/0&&(c=a.formatTime(m),_=this._getDistance(h),this.cursorNode)&&(this._player.trigger(n.Private.ThumbnailShow,{time:m,formatTime:c,left:_,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(h)},_hideProgress:function(h){g.off(this.cursorNode,"mousedown"),g.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(h){var c=this;g.on(this.cursorNode,"mousedown",function(_){c._onMouseDown(_)}),g.on(this.cursorNode,"touchstart",function(_){c._onMouseDown(_)})},_canSeekable:function(h){var c=!0;return c=typeof this._player.canSeekable=="function"?this._player.canSeekable(h):c},_onMouseOver:function(h){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(h){var c=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){c._player.trigger(n.Private.ThumbnailHide),c._mouseInProgress=!1})},_getSeconds:function(_){var _=this._getDistance(_),c=this.el().offsetWidth,_=this._player.getDuration()?_/c*this._player.getDuration():0;return _=(_=_<0?0:_)>this._player.getDuration()?this._player.getDuration():_},_getDistance:function(h){if(h.touches&&h.touches[0]){for(var c=this.el().offsetLeft,_=this.el();_.offsetParent;){var _=_.offsetParent,m=b.getTranslateX(_);c+=_.offsetLeft+m}_.tagName&&_.tagName.toLowerCase()==="body"&&(c+=document.getElementsByTagName("html")[0].offsetLeft);var T=(h.touches?h.touches[0]:h).pageX-c;return T=T<0?0:T}return T=h.offsetX,h.target===this.cursorNode||h.target.offsetParent===this.cursorNode?T+=this.cursorNode.offsetLeft:h.target!==this._el&&h.target.offsetParent!==this._el&&h.target.offsetParent===this.markerNode&&(T+=h.target.offsetLeft),T},_onMouseClick:function(h){var c=this,_=c._getSeconds(h);c._canSeekable(_)?c._player._canSeek(_+c._posOffset)&&(c._player.exceedPreviewTime(_)&&(_=c._player.getPreviewTime()),this._seekTime=_,c._updateProgressBar(this.playedNode,_),c._updateCursorPosition(_),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){c._player._seeking=!0,c._mouseDown&&!d.IS_MOBILE||(c._player.trigger(n.Private.SeekStart,{fromTime:c._player.getCurrentTime()}),c._player.trigger(n.Private.EndStart,{toTime:_})),c._player.seek(_),c._mouseDown=!1,c._mouseClickTimeHandle=null,c._inWaitingSeek=!1},0),this._inWaitingSeek=!0):c._player.trigger(n.Private.Info_Show,{text:s.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(_){var c=this,_=(_.preventDefault(),this._mouseDown=!0,d.IS_PC&&this._player.trigger(n.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),g.on(this.controlNode,"mousemove",function(m){c._onMouseMove(m)}),g.on(this.controlNode,"touchmove",function(m){c._onMouseMove(m)}),g.on(this.controlNode,"mouseup",function(m){c._onControlBarMouseUp(m)}),g.on(this.controlNode,"touchend",function(m){c._onControlBarMouseUp(m)}),c._getSeconds(_));c._canSeekable(_)?c._player.exceedPreviewTime(_)&&c._player.getPreviewTime():c._player.trigger(n.Private.Info_Show,{text:s.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(h){this._onMouseUpIntern(h)},_onControlBarMouseUp:function(h){this._onMouseUpIntern(h)},_onPlayerMouseUp:function(h){this._onMouseUpIntern(h)},_offMouseUp:function(){g.off(this.controlNode,"mousemove"),g.off(this.controlNode,"touchmove"),g.off(this.controlNode,"mouseup"),g.off(this.controlNode,"touchend")},_onMouseUpIntern:function(h){h.preventDefault(),this._offMouseUp(),h=this._getDistance(h)/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(h)||this._player.seek(h),d.IS_PC&&this._player.trigger(n.Private.EndStart,{toTime:h}),this._autoHideThumbnail()},_onMouseMove:function(h){h.preventDefault(),!this._moving&&d.IS_MOBILE&&(this._player.trigger(n.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),h=this._getSeconds(h),this._player.exceedPreviewTime(h)&&(h=this._player.getPreviewTime()),this._player.seek(h),this._updateProgressBar(this.playedNode,h),this._updateCursorPosition(h),this._lastSeekTime=h},_onTimeupdate:function(h){var c=this._player._options.source,c=this._getUrlSuffix(c),_=!1;c==="mp4"&&(d.IS_MAC_SAFARI&&(_=!0),d.IS_IOS&&(_=!0),d.IS_IE11)&&(_=!0),c==="m3u8"&&d.IS_IE11&&(_=!0),this._player._options.mediaType=="audio"&&d.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._progressDown)&&!_||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(n.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(h){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(h,c){var _=this._player.getDuration();this._player._switchSourcing!=1&&_&&(this._seekTime!=-1&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:c=this._seekTime),1<(c=c/_)&&(c=1),h)&&b.css(h,"width",100*c+"%")},_updateCursorPosition:function(h){var c,_,m,T=this._player.getDuration();this._player._switchSourcing!=1&&T&&(c=1,_=(this.cursorNode.offsetWidth||16)/2/(m=this._player.el().clientWidth),m!=0&&(c=1-_),m=(m=h/T-_)<0?0:m,this.cursorNode)&&(c<m?(b.css(this.cursorNode,"right","0px"),b.css(this.cursorNode,"left","auto")):(b.css(this.cursorNode,"right","auto"),b.css(this.cursorNode,"left",100*m+"%")))},_getUrlSuffix:function(h){return!h||typeof h!="string"?"":((h=(h.split("?")[0]||"").split("."))[h.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var h=this;d.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){h._moving||h._player.trigger(n.Private.ThumbnailHide)},2e3))},_makeUninteractible:function(h){["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(c){g.on(h,c,function(_){_.stopPropagation()})})},_updateMaskNode:function(){var c=this._player._getSubVideoConfig(),h=c.start,c=c.end;h||c?(b.css(this.maskNodeLeft,"width","0px"),b.css(this.maskNodeRight,"width","0px")):((h=this._player._getWatchTimeConfig()).watchStartTime&&h.watchEndTime?(c=100*Math.min(h.watchStartTime/this._player.getDuration(),1)+"%",b.css(this.maskNodeLeft,"width",c)):b.css(this.maskNodeLeft,"width","0px"),h.watchEndTime?(c=100*(1-Math.min(h.watchEndTime/this._player.getDuration(),1))+"%",b.css(this.maskNodeRight,"width",c)):b.css(this.maskNodeRight,"width","0px"),this._makeUninteractible(this.maskNodeLeft),this._makeUninteractible(this.maskNodeRight))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null)}});E.exports=v},{"../../config":15,"../../lang/index":26,"../../lib/constants":31,"../../lib/dom":35,"../../lib/event":36,"../../lib/function":38,"../../lib/playerutil":48,"../../lib/ua":51,"../../lib/util":53,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],149:[function(f,E,ne){var x=f("../component"),b=(f("../../lib/util"),f("../../lib/dom")),g=f("../../lib/event"),d=f("../../player/base/event/eventtype"),f=x.extend({init:function(s,o){x.call(this,s,o),this.addClass("prism-marker-text")},createEl:function(){var s=x.prototype.createEl.call(this,"div");return s.innerHTML="<p></p>",s},bindEvent:function(){var s=this;s._player.on(d.Private.MarkerTextShow,function(o){var a=o.paramData,n=d.Player.MarkerDotOver;s._player.trigger(n,o.paramData),a.progressMarker.isCustomized?s._player.trigger(d.Private.LifeCycleChanged,{type:n,data:o.paramData}):(s._thumbnailShowHanlde&&(b.css(s.el(),"display","none"),clearTimeout(s._thumbnailShowHanlde)),s._thumbnailShowHanlde=setTimeout(function(){var u;document.querySelector("#"+s.id()+" p").innerText=a.progressMarker.text||"",a&&(b.css(s.el(),"display","block"),u=s._player.el().offsetWidth,left=u*a.left,width=s.el().offsetWidth,left+width>u?(b.css(s.el(),"right","0px"),b.css(s.el(),"left","auto")):(left=(left-=width/2)<0?0:left,b.css(s.el(),"right","auto"),b.css(s.el(),"left",left+"px")))},30))}),s._player.on(d.Private.MarkerTextHide,function(o){s._player.trigger(d.Player.MarkerDotOut),s._player.trigger(d.Private.LifeCycleChanged,{type:d.Player.MarkerDotOut,data:""}),s._thumbnailShowHanlde&&clearTimeout(s._thumbnailShowHanlde),b.css(s.el(),"display","none")}),g.on(s._player.tag,"click",function(o){o&&o.target==o.currentTarget&&s._player.trigger(d.Private.MarkerTextHide)}),g.on(s._player.tag,"touchstart",function(o){o&&o.target==o.currentTarget&&s._player.trigger(d.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});E.exports=f},{"../../lib/dom":35,"../../lib/event":36,"../../lib/util":53,"../../player/base/event/eventtype":71,"../component":136}],150:[function(s,E,ne){var x=s("./selector"),b=s("../../../lib/object"),g=(s("../../../lib/util"),s("../../../lib/cookie"),s("../../../lib/dom")),d=(s("../../../lib/event"),s("./util"),s("../../../lang/index")),f=s("../../../player/base/event/eventtype"),s=x.extend({init:function(o,a){this.Name=d.get("AudioTrack"),this.Type="audio",this.Tooltip=d.get("AudioTrack_Switch_To"),x.call(this,o,a)},bindEvent:function(){this.bindCommonEvent();var o=this,a=document.querySelector("#"+o.id()+" .selector-list");document.querySelector("#"+o.id()+" .header"),o._player.on(f.Private.ChangeURL,function(){o._hasGeneratedList=!1}),this._player.on(f.Player.AudioTrackSwitch,function(){g.addClass(a,"disabled")}),this._player.on(f.Player.AudioTrackSwitched,function(){g.removeClass(a,"disabled")}),o._player.on(f.Player.AudioTrackReady,function(n){!o._hasGeneratedList&&(o._clear(),n=n.paramData)&&(b.each(n,function(u,v){var h=g.createEl.call(o,"li",{key:u.value,text:u.text}),c=g.createEl.call(o,"span",{key:u.value,text:u.text});c.innerText=u.text,h.appendChild(c),a.appendChild(h)}),o._hasGeneratedList=!0)})},execute:function(o){this._player._audioTrackService.switch(o)}});E.exports=s},{"../../../lang/index":26,"../../../lib/cookie":32,"../../../lib/dom":35,"../../../lib/event":36,"../../../lib/object":45,"../../../lib/util":53,"../../../player/base/event/eventtype":71,"./selector":156,"./util":158}],151:[function(s,E,ne){var x=s("../../component"),b=(s("../../../lib/dom"),s("../../../player/base/event/eventtype")),g=s("./list"),d=s("../../../lang/index"),f=s("../util"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass(a.className||"prism-setting-btn"),this._settingList=new g(o,a),o.addChild(this._settingList,a)},createEl:function(){return x.prototype.createEl.call(this,"div")},bindEvent:function(){var o=this;this.on("click",function(){o._settingList.isOpened?o._player.trigger(b.Private.SettingListHide):o._player.trigger(b.Private.SettingListShow),o._player.trigger(b.Private.SelectorHide),o._player.trigger(b.Private.MarkerTextHide),o._player.trigger(b.Private.VolumeVisibilityChange,"")}),f.registerTooltipEvent.call(this,this.el(),d.get("Setting"))}});E.exports=s},{"../../../lang/index":26,"../../../lib/dom":35,"../../../player/base/event/eventtype":71,"../../component":136,"../util":165,"./list":154}],152:[function(a,E,ne){var x=a("./selector"),b=a("../../../lib/object"),g=a("../../../lib/dom"),d=(a("../../../lib/event"),a("./util"),a("../../../lib/cookie")),f=a("../../../lib/constants"),s=a("../../../lang/index"),o=a("../../../player/base/event/eventtype"),a=x.extend({init:function(n,u){this.Name=s.get("Subtitle"),this.Type="cc",this.Tooltip=s.get("CC_Switch_To"),x.call(this,n,u)},bindEvent:function(){this.bindCommonEvent();var n=this;this._player.on(o.Private.CCStateChanged,function(h){var v=h.paramData.value,h=h.paramData.lang,h=(v=="on"&&h?n._backCCText=h:v=="off"&&n._backCCText==""&&(n._backCCText=n._previousSelection.text),"Off");v=="on"&&(h=n._backCCText),n._player.trigger(o.Private.SelectorUpdateList,{type:"cc",text:h})})},generateList:function(n){var u=document.querySelector("#"+this.id()+" .selector-list"),v=this._player._ccService.tracks,h=this;b.each(v,function(c,_){var m=g.createEl.call(this,"li",{key:c.value,text:c.text}),T=g.createEl.call(this,"span",{key:c.value,text:c.text});c.text==n&&(g.addClass(m,"current"),h._previousSelection=m),T.innerText=c.text,m.appendChild(T),u.appendChild(m)})},execute:function(n){this._backCCText="",d.set(f.SelectedCC,n,365),this._player._ccService.switch(n)}});E.exports=a},{"../../../lang/index":26,"../../../lib/constants":31,"../../../lib/cookie":32,"../../../lib/dom":35,"../../../lib/event":36,"../../../lib/object":45,"../../../player/base/event/eventtype":71,"./selector":156,"./util":158}],153:[function(k,E,ne){E.exports={CC:k("./cc"),Speed:k("./speed"),Quality:k("./quality"),Audio:k("./audio")}},{"./audio":150,"./cc":152,"./quality":155,"./speed":157}],154:[function(n,E,ne){var x=n("../../component"),b=n("../../../lib/dom"),g=n("../../../lib/ua"),d=n("../../../lib/event"),f=n("../../../player/base/event/eventtype"),s=n("./export"),o=n("./util"),a=n("../../../lang/index"),n=x.extend({init:function(u,v){for(var h in this.isOpened=!1,x.call(this,u,v),this.addClass(v.className||"prism-setting-list"),s)h=new s[h](u,v),u.addChild(h,v)},createEl:function(){var u=x.prototype.createEl.call(this,"div"),_="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",v=_.replace(/{type}/g,"speed").replace("{value}",a.get("Speed")),h=_.replace(/{type}/g,"cc").replace("{value}",a.get("Subtitle")),c=_.replace(/{type}/g,"audio").replace("{value}",a.get("AudioTrack")),_=_.replace(/{type}/g,"quality").replace("{value}",a.get("Quality"));return u.innerHTML=v+h+c+_,u},bindEvent:function(){function u(){h._player.trigger(f.Private.SettingListHide),h.isOpened=!1}function v(_){_&&_.type&&(document.querySelector("#"+h.id()+" .prism-setting-"+_.type+" .current-setting").innerText=_.text||"")}var h=this,c=(this._player.on(f.Private.SettingListShow,function(_){h.isOpened=!0,_=_.paramData,v(_),b.css(h.el(),"display","block")}),this._player.on(f.Private.UpdateToSettingList,function(_){_=_.paramData,v(_)}),this._player.on(f.Private.SelectorUpdateList,function(_){_=_.paramData,v(_),h._player.trigger(f.Private.SelectorValueChange,_)}),this._player.on(f.Private.SettingListHide,function(){h.isOpened=!1,b.css(h.el(),"display","none")}),d.on(this.el(),"click",function(m){h._player.trigger(f.Private.SettingListHide);var m=m.srcElement||m.target;(m=o.findItemElementForList(m))&&(m=m.getAttribute("type"),h._player.trigger(f.Private.SelectorShow,{type:m}))}),g.IS_MOBILE?"touchleave":"mouseleave");d.on(this.el(),c,function(){u()}),d.on(this._player.tag,"click",function(_){_&&_.target==_.currentTarget&&u()}),d.on(this._player.tag,"touchstart",function(_){_&&_.target==_.currentTarget&&u()}),this._player.on(f.Private.QualityChange,function(l){var m,T,l=l.paramData;l.levelSwitch&&(m=document.querySelector("#"+h.id()+" .prism-setting-quality .current-setting"),T=a.get("Auto"),l=l.desc,-1<m.innerText.indexOf(T))&&(l&&-1<String(l).indexOf("(")?T=T+"-"+l:T+=l?"("+l+")":"",m.innerText=T)})}});E.exports=n},{"../../../lang/index":26,"../../../lib/dom":35,"../../../lib/event":36,"../../../lib/ua":51,"../../../player/base/event/eventtype":71,"../../component":136,"./export":153,"./util":158}],155:[function(a,E,ne){var x=a("./selector"),b=a("../../../lib/object"),g=(a("../../../lib/util"),a("../../../lib/cookie")),d=a("../../../lib/dom"),f=(a("../../../lib/event"),a("../../../lib/constants")),s=a("../../../lang/index"),o=a("../../../player/base/event/eventtype"),a=x.extend({init:function(n,u){this.Name=s.get("Quality"),this.Type="quality",this.Tooltip=s.get("Quality_Switch_To"),x.call(this,n,u),this._isMasterLevel=!1},showTip:function(n,u){this._player.trigger(o.Private.Info_Show,{text:n,duration:u,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var n=this,u=(this._player.on(o.Private.QualityChange,function(v){var h,c,_=0<n._player._urls.length?n._player._urls:n._player._qualityService.levels;(data=v.paramData).levelSwitch?(h=data.desc||data.bitrate,n._autoSWitchDesc=h,n._updateText(h)):0<n._player._currentPlayIndex&&(n._autoSWitchDesc="",c=_[(h=n._player._currentPlayIndex)-1].desc,_=_[h].desc,n.showTip(c+v.paramData+_,1e3),n._player.trigger(o.Private.SelectorValueChange,{type:n.Type,text:_}))}),document.querySelector("#"+n.id()+" .selector-list"));this._player.on(o.Player.LevelSwitch,function(){d.addClass(u,"disabled")}),this._player.on(o.Player.LevelSwitched,function(){d.removeClass(u,"disabled")})},generateList:function(n){var u,v=this._player._urls,h=this._player._currentPlayIndex,c=this._player._qualityService.levels,_=(0<c.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(h=(v=c).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<v.length&&(u=this,b.each(v,function(m,T){var l,y;(m.desc||m.bitrate)&&(l=d.createEl.call(this,"li",{key:m.Url,index:T,text:m.desc||m.bitrate}),y=d.createEl.call(this,"span",{key:m.Url,index:T,text:m.desc||m.bitrate}),T==h&&(d.addClass(l,"current"),u._previousSelection=l),y.innerText=m.desc||m.bitrate,l.appendChild(y),_.appendChild(l))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(n){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var u,v=this._player._qualityService.levels,h=0;h<v.length;h++)v[h].Url==n&&v[h].desc!=s.get("Auto")&&(u=v[h],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(n,u):(c=this._player.autoplay||this._player._status!="pause",this._player._loadByUrlInner(n,this._player.getCurrentTime(),c))}else{for(var c,_=this._player._urls.length,m=this._player._currentPlayIndex,T=-1,h=0;h<_;h++)if(this._player._urls[h].Url==n){T=this._player._currentPlayIndex=h,g.set(f.SelectedStreamLevel,this._player._urls[h].definition,365);break}m!=T&&-1<T&&(m=this._player.getCurrentTime(),c=this._player.autoplay||this._player._status!="pause",this._player.autoplay||m!=0||(c=!1),this._player._switchLevel&&!this._player._options.isLive&&this._player._options.isVBR?this._player._switchLevel(n):this._player._loadByUrlInner(n,m,c))}var l=this;setTimeout(function(){l._player._switchSourcing=!1})},_updateText:function(n){var u=document.querySelector("#"+this.id()+" .selector-list .current"),v=document.querySelector("#"+this.id()+" .selector-list .current span"),h=s.get("Auto");v&&v.innerText&&-1<v.innerText.indexOf(h)&&(n&&-1<String(n).indexOf("(")?h=h+"-"+n:h+=n?"("+n+")":"",v.innerText=h,u)&&(u.text=h)},_resetAutoText:function(){for(var n=s.get("Auto"),u=document.querySelectorAll("#"+this.id()+" .selector-list li"),v=0;v<=u.length;v++){var h=u[v],c=h.querySelector("span");if(-1<c.innerText.indexOf(n)){c.innerText=n,h.text=n;break}}}});E.exports=a},{"../../../lang/index":26,"../../../lib/constants":31,"../../../lib/cookie":32,"../../../lib/dom":35,"../../../lib/event":36,"../../../lib/object":45,"../../../lib/util":53,"../../../player/base/event/eventtype":71,"./selector":156}],156:[function(o,E,ne){var x=o("../../component"),b=(o("../../../lib/object"),o("../../../lib/util"),o("../../../lib/ua")),g=(o("../../../lib/cookie"),o("../../../lib/dom")),d=o("../../../lib/event"),f=o("./util"),s=(o("../../../lang/index"),o("../../../player/base/event/eventtype")),o=x.extend({init:function(a,n){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",x.call(this,a,n),this.className=n.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var a=x.prototype.createEl.call(this,"div");return a.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',a},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var a=this,n=document.querySelector("#"+a.id()+" .selector-list"),h=document.querySelector("#"+a.id()+" .header");function u(){a._hasGeneratedList||(a._clear(),a.generateList(a._backupSelector),a._backupSelector="",a._hasGeneratedList=!0)}this._player.on(s.Private.ChangeURL,function(){a._hasGeneratedList=!1}),d.on(h,"click",function(){a._player.trigger(s.Private.SelectorHide),a._player.trigger(s.Private.SettingListShow,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})}),d.on(n,"click",function(_){var _=_.srcElement||_.target,m=_.key,T=_.text;a._player.traceLog("selector.js","selector::click#"+a.Name+"#"+a.Type+"#"+T+"#"+m),a._player.trigger(s.Player.SettingSelected,{name:a.Name,type:a.Type,text:T,key:m}),T!==void 0&&(a._previousSelection&&g.removeClass(a._previousSelection,"current"),a._previousSelection=f.findliElementForSelector(_),g.addClass(a._previousSelection,"current"),a.execute&&a.execute(m),_=a.Tooltip+"<span>"+T+"</span>",a._player.trigger(s.Private.Info_Show,{text:_,duration:3e3,align:"lb"}))}),a._player.on(s.Private.SelectorHide,function(){v()}),a._player.on(s.Private.SelectorValueChange,function(c){var _=c.paramData;if(_&&_.type==a.Type){var m=document.querySelectorAll("#"+a.id()+" .selector-list li");if(m){for(var T=m.length,l=(T==0&&(a._backupSelector=_.text),-1),y=0;y<T;y++)if(m[y].text==_.text){l=y;break}a._previousSelection&&(g.removeClass(a._previousSelection,"current"),a._previousSelection=null),l!==-1?(g.addClass(m[l],"current"),a._previousSelection=m[l]):a._previousSelection||console.warn("UI Not Sync: No Such Option '"+_.text+"' in '"+_.type+"'")}}}),a._player.on(s.Private.SettingListShow,function(){u()}),a._player.on(s.Private.SelectorGenerateList,function(m){var _=m.paramData&&m.paramData.type,m=m.paramData&&m.paramData.value;_===a.Type&&(a._hasGeneratedList=!1,m&&(a._backupSelector=m),u())}),a._player.on(s.Private.SelectorShow,function(c){(c=c.paramData).type==a.Type&&(c=document.querySelector("#"+a._player.id()+" .prism-"+c.type+"-selector"),a._hasGeneratedList||u(),g.css(c,"display","block"))});var v=function(){g.css(a.el(),"display","none"),a._player.trigger(s.Private.UpdateToSettingList,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})},h=b.IS_MOBILE?"touchleave":"mouseleave";d.on(this.el(),h,function(){v()}),d.on(this._player.tag,"click",function(c){c&&c.target==c.currentTarget&&v()}),d.on(this._player.tag,"touchstart",function(c){c&&c.target==c.currentTarget&&v()})},setSelected:function(a){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});E.exports=o},{"../../../lang/index":26,"../../../lib/cookie":32,"../../../lib/dom":35,"../../../lib/event":36,"../../../lib/object":45,"../../../lib/ua":51,"../../../lib/util":53,"../../../player/base/event/eventtype":71,"../../component":136,"./util":158}],157:[function(o,E,ne){var x=o("./selector"),b=o("../../../lib/object"),g=(o("../../../lib/util"),o("../../../lib/cookie"),o("../../../lib/dom")),d=(o("../../../lib/event"),o("./util"),o("../../../lib/constants")),f=o("../../../lang/index"),s=o("../../../player/base/event/eventtype"),o=x.extend({init:function(a,n){var u=this;this.Name=f.get("Speed"),this.Type="speed",this.Tooltip=f.get("Speed_Switch_To"),this.speedPreStore=1,this.listGenerated=!1,x.call(this,a,n),this._player.on(s.Private.PlaybackRateChanged,function(v){u.speedPreStore=v.paramData,u.listGenerated&&u._player.trigger(s.Private.SelectorUpdateList,{type:"speed",text:v.paramData})})},generateList:function(){var a=document.querySelector("#"+this.id()+" .selector-list"),n=this._player._options.speedLevels,n=this.verifySpeedLevels(n)?n:d.SpeedLevels,u=this;b.each(n,function(v,h){var c=g.createEl.call(this,"li",{key:v.key,text:v.text}),_=g.createEl.call(this,"span",{key:v.key,text:v.text});_.innerText=v.text,v.key==u.speedPreStore&&(g.addClass(c,"current"),u._previousSelection=c),c.appendChild(_),a.appendChild(c)}),this.listGenerated=!0},execute:function(a){this._player.setSpeed(a,!1)},verifySpeedLevels:function(a){var n=0;if(a&&a.length)try{a.forEach(function(u){typeof u.key=="number"&&u.key==u.key&&0<=u.key&&n++})}catch{return!1}return a&&n===a.length}});E.exports=o},{"../../../lang/index":26,"../../../lib/constants":31,"../../../lib/cookie":32,"../../../lib/dom":35,"../../../lib/event":36,"../../../lib/object":45,"../../../lib/util":53,"../../../player/base/event/eventtype":71,"./selector":156,"./util":158}],158:[function(k,E,ne){E.exports.findliElementForSelector=function(x){var b;return x&&x.tagName.toLowerCase()!="li"?(b=x.parentElement)&&b.tagName.toLowerCase()=="li"?b:null:x},E.exports.findliElementByKey=function(x,b){return document.querySelectors(x),null},E.exports.findItemElementForList=function(x){var b;return!x||-1<x.className.indexOf("prism-setting-item")||(b=x.parentElement)&&(x=E.exports.findItemElementForList(b)),x}},{}],159:[function(s,E,ne){var x=s("../component"),b=s("../../lib/dom"),g=s("../../lang/index"),d=s("../../player/base/event/eventtype"),f=s("./util"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass("prism-snapshot-btn")},createEl:function(){return x.prototype.createEl.call(this,"div")},bindEvent:function(){var o=this,a=this._player;a.on(d.Private.Snapshot_Hide,function(){b.css(o._el,"display","none")}),f.registerTooltipEvent.call(this,this.el(),g.get("Snapshot")),this.on("click",function(){o.trigger(d.Player.Snapshoting),o.trigger(d.Player.Snapshoted,a.takeSnapshot())})}});E.exports=s},{"../../lang/index":26,"../../lib/dom":35,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],160:[function(b,E,ne){var x=b("../component"),b=(b("../../lib/dom"),b("../../player/base/event/eventtype"),x.extend({init:function(g,d){x.call(this,g,d),this.addClass("prism-text-overlay")},createEl:function(){return x.prototype.createEl.call(this,"div")},_hide:function(g){},_show:function(g){},bindEvent:function(){}}));E.exports=b},{"../../lib/dom":35,"../../player/base/event/eventtype":71,"../component":136}],161:[function(s,E,ne){var x=s("../component"),b=(s("../../lib/util"),s("../../lib/dom")),g=s("../../lib/event"),d=(s("../../lib/ua"),s("../../lang/index"),s("../../player/base/event/eventtype")),f=s("./util"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass("prism-thumbnail")},createEl:function(){var o=x.prototype.createEl.call(this,"div");return o.innerHTML="<img></img><span></span>",o},bindEvent:function(){var o=this,a=(g.on(this._el,"mousemove",function(n){n.preventDefault()}),g.on(this._el,"touchmove",function(n){n.preventDefault()}),o._player.on(d.Private.ThumbnailLoaded,function(c){var u,v,h,c=c.paramData;c&&0<c.length&&(u=o._player._thumbnailService.makeUrl(c[0].text),o._player.log("THUMBNAILSTART",{tu:encodeURIComponent(u)}),v=new Date().getTime(),c[0].isBig?(b.css(o.el(),"background","url("+u+")"),b.css(o.el(),"width",c[0].w+"px"),b.css(o.el(),"height",c[0].h+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-v})):((h=document.querySelector("#"+o.id()+" img")).onload=function(){var _=h.width,m=h.height;b.css(o.el(),"width",_+"px"),b.css(o.el(),"height",m+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-v})},h.src=u))}),f.throttle(function(_){var u,v,h,_=_[0],c=document.querySelector("#"+o.id()+" span"),_=_.paramData;c.innerText=_.formatTime,_&&((u=o._player._thumbnailService.findAvailableCue(_.time))?u.isBig?(v=o._player._thumbnailService.makeUrl(u.text),b.css(o.el(),"background","url("+v+")"),u.w,u.h,h=-1*u.x+"px "+-1*u.y+"px",b.css(o.el(),"background-position",h)):(h=document.querySelector("#"+o.id()+" img"),v=o._player._thumbnailService.makeUrl(u.text),h.src!=v&&(h.src=v)):(b.css(o.el(),"border","none"),b.css(c,"left","0px")),b.css(o.el(),"display","block"),h=0,v=(u?o.el():c).offsetWidth,h=_.left+v>_.progressWidth?_.left-v:(h=_.left-v/2)<0?0:h,b.css(o.el(),"left",h+"px"))},30));o._player.on(d.Private.ThumbnailShow,a),o._player.on(d.Private.ThumbnailHide,function(n){b.css(o.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});E.exports=s},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../lib/ua":51,"../../lib/util":53,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],162:[function(d,E,ne){var x=d("../component"),b=d("../../lib/util"),g=d("../../player/base/event/eventtype"),d=x.extend({init:function(f,s){x.call(this,f,s),this.addClass("prism-time-display")},createEl:function(){var f=x.prototype.createEl.call(this,"div");return f.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',f},bindEvent:function(){var f=this;this._player.on(g.Video.DurationChange,function(){var s=b.formatTime(f._player.getDisplayDuration());s?(document.querySelector("#"+f.id()+" .time-bound").style.display="inline",document.querySelector("#"+f.id()+" .duration").style.display="inline",document.querySelector("#"+f.id()+" .duration").innerText=s):(document.querySelector("#"+f.id()+" .duration").style.display="none",document.querySelector("#"+f.id()+" .time-bound").style.display="none")}),this._player.on(g.Video.TimeUpdate,function(){var s=f._player.getCurrentTime(),s=b.formatTime(s);document.querySelector("#"+f.id()+" .current-time")&&(s?(document.querySelector("#"+f.id()+" .current-time").style.display="inline",document.querySelector("#"+f.id()+" .current-time").innerText=s):document.querySelector("#"+f.id()+" .current-time").style.display="none")})}});E.exports=d},{"../../lib/util":53,"../../player/base/event/eventtype":71,"../component":136}],163:[function(d,E,ne){var x=d("../component"),b=d("../../lib/dom"),g=d("../../player/base/event/eventtype"),d=x.extend({init:function(f,s){x.call(this,f,s),this.addClass("prism-tooltip")},createEl:function(){var f=x.prototype.createEl.call(this,"p");return f.innerText="",f},bindEvent:function(){var f=this;f._player.on(g.Private.TooltipShow,function(a){var o=document.querySelector("#"+f.id()),a=a.paramData,n=(o.innerText=a.text,b.css(o,"display","block"),o.offsetWidth),u=document.querySelector("#"+f._player.id()+" .prism-controlbar");u&&(u=u.offsetWidth,a.left+n>u?b.css(o,"left",u-n+"px"):b.css(o,"left",a.left-(n-a.width)/2+"px"))}),f._player.on(g.Private.TooltipHide,function(s){var o=document.querySelector("#"+f.id());b.css(o,"display","none")})}});E.exports=d},{"../../lib/dom":35,"../../player/base/event/eventtype":71,"../component":136}],164:[function(s,E,ne){var x=s("../component"),b=s("../../lib/dom"),g=s("../../lib/event"),d=s("../../lang/index"),f=s("../../player/base/event/eventtype"),s=x.extend({init:function(o,a){x.call(this,o,a),this.addClass("prism-unmute-btn")},createEl:function(){var o=x.prototype.createEl.call(this,"div");return o.innerText=d.get("Click_To_Unmute"),o},bindEvent:function(){var o=this;this._player.on(f.Private.MutedAutoplay,function(){var a;(a=o._player.getOptions().autoplayPolicy)!=null&&a.showUnmuteBtn&&o._show()}),g.on(this.el(),"click",function(){o._player.unMute(!0),o._hide()})},_show:function(){b.css(this.el(),"display","block")},_hide:function(){b.css(this.el(),"display","none")}});E.exports=s},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../player/base/event/eventtype":71,"../component":136}],165:[function(k,E,ne){var x=k("../../lib/event"),b=k("../../player/base/event/eventtype");E.exports.registerTooltipEvent=function(g,d){function f(){s._controlbarTooltipHandler&&(clearTimeout(s._controlbarTooltipHandler),s._controlbarTooltipHandler=null)}var s=this;x.on(this.el(),"mouseover",function(o){f(),s._controlbarTooltipHandler=setTimeout(function(){s._player.trigger(b.Private.TooltipHide)},4e3);var a=s.el().offsetLeft,n=s.el().offsetWidth,u=d;typeof d=="function"&&(u=d.call(this)),s._player.trigger(b.Private.TooltipShow,{left:a,width:n,text:u})}),x.on(this.el(),"mouseout",function(){f(),s._player.trigger(b.Private.TooltipHide)})},E.exports.throttle=function(g,d){var f=Date.now();return function(){var s=arguments,o=Date.now();d<=o-f&&(g(s),f=o)}},E.exports.debounce=function(g,d){var f;return function(){var s=this,o=arguments;clearTimeout(f),f=setTimeout(function(){g.apply(s,o)},d)}}},{"../../lib/event":36,"../../player/base/event/eventtype":71}],166:[function(a,E,ne){var x=a("../component"),b=a("../../lib/dom"),g=a("../../lib/event"),d=a("../../player/base/event/eventtype"),f=a("./util"),s=a("../../lang/index"),o=a("./volumecontrol"),a=x.extend({init:function(n,u){x.call(this,n,u),this.addClass("prism-volume");var v=new o(n,u);n.addChild(v,u),this.volumeControl=v},createEl:function(){var n=x.prototype.createEl.call(this,"div");return n.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',n},bindEvent:function(){var n=this,u=n._player,v=(this.icon=document.querySelector("#"+n.id()+"  .volume-icon"),f.registerTooltipEvent.call(this,this.el(),function(){return n._player.muted()||n._player.getVolume()==0?s.get("Muted"):s.get("Volume")}),g.on(this.icon,"click",function(c){var _;n.volumeControl._shown?u.muted()?u.unMute():u.mute():(_=n.el().offsetLeft,n._player.trigger(d.Private.SettingListHide),n._player.trigger(d.Private.SelectorHide),n._player.trigger(d.Private.VolumeVisibilityChange,_),n._player.trigger(d.Private.MarkerTextHide))}),document.querySelector("#"+n.id()+"  .long-horizontal")),h=document.querySelector("#"+n.id()+"  .short-horizontal");g.on(this.el(),"mouseover",function(){b.removeClass(v,"volume-hover-animation"),setTimeout(function(){b.addClass(v,"volume-hover-animation")}),setTimeout(function(){b.removeClass(v,"volume-hover-animation"),b.addClass(h,"volume-hover-animation"),setTimeout(function(){b.removeClass(h,"volume-hover-animation"),b.addClass(v,"volume-hover-animation")},300)},300)}),g.on(window,"resize",function(){var c;n.volumeControl._shown&&(c=n.el().offsetLeft,n._player.trigger(d.Private.VolumeUpdatePosition,c))})}});E.exports=a},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../player/base/event/eventtype":71,"../component":136,"./util":165,"./volumecontrol":167}],167:[function(f,E,ne){var x=f("../component"),b=f("../../lib/dom"),g=f("../../lib/event"),d=f("../../player/base/event/eventtype"),f=(f("./util"),f("../../lang/index"),x.extend({init:function(s,o){x.call(this,s,o),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var s=x.prototype.createEl.call(this,"div");return s.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',s},bindEvent:function(){var s=this;this.icon=document.querySelector("#"+s._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+s.id()),this.volumnValue=document.querySelector("#"+s.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+s.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+s.id()+"  .volume-cursor"),this._player.on(d.Private.VolumeVisibilityChange,function(n){var a,n=n.paramData;!s._shown&&n?(a=s._player.getVolume(),s._setVolumnUI(a),b.css(s.control,"display","block"),n&&s._updatePosition(n),s._shown=!0):s._hide()}),this._player.on(d.Private.VolumeUpdatePosition,function(o){o=o.paramData,s._shown&&s._updatePosition(o)}),this._player.on(d.Private.ControlBarClick,function(o){b.hasClass(o.paramData.target,"prism-controlbar-bg")&&s._hide()}),g.on(this.volumnRange,"click",function(o){o=b.getPointerPosition(s.volumnRange,o).y,o<0||1<o||(s._setVolumnUI(o=1<(o=o<0?0:o)?1:o),s._setMuteUI(o),s._player.setVolume(o))}),g.on(this._player.tag,"click",function(o){o&&o.target==o.currentTarget&&s._hide()}),g.on(this._player.tag,"touchstart",function(o){o&&o.target==o.currentTarget&&s._hide()}),g.on(this.volumnCursor,"mousedown",function(o){s._onMouseDown(o)}),g.on(this.volumnCursor,"touchstart",function(o){s._onMouseDown(o)}),this._player.on(d.Private.VolumnChanged,function(o){o=o.paramData,-1<o&&s._setVolumnUI(o),s._setMuteUI(o)}),g.on(this.control,"mouseleave",function(){s._offEvent(),s._hide()}),g.on(this.control,"mouseover",function(){b.addClass(s.control,"hover")}),s._rangeBottom=s._getBottom()},_getBottom:function(){var s;return window.getComputedStyle?(s=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(s)):26},_onMouseDown:function(s){var o=this;s.preventDefault(),g.on(this.control,"mousemove",function(a){o._onMouseMove(a)}),g.on(this.control,"touchmove",function(a){o._onMouseMove(a)}),g.on(this._player.tag,"mouseup",function(a){o._onMouseUp(a)}),g.on(this._player.tag,"touchend",function(a){o._onMouseUp(a)}),g.on(this.control,"mouseup",function(a){o._onMouseUp(a)}),g.on(this.control,"touchend",function(a){o._onMouseUp(a)})},_onMouseUp:function(s){s.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(s=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(s),this._setMuteUI(s))},_onMouseMove:function(s){s.preventDefault(),s=b.getPointerPosition(this.volumnRange,s).y,s<0||1<s||this._setVolumnUI(s=1<(s=s<0?0:s)?1:s)},_getPosition:function(s){for(var o=this.volumnRange,a=0;o=o.offsetParent;)a+=o.offsetTop;var n=this.volumnRange.offsetHeight,u=this.volumnCursor.offsetHeight,v=(s.touches?s.touches[0]:s).pageY;return(n-((v=n<v-a?s.clientY:v)-a)+u)/this.volumnRange.offsetHeight},_offEvent:function(){g.off(this._player.tag,"mouseup"),g.off(this._player.tag,"touchend"),g.off(this.control,"mousemove"),g.off(this.control,"touchmove"),g.off(this.control,"mouseup"),g.off(this.control,"touchend")},_setMuteUI:function(s){isNaN(s)||(s==0||s==-1?b.addClass(this.icon,"mute"):b.removeClass(this.icon,"mute"))},_setVolumnUI:function(s){isNaN(s)||(b.css(this.volumnValue,"height",100*s+"%"),b.css(this.volumnCursor,"bottom",100*(s=s==1?.99:s)+"%"))},_hide:function(){b.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(s){b.css(this.control,"left",s-5+"px")}}));E.exports=f},{"../../lang/index":26,"../../lib/dom":35,"../../lib/event":36,"../../player/base/event/eventtype":71,"../component":136,"./util":165}],168:[function(k,E,ne){E.exports={H5Loading:k("./component/h5-loading"),bigPlayButton:k("./component/big-play-button"),unmuteButton:k("./component/unmute-button"),controlBar:k("./component/controlbar"),progress:k("./component/progress"),playButton:k("./component/play-button"),liveDisplay:k("./component/live-display"),timeDisplay:k("./component/time-display"),fullScreenButton:k("./component/fullscreen-button"),volume:k("./component/volume"),snapshot:k("./component/snapshot"),errorDisplay:k("./component/error-display"),infoDisplay:k("./component/info-display"),liveShiftProgress:k("../commonui/liveshiftprogress"),liveShiftTimeDisplay:k("../commonui/livetimedisplay"),setting:k("./component/setting/button"),subtitle:k("./component/cc-button"),thumbnail:k("./component/thumbnail"),tooltip:k("./component/tooltip")}},{"../commonui/liveshiftprogress":13,"../commonui/livetimedisplay":14,"./component/big-play-button":137,"./component/cc-button":138,"./component/controlbar":139,"./component/error-display":141,"./component/fullscreen-button":142,"./component/h5-loading":143,"./component/info-display":144,"./component/live-display":146,"./component/play-button":147,"./component/progress":148,"./component/setting/button":151,"./component/snapshot":159,"./component/thumbnail":161,"./component/time-display":162,"./component/tooltip":163,"./component/unmute-button":164,"./component/volume":166}]},{},[16])(16)})})(aliplayerMin);var aliplayerMinExports=aliplayerMin.exports;const Aliplayer$1=getDefaultExportFromCjs(aliplayerMinExports),_sfc_main=defineComponent({name:"VideoPlayer",components:{QuestionList,NoteList,ReviewList},setup(){const k=useRoute(),E=useRouter(),ne=ref(0),x=ref(null),b=ref(null),g=ref([]),d=ref(null),f=ref(null),s=ref(!1);ref(!1);const o=ref(!1),a=ref(!1),n=ref(""),u=ref(!1),v=async w=>{const P=await getLessonDetail(k.params.courseId);P.hasStudy=!0,P.classId=w,x.value=P;const C=await getLessonChapter({courseId:k.params.courseId});if(g.value=[...C.map(R=>R.chapterList).flat()],d.value=g.value.find(R=>R.videoId===k.params.videoId),!d.value){showFailToast("");return}m()},h=()=>{b.value=new Aliplayer$1({license:{domain:"bjsyrc.cn",key:"EPSmMyEFEooJZm10S5cf853f03b2b4bd098e11931a4aeeb83"},id:"player-con",vid:d.value.videoId,playauth:d.value.playauth,width:"100%",height:"260px",autoplay:!1,isLive:!1,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0},w=>{w.on("ended",()=>{console.log("ended"),clearTimeout(f.value),l();const P=g.value.findIndex(R=>R.videoId===k.params.videoId&&d.value.id===R.id),C=g.value[P+1];C&&!u.value&&(showToast(""),setTimeout(()=>{_(C)},2e3),u.value=!0)}),w.on("canplay",function(){console.log("canplay",d.value.progress)}),w.on("ready",()=>{console.log("ready",d.value.progress)}),w.on("play",()=>{o.value||(w.seek(d.value.progress),setTimeout(()=>{o.value=!0},100)),console.log("play"),l(),T(s.value),s.value=!0}),w.on("error",()=>{console.log("error")})})},c=async()=>{await updateEvaluation({courseId:k.params.courseId,content:n.value}),a.value=!1,showToast("")},_=w=>{d.value=w,console.log("update",w.videoId),b.value.dispose(),nextTick(()=>{E.push({path:`/video/${k.params.courseId}/${w.videoId}`}).then(()=>{window.location.reload()})})},m=async()=>{const w=await getVideoAuth({courseId:k.params.courseId,videoId:k.params.videoId});d.value.playauth=w,h()},T=w=>{b.value&&(w||(f.value=setTimeout(()=>{l(),T(w)},1e3*5)))},l=()=>{createStudyHistory({courseId:Number(k.params.courseId),chapterId:d.value.id,fileId:d.value.fileId,progress:b.value.getCurrentTime(),classId:x.value.classId||null})},y=()=>{joinClass({courseId:k.params.courseId}).then(w=>{v(w)})};return onMounted(async()=>{if(!k.params.videoId)return showFailToast("");y()}),onUnmounted(()=>{f.value&&clearTimeout(f.value),b.value&&b.value.dispose()}),{activeTab:ne,course:x,lessonChapter:d,showPopup:a,rating:n,fSeek:o,onConfirm:c}}}),_hoisted_1={class:"video-player"},_hoisted_2={class:"course-title"},_hoisted_3={key:0,class:"teacher-info flex text-left mt-2"},_hoisted_4={class:"teacher-details"},_hoisted_5={class:"text-xl p-4 font-semibold"},_hoisted_6={class:"review-popup"},_hoisted_7={class:"content-section mb-2 flex"},_hoisted_8={class:"flex"};function _sfc_render(k,E,ne,x,b,g){var l;const d=Tag,f=Image$1,s=Card,o=resolveComponent("question-list"),a=Tab,n=resolveComponent("note-list"),u=resolveComponent("review-list"),v=Tabs,h=Radio,c=RadioGroup,_=Divider,m=Button,T=Popup;return openBlock(),createElementBlock("div",_hoisted_1,[k.course?(openBlock(),createBlock(s,{key:0,thumb:k.course.imgUrl,title:k.course.title,desc:k.course.courseDesc,class:"course-info mb-4"},{title:withCtx(()=>[createBaseVNode("div",_hoisted_2,toDisplayString(k.course.title),1)]),tags:withCtx(()=>[createVNode(d,{plain:"",class:"mr-2"},{default:withCtx(()=>[createTextVNode(": "+toDisplayString(k.course.durationStr),1)]),_:1}),createVNode(d,{plain:"",class:"mr-2"},{default:withCtx(()=>[createTextVNode(": "+toDisplayString(k.course.studyCount)+" ",1)]),_:1}),createVNode(d,{plain:""},{default:withCtx(()=>[createTextVNode(": "+toDisplayString(k.course.score),1)]),_:1}),k.course.teacherInfo?(openBlock(),createElementBlock("div",_hoisted_3,[createVNode(f,{round:"",width:"40px",height:"40px",src:k.course.teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),createBaseVNode("div",_hoisted_4,[createBaseVNode("p",null,toDisplayString(k.course.teacherInfo.userName),1),createBaseVNode("p",null,toDisplayString(k.course.teacherInfo.education),1)])])):createCommentVNode("",!0)]),_:1},8,["thumb","title","desc"])):createCommentVNode("",!0),E[8]||(E[8]=createBaseVNode("div",{id:"player-con"},null,-1)),createBaseVNode("h3",_hoisted_5,toDisplayString(((l=k.lessonChapter)==null?void 0:l.title)||""),1),k.course?(openBlock(),createBlock(v,{key:1,modelValue:k.activeTab,"onUpdate:modelValue":E[0]||(E[0]=y=>k.activeTab=y),class:"pb-12",sticky:""},{default:withCtx(()=>[createVNode(a,{title:""},{default:withCtx(()=>[createVNode(o,{course:k.course},null,8,["course"])]),_:1}),createVNode(a,{title:""},{default:withCtx(()=>[createVNode(n,{course:k.course},null,8,["course"])]),_:1}),createVNode(a,{title:""},{default:withCtx(()=>[createVNode(u,{course:k.course},null,8,["course"])]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0),createVNode(T,{show:k.showPopup,"onUpdate:show":E[2]||(E[2]=y=>k.showPopup=y),position:"bottom",style:{"background-color":"var(--van-gray-1)"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,[E[6]||(E[6]=createBaseVNode("span",{class:"mr-4"},"",-1)),createVNode(c,{modelValue:k.rating,"onUpdate:modelValue":E[1]||(E[1]=y=>k.rating=y)},{default:withCtx(()=>[createVNode(h,{class:"mb-2",name:""},{default:withCtx(()=>E[3]||(E[3]=[createTextVNode("")])),_:1}),createVNode(h,{class:"mb-2",name:""},{default:withCtx(()=>E[4]||(E[4]=[createTextVNode("")])),_:1}),createVNode(h,{class:"mb-2",name:""},{default:withCtx(()=>E[5]||(E[5]=[createTextVNode("")])),_:1})]),_:1},8,["modelValue"])]),createVNode(_),createBaseVNode("div",_hoisted_8,[createVNode(m,{type:"primary",onClick:k.onConfirm},{default:withCtx(()=>E[7]||(E[7]=[createTextVNode("")])),_:1},8,["onClick"])])])]),_:1},8,["show"])])}const index=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-570e6b1c"]]);export{index as default};

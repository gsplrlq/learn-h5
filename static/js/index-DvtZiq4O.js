import{j as H,d as E,H as Z,I as M,b as a,J as ee,K as $,l as Q,M as te,N as j,O as ae,r as L,P as ne,k as O,Q as se,R as le,S as oe,U as A,m as re,y as F,V as K,W as ce,X as Y,Y as ie,Z as ue,G as de,E as ve,$ as _e,a0 as pe,a1 as fe,o as v,c as R,w as r,a as I,t as S,u as s,g as P,f as me,F as U,q as z,e as T,h as N,a2 as he,a3 as ge,D as xe,z as ye,A as be,_ as ke}from"./index-BUpLjwP5.js";import{_ as Ce}from"./index-rmeaOh31.js";import{Q as Te,N as Le,R as Se}from"./review-By5IHGDZ.js";import{A as Ve,a as Ie}from"./index-BymDKWPh.js";import"./index-B1c5TGgl.js";import"./index-Di3YD5uj.js";const[q,Ne]=H("collapse"),G=Symbol(q),we={border:$,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Re=E({name:q,props:we,emits:["change","update:modelValue"],setup(c,{emit:m,slots:i}){const{linkChildren:e,children:h}=Z(G),u=t=>{m("change",t),m("update:modelValue",t)},p=(t,l)=>{const{accordion:o,modelValue:_}=c;u(o?t===_?"":t:l?_.concat(t):_.filter(k=>k!==t))},d=(t={})=>{if(c.accordion)return;typeof t=="boolean"&&(t={expanded:t});const{expanded:l,skipDisabled:o}=t,k=h.filter(f=>f.disabled&&o?f.expanded.value:l??!f.expanded.value).map(f=>f.itemName.value);u(k)},g=t=>{const{accordion:l,modelValue:o}=c;return l?o===t:o.includes(t)};return M({toggleAll:d}),e({toggle:p,isExpanded:g}),()=>{var t;return a("div",{class:[Ne(),{[ee]:c.border}]},[(t=i.default)==null?void 0:t.call(i)])}}});const Be=Q(Re),[Pe,B]=H("collapse-item"),$e=["icon","title","value","label","right-icon"],Ee=te({},j,{name:ae,isLink:$,disabled:Boolean,readonly:Boolean,lazyRender:$});var De=E({name:Pe,props:Ee,setup(c,{slots:m}){const i=L(),e=L(),{parent:h,index:u}=ne(G);if(!h)return;const p=O(()=>{var n;return(n=c.name)!=null?n:u.value}),d=O(()=>h.isExpanded(p.value)),g=L(d.value),t=se(()=>g.value||!c.lazyRender),l=()=>{d.value?i.value&&(i.value.style.height=""):g.value=!1};le(d,(n,x)=>{if(x===null)return;n&&(g.value=!0),(n?Y:ie)(()=>{if(!e.value||!i.value)return;const{offsetHeight:y}=e.value;if(y){const w=`${y}px`;i.value.style.height=n?"0":w,oe(()=>{i.value&&(i.value.style.height=n?w:"0")})}else l()})});const o=(n=!d.value)=>{h.toggle(p.value,n)},_=()=>{!c.disabled&&!c.readonly&&o()},k=()=>{const{border:n,disabled:x,readonly:V}=c,y=A(c,Object.keys(j));return V&&(y.isLink=!1),(x||V)&&(y.clickable=!1),a(F,re({role:"button",class:B("title",{disabled:x,expanded:d.value,borderless:!n}),"aria-expanded":String(d.value),onClick:_},y),A(m,$e))},f=t(()=>{var n;return K(a("div",{ref:i,class:B("wrapper"),onTransitionend:l},[a("div",{ref:e,class:B("content")},[(n=m.default)==null?void 0:n.call(m)])]),[[ce,g.value]])});return M({toggle:o,expanded:d,itemName:p}),()=>a("div",{class:[B({border:u.value&&c.border})]},[k(),f()])}});const Oe=Q(De),Ae={class:"course"},Ue={class:"course-title"},ze={key:0,class:"teacher-info flex text-left mt-2"},He={class:"teacher-details"},Me={class:"m-2"},Qe=E({__name:"index",setup(c){const m=ue(),i=de();let e=L({id:1,title:"",courseDesc:"这是课程1的描述",imgUrl:"course-imgUrl-url",teacherInfo:{userName:"教师1",avatar:"teacher-avatar-url",education:""},durationStr:"2小时",studyCount:100,score:4.5,courseContent:"课程1的简介",courseType:1,bought:!1,videoId:1,hasStudy:!1,autoClass:0,classId:0});const h=L(0),u=L([]),p=L([{id:1,title:"第一章",chapterList:[{id:1,title:"第一节",videoId:1,durationStr:"10分钟",percent:50}]}]),d=()=>{N("支付功能暂未开放...")},g=()=>{if(e.value.autoClass===0&&!e.value.classId)return N("请联系管理员加入班级");if(!e.value.videoId)return N("暂无视频");i.push(`/video/${e.value.id}/${e.value.videoId}`)},t=l=>{if(e.value.autoClass===0&&!e.value.classId)return N("请联系管理员加入班级");if(!l.videoId)return N("暂无视频");i.push(`/video/${e.value.id}/${l.videoId}`)};return ve(async()=>{const l=m.params.id;e.value=await _e(l),p.value=await pe({courseId:l}),Y(()=>{u.value=p.value.map(o=>o.id)})}),(l,o)=>{const _=he,k=ge,f=xe,n=ye,x=Ce,V=F,y=Oe,w=Be,J=be,D=Ve,W=Ie,X=fe("richText");return v(),R("div",Ae,[a(f,{thumb:s(e).imgUrl,title:s(e).title,desc:s(e).courseDesc,class:"course-info"},{title:r(()=>[I("div",Ue,S(s(e).title),1)]),tags:r(()=>[a(_,{plain:"",class:"mr-2"},{default:r(()=>[P("时长: "+S(s(e).durationStr),1)]),_:1}),a(_,{plain:"",class:"mr-2"},{default:r(()=>[P("人数: "+S(s(e).studyCount)+" 人",1)]),_:1}),a(_,{plain:""},{default:r(()=>[P("评分: "+S(s(e).score),1)]),_:1}),s(e).teacherInfo?(v(),R("div",ze,[a(k,{round:"",width:"40px",height:"40px",src:s(e).teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),I("div",He,[I("p",null,S(s(e).teacherInfo.userName),1),I("p",null,S(s(e).teacherInfo.education),1)])])):me("",!0)]),_:1},8,["thumb","title","desc"]),a(J,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=b=>h.value=b),class:"pb-12",sticky:""},{default:r(()=>[a(n,{title:"简介"},{default:r(()=>[K(I("div",Me,null,512),[[X,s(e).courseContent]])]),_:1}),a(n,{title:"章节"},{default:r(()=>[a(w,{ref:"collapse",modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=b=>u.value=b)},{default:r(()=>[(v(!0),R(U,null,z(p.value,b=>(v(),T(y,{key:b.id,title:b.title,name:b.id},{default:r(()=>[(v(!0),R(U,null,z(b.chapterList,C=>(v(),T(V,{key:C.id,title:C.title,label:`时长: ${C.durationStr}`,onClick:je=>t(C)},{"right-icon":r(()=>[C.percent>95?(v(),T(x,{key:0,icon:"mdi-check-circle",class:"text-lg text-green-500"})):C.percent>0&&C.percent<95?(v(),T(x,{key:1,icon:"mdi-progress-clock",class:"text-lg text-green-500"})):(v(),T(x,{key:2,icon:"mdi-circle-outline",class:"text-lg text-gray-500"}))]),_:2},1032,["title","label","onClick"]))),128))]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(n,{title:"问答"},{default:r(()=>[a(Te,{course:s(e)},null,8,["course"])]),_:1}),a(n,{title:"笔记"},{default:r(()=>[a(Le,{course:s(e)},null,8,["course"])]),_:1}),a(n,{title:"评价"},{default:r(()=>[a(Se,{course:s(e)},null,8,["course"])]),_:1})]),_:1},8,["modelValue"]),a(W,null,{default:r(()=>[s(e).courseType===2&&!s(e).bought?(v(),T(D,{key:0,type:"danger",text:"立即购买",onClick:d})):(v(),T(D,{key:1,type:"danger",text:s(e).hasStudy?"继续学习":"开始学习",onClick:g},null,8,["text"]))]),_:1})])}}}),We=ke(Qe,[["__scopeId","data-v-31884b1a"]]);export{We as default};

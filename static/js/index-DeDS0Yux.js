import{j as H,d as D,H as te,I as M,b as a,J as ae,K as $,l as Q,M as ne,N as j,O as se,r as S,P as le,k as O,Q as oe,R as ce,S as re,U as A,m as ie,y as q,V as K,W as de,X as Y,Y as ue,Z as pe,G as ve,E as _e,$ as fe,a0 as me,a1 as he,o as d,c as R,w as o,a as I,t as V,u as n,g as P,f as U,F as z,q as F,e as C,h as N,a2 as ge,a3 as xe,D as ye,z as ke,A as be,_ as Ce}from"./index-u9yq3W31.js";import{_ as Te}from"./index-BRuHh9Wv.js";import{Q as Le,N as Se,R as Ve}from"./review-DnnJCSaj.js";import{A as Ie,a as Ne}from"./index-D7tETzdT.js";import"./index-D7kcihm1.js";import"./index-D316Edc5.js";const[G,we]=H("collapse"),J=Symbol(G),Re={border:$,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}};var Be=D({name:G,props:Re,emits:["change","update:modelValue"],setup(r,{emit:g,slots:c}){const{linkChildren:e,children:x}=te(J),u=t=>{g("change",t),g("update:modelValue",t)},f=(t,v)=>{const{accordion:s,modelValue:i}=r;u(s?t===i?"":t:v?i.concat(t):i.filter(m=>m!==t))},p=(t={})=>{if(r.accordion)return;typeof t=="boolean"&&(t={expanded:t});const{expanded:v,skipDisabled:s}=t,m=x.filter(h=>h.disabled&&s?h.expanded.value:v??!h.expanded.value).map(h=>h.itemName.value);u(m)},y=t=>{const{accordion:v,modelValue:s}=r;return v?s===t:s.includes(t)};return M({toggleAll:p}),e({toggle:f,isExpanded:y}),()=>{var t;return a("div",{class:[we(),{[ae]:r.border}]},[(t=c.default)==null?void 0:t.call(c)])}}});const Ee=Q(Be),[Pe,B]=H("collapse-item"),$e=["icon","title","value","label","right-icon"],De=ne({},j,{name:se,isLink:$,disabled:Boolean,readonly:Boolean,lazyRender:$});var Oe=D({name:Pe,props:De,setup(r,{slots:g}){const c=S(),e=S(),{parent:x,index:u}=le(J);if(!x)return;const f=O(()=>{var l;return(l=r.name)!=null?l:u.value}),p=O(()=>x.isExpanded(f.value)),y=S(p.value),t=oe(()=>y.value||!r.lazyRender),v=()=>{p.value?c.value&&(c.value.style.height=""):y.value=!1};ce(p,(l,_)=>{if(_===null)return;l&&(y.value=!0),(l?Y:ue)(()=>{if(!e.value||!c.value)return;const{offsetHeight:k}=e.value;if(k){const w=`${k}px`;c.value.style.height=l?"0":w,re(()=>{c.value&&(c.value.style.height=l?w:"0")})}else v()})});const s=(l=!p.value)=>{x.toggle(f.value,l)},i=()=>{!r.disabled&&!r.readonly&&s()},m=()=>{const{border:l,disabled:_,readonly:T}=r,k=A(r,Object.keys(j));return T&&(k.isLink=!1),(_||T)&&(k.clickable=!1),a(q,ie({role:"button",class:B("title",{disabled:_,expanded:p.value,borderless:!l}),"aria-expanded":String(p.value),onClick:i},k),A(g,$e))},h=t(()=>{var l;return K(a("div",{ref:c,class:B("wrapper"),onTransitionend:v},[a("div",{ref:e,class:B("content")},[(l=g.default)==null?void 0:l.call(g)])]),[[de,y.value]])});return M({toggle:s,expanded:p,itemName:f}),()=>a("div",{class:[B({border:u.value&&r.border})]},[m(),h()])}});const Ae=Q(Oe),Ue={class:"course"},ze={class:"course-title"},Fe={key:0,class:"teacher-info flex text-left mt-2"},He={class:"teacher-details"},Me={class:"m-2"},Qe=D({__name:"index",setup(r){const g=pe(),c=ve();let e=S({id:1,title:"",courseDesc:"这是课程1的描述",imgUrl:"course-imgUrl-url",teacherInfo:{userName:"教师1",avatar:"teacher-avatar-url",education:""},durationStr:"2小时",studyCount:100,score:4.5,courseContent:"课程1的简介",courseType:1,bought:!1,videoId:1,hasStudy:!1,autoClass:0,classId:0,allFinished:!1});const x=S(0),u=S([]),f=S([{id:1,title:"第一章",chapterList:[{id:1,title:"第一节",videoId:1,durationStr:"10分钟",percent:50}]}]),p=()=>{N("支付功能暂未开放...")},y=()=>{if(e.value.autoClass===0&&!e.value.classId)return N("请联系管理员加入班级");if(!e.value.videoId)return N("暂无视频");c.push(`/video/${e.value.id}/${e.value.videoId}`)},t=()=>{c.push({path:"/index",query:{type:"exam"}})},v=s=>{if(e.value.autoClass===0&&!e.value.classId)return N("请联系管理员加入班级");if(!s.videoId)return N("暂无视频");c.push(`/video/${e.value.id}/${s.videoId}`)};return _e(async()=>{const s=g.params.id;e.value=await fe(s),f.value=await me({courseId:s}),Y(()=>{u.value=f.value.map(i=>i.id)})}),(s,i)=>{const m=ge,h=xe,l=ye,_=ke,T=Te,k=q,w=Ae,W=Ee,X=be,E=Ie,Z=Ne,ee=he("richText");return d(),R("div",Ue,[a(l,{thumb:n(e).imgUrl,title:n(e).title,desc:n(e).courseDesc,class:"course-info"},{title:o(()=>[I("div",ze,V(n(e).title),1)]),tags:o(()=>[a(m,{plain:"",class:"mr-2"},{default:o(()=>[P("时长: "+V(n(e).durationStr),1)]),_:1}),a(m,{plain:"",class:"mr-2"},{default:o(()=>[P("人数: "+V(n(e).studyCount)+" 人",1)]),_:1}),a(m,{plain:""},{default:o(()=>[P("评分: "+V(n(e).score),1)]),_:1}),n(e).teacherInfo?(d(),R("div",Fe,[a(h,{round:"",width:"40px",height:"40px",src:n(e).teacherInfo.avatar,class:"teacher-avatar mr-2"},null,8,["src"]),I("div",He,[I("p",null,V(n(e).teacherInfo.userName),1),I("p",null,V(n(e).teacherInfo.education),1)])])):U("",!0)]),_:1},8,["thumb","title","desc"]),a(X,{modelValue:x.value,"onUpdate:modelValue":i[1]||(i[1]=b=>x.value=b),class:"pb-12",sticky:""},{default:o(()=>[a(_,{title:"简介"},{default:o(()=>[K(I("div",Me,null,512),[[ee,n(e).courseContent]])]),_:1}),a(_,{title:"章节"},{default:o(()=>[a(W,{ref:"collapse",modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=b=>u.value=b)},{default:o(()=>[(d(!0),R(z,null,F(f.value,b=>(d(),C(w,{key:b.id,title:b.title,name:b.id},{default:o(()=>[(d(!0),R(z,null,F(b.chapterList,L=>(d(),C(k,{key:L.id,title:L.title,label:`时长: ${L.durationStr}`,onClick:je=>v(L)},{"right-icon":o(()=>[L.percent>95?(d(),C(T,{key:0,icon:"mdi-check-circle",class:"text-lg text-green-500"})):L.percent>0&&L.percent<95?(d(),C(T,{key:1,icon:"mdi-progress-clock",class:"text-lg text-green-500"})):(d(),C(T,{key:2,icon:"mdi-circle-outline",class:"text-lg text-gray-500"}))]),_:2},1032,["title","label","onClick"]))),128))]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{title:"问答"},{default:o(()=>[a(Le,{course:n(e)},null,8,["course"])]),_:1}),a(_,{title:"笔记"},{default:o(()=>[a(Se,{course:n(e)},null,8,["course"])]),_:1}),a(_,{title:"评价"},{default:o(()=>[a(Ve,{course:n(e)},null,8,["course"])]),_:1})]),_:1},8,["modelValue"]),a(Z,null,{default:o(()=>[n(e).courseType===2&&!n(e).bought?(d(),C(E,{key:0,type:"danger",text:"立即购买",onClick:p})):(d(),C(E,{key:1,type:"danger",text:n(e).hasStudy?"继续学习":"开始学习",onClick:y},null,8,["text"])),n(e).allFinished?(d(),C(E,{key:2,type:"success",text:"考试预约",onClick:t})):U("",!0)]),_:1})])}}}),Xe=Ce(Qe,[["__scopeId","data-v-bdda752e"]]);export{Xe as default};

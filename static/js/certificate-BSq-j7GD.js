import{d as g,p as v,r as l,G as w,h,_ as b,e as p,o as c,w as i,b as m,c as C,F as k,q as y,y as $,B,g as E,L}from"./index-2WoK3mnG.js";import{C as N}from"./index-C8KzbB-k.js";import{b as z}from"./user-BX0D374L.js";const F=g({setup(){const t=v([]),o=l(1),d=l(999),s=l(!1),r=async()=>{if(!s.value){s.value=!0;try{const e=await z({page:{size:d.value,current:o.value}});t.push(...e.records),o.value++}catch(e){console.error("Failed to fetch certificates:",e)}finally{s.value=!1}}};w(()=>{r()});const u=()=>{window.innerHeight+window.scrollY>=document.documentElement.offsetHeight&&r()};return window.addEventListener("scroll",u),{certificates:t,loading:s,viewcertificate:e=>{if(/Mobi|Android/i.test(navigator.userAgent))window.open(e,"_blank");else{const n=document.createElement("a");n.href=e,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}h("查看证书, 请下载查看")}}}});function x(t,o,d,s,r,u){const f=B,e=$,n=N,_=L;return c(),p(_,{loading:t.loading,"onUpdate:loading":o[0]||(o[0]=a=>t.loading=a),finished:"","finished-text":"没有更多了"},{default:i(()=>[m(n,null,{default:i(()=>[(c(!0),C(k,null,y(t.certificates,a=>(c(),p(e,{key:a.id,title:a.certificateName,label:`课程: ${a.courseName} 获取日期: ${a.obtainDate}`},{"right-icon":i(()=>[m(f,{type:"primary",size:"small",onClick:A=>t.viewcertificate(a.certificatePdf)},{default:i(()=>[...o[1]||(o[1]=[E("查看证书",-1)])]),_:1},8,["onClick"])]),_:2},1032,["title","label"]))),128))]),_:1})]),_:1},8,["loading"])}const O=b(F,[["render",x]]);export{O as default};

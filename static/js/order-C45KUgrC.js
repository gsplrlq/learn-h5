import{a2 as v,_ as O,a7 as f,a8 as C,a9 as y,o as p,A as V,Q as r,b as k,S as d,aa as L,P as s,$ as b,a3 as h,T as S,W as m,R as x,V as B}from"./index-DIuw7GBx.js";function N(n){return v.request({url:"/client/orders/page",method:"post",data:n})}function P(n){return v.request({url:"/client/orders/cancel",method:"post",data:n})}const $={components:{"van-tab":f,"van-tabs":C,"van-card":y},setup(){const n=p(0),c=[{id:1,title:"全部",status:""},{id:2,title:"未支付",status:1},{id:3,title:"已完成",status:2},{id:4,title:"已关闭",status:3}],l=p([]),e=a=>{n.value=a.name,i(a.name)},i=a=>{N({page:{current:1,size:999},status:a}).then(o=>{l.value=o.records})};return V(()=>{i(c[0].status)}),{activeTab:n,tabList:c,orders:l,onTabClick:e,payOrder:a=>{L().push({name:"PaymentPage",params:{orderSn:a}})},cancelOrderClick:a=>{P(a).then(()=>{this.$toast.success("取消成功"),i(c[0].status)})}}}},q=["onClick"],w=["onClick"],D={key:0,class:"no-orders"};function I(n,c,l,e,i,T){const _=y,a=f,u=C;return s(),r("div",null,[k(u,{modelValue:e.activeTab,"onUpdate:modelValue":c[0]||(c[0]=o=>e.activeTab=o),sticky:"","offset-top":"50",onClickTab:e.onTabClick},{default:d(()=>[(s(!0),r(b,null,h(e.tabList,o=>(s(),S(a,{key:o.id,title:o.title,name:o.status},{default:d(()=>[(s(!0),r(b,null,h(e.orders,t=>(s(),r("div",{key:t.id,class:"order-card"},[k(_,{thumb:t.productImageUrl,"thumb-width":"160","thumb-height":"90",title:`订单编号： ${t.orderSn}`,desc:`${t.productName} | 日期: ${t.createTime}`,price:t.amount,status:t.status},{footer:d(()=>[t.status==1?(s(),r("button",{key:0,onClick:g=>e.payOrder(t.orderSn)}," 立即支付 ",8,q)):m("",!0),t.status==1?(s(),r("button",{key:1,onClick:g=>e.cancelOrderClick(t.orderSn)}," 取消订单 ",8,w)):m("",!0),x("span",null,B(t.status==2?"已完成":"已关闭"),1)]),_:2},1032,["thumb","title","desc","price","status"])]))),128)),e.orders.length===0?(s(),r("div",D,"暂无订单")):m("",!0)]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue","onClickTab"])])}const U=O($,[["render",I],["__scopeId","data-v-1e341d48"]]);export{U as default};

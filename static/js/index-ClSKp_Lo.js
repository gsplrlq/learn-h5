import{d as F,r as o,o as p,c as V,a as f,b as d,w as i,e as C,u as m,f as y,t as g,g as N,s as q,h as I,i as L,B as U,_ as R}from"./index-DrzNVT3W.js";import{C as T}from"./index-COXmdI7j.js";import{F as Y}from"./index-D87j1p5a.js";import{F as $}from"./index-_HZfYdqV.js";const z="/vue3-h5-template/static/ico/favicon-yZ9RYYti.ico",A={class:"container"},D={class:"m-6"},E=F({name:"Login",__name:"index",setup(G){const l=o(!1),s=o(!1),n=o(""),u=o("");let v=o(60),a=o(60),c=o(null);const k=async()=>{if(!c.value&&a.value===v.value){const r={option:l.value?1:2,phone:n.value,type:"client"};await q(r),I("发送成功"),c.value=setInterval(()=>{a.value--,a.value<=0&&(clearInterval(c.value),c.value=null,a.value=v.value)},1e3)}},w=r=>{const e={...r};l.value||(e.type=s.value?"smsCodeLogin":"pwdLogin"),L().login(e,l.value),console.log("submit",r)},b=()=>{n.value="",u.value=""};return(r,e)=>{const _=Y,x=U,B=T,S=$;return p(),V("div",A,[e[5]||(e[5]=f("img",{class:"logo",src:z,alt:"",srcset:""},null,-1)),d(S,{onSubmit:w},{default:i(()=>[d(B,{inset:""},{default:i(()=>[d(_,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),s.value?(p(),C(_,{key:1,modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),clearable:"",name:"code",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:i(()=>[d(x,{size:"small",disabled:!n.value||m(a)!==m(v),onClick:k},{default:i(()=>[y(g(m(a)===m(v)?"获取验证码":m(a)+"s 重新发送"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])):(p(),C(_,{key:0,modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),type:"password",name:"code",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]))]),_:1}),f("div",D,[d(x,{round:"",block:"",type:"danger","native-type":"submit"},{default:i(()=>[y(g(l.value?"注册":"登录"),1)]),_:1}),f("div",{class:"text-center text-xl text-current p-6",onClick:e[3]||(e[3]=t=>{l.value=!1,s.value=!s.value,b()})},g(s.value?"账号密码登录":"手机短信登录"),1),l.value?N("",!0):(p(),V("div",{key:0,class:"text-center text-large text-red-500 p-6",onClick:e[4]||(e[4]=t=>{l.value=!0,s.value=!0,b()})}," 快速注册 "))])]),_:1})])}}}),J=R(E,[["__scopeId","data-v-18a4e412"]]);export{J as default};

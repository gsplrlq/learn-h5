import{d as v,p as w,r as l,E as g,h,_ as C,e as p,w as i,L as b,o as c,b as m,c as B,q as E,F as k,f as y,B as $,y as F}from"./index-DrzNVT3W.js";import{C as A}from"./index-COXmdI7j.js";import{b as L}from"./user-DWBsYO6F.js";const N=v({setup(){const t=w([]),o=l(1),u=l(999),s=l(!1),r=async()=>{if(!s.value){s.value=!0;try{const e=await L({page:{size:u.value,current:o.value}});t.push(...e.records),o.value++}catch(e){console.error("Failed to fetch certificates:",e)}finally{s.value=!1}}};g(()=>{r()});const d=()=>{window.innerHeight+window.scrollY>=document.documentElement.offsetHeight&&r()};return window.addEventListener("scroll",d),{certificates:t,loading:s,viewcertificate:e=>{if(/Mobi|Android/i.test(navigator.userAgent))window.open(e,"_blank");else{const n=document.createElement("a");n.href=e,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}h("查看证书, 请下载查看")}}}});function z(t,o,u,s,r,d){const f=$,e=F,n=A,_=b;return c(),p(_,{loading:t.loading,"onUpdate:loading":o[0]||(o[0]=a=>t.loading=a),finished:"","finished-text":"没有更多了"},{default:i(()=>[m(n,null,{default:i(()=>[(c(!0),B(k,null,E(t.certificates,a=>(c(),p(e,{key:a.id,title:a.certificateName,label:`课程: ${a.courseName} 获取日期: ${a.obtainDate}`},{"right-icon":i(()=>[m(f,{type:"primary",size:"small",onClick:x=>t.viewcertificate(a.certificatePdf)},{default:i(()=>o[1]||(o[1]=[y("查看证书")])),_:2},1032,["onClick"])]),_:2},1032,["title","label"]))),128))]),_:1})]),_:1},8,["loading"])}const O=C(N,[["render",z]]);export{O as default};

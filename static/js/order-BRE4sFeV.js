import{z as v,_ as O,I as f,J as C,K as g,r as p,L,e as r,b as k,g as d,M as V,o as s,x as b,D as h,h as x,l as m,f as B,k as N}from"./index-DqmQnYxG.js";function S(n){return v.request({url:"/client/orders/page",method:"post",data:n})}function D(n){return v.request({url:"/client/orders/cancel",method:"post",data:n})}const I={components:{"van-tab":f,"van-tabs":C,"van-card":g},setup(){const n=p(0),c=[{id:1,title:"全部",status:""},{id:2,title:"未支付",status:1},{id:3,title:"已完成",status:2},{id:4,title:"已关闭",status:3}],l=p([]),e=a=>{n.value=a.name,i(a.name)},i=a=>{S({page:{current:1,size:999},status:a}).then(o=>{l.value=o.records})};return L(()=>{i(c[0].status)}),{activeTab:n,tabList:c,orders:l,onTabClick:e,payOrder:a=>{V().push({name:"PaymentPage",params:{orderSn:a}})},cancelOrderClick:a=>{D(a).then(()=>{this.$toast.success("取消成功"),i(c[0].status)})}}}},q=["onClick"],w=["onClick"],z={key:0,class:"no-orders"};function M(n,c,l,e,i,y){const _=g,a=f,u=C;return s(),r("div",null,[k(u,{modelValue:e.activeTab,"onUpdate:modelValue":c[0]||(c[0]=o=>e.activeTab=o),sticky:"","offset-top":"50",onClickTab:e.onTabClick},{default:d(()=>[(s(!0),r(b,null,h(e.tabList,o=>(s(),x(a,{key:o.id,title:o.title,name:o.status},{default:d(()=>[(s(!0),r(b,null,h(e.orders,t=>(s(),r("div",{key:t.id,class:"order-card"},[k(_,{thumb:t.productImageUrl,"thumb-width":"160","thumb-height":"90",title:`订单编号： ${t.orderSn}`,desc:`${t.productName} | 日期: ${t.createTime}`,price:t.amount,status:t.status},{footer:d(()=>[t.status==1?(s(),r("button",{key:0,onClick:T=>e.payOrder(t.orderSn)}," 立即支付 ",8,q)):m("",!0),t.status==1?(s(),r("button",{key:1,onClick:T=>e.cancelOrderClick(t.orderSn)}," 取消订单 ",8,w)):m("",!0),B("span",null,N(t.status==2?"已完成":"已关闭"),1)]),_:2},1032,["thumb","title","desc","price","status"])]))),128)),e.orders.length===0?(s(),r("div",z,"暂无订单")):m("",!0)]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue","onClickTab"])])}const U=O(I,[["render",M],["__scopeId","data-v-1e341d48"]]);export{U as default};
